/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
    return obj[key];
  }
  try {
    // IE 8 has a broken Object.defineProperty that only works on DOM objects.
    define({}, "");
  } catch (err) {
    define = function(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunction.displayName = define(
    GeneratorFunctionPrototype,
    toStringTagSymbol,
    "GeneratorFunction"
  );

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      define(genFun, toStringTagSymbol, "GeneratorFunction");
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return PromiseImpl.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return PromiseImpl.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    if (PromiseImpl === void 0) PromiseImpl = Promise;

    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList),
      PromiseImpl
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  define(Gp, toStringTagSymbol, "Generator");

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
  typeof module === "object" ? module.exports : {}
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}
"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e418){throw _e418;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]();},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e419){didErr=true;err=_e419;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports;}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r});},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0});},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e){n.d(r,i,function(t){return e[t];}.bind(null,i));}return r;},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"];}:function(){return e;};return n.d(t,"a",t),t;},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t);},n.p="",n(n.s=207);}([,function(e,t,n){var r,i;!function(o,a){"use strict";void 0===(i="function"==typeof(r=function r(){var e=function e(){},t="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e);}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments]);};}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace();}function o(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&t?i:void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e);}function a(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r);}this.log=this.debug;}function s(e,t,n){return function(){"undefined"!=typeof console&&(a.call(this,t,n),this[e].apply(this,arguments));};}function u(e,t,n){return o(e)||s.apply(this,arguments);}function c(e,t,r){var i,o=this,s="loglevel";function c(){var e;if("undefined"!=typeof window&&s){try{e=window.localStorage[s];}catch(e){}if(void 0===e)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(s)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1]);}catch(e){}return void 0===o.levels[e]&&(e=void 0),e;}}"string"==typeof e?s+=":"+e:"symbol"==_typeof(e)&&(s=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||u,o.getLevel=function(){return i;},o.setLevel=function(t,r){if("string"==typeof t&&void 0!==o.levels[t.toUpperCase()]&&(t=o.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==r&&function(e){var t=(n[e]||"silent").toUpperCase();if("undefined"!=typeof window&&s){try{return void(window.localStorage[s]=t);}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"="+t+";";}catch(e){}}}(t),a.call(o,t,e),"undefined"==typeof console&&t<o.levels.SILENT)return"No console available for logging";},o.setDefaultLevel=function(e){c()||o.setLevel(e,!1);},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e);},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e);};var l=c();null==l&&(l=null==t?"WARN":t),o.setLevel(l,!1);}var l=new c(),p={};l.getLogger=function(e){if("symbol"!=_typeof(e)&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new c(e,l.getLevel(),l.methodFactory)),t;};var d="undefined"!=typeof window?window.log:void 0;return l.noConflict=function(){return"undefined"!=typeof window&&window.log===l&&(window.log=d),l;},l.getLoggers=function(){return p;},l["default"]=l,l;})?r.call(t,n,t,e):r)||(e.exports=i);}();},function(e,t,n){"use strict";var r=SyntaxError,i=Function,o=TypeError,a=function a(e){try{return Function('"use strict"; return ('+e+").constructor;")();}catch(e){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"");}catch(e){s=null;}var u=function u(){throw new o();},c=s?function(){try{return arguments.callee,u;}catch(e){try{return s(arguments,"callee").get;}catch(e){return u;}}}():u,l=n(10)(),p=Object.getPrototypeOf||function(e){return e.__proto__;},d=a("async function* () {}"),h=d?d.prototype:void 0,f=h?h.prototype:void 0,m="undefined"==typeof Uint8Array?void 0:p(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":l?p([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":a("async function () {}"),"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":f?p(f):void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":a("function* () {}"),"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?p(p([][Symbol.iterator]())):void 0,"%JSON%":"object"==(typeof JSON==="undefined"?"undefined":_typeof(JSON))?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?p(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?p(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?p(""[Symbol.iterator]()):void 0,"%Symbol%":l?Symbol:void 0,"%SyntaxError%":r,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=n(9),x=n(7),b=v.call(Function.call,Array.prototype.concat),w=v.call(Function.apply,Array.prototype.splice),S=v.call(Function.call,String.prototype.replace),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,_=/\\(\\)?/g,E=function E(e){var t=[];return S(e,M,function(e,n,r,i){t[t.length]=r?S(i,_,"$1"):n||e;}),t;},A=function A(e,t){var n,i=e;if(x(g,i)&&(i="%"+(n=g[i])[0]+"%"),x(y,i)){var a=y[i];if(void 0===a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a};}throw new r("intrinsic "+e+" does not exist!");};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');var n=E(e),r=n.length>0?n[0]:"",i=A("%"+r+"%",t),a=i.name,u=i.value,c=!1,l=i.alias;l&&(r=l[0],w(n,b([0,1],l)));for(var p=1,d=!0;p<n.length;p+=1){var h=n[p];if("constructor"!==h&&d||(c=!0),x(y,a="%"+(r+="."+h)+"%"))u=y[a];else if(null!=u){if(s&&p+1>=n.length){var f=s(u,h);if(d=!!f,!t&&!(h in u))throw new o("base intrinsic for "+e+" exists, but the property is not available.");u=d&&"get"in f&&!("originalValue"in f.get)?f.get:u[h];}else d=x(u,h),u=u[h];d&&!c&&(y[a]=u);}}return u;};},function(e,t,n){"use strict";var r=SyntaxError,i=Function,o=TypeError,a=function a(e){try{return Function('"use strict"; return ('+e+").constructor;")();}catch(e){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"");}catch(e){s=null;}var u=function u(){throw new o();},c=s?function(){try{return arguments.callee,u;}catch(e){try{return s(arguments,"callee").get;}catch(e){return u;}}}():u,l=n(10)(),p=Object.getPrototypeOf||function(e){return e.__proto__;},d=a("async function* () {}"),h=d?d.prototype:void 0,f=h?h.prototype:void 0,m="undefined"==typeof Uint8Array?void 0:p(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":l?p([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":a("async function () {}"),"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":f?p(f):void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":a("function* () {}"),"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?p(p([][Symbol.iterator]())):void 0,"%JSON%":"object"==(typeof JSON==="undefined"?"undefined":_typeof(JSON))?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?p(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?p(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?p(""[Symbol.iterator]()):void 0,"%Symbol%":l?Symbol:void 0,"%SyntaxError%":r,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=n(9),x=n(7),b=v.call(Function.call,Array.prototype.concat),w=v.call(Function.apply,Array.prototype.splice),S=v.call(Function.call,String.prototype.replace),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,_=/\\(\\)?/g,E=function E(e){var t=[];return S(e,M,function(e,n,r,i){t[t.length]=r?S(i,_,"$1"):n||e;}),t;},A=function A(e,t){var n,i=e;if(x(g,i)&&(i="%"+(n=g[i])[0]+"%"),x(y,i)){var a=y[i];if(void 0===a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a};}throw new r("intrinsic "+e+" does not exist!");};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');var n=E(e),r=n.length>0?n[0]:"",i=A("%"+r+"%",t),a=i.name,u=i.value,c=!1,l=i.alias;l&&(r=l[0],w(n,b([0,1],l)));for(var p=1,d=!0;p<n.length;p+=1){var h=n[p];if("constructor"!==h&&d||(c=!0),x(y,a="%"+(r+="."+h)+"%"))u=y[a];else if(null!=u){if(s&&p+1>=n.length){var f=s(u,h);if(d=!!f,!t&&!(h in u))throw new o("base intrinsic for "+e+" exists, but the property is not available.");u=d&&"get"in f&&!("originalValue"in f.get)?f.get:u[h];}else d=x(u,h),u=u[h];d&&!c&&(y[a]=u);}}return u;};},function(e,t,n){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'");}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n||e);},u,u.exports,e,t,n,r);}return n[a].exports;}for(var o=!1,a=0;a<r.length;a++){i(r[a]);}return i;}({1:[function(e,t,n){t.exports={name:"cannon",version:"0.6.2",description:"A lightweight 3D physics engine written in JavaScript.",homepage:"https://github.com/schteppe/cannon.js",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["cannon.js","cannon","physics","engine","3d"],main:"./build/cannon.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/cannon.js.git"},bugs:{url:"https://github.com/schteppe/cannon.js/issues"},licenses:[{type:"MIT"}],devDependencies:{jshint:"latest","uglify-js":"latest",nodeunit:"^0.9.0",grunt:"~0.4.0","grunt-contrib-jshint":"~0.1.1","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-concat":"~0.1.3","grunt-contrib-uglify":"^0.5.1","grunt-browserify":"^2.1.4","grunt-contrib-yuidoc":"^0.5.2",browserify:"*"},dependencies:{}};},{}],2:[function(e,t,n){t.exports={version:e("../package.json").version,AABB:e("./collision/AABB"),ArrayCollisionMatrix:e("./collision/ArrayCollisionMatrix"),Body:e("./objects/Body"),Box:e("./shapes/Box"),Broadphase:e("./collision/Broadphase"),Constraint:e("./constraints/Constraint"),ContactEquation:e("./equations/ContactEquation"),Narrowphase:e("./world/Narrowphase"),ConeTwistConstraint:e("./constraints/ConeTwistConstraint"),ContactMaterial:e("./material/ContactMaterial"),ConvexPolyhedron:e("./shapes/ConvexPolyhedron"),Cylinder:e("./shapes/Cylinder"),DistanceConstraint:e("./constraints/DistanceConstraint"),Equation:e("./equations/Equation"),EventTarget:e("./utils/EventTarget"),FrictionEquation:e("./equations/FrictionEquation"),GSSolver:e("./solver/GSSolver"),GridBroadphase:e("./collision/GridBroadphase"),Heightfield:e("./shapes/Heightfield"),HingeConstraint:e("./constraints/HingeConstraint"),LockConstraint:e("./constraints/LockConstraint"),Mat3:e("./math/Mat3"),Material:e("./material/Material"),NaiveBroadphase:e("./collision/NaiveBroadphase"),ObjectCollisionMatrix:e("./collision/ObjectCollisionMatrix"),Pool:e("./utils/Pool"),Particle:e("./shapes/Particle"),Plane:e("./shapes/Plane"),PointToPointConstraint:e("./constraints/PointToPointConstraint"),Quaternion:e("./math/Quaternion"),Ray:e("./collision/Ray"),RaycastVehicle:e("./objects/RaycastVehicle"),RaycastResult:e("./collision/RaycastResult"),RigidVehicle:e("./objects/RigidVehicle"),RotationalEquation:e("./equations/RotationalEquation"),RotationalMotorEquation:e("./equations/RotationalMotorEquation"),SAPBroadphase:e("./collision/SAPBroadphase"),SPHSystem:e("./objects/SPHSystem"),Shape:e("./shapes/Shape"),Solver:e("./solver/Solver"),Sphere:e("./shapes/Sphere"),SplitSolver:e("./solver/SplitSolver"),Spring:e("./objects/Spring"),Trimesh:e("./shapes/Trimesh"),Vec3:e("./math/Vec3"),Vec3Pool:e("./utils/Vec3Pool"),World:e("./world/World")};},{"../package.json":1,"./collision/AABB":3,"./collision/ArrayCollisionMatrix":4,"./collision/Broadphase":5,"./collision/GridBroadphase":6,"./collision/NaiveBroadphase":7,"./collision/ObjectCollisionMatrix":8,"./collision/Ray":9,"./collision/RaycastResult":10,"./collision/SAPBroadphase":11,"./constraints/ConeTwistConstraint":12,"./constraints/Constraint":13,"./constraints/DistanceConstraint":14,"./constraints/HingeConstraint":15,"./constraints/LockConstraint":16,"./constraints/PointToPointConstraint":17,"./equations/ContactEquation":19,"./equations/Equation":20,"./equations/FrictionEquation":21,"./equations/RotationalEquation":22,"./equations/RotationalMotorEquation":23,"./material/ContactMaterial":24,"./material/Material":25,"./math/Mat3":27,"./math/Quaternion":28,"./math/Vec3":30,"./objects/Body":31,"./objects/RaycastVehicle":32,"./objects/RigidVehicle":33,"./objects/SPHSystem":34,"./objects/Spring":35,"./shapes/Box":37,"./shapes/ConvexPolyhedron":38,"./shapes/Cylinder":39,"./shapes/Heightfield":40,"./shapes/Particle":41,"./shapes/Plane":42,"./shapes/Shape":43,"./shapes/Sphere":44,"./shapes/Trimesh":45,"./solver/GSSolver":46,"./solver/Solver":47,"./solver/SplitSolver":48,"./utils/EventTarget":49,"./utils/Pool":51,"./utils/Vec3Pool":54,"./world/Narrowphase":55,"./world/World":56}],3:[function(e,t,n){var r=e("../math/Vec3");function i(e){e=e||{},this.lowerBound=new r(),e.lowerBound&&this.lowerBound.copy(e.lowerBound),this.upperBound=new r(),e.upperBound&&this.upperBound.copy(e.upperBound);}e("../utils/Utils"),t.exports=i;var o=new r();i.prototype.setFromPoints=function(e,t,n,r){var i=this.lowerBound,a=this.upperBound,s=n;i.copy(e[0]),s&&s.vmult(i,i),a.copy(i);for(var u=1;u<e.length;u++){var c=e[u];s&&(s.vmult(c,o),c=o),c.x>a.x&&(a.x=c.x),c.x<i.x&&(i.x=c.x),c.y>a.y&&(a.y=c.y),c.y<i.y&&(i.y=c.y),c.z>a.z&&(a.z=c.z),c.z<i.z&&(i.z=c.z);}return t&&(t.vadd(i,i),t.vadd(a,a)),r&&(i.x-=r,i.y-=r,i.z-=r,a.x+=r,a.y+=r,a.z+=r),this;},i.prototype.copy=function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this;},i.prototype.clone=function(){return new i().copy(this);},i.prototype.extend=function(e){var t=e.lowerBound.x;this.lowerBound.x>t&&(this.lowerBound.x=t);var n=e.upperBound.x;this.upperBound.x<n&&(this.upperBound.x=n),t=e.lowerBound.y,this.lowerBound.y>t&&(this.lowerBound.y=t),n=e.upperBound.y,this.upperBound.y<n&&(this.upperBound.y=n),t=e.lowerBound.z,this.lowerBound.z>t&&(this.lowerBound.z=t),n=e.upperBound.z,this.upperBound.z<n&&(this.upperBound.z=n);},i.prototype.overlaps=function(e){var t=this.lowerBound,n=this.upperBound,r=e.lowerBound,i=e.upperBound;return(r.x<=n.x&&n.x<=i.x||t.x<=i.x&&i.x<=n.x)&&(r.y<=n.y&&n.y<=i.y||t.y<=i.y&&i.y<=n.y)&&(r.z<=n.z&&n.z<=i.z||t.z<=i.z&&i.z<=n.z);},i.prototype.contains=function(e){var t=this.lowerBound,n=this.upperBound,r=e.lowerBound,i=e.upperBound;return t.x<=r.x&&n.x>=i.x&&t.y<=r.y&&n.y>=i.y&&t.z<=r.z&&n.z>=i.z;},i.prototype.getCorners=function(e,t,n,r,i,o,a,s){var u=this.lowerBound,c=this.upperBound;e.copy(u),t.set(c.x,u.y,u.z),n.set(c.x,c.y,u.z),r.set(u.x,c.y,c.z),i.set(c.x,u.y,u.z),o.set(u.x,c.y,u.z),a.set(u.x,u.y,c.z),s.copy(c);};var a=[new r(),new r(),new r(),new r(),new r(),new r(),new r(),new r()];i.prototype.toLocalFrame=function(e,t){var n=a,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],p=n[7];this.getCorners(r,i,o,s,u,c,l,p);for(var d=0;8!==d;d++){var h=n[d];e.pointToLocal(h,h);}return t.setFromPoints(n);},i.prototype.toWorldFrame=function(e,t){var n=a,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],p=n[7];this.getCorners(r,i,o,s,u,c,l,p);for(var d=0;8!==d;d++){var h=n[d];e.pointToWorld(h,h);}return t.setFromPoints(n);};},{"../math/Vec3":30,"../utils/Utils":53}],4:[function(e,t,n){function r(){this.matrix=[];}t.exports=r,r.prototype.get=function(e,t){if(e=e.index,(t=t.index)>e){var n=t;t=e,e=n;}return this.matrix[(e*(e+1)>>1)+t-1];},r.prototype.set=function(e,t,n){if(e=e.index,(t=t.index)>e){var r=t;t=e,e=r;}this.matrix[(e*(e+1)>>1)+t-1]=n?1:0;},r.prototype.reset=function(){for(var e=0,t=this.matrix.length;e!==t;e++){this.matrix[e]=0;}},r.prototype.setNumObjects=function(e){this.matrix.length=e*(e-1)>>1;};},{}],5:[function(e,t,n){var r=e("../objects/Body"),i=e("../math/Vec3"),o=e("../math/Quaternion");function a(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0;}e("../shapes/Shape"),e("../shapes/Plane"),t.exports=a,a.prototype.collisionPairs=function(e,t,n){throw new Error("collisionPairs not implemented for this BroadPhase class!");};var s=r.STATIC|r.KINEMATIC;a.prototype.needBroadphaseCollision=function(e,t){return 0!=(e.collisionFilterGroup&t.collisionFilterMask)&&0!=(t.collisionFilterGroup&e.collisionFilterMask)&&(0==(e.type&s)&&e.sleepState!==r.SLEEPING||0==(t.type&s)&&t.sleepState!==r.SLEEPING);},a.prototype.intersectionTest=function(e,t,n,r){this.useBoundingBoxes?this.doBoundingBoxBroadphase(e,t,n,r):this.doBoundingSphereBroadphase(e,t,n,r);};var u=new i();new i(),new o(),new i(),a.prototype.doBoundingSphereBroadphase=function(e,t,n,r){var i=u;t.position.vsub(e.position,i);var o=Math.pow(e.boundingRadius+t.boundingRadius,2);i.norm2()<o&&(n.push(e),r.push(t));},a.prototype.doBoundingBoxBroadphase=function(e,t,n,r){e.aabbNeedsUpdate&&e.computeAABB(),t.aabbNeedsUpdate&&t.computeAABB(),e.aabb.overlaps(t.aabb)&&(n.push(e),r.push(t));};var c={keys:[]},l=[],p=[];a.prototype.makePairsUnique=function(e,t){for(var n=c,r=l,i=p,o=e.length,a=0;a!==o;a++){r[a]=e[a],i[a]=t[a];}for(e.length=0,t.length=0,a=0;a!==o;a++){var s=r[a].id,u=i[a].id;n[d=s<u?s+","+u:u+","+s]=a,n.keys.push(d);}for(a=0;a!==n.keys.length;a++){var d=n.keys.pop(),h=n[d];e.push(r[h]),t.push(i[h]),delete n[d];}},a.prototype.setWorld=function(e){};var d=new i();a.boundingSphereCheck=function(e,t){var n=d;return e.position.vsub(t.position,n),Math.pow(e.shape.boundingSphereRadius+t.shape.boundingSphereRadius,2)>n.norm2();},a.prototype.aabbQuery=function(e,t,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[];};},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Plane":42,"../shapes/Shape":43}],6:[function(e,t,n){t.exports=a;var r=e("./Broadphase"),i=e("../math/Vec3"),o=e("../shapes/Shape");function a(e,t,n,o,a){r.apply(this),this.nx=n||10,this.ny=o||10,this.nz=a||10,this.aabbMin=e||new i(100,100,100),this.aabbMax=t||new i(-100,-100,-100);var s=this.nx*this.ny*this.nz;if(s<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=s,this.binLengths.length=s;for(var u=0;u<s;u++){this.bins[u]=[],this.binLengths[u]=0;}}a.prototype=new r(),a.prototype.constructor=a;var s=new i();new i(),a.prototype.collisionPairs=function(e,t,n){for(var r=e.numObjects(),i=e.bodies,a=this.aabbMax,u=this.aabbMin,c=this.nx,l=this.ny,p=this.nz,d=l*p,h=p,f=a.x,m=a.y,y=a.z,g=u.x,v=u.y,x=u.z,b=c/(f-g),w=l/(m-v),S=p/(y-x),M=(f-g)/c,_=(m-v)/l,E=(y-x)/p,A=.5*Math.sqrt(M*M+_*_+E*E),T=o.types,N=T.SPHERE,D=T.PLANE,C=(T.BOX,T.COMPOUND,T.CONVEXPOLYHEDRON,this.bins),R=this.binLengths,P=this.bins.length,O=0;O!==P;O++){R[O]=0;}var L=Math.ceil;function I(e,t,n,r,i,o,a){var s=(e-g)*b|0,u=(t-v)*w|0,f=(n-x)*S|0,m=L((r-g)*b),y=L((i-v)*w),M=L((o-x)*S);s<0?s=0:s>=c&&(s=c-1),u<0?u=0:u>=l&&(u=l-1),f<0?f=0:f>=p&&(f=p-1),m<0?m=0:m>=c&&(m=c-1),y<0?y=0:y>=l&&(y=l-1),M<0?M=0:M>=p&&(M=p-1),u*=h,f*=1,m*=d,y*=h,M*=1;for(var _=s*=d;_<=m;_+=d){for(var E=u;E<=y;E+=h){for(var A=f;A<=M;A+=1){var T=_+E+A;C[T][R[T]++]=a;}}}}for(u=Math.min,a=Math.max,O=0;O!==r;O++){var B=(te=i[O]).shape;switch(B.type){case N:var F=te.position.x,z=te.position.y,k=te.position.z,U=B.radius;I(F-U,z-U,k-U,F+U,z+U,k+U,te);break;case D:B.worldNormalNeedsUpdate&&B.computeWorldNormal(te.quaternion);var j=B.worldNormal,H=g+.5*M-te.position.x,q=v+.5*_-te.position.y,G=x+.5*E-te.position.z,V=s;V.set(H,q,G);for(var W=0,X=0;W!==c;W++,X+=d,V.y=q,V.x+=M){for(var Y=0,Z=0;Y!==l;Y++,Z+=h,V.z=G,V.y+=_){for(var $=0,J=0;$!==p;$++,J+=1,V.z+=E){if(V.dot(j)<A){var Q=X+Z+J;C[Q][R[Q]++]=te;}}}}break;default:te.aabbNeedsUpdate&&te.computeAABB(),I(te.aabb.lowerBound.x,te.aabb.lowerBound.y,te.aabb.lowerBound.z,te.aabb.upperBound.x,te.aabb.upperBound.y,te.aabb.upperBound.z,te);}}for(O=0;O!==P;O++){var K=R[O];if(K>1){var ee=C[O];for(W=0;W!==K;W++){var te=ee[W];for(Y=0;Y!==W;Y++){var ne=ee[Y];this.needBroadphaseCollision(te,ne)&&this.intersectionTest(te,ne,t,n);}}}}this.makePairsUnique(t,n);};},{"../math/Vec3":30,"../shapes/Shape":43,"./Broadphase":5}],7:[function(e,t,n){t.exports=o;var r=e("./Broadphase"),i=e("./AABB");function o(){r.apply(this);}o.prototype=new r(),o.prototype.constructor=o,o.prototype.collisionPairs=function(e,t,n){var r,i,o,a,s=e.bodies,u=s.length;for(r=0;r!==u;r++){for(i=0;i!==r;i++){o=s[r],a=s[i],this.needBroadphaseCollision(o,a)&&this.intersectionTest(o,a,t,n);}}},new i(),o.prototype.aabbQuery=function(e,t,n){n=n||[];for(var r=0;r<e.bodies.length;r++){var i=e.bodies[r];i.aabbNeedsUpdate&&i.computeAABB(),i.aabb.overlaps(t)&&n.push(i);}return n;};},{"./AABB":3,"./Broadphase":5}],8:[function(e,t,n){function r(){this.matrix={};}t.exports=r,r.prototype.get=function(e,t){if(e=e.id,(t=t.id)>e){var n=t;t=e,e=n;}return e+"-"+t in this.matrix;},r.prototype.set=function(e,t,n){if(e=e.id,(t=t.id)>e){var r=t;t=e,e=r;}n?this.matrix[e+"-"+t]=!0:delete this.matrix[e+"-"+t];},r.prototype.reset=function(){this.matrix={};},r.prototype.setNumObjects=function(e){};},{}],9:[function(e,t,n){t.exports=c;var r=e("../math/Vec3"),i=e("../math/Quaternion"),o=e("../math/Transform"),a=(e("../shapes/ConvexPolyhedron"),e("../shapes/Box"),e("../collision/RaycastResult")),s=e("../shapes/Shape"),u=e("../collision/AABB");function c(e,t){this.from=e?e.clone():new r(),this.to=t?t.clone():new r(),this._direction=new r(),this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=c.ANY,this.result=new a(),this.hasHit=!1,this.callback=function(e){};}c.prototype.constructor=c,c.CLOSEST=1,c.ANY=2,c.ALL=4;var l=new u(),p=[];c.prototype.intersectWorld=function(e,t){return this.mode=t.mode||c.ANY,this.result=t.result||new a(),this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:-1,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(l),p.length=0,e.broadphase.aabbQuery(e,l,p),this.intersectBodies(p),this.hasHit;};var d=new r(),h=new r();function f(e,t,n,r){r.vsub(t,L),n.vsub(t,d),e.vsub(t,h);var i,o,a=L.dot(L),s=L.dot(d),u=L.dot(h),c=d.dot(d),l=d.dot(h);return(i=c*u-s*l)>=0&&(o=a*l-s*u)>=0&&i+o<a*c-s*s;}c.pointInTriangle=f;var m=new r(),y=new i();c.prototype.intersectBody=function(e,t){t&&(this.result=t,this._updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!=(this.collisionFilterGroup&e.collisionFilterMask)&&0!=(e.collisionFilterGroup&this.collisionFilterMask))for(var r=m,i=y,o=0,a=e.shapes.length;o<a;o++){var s=e.shapes[o];if((!n||s.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],i),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(s,i,r,e),this.result._shouldStop))break;}},c.prototype.intersectBodies=function(e,t){t&&(this.result=t,this._updateDirection());for(var n=0,r=e.length;!this.result._shouldStop&&n<r;n++){this.intersectBody(e[n]);}},c.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize();},c.prototype.intersectShape=function(e,t,n,r){if(!(function(e,t,n){n.vsub(e,L);var r=L.dot(t);return t.mult(r,I),I.vadd(e,I),n.distanceTo(I);}(this.from,this._direction,n)>e.boundingSphereRadius)){var i=this[e.type];i&&i.call(this,e,t,n,r);}},new r(),new r();var g=new r(),v=new r(),x=new r(),b=new r();new r(),new a(),c.prototype.intersectBox=function(e,t,n,r){return this.intersectConvex(e.convexPolyhedronRepresentation,t,n,r);},c.prototype[s.types.BOX]=c.prototype.intersectBox,c.prototype.intersectPlane=function(e,t,n,i){var o=this.from,a=this.to,s=this._direction,u=new r(0,0,1);t.vmult(u,u);var c=new r();o.vsub(n,c);var l=c.dot(u);if(a.vsub(n,c),!(l*c.dot(u)>0||o.distanceTo(a)<l)){var p=u.dot(s);if(!(Math.abs(p)<this.precision)){var d=new r(),h=new r(),f=new r();o.vsub(n,d);var m=-u.dot(d)/p;s.scale(m,h),o.vadd(h,f),this.reportIntersection(u,f,e,i,-1);}}},c.prototype[s.types.PLANE]=c.prototype.intersectPlane,c.prototype.getAABB=function(e){var t=this.to,n=this.from;e.lowerBound.x=Math.min(t.x,n.x),e.lowerBound.y=Math.min(t.y,n.y),e.lowerBound.z=Math.min(t.z,n.z),e.upperBound.x=Math.max(t.x,n.x),e.upperBound.y=Math.max(t.y,n.y),e.upperBound.z=Math.max(t.z,n.z);};var w={faceList:[0]};c.prototype.intersectHeightfield=function(e,t,n,i){e.data,e.elementSize;var a=new r(),s=new c(this.from,this.to);o.pointToLocalFrame(n,t,s.from,s.from),o.pointToLocalFrame(n,t,s.to,s.to);var u=[],l=null,p=null,d=null,h=null,f=e.getIndexOfPosition(s.from.x,s.from.y,u,!1);if(f&&(l=u[0],p=u[1],d=u[0],h=u[1]),(f=e.getIndexOfPosition(s.to.x,s.to.y,u,!1))&&((null===l||u[0]<l)&&(l=u[0]),(null===d||u[0]>d)&&(d=u[0]),(null===p||u[1]<p)&&(p=u[1]),(null===h||u[1]>h)&&(h=u[1])),null!==l){var m=[];e.getRectMinMax(l,p,d,h,m);for(var y=l;y<=d;y++){for(var g=p;g<=h;g++){if(this.result._shouldStop)return;if(e.getConvexTrianglePillar(y,g,!1),o.pointToWorldFrame(n,t,e.pillarOffset,a),this.intersectConvex(e.pillarConvex,t,a,i,w),this.result._shouldStop)return;e.getConvexTrianglePillar(y,g,!0),o.pointToWorldFrame(n,t,e.pillarOffset,a),this.intersectConvex(e.pillarConvex,t,a,i,w);}}}},c.prototype[s.types.HEIGHTFIELD]=c.prototype.intersectHeightfield;var S=new r(),M=new r();c.prototype.intersectSphere=function(e,t,n,r){var i=this.from,o=this.to,a=e.radius,s=Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)+Math.pow(o.z-i.z,2),u=2*((o.x-i.x)*(i.x-n.x)+(o.y-i.y)*(i.y-n.y)+(o.z-i.z)*(i.z-n.z)),c=Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)+Math.pow(i.z-n.z,2)-Math.pow(a,2),l=Math.pow(u,2)-4*s*c,p=S,d=M;if(!(l<0))if(0===l)i.lerp(o,l,p),p.vsub(n,d),d.normalize(),this.reportIntersection(d,p,e,r,-1);else{var h=(-u-Math.sqrt(l))/(2*s),f=(-u+Math.sqrt(l))/(2*s);if(h>=0&&h<=1&&(i.lerp(o,h,p),p.vsub(n,d),d.normalize(),this.reportIntersection(d,p,e,r,-1)),this.result._shouldStop)return;f>=0&&f<=1&&(i.lerp(o,f,p),p.vsub(n,d),d.normalize(),this.reportIntersection(d,p,e,r,-1));}},c.prototype[s.types.SPHERE]=c.prototype.intersectSphere;var _=new r(),E=(new r(),new r(),new r());c.prototype.intersectConvex=function(e,t,n,r,i){for(var o=_,a=E,s=i&&i.faceList||null,u=e.faces,c=e.vertices,l=e.faceNormals,p=this._direction,d=this.from,h=this.to,m=d.distanceTo(h),y=s?s.length:u.length,w=this.result,S=0;!w._shouldStop&&S<y;S++){var M=s?s[S]:S,A=u[M],T=l[M],N=t,D=n;a.copy(c[A[0]]),N.vmult(a,a),a.vadd(D,a),a.vsub(d,a),N.vmult(T,o);var C=p.dot(o);if(!(Math.abs(C)<this.precision)){var R=o.dot(a)/C;if(!(R<0)){p.mult(R,g),g.vadd(d,g),v.copy(c[A[0]]),N.vmult(v,v),D.vadd(v,v);for(var P=1;!w._shouldStop&&P<A.length-1;P++){x.copy(c[A[P]]),b.copy(c[A[P+1]]),N.vmult(x,x),N.vmult(b,b),D.vadd(x,x),D.vadd(b,b);var O=g.distanceTo(d);!f(g,v,x,b)&&!f(g,x,v,b)||O>m||this.reportIntersection(o,g,e,r,M);}}}}},c.prototype[s.types.CONVEXPOLYHEDRON]=c.prototype.intersectConvex;var A=new r(),T=new r(),N=new r(),D=new r(),C=new r(),R=new r(),P=(new u(),[]),O=new o();c.prototype.intersectTrimesh=function(e,t,n,r,i){var a=A,s=P,u=O,c=E,l=T,p=N,d=D,h=R,m=C,y=(i&&i.faceList,e.indices),w=(e.vertices,e.faceNormals,this.from),S=this.to,M=this._direction;u.position.copy(n),u.quaternion.copy(t),o.vectorToLocalFrame(n,t,M,l),o.pointToLocalFrame(n,t,w,p),o.pointToLocalFrame(n,t,S,d);var _=p.distanceSquared(d);e.tree.rayQuery(this,u,s);for(var L=0,I=s.length;!this.result._shouldStop&&L!==I;L++){var B=s[L];e.getNormal(B,a),e.getVertex(y[3*B],v),v.vsub(p,c);var F=l.dot(a),z=a.dot(c)/F;if(!(z<0)){l.scale(z,g),g.vadd(p,g),e.getVertex(y[3*B+1],x),e.getVertex(y[3*B+2],b);var k=g.distanceSquared(p);!f(g,x,v,b)&&!f(g,v,x,b)||k>_||(o.vectorToWorldFrame(t,a,m),o.pointToWorldFrame(n,t,g,h),this.reportIntersection(m,h,e,r,B));}}s.length=0;},c.prototype[s.types.TRIMESH]=c.prototype.intersectTrimesh,c.prototype.reportIntersection=function(e,t,n,r,i){var o=this.from,a=this.to,s=o.distanceTo(t),u=this.result;if(!(this.skipBackfaces&&e.dot(this._direction)>0))switch(u.hitFaceIndex=void 0!==i?i:-1,this.mode){case c.ALL:this.hasHit=!0,u.set(o,a,e,t,n,r,s),u.hasHit=!0,this.callback(u);break;case c.CLOSEST:(s<u.distance||!u.hasHit)&&(this.hasHit=!0,u.hasHit=!0,u.set(o,a,e,t,n,r,s));break;case c.ANY:this.hasHit=!0,u.hasHit=!0,u.set(o,a,e,t,n,r,s),u._shouldStop=!0;}};var L=new r(),I=new r();},{"../collision/AABB":3,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/Box":37,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43}],10:[function(e,t,n){var r=e("../math/Vec3");function i(){this.rayFromWorld=new r(),this.rayToWorld=new r(),this.hitNormalWorld=new r(),this.hitPointWorld=new r(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1;}t.exports=i,i.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1;},i.prototype.abort=function(){this._shouldStop=!0;},i.prototype.set=function(e,t,n,r,i,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(r),this.shape=i,this.body=o,this.distance=a;};},{"../math/Vec3":30}],11:[function(e,t,n){e("../shapes/Shape");var r=e("../collision/Broadphase");function i(e){r.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var t=this.axisList;this._addBodyHandler=function(e){t.push(e.body);},this._removeBodyHandler=function(e){var n=t.indexOf(e.body);-1!==n&&t.splice(n,1);},e&&this.setWorld(e);}t.exports=i,i.prototype=new r(),i.prototype.setWorld=function(e){this.axisList.length=0;for(var t=0;t<e.bodies.length;t++){this.axisList.push(e.bodies[t]);}e.removeEventListener("addBody",this._addBodyHandler),e.removeEventListener("removeBody",this._removeBodyHandler),e.addEventListener("addBody",this._addBodyHandler),e.addEventListener("removeBody",this._removeBodyHandler),this.world=e,this.dirty=!0;},i.insertionSortX=function(e){for(var t=1,n=e.length;t<n;t++){for(var r=e[t],i=t-1;i>=0&&!(e[i].aabb.lowerBound.x<=r.aabb.lowerBound.x);i--){e[i+1]=e[i];}e[i+1]=r;}return e;},i.insertionSortY=function(e){for(var t=1,n=e.length;t<n;t++){for(var r=e[t],i=t-1;i>=0&&!(e[i].aabb.lowerBound.y<=r.aabb.lowerBound.y);i--){e[i+1]=e[i];}e[i+1]=r;}return e;},i.insertionSortZ=function(e){for(var t=1,n=e.length;t<n;t++){for(var r=e[t],i=t-1;i>=0&&!(e[i].aabb.lowerBound.z<=r.aabb.lowerBound.z);i--){e[i+1]=e[i];}e[i+1]=r;}return e;},i.prototype.collisionPairs=function(e,t,n){var r,o,a=this.axisList,s=a.length,u=this.axisIndex;for(this.dirty&&(this.sortList(),this.dirty=!1),r=0;r!==s;r++){var c=a[r];for(o=r+1;o<s;o++){var l=a[o];if(this.needBroadphaseCollision(c,l)){if(!i.checkBounds(c,l,u))break;this.intersectionTest(c,l,t,n);}}}},i.prototype.sortList=function(){for(var e=this.axisList,t=this.axisIndex,n=e.length,r=0;r!==n;r++){var o=e[r];o.aabbNeedsUpdate&&o.computeAABB();}0===t?i.insertionSortX(e):1===t?i.insertionSortY(e):2===t&&i.insertionSortZ(e);},i.checkBounds=function(e,t,n){var r,i;0===n?(r=e.position.x,i=t.position.x):1===n?(r=e.position.y,i=t.position.y):2===n&&(r=e.position.z,i=t.position.z);var o=e.boundingRadius,a=t.boundingRadius;return i-a<r+o;},i.prototype.autoDetectAxis=function(){for(var e=0,t=0,n=0,r=0,i=0,o=0,a=this.axisList,s=a.length,u=1/s,c=0;c!==s;c++){var l=a[c],p=l.position.x;e+=p,t+=p*p;var d=l.position.y;n+=d,r+=d*d;var h=l.position.z;i+=h,o+=h*h;}var f=t-e*e*u,m=r-n*n*u,y=o-i*i*u;this.axisIndex=f>m?f>y?0:2:m>y?1:2;},i.prototype.aabbQuery=function(e,t,n){n=n||[],this.dirty&&(this.sortList(),this.dirty=!1);var r=this.axisIndex,i="x";1===r&&(i="y"),2===r&&(i="z");for(var o=this.axisList,a=(t.lowerBound[i],t.upperBound[i],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.computeAABB(),s.aabb.overlaps(t)&&n.push(s);}return n;};},{"../collision/Broadphase":5,"../shapes/Shape":43}],12:[function(e,t,n){t.exports=s,e("./Constraint");var r=e("./PointToPointConstraint"),i=e("../equations/ConeEquation"),o=e("../equations/RotationalEquation"),a=(e("../equations/ContactEquation"),e("../math/Vec3"));function s(e,t,n){var s=void 0!==(n=n||{}).maxForce?n.maxForce:1e6,u=n.pivotA?n.pivotA.clone():new a(),c=n.pivotB?n.pivotB.clone():new a();this.axisA=n.axisA?n.axisA.clone():new a(),this.axisB=n.axisB?n.axisB.clone():new a(),r.call(this,e,u,t,c,s),this.collideConnected=!!n.collideConnected,this.angle=void 0!==n.angle?n.angle:0;var l=this.coneEquation=new i(e,t,n),p=this.twistEquation=new o(e,t,n);this.twistAngle=void 0!==n.twistAngle?n.twistAngle:0,l.maxForce=0,l.minForce=-s,p.maxForce=0,p.minForce=-s,this.equations.push(l,p);}s.prototype=new r(),s.constructor=s,new a(),new a(),s.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.coneEquation,i=this.twistEquation;r.prototype.update.call(this),e.vectorToWorldFrame(this.axisA,n.axisA),t.vectorToWorldFrame(this.axisB,n.axisB),this.axisA.tangents(i.axisA,i.axisA),e.vectorToWorldFrame(i.axisA,i.axisA),this.axisB.tangents(i.axisB,i.axisB),t.vectorToWorldFrame(i.axisB,i.axisB),n.angle=this.angle,i.maxAngle=this.twistAngle;};},{"../equations/ConeEquation":18,"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],13:[function(e,t,n){t.exports=i;var r=e("../utils/Utils");function i(e,t,n){n=r.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.id=i.idCounter++,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp());}i.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!");},i.prototype.enable=function(){for(var e=this.equations,t=0;t<e.length;t++){e[t].enabled=!0;}},i.prototype.disable=function(){for(var e=this.equations,t=0;t<e.length;t++){e[t].enabled=!1;}},i.idCounter=0;},{"../utils/Utils":53}],14:[function(e,t,n){t.exports=o;var r=e("./Constraint"),i=e("../equations/ContactEquation");function o(e,t,n,o){r.call(this,e,t),void 0===n&&(n=e.position.distanceTo(t.position)),void 0===o&&(o=1e6),this.distance=n;var a=this.distanceEquation=new i(e,t);this.equations.push(a),a.minForce=-o,a.maxForce=o;}o.prototype=new r(),o.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.distanceEquation,r=.5*this.distance,i=n.ni;t.position.vsub(e.position,i),i.normalize(),i.mult(r,n.ri),i.mult(-r,n.rj);};},{"../equations/ContactEquation":19,"./Constraint":13}],15:[function(e,t,n){t.exports=s,e("./Constraint");var r=e("./PointToPointConstraint"),i=e("../equations/RotationalEquation"),o=e("../equations/RotationalMotorEquation"),a=(e("../equations/ContactEquation"),e("../math/Vec3"));function s(e,t,n){var s=void 0!==(n=n||{}).maxForce?n.maxForce:1e6,u=n.pivotA?n.pivotA.clone():new a(),c=n.pivotB?n.pivotB.clone():new a();r.call(this,e,u,t,c,s),(this.axisA=n.axisA?n.axisA.clone():new a(1,0,0)).normalize(),(this.axisB=n.axisB?n.axisB.clone():new a(1,0,0)).normalize();var l=this.rotationalEquation1=new i(e,t,n),p=this.rotationalEquation2=new i(e,t,n),d=this.motorEquation=new o(e,t,s);d.enabled=!1,this.equations.push(l,p,d);}s.prototype=new r(),s.constructor=s,s.prototype.enableMotor=function(){this.motorEquation.enabled=!0;},s.prototype.disableMotor=function(){this.motorEquation.enabled=!1;},s.prototype.setMotorSpeed=function(e){this.motorEquation.targetVelocity=e;},s.prototype.setMotorMaxForce=function(e){this.motorEquation.maxForce=e,this.motorEquation.minForce=-e;};var u=new a(),c=new a();s.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.motorEquation,i=this.rotationalEquation1,o=this.rotationalEquation2,a=u,s=c,l=this.axisA,p=this.axisB;r.prototype.update.call(this),e.quaternion.vmult(l,a),t.quaternion.vmult(p,s),a.tangents(i.axisA,o.axisA),i.axisB.copy(s),o.axisB.copy(s),this.motorEquation.enabled&&(e.quaternion.vmult(this.axisA,n.axisA),t.quaternion.vmult(this.axisB,n.axisB));};},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],16:[function(e,t,n){t.exports=a,e("./Constraint");var r=e("./PointToPointConstraint"),i=e("../equations/RotationalEquation"),o=(e("../equations/RotationalMotorEquation"),e("../equations/ContactEquation"),e("../math/Vec3"));function a(e,t,n){var a=void 0!==(n=n||{}).maxForce?n.maxForce:1e6,s=new o(),u=new o(),c=new o();e.position.vadd(t.position,c),c.scale(.5,c),t.pointToLocalFrame(c,u),e.pointToLocalFrame(c,s),r.call(this,e,s,t,u,a);var l=this.rotationalEquation1=new i(e,t,n),p=this.rotationalEquation2=new i(e,t,n),d=this.rotationalEquation3=new i(e,t,n);this.equations.push(l,p,d);}a.prototype=new r(),a.constructor=a,new o(),new o(),a.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=(this.motorEquation,this.rotationalEquation1),i=this.rotationalEquation2,a=this.rotationalEquation3;r.prototype.update.call(this),e.vectorToWorldFrame(o.UNIT_X,n.axisA),t.vectorToWorldFrame(o.UNIT_Y,n.axisB),e.vectorToWorldFrame(o.UNIT_Y,i.axisA),t.vectorToWorldFrame(o.UNIT_Z,i.axisB),e.vectorToWorldFrame(o.UNIT_Z,a.axisA),t.vectorToWorldFrame(o.UNIT_X,a.axisB);};},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],17:[function(e,t,n){t.exports=a;var r=e("./Constraint"),i=e("../equations/ContactEquation"),o=e("../math/Vec3");function a(e,t,n,a,s){r.call(this,e,n),s=void 0!==s?s:1e6,this.pivotA=t?t.clone():new o(),this.pivotB=a?a.clone():new o();var u=this.equationX=new i(e,n),c=this.equationY=new i(e,n),l=this.equationZ=new i(e,n);this.equations.push(u,c,l),u.minForce=c.minForce=l.minForce=-s,u.maxForce=c.maxForce=l.maxForce=s,u.ni.set(1,0,0),c.ni.set(0,1,0),l.ni.set(0,0,1);}a.prototype=new r(),a.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.equationX,r=this.equationY,i=this.equationZ;e.quaternion.vmult(this.pivotA,n.ri),t.quaternion.vmult(this.pivotB,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj);};},{"../equations/ContactEquation":19,"../math/Vec3":30,"./Constraint":13}],18:[function(e,t,n){t.exports=o;var r=e("../math/Vec3"),i=(e("../math/Mat3"),e("./Equation"));function o(e,t,n){var o=void 0!==(n=n||{}).maxForce?n.maxForce:1e6;i.call(this,e,t,-o,o),this.axisA=n.axisA?n.axisA.clone():new r(1,0,0),this.axisB=n.axisB?n.axisB.clone():new r(0,1,0),this.angle=void 0!==n.angle?n.angle:0;}o.prototype=new i(),o.prototype.constructor=o;var a=new r(),s=new r();o.prototype.computeB=function(e){var t=this.a,n=this.b,r=this.axisA,i=this.axisB,o=a,u=s,c=this.jacobianElementA,l=this.jacobianElementB;return r.cross(i,o),i.cross(r,u),c.rotational.copy(u),l.rotational.copy(o),-(Math.cos(this.angle)-r.dot(i))*t-this.computeGW()*n-e*this.computeGiMf();};},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],19:[function(e,t,n){t.exports=o;var r=e("./Equation"),i=e("../math/Vec3");function o(e,t,n){n=void 0!==n?n:1e6,r.call(this,e,t,0,n),this.restitution=0,this.ri=new i(),this.rj=new i(),this.ni=new i();}e("../math/Mat3"),o.prototype=new r(),o.prototype.constructor=o;var a=new i(),s=new i(),u=new i();o.prototype.computeB=function(e){var t=this.a,n=this.b,r=this.bi,i=this.bj,o=this.ri,c=this.rj,l=a,p=s,d=r.velocity,h=r.angularVelocity,f=(r.force,r.torque,i.velocity),m=i.angularVelocity,y=(i.force,i.torque,u),g=this.jacobianElementA,v=this.jacobianElementB,x=this.ni;o.cross(x,l),c.cross(x,p),x.negate(g.spatial),l.negate(g.rotational),v.spatial.copy(x),v.rotational.copy(p),y.copy(i.position),y.vadd(c,y),y.vsub(r.position,y),y.vsub(o,y);var b=x.dot(y),w=this.restitution+1;return-b*t-(w*f.dot(x)-w*d.dot(x)+m.dot(p)-h.dot(l))*n-e*this.computeGiMf();};var c=new i(),l=new i(),p=new i(),d=new i(),h=new i();o.prototype.getImpactVelocityAlongNormal=function(){var e=c,t=l,n=p,r=d,i=h;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,r),this.bi.getVelocityAtWorldPoint(n,e),this.bj.getVelocityAtWorldPoint(r,t),e.vsub(t,i),this.ni.dot(i);};},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],20:[function(e,t,n){t.exports=o;var r=e("../math/JacobianElement"),i=e("../math/Vec3");function o(e,t,n,i){this.id=o.id++,this.minForce=void 0===n?-1e6:n,this.maxForce=void 0===i?1e6:i,this.bi=e,this.bj=t,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new r(),this.jacobianElementB=new r(),this.enabled=!0,this.setSpookParams(1e7,4,1/60);}o.prototype.constructor=o,o.id=0,o.prototype.setSpookParams=function(e,t,n){var r=t,i=e,o=n;this.a=4/(o*(1+4*r)),this.b=4*r/(1+4*r),this.eps=4/(o*o*i*(1+4*r));},o.prototype.computeB=function(e,t,n){var r=this.computeGW();return-this.computeGq()*e-r*t-this.computeGiMf()*n;},o.prototype.computeGq=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.position,o=r.position;return e.spatial.dot(i)+t.spatial.dot(o);};var a=new i();o.prototype.computeGW=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.velocity,o=r.velocity,s=n.angularVelocity||a,u=r.angularVelocity||a;return e.multiplyVectors(i,s)+t.multiplyVectors(o,u);},o.prototype.computeGWlambda=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.vlambda,o=r.vlambda,s=n.wlambda||a,u=r.wlambda||a;return e.multiplyVectors(i,s)+t.multiplyVectors(o,u);};var s=new i(),u=new i(),c=new i(),l=new i();o.prototype.computeGiMf=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.force,o=n.torque,a=r.force,p=r.torque,d=n.invMassSolve,h=r.invMassSolve;return n.invInertiaWorldSolve?n.invInertiaWorldSolve.vmult(o,c):c.set(0,0,0),r.invInertiaWorldSolve?r.invInertiaWorldSolve.vmult(p,l):l.set(0,0,0),i.mult(d,s),a.mult(h,u),e.multiplyVectors(s,c)+t.multiplyVectors(u,l);};var p=new i();o.prototype.computeGiMGt=function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.invMassSolve,o=r.invMassSolve,a=n.invInertiaWorldSolve,s=r.invInertiaWorldSolve,u=i+o;return a&&(a.vmult(e.rotational,p),u+=p.dot(e.rotational)),s&&(s.vmult(t.rotational,p),u+=p.dot(t.rotational)),u;};var d=new i();new i(),new i(),new i(),new i(),new i(),o.prototype.addToWlambda=function(e){var t=this.jacobianElementA,n=this.jacobianElementB,r=this.bi,i=this.bj,o=d;t.spatial.mult(r.invMassSolve*e,o),r.vlambda.vadd(o,r.vlambda),n.spatial.mult(i.invMassSolve*e,o),i.vlambda.vadd(o,i.vlambda),r.invInertiaWorldSolve&&(r.invInertiaWorldSolve.vmult(t.rotational,o),o.mult(e,o),r.wlambda.vadd(o,r.wlambda)),i.invInertiaWorldSolve&&(i.invInertiaWorldSolve.vmult(n.rotational,o),o.mult(e,o),i.wlambda.vadd(o,i.wlambda));},o.prototype.computeC=function(){return this.computeGiMGt()+this.eps;};},{"../math/JacobianElement":26,"../math/Vec3":30}],21:[function(e,t,n){t.exports=o;var r=e("./Equation"),i=e("../math/Vec3");function o(e,t,n){r.call(this,e,t,-n,n),this.ri=new i(),this.rj=new i(),this.t=new i();}e("../math/Mat3"),o.prototype=new r(),o.prototype.constructor=o;var a=new i(),s=new i();o.prototype.computeB=function(e){this.a;var t=this.b,n=(this.bi,this.bj,this.ri),r=this.rj,i=a,o=s,u=this.t;n.cross(u,i),r.cross(u,o);var c=this.jacobianElementA,l=this.jacobianElementB;return u.negate(c.spatial),i.negate(c.rotational),l.spatial.copy(u),l.rotational.copy(o),-this.computeGW()*t-e*this.computeGiMf();};},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],22:[function(e,t,n){t.exports=o;var r=e("../math/Vec3"),i=(e("../math/Mat3"),e("./Equation"));function o(e,t,n){var o=void 0!==(n=n||{}).maxForce?n.maxForce:1e6;i.call(this,e,t,-o,o),this.axisA=n.axisA?n.axisA.clone():new r(1,0,0),this.axisB=n.axisB?n.axisB.clone():new r(0,1,0),this.maxAngle=Math.PI/2;}o.prototype=new i(),o.prototype.constructor=o;var a=new r(),s=new r();o.prototype.computeB=function(e){var t=this.a,n=this.b,r=this.axisA,i=this.axisB,o=a,u=s,c=this.jacobianElementA,l=this.jacobianElementB;return r.cross(i,o),i.cross(r,u),c.rotational.copy(u),l.rotational.copy(o),-(Math.cos(this.maxAngle)-r.dot(i))*t-this.computeGW()*n-e*this.computeGiMf();};},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],23:[function(e,t,n){t.exports=o;var r=e("../math/Vec3"),i=(e("../math/Mat3"),e("./Equation"));function o(e,t,n){n=void 0!==n?n:1e6,i.call(this,e,t,-n,n),this.axisA=new r(),this.axisB=new r(),this.targetVelocity=0;}o.prototype=new i(),o.prototype.constructor=o,o.prototype.computeB=function(e){this.a;var t=this.b,n=(this.bi,this.bj,this.axisA),r=this.axisB,i=this.jacobianElementA,o=this.jacobianElementB;return i.rotational.copy(n),r.negate(o.rotational),-(this.computeGW()-this.targetVelocity)*t-e*this.computeGiMf();};},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],24:[function(e,t,n){var r=e("../utils/Utils");function i(e,t,n){n=r.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=i.idCounter++,this.materials=[e,t],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation;}t.exports=i,i.idCounter=0;},{"../utils/Utils":53}],25:[function(e,t,n){function r(e){var t="";"string"==typeof(e=e||{})?(t=e,e={}):"object"==_typeof(e)&&(t=""),this.name=t,this.id=r.idCounter++,this.friction=void 0!==e.friction?e.friction:-1,this.restitution=void 0!==e.restitution?e.restitution:-1;}t.exports=r,r.idCounter=0;},{}],26:[function(e,t,n){t.exports=i;var r=e("./Vec3");function i(){this.spatial=new r(),this.rotational=new r();}i.prototype.multiplyElement=function(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational);},i.prototype.multiplyVectors=function(e,t){return e.dot(this.spatial)+t.dot(this.rotational);};},{"./Vec3":30}],27:[function(e,t,n){t.exports=i;var r=e("./Vec3");function i(e){this.elements=e||[0,0,0,0,0,0,0,0,0];}i.prototype.identity=function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1;},i.prototype.setZero=function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0;},i.prototype.setTrace=function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z;},i.prototype.getTrace=function(e){e=e||new r();var t=this.elements;e.x=t[0],e.y=t[4],e.z=t[8];},i.prototype.vmult=function(e,t){t=t||new r();var n=this.elements,i=e.x,o=e.y,a=e.z;return t.x=n[0]*i+n[1]*o+n[2]*a,t.y=n[3]*i+n[4]*o+n[5]*a,t.z=n[6]*i+n[7]*o+n[8]*a,t;},i.prototype.smult=function(e){for(var t=0;t<this.elements.length;t++){this.elements[t]*=e;}},i.prototype.mmult=function(e,t){for(var n=t||new i(),r=0;r<3;r++){for(var o=0;o<3;o++){for(var a=0,s=0;s<3;s++){a+=e.elements[r+3*s]*this.elements[s+3*o];}n.elements[r+3*o]=a;}}return n;},i.prototype.scale=function(e,t){t=t||new i();for(var n=this.elements,r=t.elements,o=0;3!==o;o++){r[3*o+0]=e.x*n[3*o+0],r[3*o+1]=e.y*n[3*o+1],r[3*o+2]=e.z*n[3*o+2];}return t;},i.prototype.solve=function(e,t){t=t||new r();for(var n,i=[],o=0;o<12;o++){i.push(0);}for(o=0;o<3;o++){for(n=0;n<3;n++){i[o+4*n]=this.elements[o+3*n];}}i[3]=e.x,i[7]=e.y,i[11]=e.z;var a,s,u=3,c=u;do{if(0===i[(o=c-u)+4*o])for(n=o+1;n<c;n++){if(0!==i[o+4*n]){a=4;do{i[(s=4-a)+4*o]+=i[s+4*n];}while(--a);break;}}if(0!==i[o+4*o])for(n=o+1;n<c;n++){var l=i[o+4*n]/i[o+4*o];a=4;do{i[(s=4-a)+4*n]=s<=o?0:i[s+4*n]-i[s+4*o]*l;}while(--a);}}while(--u);if(t.z=i[11]/i[10],t.y=(i[7]-i[6]*t.z)/i[5],t.x=(i[3]-i[2]*t.z-i[1]*t.y)/i[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=["+t.toString()+"], b=["+e.toString()+"], A=["+this.toString()+"]";return t;},i.prototype.e=function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n;},i.prototype.copy=function(e){for(var t=0;t<e.elements.length;t++){this.elements[t]=e.elements[t];}return this;},i.prototype.toString=function(){for(var e="",t=0;t<9;t++){e+=this.elements[t]+",";}return e;},i.prototype.reverse=function(e){e=e||new i();for(var t,n=[],r=0;r<18;r++){n.push(0);}for(r=0;r<3;r++){for(t=0;t<3;t++){n[r+6*t]=this.elements[r+3*t];}}n[3]=1,n[9]=0,n[15]=0,n[4]=0,n[10]=1,n[16]=0,n[5]=0,n[11]=0,n[17]=1;var o,a,s=3,u=s;do{if(0===n[(r=u-s)+6*r])for(t=r+1;t<u;t++){if(0!==n[r+6*t]){o=6;do{n[(a=6-o)+6*r]+=n[a+6*t];}while(--o);break;}}if(0!==n[r+6*r])for(t=r+1;t<u;t++){var c=n[r+6*t]/n[r+6*r];o=6;do{n[(a=6-o)+6*t]=a<=r?0:n[a+6*t]-n[a+6*r]*c;}while(--o);}}while(--s);r=2;do{t=r-1;do{c=n[r+6*t]/n[r+6*r],o=6;do{n[(a=6-o)+6*t]=n[a+6*t]-n[a+6*r]*c;}while(--o);}while(t--);}while(--r);r=2;do{c=1/n[r+6*r],o=6;do{n[(a=6-o)+6*r]=n[a+6*r]*c;}while(--o);}while(r--);r=2;do{t=2;do{if(a=n[3+t+6*r],isNaN(a)||a===1/0)throw"Could not reverse! A=["+this.toString()+"]";e.e(r,t,a);}while(t--);}while(r--);return e;},i.prototype.setRotationFromQuaternion=function(e){var t=e.x,n=e.y,r=e.z,i=e.w,o=t+t,a=n+n,s=r+r,u=t*o,c=t*a,l=t*s,p=n*a,d=n*s,h=r*s,f=i*o,m=i*a,y=i*s,g=this.elements;return g[0]=1-(p+h),g[1]=c-y,g[2]=l+m,g[3]=c+y,g[4]=1-(u+h),g[5]=d-f,g[6]=l-m,g[7]=d+f,g[8]=1-(u+p),this;},i.prototype.transpose=function(e){for(var t=(e=e||new i()).elements,n=this.elements,r=0;3!==r;r++){for(var o=0;3!==o;o++){t[3*r+o]=n[3*o+r];}}return e;};},{"./Vec3":30}],28:[function(e,t,n){t.exports=i;var r=e("./Vec3");function i(e,t,n,r){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0,this.z=void 0!==n?n:0,this.w=void 0!==r?r:1;}i.prototype.set=function(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r;},i.prototype.toString=function(){return this.x+","+this.y+","+this.z+","+this.w;},i.prototype.toArray=function(){return[this.x,this.y,this.z,this.w];},i.prototype.setFromAxisAngle=function(e,t){var n=Math.sin(.5*t);this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t);},i.prototype.toAxisAngle=function(e){e=e||new r(),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t];};var o=new r(),a=new r();i.prototype.setFromVectors=function(e,t){if(e.isAntiparallelTo(t)){var n=o,r=a;e.tangents(n,r),this.setFromAxisAngle(n,Math.PI);}else{var i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(Math.pow(e.norm(),2)*Math.pow(t.norm(),2))+e.dot(t),this.normalize();}};var s=new r(),u=new r(),c=new r();i.prototype.mult=function(e,t){t=t||new i();var n=this.w,r=s,o=u,a=c;return r.set(this.x,this.y,this.z),o.set(e.x,e.y,e.z),t.w=n*e.w-r.dot(o),r.cross(o,a),t.x=n*o.x+e.w*r.x+a.x,t.y=n*o.y+e.w*r.y+a.y,t.z=n*o.z+e.w*r.z+a.z,t;},i.prototype.inverse=function(e){var t=this.x,n=this.y,r=this.z,o=this.w;e=e||new i(),this.conjugate(e);var a=1/(t*t+n*n+r*r+o*o);return e.x*=a,e.y*=a,e.z*=a,e.w*=a,e;},i.prototype.conjugate=function(e){return(e=e||new i()).x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e;},i.prototype.normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e);},i.prototype.normalizeFast=function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e);},i.prototype.vmult=function(e,t){t=t||new r();var n=e.x,i=e.y,o=e.z,a=this.x,s=this.y,u=this.z,c=this.w,l=c*n+s*o-u*i,p=c*i+u*n-a*o,d=c*o+a*i-s*n,h=-a*n-s*i-u*o;return t.x=l*c+h*-a+p*-u-d*-s,t.y=p*c+h*-s+d*-a-l*-u,t.z=d*c+h*-u+l*-s-p*-a,t;},i.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this;},i.prototype.toEuler=function(e,t){var n,r,i;t=t||"YZX";var o=this.x,a=this.y,s=this.z,u=this.w;switch(t){case"YZX":var c=o*a+s*u;if(c>.499&&(n=2*Math.atan2(o,u),r=Math.PI/2,i=0),c<-.499&&(n=-2*Math.atan2(o,u),r=-Math.PI/2,i=0),isNaN(n)){var l=o*o,p=a*a,d=s*s;n=Math.atan2(2*a*u-2*o*s,1-2*p-2*d),r=Math.asin(2*c),i=Math.atan2(2*o*u-2*a*s,1-2*l-2*d);}break;default:throw new Error("Euler order "+t+" not supported yet.");}e.y=n,e.z=r,e.x=i;},i.prototype.setFromEuler=function(e,t,n,r){r=r||"XYZ";var i=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(n/2),s=Math.sin(e/2),u=Math.sin(t/2),c=Math.sin(n/2);return"XYZ"===r?(this.x=s*o*a+i*u*c,this.y=i*u*a-s*o*c,this.z=i*o*c+s*u*a,this.w=i*o*a-s*u*c):"YXZ"===r?(this.x=s*o*a+i*u*c,this.y=i*u*a-s*o*c,this.z=i*o*c-s*u*a,this.w=i*o*a+s*u*c):"ZXY"===r?(this.x=s*o*a-i*u*c,this.y=i*u*a+s*o*c,this.z=i*o*c+s*u*a,this.w=i*o*a-s*u*c):"ZYX"===r?(this.x=s*o*a-i*u*c,this.y=i*u*a+s*o*c,this.z=i*o*c-s*u*a,this.w=i*o*a+s*u*c):"YZX"===r?(this.x=s*o*a+i*u*c,this.y=i*u*a+s*o*c,this.z=i*o*c-s*u*a,this.w=i*o*a-s*u*c):"XZY"===r&&(this.x=s*o*a-i*u*c,this.y=i*u*a-s*o*c,this.z=i*o*c+s*u*a,this.w=i*o*a+s*u*c),this;},i.prototype.clone=function(){return new i(this.x,this.y,this.z,this.w);};},{"./Vec3":30}],29:[function(e,t,n){var r=e("./Vec3"),i=e("./Quaternion");function o(e){e=e||{},this.position=new r(),e.position&&this.position.copy(e.position),this.quaternion=new i(),e.quaternion&&this.quaternion.copy(e.quaternion);}t.exports=o;var a=new i();o.pointToLocalFrame=function(e,t,n,i){return i=i||new r(),n.vsub(e,i),t.conjugate(a),a.vmult(i,i),i;},o.prototype.pointToLocal=function(e,t){return o.pointToLocalFrame(this.position,this.quaternion,e,t);},o.pointToWorldFrame=function(e,t,n,i){return i=i||new r(),t.vmult(n,i),i.vadd(e,i),i;},o.prototype.pointToWorld=function(e,t){return o.pointToWorldFrame(this.position,this.quaternion,e,t);},o.prototype.vectorToWorldFrame=function(e,t){return t=t||new r(),this.quaternion.vmult(e,t),t;},o.vectorToWorldFrame=function(e,t,n){return e.vmult(t,n),n;},o.vectorToLocalFrame=function(e,t,n,i){return i=i||new r(),t.w*=-1,t.vmult(n,i),t.w*=-1,i;};},{"./Quaternion":28,"./Vec3":30}],30:[function(e,t,n){t.exports=i;var r=e("./Mat3");function i(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0;}i.ZERO=new i(0,0,0),i.UNIT_X=new i(1,0,0),i.UNIT_Y=new i(0,1,0),i.UNIT_Z=new i(0,0,1),i.prototype.cross=function(e,t){var n=e.x,r=e.y,o=e.z,a=this.x,s=this.y,u=this.z;return(t=t||new i()).x=s*o-u*r,t.y=u*n-a*o,t.z=a*r-s*n,t;},i.prototype.set=function(e,t,n){return this.x=e,this.y=t,this.z=n,this;},i.prototype.setZero=function(){this.x=this.y=this.z=0;},i.prototype.vadd=function(e,t){if(!t)return new i(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z;},i.prototype.vsub=function(e,t){if(!t)return new i(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z;},i.prototype.crossmat=function(){return new r([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0]);},i.prototype.normalize=function(){var e=this.x,t=this.y,n=this.z,r=Math.sqrt(e*e+t*t+n*n);if(r>0){var i=1/r;this.x*=i,this.y*=i,this.z*=i;}else this.x=0,this.y=0,this.z=0;return r;},i.prototype.unit=function(e){e=e||new i();var t=this.x,n=this.y,r=this.z,o=Math.sqrt(t*t+n*n+r*r);return o>0?(o=1/o,e.x=t*o,e.y=n*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e;},i.prototype.norm=function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n);},i.prototype.length=i.prototype.norm,i.prototype.norm2=function(){return this.dot(this);},i.prototype.lengthSquared=i.prototype.norm2,i.prototype.distanceTo=function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z;return Math.sqrt((i-t)*(i-t)+(o-n)*(o-n)+(a-r)*(a-r));},i.prototype.distanceSquared=function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z;return(i-t)*(i-t)+(o-n)*(o-n)+(a-r)*(a-r);},i.prototype.mult=function(e,t){t=t||new i();var n=this.x,r=this.y,o=this.z;return t.x=e*n,t.y=e*r,t.z=e*o,t;},i.prototype.scale=i.prototype.mult,i.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z;},i.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z;},i.prototype.negate=function(e){return(e=e||new i()).x=-this.x,e.y=-this.y,e.z=-this.z,e;};var o=new i(),a=new i();i.prototype.tangents=function(e,t){var n=this.norm();if(n>0){var r=o,i=1/n;r.set(this.x*i,this.y*i,this.z*i);var s=a;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,t);}else e.set(1,0,0),t.set(0,1,0);},i.prototype.toString=function(){return this.x+","+this.y+","+this.z;},i.prototype.toArray=function(){return[this.x,this.y,this.z];},i.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this;},i.prototype.lerp=function(e,t,n){var r=this.x,i=this.y,o=this.z;n.x=r+(e.x-r)*t,n.y=i+(e.y-i)*t,n.z=o+(e.z-o)*t;},i.prototype.almostEquals=function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t);},i.prototype.almostZero=function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e);};var s=new i();i.prototype.isAntiparallelTo=function(e,t){return this.negate(s),s.almostEquals(e,t);},i.prototype.clone=function(){return new i(this.x,this.y,this.z);};},{"./Mat3":27}],31:[function(e,t,n){t.exports=c;var r=e("../utils/EventTarget"),i=(e("../shapes/Shape"),e("../math/Vec3")),o=e("../math/Mat3"),a=e("../math/Quaternion"),s=(e("../material/Material"),e("../collision/AABB")),u=e("../shapes/Box");function c(e){e=e||{},r.apply(this),this.id=c.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new i(),this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:1,this.collisionResponse=!0,this.position=new i(),e.position&&this.position.copy(e.position),this.previousPosition=new i(),this.initPosition=new i(),this.velocity=new i(),e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new i(),this.force=new i();var t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?c.STATIC:c.DYNAMIC,_typeof(e.type)==_typeof(c.STATIC)&&(this.type=e.type),this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.sleepState=0,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new i(),this.quaternion=new a(),e.quaternion&&this.quaternion.copy(e.quaternion),this.initQuaternion=new a(),this.angularVelocity=new i(),e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new i(),this.interpolatedPosition=new i(),this.interpolatedQuaternion=new a(),this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new i(),this.invInertia=new i(),this.invInertiaWorld=new o(),this.invMassSolve=0,this.invInertiaSolve=new i(),this.invInertiaWorldSolve=new o(),this.fixedRotation=void 0!==e.fixedRotation&&e.fixedRotation,this.angularDamping=void 0!==e.angularDamping?e.angularDamping:.01,this.aabb=new s(),this.aabbNeedsUpdate=!0,this.wlambda=new i(),e.shape&&this.addShape(e.shape),this.updateMassProperties();}c.prototype=new r(),c.prototype.constructor=c,c.DYNAMIC=1,c.STATIC=2,c.KINEMATIC=4,c.AWAKE=0,c.SLEEPY=1,c.SLEEPING=2,c.idCounter=0,c.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=0,e===c.SLEEPING&&this.dispatchEvent({type:"wakeup"});},c.prototype.sleep=function(){this.sleepState=c.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0);},c.sleepyEvent={type:"sleepy"},c.sleepEvent={type:"sleep"},c.prototype.sleepTick=function(e){if(this.allowSleep){var t=this.sleepState,n=this.velocity.norm2()+this.angularVelocity.norm2(),r=Math.pow(this.sleepSpeedLimit,2);t===c.AWAKE&&n<r?(this.sleepState=c.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(c.sleepyEvent)):t===c.SLEEPY&&n>r?this.wakeUp():t===c.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(c.sleepEvent));}},c.prototype.updateSolveMassProperties=function(){this.sleepState===c.SLEEPING||this.type===c.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld));},c.prototype.pointToLocalFrame=function(e,t){return t=t||new i(),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t;},c.prototype.vectorToLocalFrame=function(e,t){return t=t||new i(),this.quaternion.conjugate().vmult(e,t),t;},c.prototype.pointToWorldFrame=function(e,t){return t=t||new i(),this.quaternion.vmult(e,t),t.vadd(this.position,t),t;},c.prototype.vectorToWorldFrame=function(e,t){return t=t||new i(),this.quaternion.vmult(e,t),t;};var l=new i(),p=new a();c.prototype.addShape=function(e,t,n){var r=new i(),o=new a();return t&&r.copy(t),n&&o.copy(n),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,this;},c.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=this.shapeOffsets,n=e.length,r=0,i=0;i!==n;i++){var o=e[i];o.updateBoundingSphereRadius();var a=t[i].norm(),s=o.boundingSphereRadius;a+s>r&&(r=a+s);}this.boundingRadius=r;};var d=new s();c.prototype.computeAABB=function(){for(var e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,r=e.length,i=l,o=p,a=this.quaternion,s=this.aabb,u=d,c=0;c!==r;c++){var h=e[c];n[c].mult(a,o),o.vmult(t[c],i),i.vadd(this.position,i),h.calculateWorldAABB(i,o,u.lowerBound,u.upperBound),0===c?s.copy(u):s.extend(u);}this.aabbNeedsUpdate=!1;};var h=new o(),f=new o();new o(),c.prototype.updateInertiaWorld=function(e){var t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){var n=h,r=f;n.setRotationFromQuaternion(this.quaternion),n.transpose(r),n.scale(t,n),n.mmult(r,this.invInertiaWorld);}};var m=new i(),y=new i();c.prototype.applyForce=function(e,t){if(this.type===c.DYNAMIC){var n=m;t.vsub(this.position,n);var r=y;n.cross(e,r),this.force.vadd(e,this.force),this.torque.vadd(r,this.torque);}};var g=new i(),v=new i();c.prototype.applyLocalForce=function(e,t){if(this.type===c.DYNAMIC){var n=g,r=v;this.vectorToWorldFrame(e,n),this.pointToWorldFrame(t,r),this.applyForce(n,r);}};var x=new i(),b=new i(),w=new i();c.prototype.applyImpulse=function(e,t){if(this.type===c.DYNAMIC){var n=x;t.vsub(this.position,n);var r=b;r.copy(e),r.mult(this.invMass,r),this.velocity.vadd(r,this.velocity);var i=w;n.cross(e,i),this.invInertiaWorld.vmult(i,i),this.angularVelocity.vadd(i,this.angularVelocity);}};var S=new i(),M=new i();c.prototype.applyLocalImpulse=function(e,t){if(this.type===c.DYNAMIC){var n=S,r=M;this.vectorToWorldFrame(e,n),this.pointToWorldFrame(t,r),this.applyImpulse(n,r);}};var _=new i();c.prototype.updateMassProperties=function(){var e=_;this.invMass=this.mass>0?1/this.mass:0;var t=this.inertia,n=this.fixedRotation;this.computeAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),u.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0);},c.prototype.getVelocityAtWorldPoint=function(e,t){var n=new i();return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t;};},{"../collision/AABB":3,"../material/Material":25,"../math/Mat3":27,"../math/Quaternion":28,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Shape":43,"../utils/EventTarget":49}],32:[function(e,t,n){e("./Body");var r=e("../math/Vec3"),i=e("../math/Quaternion"),o=(e("../collision/RaycastResult"),e("../collision/Ray")),a=e("../objects/WheelInfo");function s(e){this.chassisBody=e.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=void 0!==e.indexRightAxis?e.indexRightAxis:1,this.indexForwardAxis=void 0!==e.indexForwardAxis?e.indexForwardAxis:0,this.indexUpAxis=void 0!==e.indexUpAxis?e.indexUpAxis:2;}t.exports=s,new r(),new r(),new r();var u=new r(),c=new r(),l=new r();new o(),s.prototype.addWheel=function(e){var t=new a(e=e||{}),n=this.wheelInfos.length;return this.wheelInfos.push(t),n;},s.prototype.setSteeringValue=function(e,t){this.wheelInfos[t].steering=e;},new r(),s.prototype.applyEngineForce=function(e,t){this.wheelInfos[t].engineForce=e;},s.prototype.setBrake=function(e,t){this.wheelInfos[t].brake=e;},s.prototype.addToWorld=function(e){this.constraints,e.add(this.chassisBody);var t=this;this.preStepCallback=function(){t.updateVehicle(e.dt);},e.addEventListener("preStep",this.preStepCallback),this.world=e;},s.prototype.getVehicleAxisWorld=function(e,t){t.set(0===e?1:0,1===e?1:0,2===e?1:0),this.chassisBody.vectorToWorldFrame(t,t);},s.prototype.updateVehicle=function(e){for(var t=this.wheelInfos,n=t.length,i=this.chassisBody,o=0;o<n;o++){this.updateWheelTransform(o);}this.currentVehicleSpeedKmHour=3.6*i.velocity.norm();var a=new r();for(this.getVehicleAxisWorld(this.indexForwardAxis,a),a.dot(i.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1),o=0;o<n;o++){this.castRay(t[o]);}this.updateSuspension(e);var s=new r(),u=new r();for(o=0;o<n;o++){var c=(h=t[o]).suspensionForce;c>h.maxSuspensionForce&&(c=h.maxSuspensionForce),h.raycastResult.hitNormalWorld.scale(c*e,s),h.raycastResult.hitPointWorld.vsub(i.position,u),i.applyImpulse(s,h.raycastResult.hitPointWorld);}this.updateFriction(e);var l=new r(),p=new r(),d=new r();for(o=0;o<n;o++){var h=t[o];i.getVelocityAtWorldPoint(h.chassisConnectionPointWorld,d);var f=1;switch(this.indexUpAxis){case 1:f=-1;}if(h.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,p);var m=p.dot(h.raycastResult.hitNormalWorld);h.raycastResult.hitNormalWorld.scale(m,l),p.vsub(l,p);var y=p.dot(d);h.deltaRotation=f*y*e/h.radius;}!h.sliding&&h.isInContact||0===h.engineForce||!h.useCustomSlidingRotationalSpeed||(h.deltaRotation=(h.engineForce>0?1:-1)*h.customSlidingRotationalSpeed*e),Math.abs(h.brake)>Math.abs(h.engineForce)&&(h.deltaRotation=0),h.rotation+=h.deltaRotation,h.deltaRotation*=.99;}},s.prototype.updateSuspension=function(e){for(var t=this.chassisBody.mass,n=this.wheelInfos,r=n.length,i=0;i<r;i++){var o=n[i];if(o.isInContact){var a,s=o.suspensionRestLength-o.suspensionLength;a=o.suspensionStiffness*s*o.clippedInvContactDotSuspension;var u=o.suspensionRelativeVelocity;a-=(u<0?o.dampingCompression:o.dampingRelaxation)*u,o.suspensionForce=a*t,o.suspensionForce<0&&(o.suspensionForce=0);}else o.suspensionForce=0;}},s.prototype.removeFromWorld=function(e){this.constraints,e.remove(this.chassisBody),e.removeEventListener("preStep",this.preStepCallback),this.world=null;};var p=new r(),d=new r();s.prototype.castRay=function(e){var t=p,n=d;this.updateWheelTransformWorld(e);var i=this.chassisBody,o=-1,a=e.suspensionRestLength+e.radius;e.directionWorld.scale(a,t);var s=e.chassisConnectionPointWorld;s.vadd(t,n);var u=e.raycastResult;u.reset();var c=i.collisionResponse;i.collisionResponse=!1,this.world.rayTest(s,n,u),i.collisionResponse=c;var l=u.body;if(e.raycastResult.groundObject=0,l){o=u.distance,e.raycastResult.hitNormalWorld=u.hitNormalWorld,e.isInContact=!0;var h=u.distance;e.suspensionLength=h-e.radius;var f=e.suspensionRestLength-e.maxSuspensionTravel,m=e.suspensionRestLength+e.maxSuspensionTravel;e.suspensionLength<f&&(e.suspensionLength=f),e.suspensionLength>m&&(e.suspensionLength=m,e.raycastResult.reset());var y=e.raycastResult.hitNormalWorld.dot(e.directionWorld),g=new r();i.getVelocityAtWorldPoint(e.raycastResult.hitPointWorld,g);var v=e.raycastResult.hitNormalWorld.dot(g);if(y>=-.1)e.suspensionRelativeVelocity=0,e.clippedInvContactDotSuspension=10;else{var x=-1/y;e.suspensionRelativeVelocity=v*x,e.clippedInvContactDotSuspension=x;}}else e.suspensionLength=e.suspensionRestLength+0*e.maxSuspensionTravel,e.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.raycastResult.hitNormalWorld),e.clippedInvContactDotSuspension=1;return o;},s.prototype.updateWheelTransformWorld=function(e){e.isInContact=!1;var t=this.chassisBody;t.pointToWorldFrame(e.chassisConnectionPointLocal,e.chassisConnectionPointWorld),t.vectorToWorldFrame(e.directionLocal,e.directionWorld),t.vectorToWorldFrame(e.axleLocal,e.axleWorld);},s.prototype.updateWheelTransform=function(e){var t=u,n=c,r=l,o=this.wheelInfos[e];this.updateWheelTransformWorld(o),o.directionLocal.scale(-1,t),n.copy(o.axleLocal),t.cross(n,r),r.normalize(),n.normalize();var a=o.steering,s=new i();s.setFromAxisAngle(t,a);var p=new i();p.setFromAxisAngle(n,o.rotation);var d=o.worldTransform.quaternion;this.chassisBody.quaternion.mult(s,d),d.mult(p,d),d.normalize();var h=o.worldTransform.position;h.copy(o.directionWorld),h.scale(o.suspensionLength,h),h.vadd(o.chassisConnectionPointWorld,h);};var h=[new r(1,0,0),new r(0,1,0),new r(0,0,1)];s.prototype.getWheelTransformWorld=function(e){return this.wheelInfos[e].worldTransform;};var f=new r(),m=[],y=[];s.prototype.updateFriction=function(e){for(var t=f,n=this.wheelInfos,i=n.length,o=this.chassisBody,a=y,s=m,u=0;u<i;u++){d=(A=n[u]).raycastResult.body,A.sideImpulse=0,A.forwardImpulse=0,a[u]||(a[u]=new r()),s[u]||(s[u]=new r());}for(u=0;u<i;u++){if(d=(A=n[u]).raycastResult.body){var c=s[u];this.getWheelTransformWorld(u).vectorToWorldFrame(h[this.indexRightAxis],c);var l=A.raycastResult.hitNormalWorld,p=c.dot(l);l.scale(p,t),c.vsub(t,c),c.normalize(),l.cross(c,a[u]),a[u].normalize(),A.sideImpulse=D(o,A.raycastResult.hitPointWorld,d,A.raycastResult.hitPointWorld,c),A.sideImpulse*=1;}}for(this.sliding=!1,u=0;u<i;u++){var d=(A=n[u]).raycastResult.body,g=0;if(A.slipInfo=1,d){var v=A.brake?A.brake:0;g=b(o,d,A.raycastResult.hitPointWorld,a[u],v);var x=v/(g+=A.engineForce*e);A.slipInfo*=x;}if(A.forwardImpulse=0,A.skidInfo=1,d){A.skidInfo=1;var w=A.suspensionForce*e*A.frictionSlip,S=w*w;A.forwardImpulse=g;var M=.5*A.forwardImpulse,_=1*A.sideImpulse,E=M*M+_*_;A.sliding=!1,E>S&&(this.sliding=!0,A.sliding=!0,x=w/Math.sqrt(E),A.skidInfo*=x);}}if(this.sliding)for(u=0;u<i;u++){0!==(A=n[u]).sideImpulse&&A.skidInfo<1&&(A.forwardImpulse*=A.skidInfo,A.sideImpulse*=A.skidInfo);}for(u=0;u<i;u++){var A=n[u],T=new r();if(T.copy(A.raycastResult.hitPointWorld),0!==A.forwardImpulse){var N=new r();a[u].scale(A.forwardImpulse,N),o.applyImpulse(N,T);}if(0!==A.sideImpulse){d=A.raycastResult.body;var C=new r();C.copy(A.raycastResult.hitPointWorld);var R=new r();s[u].scale(A.sideImpulse,R),o.pointToLocalFrame(T,T),T["xyz"[this.indexUpAxis]]*=A.rollInfluence,o.pointToWorldFrame(T,T),o.applyImpulse(R,T),R.scale(-1,R),d.applyImpulse(R,C);}}};var g=new r(),v=new r(),x=new r();function b(e,t,n,r,i){var o=0,a=n,s=g,u=v,c=x;return e.getVelocityAtWorldPoint(a,s),t.getVelocityAtWorldPoint(a,u),s.vsub(u,c),i<(o=-r.dot(c)*(1/(E(e,n,r)+E(t,n,r))))&&(o=i),o<-i&&(o=-i),o;}var w=new r(),S=new r(),M=new r(),_=new r();function E(e,t,n){var r=w,i=S,o=M,a=_;return t.vsub(e.position,r),r.cross(n,i),e.invInertiaWorld.vmult(i,a),a.cross(r,o),e.invMass+n.dot(o);}var A=new r(),T=new r(),N=new r();function D(e,t,n,r,i,o){if(i.norm2()>1.1)return 0;var a=A,s=T,u=N;return e.getVelocityAtWorldPoint(t,a),n.getVelocityAtWorldPoint(r,s),a.vsub(s,u),-.2*i.dot(u)*(1/(e.invMass+n.invMass));}},{"../collision/Ray":9,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Vec3":30,"../objects/WheelInfo":36,"./Body":31}],33:[function(e,t,n){var r=e("./Body"),i=e("../shapes/Sphere"),o=e("../shapes/Box"),a=e("../math/Vec3"),s=e("../constraints/HingeConstraint");function u(e){if(this.wheelBodies=[],this.coordinateSystem=void 0===e.coordinateSystem?new a(1,2,3):e.coordinateSystem.clone(),this.chassisBody=e.chassisBody,!this.chassisBody){var t=new o(new a(5,2,.5));this.chassisBody=new r(1,t);}this.constraints=[],this.wheelAxes=[],this.wheelForces=[];}t.exports=u,u.prototype.addWheel=function(e){var t=(e=e||{}).body;t||(t=new r(1,new i(1.2))),this.wheelBodies.push(t),this.wheelForces.push(0),new a();var n=void 0!==e.position?e.position.clone():new a(),o=new a();this.chassisBody.pointToWorldFrame(n,o),t.position.set(o.x,o.y,o.z);var u=void 0!==e.axis?e.axis.clone():new a(0,1,0);this.wheelAxes.push(u);var c=new s(this.chassisBody,t,{pivotA:n,axisA:u,pivotB:a.ZERO,axisB:u,collideConnected:!1});return this.constraints.push(c),this.wheelBodies.length-1;},u.prototype.setSteeringValue=function(e,t){var n=this.wheelAxes[t],r=Math.cos(e),i=Math.sin(e),o=n.x,a=n.y;this.constraints[t].axisA.set(r*o-i*a,i*o+r*a,0);},u.prototype.setMotorSpeed=function(e,t){var n=this.constraints[t];n.enableMotor(),n.motorTargetVelocity=e;},u.prototype.disableMotor=function(e){this.constraints[e].disableMotor();};var c=new a();u.prototype.setWheelForce=function(e,t){this.wheelForces[t]=e;},u.prototype.applyWheelForce=function(e,t){var n=this.wheelAxes[t],r=this.wheelBodies[t],i=r.torque;n.scale(e,c),r.vectorToWorldFrame(c,c),i.vadd(c,i);},u.prototype.addToWorld=function(e){for(var t=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),r=0;r<n.length;r++){e.add(n[r]);}for(r=0;r<t.length;r++){e.addConstraint(t[r]);}e.addEventListener("preStep",this._update.bind(this));},u.prototype._update=function(){for(var e=this.wheelForces,t=0;t<e.length;t++){this.applyWheelForce(e[t],t);}},u.prototype.removeFromWorld=function(e){for(var t=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),r=0;r<n.length;r++){e.remove(n[r]);}for(r=0;r<t.length;r++){e.removeConstraint(t[r]);}};var l=new a();u.prototype.getWheelSpeed=function(e){var t=this.wheelAxes[e],n=this.wheelBodies[e].angularVelocity;return this.chassisBody.vectorToWorldFrame(t,l),n.dot(l);};},{"../constraints/HingeConstraint":15,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Sphere":44,"./Body":31}],34:[function(e,t,n){t.exports=i,e("../shapes/Shape");var r=e("../math/Vec3");function i(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[];}e("../math/Quaternion"),e("../shapes/Particle"),e("../objects/Body"),e("../material/Material"),i.prototype.add=function(e){this.particles.push(e),this.neighbors.length<this.particles.length&&this.neighbors.push([]);},i.prototype.remove=function(e){var t=this.particles.indexOf(e);-1!==t&&(this.particles.splice(t,1),this.neighbors.length>this.particles.length&&this.neighbors.pop());};var o=new r();i.prototype.getNeighbors=function(e,t){for(var n=this.particles.length,r=e.id,i=this.smoothingRadius*this.smoothingRadius,a=o,s=0;s!==n;s++){var u=this.particles[s];u.position.vsub(e.position,a),r!==u.id&&a.norm2()<i&&t.push(u);}};var a=new r(),s=new r(),u=new r(),c=new r(),l=new r(),p=new r();i.prototype.update=function(){for(var e=this.particles.length,t=a,n=this.speedOfSound,r=this.eps,i=0;i!==e;i++){var o=this.particles[i];(_=this.neighbors[i]).length=0,this.getNeighbors(o,_),_.push(this.particles[i]);for(var d=_.length,h=0,f=0;f!==d;f++){o.position.vsub(_[f].position,t);var m=t.norm(),y=this.w(m);h+=_[f].mass*y;}this.densities[i]=h,this.pressures[i]=n*n*(this.densities[i]-this.density);}var g=s,v=u,x=c,b=l,w=p;for(i=0;i!==e;i++){var S,M,_,E=this.particles[i];for(g.set(0,0,0),v.set(0,0,0),d=(_=this.neighbors[i]).length,f=0;f!==d;f++){var A=_[f];E.position.vsub(A.position,b);var T=b.norm();S=-A.mass*(this.pressures[i]/(this.densities[i]*this.densities[i]+r)+this.pressures[f]/(this.densities[f]*this.densities[f]+r)),this.gradw(b,x),x.mult(S,x),g.vadd(x,g),A.velocity.vsub(E.velocity,w),w.mult(1/(1e-4+this.densities[i]*this.densities[f])*this.viscosity*A.mass,w),M=this.nablaw(T),w.mult(M,w),v.vadd(w,v);}v.mult(E.mass,v),g.mult(E.mass,g),E.force.vadd(v,E.force),E.force.vadd(g,E.force);}},i.prototype.w=function(e){var t=this.smoothingRadius;return 315/(64*Math.PI*Math.pow(t,9))*Math.pow(t*t-e*e,3);},i.prototype.gradw=function(e,t){var n=e.norm(),r=this.smoothingRadius;e.mult(945/(32*Math.PI*Math.pow(r,9))*Math.pow(r*r-n*n,2),t);},i.prototype.nablaw=function(e){var t=this.smoothingRadius;return 945/(32*Math.PI*Math.pow(t,9))*(t*t-e*e)*(7*e*e-3*t*t);};},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Particle":41,"../shapes/Shape":43}],35:[function(e,t,n){var r=e("../math/Vec3");function i(e,t,n){n=n||{},this.restLength="number"==typeof n.restLength?n.restLength:1,this.stiffness=n.stiffness||100,this.damping=n.damping||1,this.bodyA=e,this.bodyB=t,this.localAnchorA=new r(),this.localAnchorB=new r(),n.localAnchorA&&this.localAnchorA.copy(n.localAnchorA),n.localAnchorB&&this.localAnchorB.copy(n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB);}t.exports=i,i.prototype.setWorldAnchorA=function(e){this.bodyA.pointToLocalFrame(e,this.localAnchorA);},i.prototype.setWorldAnchorB=function(e){this.bodyB.pointToLocalFrame(e,this.localAnchorB);},i.prototype.getWorldAnchorA=function(e){this.bodyA.pointToWorldFrame(this.localAnchorA,e);},i.prototype.getWorldAnchorB=function(e){this.bodyB.pointToWorldFrame(this.localAnchorB,e);};var o=new r(),a=new r(),s=new r(),u=new r(),c=new r(),l=new r(),p=new r(),d=new r(),h=new r(),f=new r(),m=new r();i.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,n=this.restLength,r=this.bodyA,i=this.bodyB,y=o,g=a,v=s,x=u,b=m,w=c,S=l,M=p,_=d,E=h,A=f;this.getWorldAnchorA(w),this.getWorldAnchorB(S),w.vsub(r.position,M),S.vsub(i.position,_),S.vsub(w,y);var T=y.norm();g.copy(y),g.normalize(),i.velocity.vsub(r.velocity,v),i.angularVelocity.cross(_,b),v.vadd(b,v),r.angularVelocity.cross(M,b),v.vsub(b,v),g.mult(-e*(T-n)-t*v.dot(g),x),r.force.vsub(x,r.force),i.force.vadd(x,i.force),M.cross(x,E),_.cross(x,A),r.torque.vsub(E,r.torque),i.torque.vadd(A,i.torque);};},{"../math/Vec3":30}],36:[function(e,t,n){var r=e("../math/Vec3"),i=e("../math/Transform"),o=e("../collision/RaycastResult"),a=e("../utils/Utils");function s(e){e=a.defaults(e,{chassisConnectionPointLocal:new r(),chassisConnectionPointWorld:new r(),directionLocal:new r(),directionWorld:new r(),axleLocal:new r(),axleWorld:new r(),suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=e.maxSuspensionTravel,this.customSlidingRotationalSpeed=e.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=e.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=e.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=e.chassisConnectionPointWorld.clone(),this.directionLocal=e.directionLocal.clone(),this.directionWorld=e.directionWorld.clone(),this.axleLocal=e.axleLocal.clone(),this.axleWorld=e.axleWorld.clone(),this.suspensionRestLength=e.suspensionRestLength,this.suspensionMaxLength=e.suspensionMaxLength,this.radius=e.radius,this.suspensionStiffness=e.suspensionStiffness,this.dampingCompression=e.dampingCompression,this.dampingRelaxation=e.dampingRelaxation,this.frictionSlip=e.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=e.rollInfluence,this.maxSuspensionForce=e.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=e.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new o(),this.worldTransform=new i(),this.isInContact=!1;}t.exports=s;var u=new r(),c=new r();u=new r(),s.prototype.updateWheel=function(e){var t=this.raycastResult;if(this.isInContact){var n=t.hitNormalWorld.dot(t.directionWorld);t.hitPointWorld.vsub(e.position,c),e.getVelocityAtWorldPoint(c,u);var r=t.hitNormalWorld.dot(u);if(n>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{var i=-1/n;this.suspensionRelativeVelocity=r*i,this.clippedInvContactDotSuspension=i;}}else t.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.hitNormalWorld),this.clippedInvContactDotSuspension=1;};},{"../collision/RaycastResult":10,"../math/Transform":29,"../math/Vec3":30,"../utils/Utils":53}],37:[function(e,t,n){t.exports=a;var r=e("./Shape"),i=e("../math/Vec3"),o=e("./ConvexPolyhedron");function a(e){r.call(this),this.type=r.types.BOX,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius();}a.prototype=new r(),a.prototype.constructor=a,a.prototype.updateConvexPolyhedronRepresentation=function(){var e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,r=i,a=[new r(-e,-t,-n),new r(e,-t,-n),new r(e,t,-n),new r(-e,t,-n),new r(-e,-t,n),new r(e,-t,n),new r(e,t,n),new r(-e,t,n)],s=(new r(0,0,1),new r(0,1,0),new r(1,0,0),new o(a,[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]]));this.convexPolyhedronRepresentation=s,s.material=this.material;},a.prototype.calculateLocalInertia=function(e,t){return t=t||new i(),a.calculateInertia(this.halfExtents,e,t),t;},a.calculateInertia=function(e,t,n){var r=e;n.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),n.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),n.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x);},a.prototype.getSideNormals=function(e,t){var n=e,r=this.halfExtents;if(n[0].set(r.x,0,0),n[1].set(0,r.y,0),n[2].set(0,0,r.z),n[3].set(-r.x,0,0),n[4].set(0,-r.y,0),n[5].set(0,0,-r.z),void 0!==t)for(var i=0;i!==n.length;i++){t.vmult(n[i],n[i]);}return n;},a.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z;},a.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm();};var s=new i();new i(),a.prototype.forEachWorldCorner=function(e,t,n){for(var r=this.halfExtents,i=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]],o=0;o<i.length;o++){s.set(i[o][0],i[o][1],i[o][2]),t.vmult(s,s),e.vadd(s,s),n(s.x,s.y,s.z);}};var u=[new i(),new i(),new i(),new i(),new i(),new i(),new i(),new i()];a.prototype.calculateWorldAABB=function(e,t,n,r){var i=this.halfExtents;u[0].set(i.x,i.y,i.z),u[1].set(-i.x,i.y,i.z),u[2].set(-i.x,-i.y,i.z),u[3].set(-i.x,-i.y,-i.z),u[4].set(i.x,-i.y,-i.z),u[5].set(i.x,i.y,-i.z),u[6].set(-i.x,i.y,-i.z),u[7].set(i.x,-i.y,i.z);var o=u[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),n.copy(o);for(var a=1;a<8;a++){o=u[a],t.vmult(o,o),e.vadd(o,o);var s=o.x,c=o.y,l=o.z;s>r.x&&(r.x=s),c>r.y&&(r.y=c),l>r.z&&(r.z=l),s<n.x&&(n.x=s),c<n.y&&(n.y=c),l<n.z&&(n.z=l);}};},{"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],38:[function(e,t,n){t.exports=a;var r=e("./Shape"),i=e("../math/Vec3"),o=(e("../math/Quaternion"),e("../math/Transform"));function a(e,t,n){r.call(this),this.type=r.types.CONVEXPOLYHEDRON,this.vertices=e||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=t||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=n?n.slice():null,this.computeEdges(),this.updateBoundingSphereRadius();}a.prototype=new r(),a.prototype.constructor=a;var s=new i();a.prototype.computeEdges=function(){var e=this.faces,t=this.vertices,n=(t.length,this.uniqueEdges);n.length=0;for(var r=s,i=0;i!==e.length;i++){for(var o=e[i],a=o.length,u=0;u!==a;u++){var c=(u+1)%a;t[o[u]].vsub(t[o[c]],r),r.normalize();for(var l=!1,p=0;p!==n.length;p++){if(n[p].almostEquals(r)||n[p].almostEquals(r)){l=!0;break;}}l||n.push(r.clone());}}},a.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var e=0;e<this.faces.length;e++){for(var t=0;t<this.faces[e].length;t++){if(!this.vertices[this.faces[e][t]])throw new Error("Vertex "+this.faces[e][t]+" not found!");}var n=this.faceNormals[e]||new i();this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;var r=this.vertices[this.faces[e][0]];if(n.dot(r)<0)for(console.error(".faceNormals["+e+"] = Vec3("+n.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule."),t=0;t<this.faces[e].length;t++){console.warn(".vertices["+this.faces[e][t]+"] = Vec3("+this.vertices[this.faces[e][t]].toString()+")");}}};var u=new i(),c=new i();a.computeNormal=function(e,t,n,r){t.vsub(e,c),n.vsub(t,u),u.cross(c,r),r.isZero()||r.normalize();},a.prototype.getFaceNormal=function(e,t){var n=this.faces[e],r=this.vertices[n[0]],i=this.vertices[n[1]],o=this.vertices[n[2]];return a.computeNormal(r,i,o,t);};var l=new i();a.prototype.clipAgainstHull=function(e,t,n,r,o,a,s,u,c){for(var p=l,d=-1,h=-Number.MAX_VALUE,f=0;f<n.faces.length;f++){p.copy(n.faceNormals[f]),o.vmult(p,p);var m=p.dot(a);m>h&&(h=m,d=f);}for(var y=[],g=n.faces[d],v=g.length,x=0;x<v;x++){var b=n.vertices[g[x]],w=new i();w.copy(b),o.vmult(w,w),r.vadd(w,w),y.push(w);}d>=0&&this.clipFaceAgainstHull(a,e,t,y,s,u,c);};var p=new i(),d=new i(),h=new i(),f=new i(),m=new i(),y=new i();a.prototype.findSeparatingAxis=function(e,t,n,r,i,o,a,s){var u=p,c=d,l=h,g=f,v=m,x=y,b=Number.MAX_VALUE;if(this.uniqueAxes)for(S=0;S!==this.uniqueAxes.length;S++){if(n.vmult(this.uniqueAxes[S],u),!1===(E=this.testSepAxis(u,e,t,n,r,i)))return!1;E<b&&(b=E,o.copy(u));}else for(var w=a?a.length:this.faces.length,S=0;S<w;S++){var M=a?a[S]:S;if(u.copy(this.faceNormals[M]),n.vmult(u,u),!1===(E=this.testSepAxis(u,e,t,n,r,i)))return!1;E<b&&(b=E,o.copy(u));}if(e.uniqueAxes)for(S=0;S!==e.uniqueAxes.length;S++){if(i.vmult(e.uniqueAxes[S],c),!1===(E=this.testSepAxis(c,e,t,n,r,i)))return!1;E<b&&(b=E,o.copy(c));}else for(var _=s?s.length:e.faces.length,S=0;S<_;S++){var E;if(M=s?s[S]:S,c.copy(e.faceNormals[M]),i.vmult(c,c),!1===(E=this.testSepAxis(c,e,t,n,r,i)))return!1;E<b&&(b=E,o.copy(c));}for(var A=0;A!==this.uniqueEdges.length;A++){n.vmult(this.uniqueEdges[A],g);for(var T=0;T!==e.uniqueEdges.length;T++){if(i.vmult(e.uniqueEdges[T],v),g.cross(v,x),!x.almostZero()){x.normalize();var N=this.testSepAxis(x,e,t,n,r,i);if(!1===N)return!1;N<b&&(b=N,o.copy(x));}}}return r.vsub(t,l),l.dot(o)>0&&o.negate(o),!0;};var g=[],v=[];a.prototype.testSepAxis=function(e,t,n,r,i,o){a.project(this,e,n,r,g),a.project(t,e,i,o,v);var s=g[0],u=g[1],c=v[0],l=v[1];if(s<l||c<u)return!1;var p=s-l,d=c-u;return p<d?p:d;};var x=new i(),b=new i();a.prototype.calculateLocalInertia=function(e,t){this.computeLocalAABB(x,b);var n=b.x-x.x,r=b.y-x.y,i=b.z-x.z;t.x=1/12*e*(2*r*2*r+2*i*2*i),t.y=1/12*e*(2*n*2*n+2*i*2*i),t.z=1/12*e*(2*r*2*r+2*n*2*n);},a.prototype.getPlaneConstantOfFace=function(e){var t=this.faces[e],n=this.faceNormals[e],r=this.vertices[t[0]];return-n.dot(r);};var w=new i(),S=new i(),M=new i(),_=new i(),E=new i(),A=new i(),T=new i(),N=new i();a.prototype.clipFaceAgainstHull=function(e,t,n,r,i,o,a){for(var s=w,u=S,c=M,l=_,p=E,d=A,h=T,f=N,m=r,y=[],g=-1,v=Number.MAX_VALUE,x=0;x<this.faces.length;x++){s.copy(this.faceNormals[x]),n.vmult(s,s);var b=s.dot(e);b<v&&(v=b,g=x);}if(!(g<0)){var D=this.faces[g];D.connectedFaces=[];for(var C=0;C<this.faces.length;C++){for(var R=0;R<this.faces[C].length;R++){-1!==D.indexOf(this.faces[C][R])&&C!==g&&-1===D.connectedFaces.indexOf(C)&&D.connectedFaces.push(C);}}m.length;for(var P=D.length,O=0;O<P;O++){var L=this.vertices[D[O]],I=this.vertices[D[(O+1)%P]];L.vsub(I,u),c.copy(u),n.vmult(c,c),t.vadd(c,c),l.copy(this.faceNormals[g]),n.vmult(l,l),t.vadd(l,l),c.cross(l,p),p.negate(p),d.copy(L),n.vmult(d,d),t.vadd(d,d),d.dot(p);var B=D.connectedFaces[O];h.copy(this.faceNormals[B]);var F=this.getPlaneConstantOfFace(B);f.copy(h),n.vmult(f,f);var z=F-f.dot(t);for(this.clipFaceAgainstPlane(m,y,f,z);m.length;){m.shift();}for(;y.length;){m.push(y.shift());}}for(h.copy(this.faceNormals[g]),F=this.getPlaneConstantOfFace(g),f.copy(h),n.vmult(f,f),z=F-f.dot(t),C=0;C<m.length;C++){var k=f.dot(m[C])+z;if(k<=i&&(console.log("clamped: depth="+k+" to minDist="+i),k=i),k<=o){var U=m[C];if(k<=0){var j={point:U,normal:f,depth:k};a.push(j);}}}}},a.prototype.clipFaceAgainstPlane=function(e,t,n,r){var o,a,s=e.length;if(s<2)return t;var u=e[e.length-1],c=e[0];o=n.dot(u)+r;for(var l=0;l<s;l++){if(c=e[l],a=n.dot(c)+r,o<0){if(a<0)(p=new i()).copy(c),t.push(p);else{var p=new i();u.lerp(c,o/(o-a),p),t.push(p);}}else a<0&&(p=new i(),u.lerp(c,o/(o-a),p),t.push(p),t.push(c));u=c,o=a;}return t;},a.prototype.computeWorldVertices=function(e,t){for(var n=this.vertices.length;this.worldVertices.length<n;){this.worldVertices.push(new i());}for(var r=this.vertices,o=this.worldVertices,a=0;a!==n;a++){t.vmult(r[a],o[a]),e.vadd(o[a],o[a]);}this.worldVerticesNeedsUpdate=!1;},new i(),a.prototype.computeLocalAABB=function(e,t){var n=this.vertices.length,r=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<n;i++){var o=r[i];o.x<e.x?e.x=o.x:o.x>t.x&&(t.x=o.x),o.y<e.y?e.y=o.y:o.y>t.y&&(t.y=o.y),o.z<e.z?e.z=o.z:o.z>t.z&&(t.z=o.z);}},a.prototype.computeWorldFaceNormals=function(e){for(var t=this.faceNormals.length;this.worldFaceNormals.length<t;){this.worldFaceNormals.push(new i());}for(var n=this.faceNormals,r=this.worldFaceNormals,o=0;o!==t;o++){e.vmult(n[o],r[o]);}this.worldFaceNormalsNeedsUpdate=!1;},a.prototype.updateBoundingSphereRadius=function(){for(var e=0,t=this.vertices,n=0,r=t.length;n!==r;n++){var i=t[n].norm2();i>e&&(e=i);}this.boundingSphereRadius=Math.sqrt(e);};var D=new i();a.prototype.calculateWorldAABB=function(e,t,n,r){for(var i,o,a,s,u,c,l=this.vertices.length,p=this.vertices,d=0;d<l;d++){D.copy(p[d]),t.vmult(D,D),e.vadd(D,D);var h=D;h.x<i||void 0===i?i=h.x:(h.x>s||void 0===s)&&(s=h.x),h.y<o||void 0===o?o=h.y:(h.y>u||void 0===u)&&(u=h.y),h.z<a||void 0===a?a=h.z:(h.z>c||void 0===c)&&(c=h.z);}n.set(i,o,a),r.set(s,u,c);},a.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3;},a.prototype.getAveragePointLocal=function(e){e=e||new i();for(var t=this.vertices.length,n=this.vertices,r=0;r<t;r++){e.vadd(n[r],e);}return e.mult(1/t,e),e;},a.prototype.transformAllPoints=function(e,t){var n=this.vertices.length,r=this.vertices;if(t){for(var i=0;i<n;i++){var o=r[i];t.vmult(o,o);}for(i=0;i<this.faceNormals.length;i++){o=this.faceNormals[i],t.vmult(o,o);}}if(e)for(i=0;i<n;i++){(o=r[i]).vadd(e,o);}};var C=new i(),R=new i(),P=new i();a.prototype.pointIsInside=function(e){var t=this.vertices.length,n=this.vertices,r=this.faces,i=this.faceNormals,o=this.faces.length,a=C;this.getAveragePointLocal(a);for(var s=0;s<o;s++){this.faces[s].length,t=i[s];var u=n[r[s][0]],c=R;e.vsub(u,c);var l=t.dot(c),p=P;a.vsub(u,p);var d=t.dot(p);if(l<0&&d>0||l>0&&d<0)return!1;}return-1;},new i();var O=new i(),L=new i();a.project=function(e,t,n,r,i){var a=e.vertices.length,s=O,u=0,c=0,l=L,p=e.vertices;l.setZero(),o.vectorToLocalFrame(n,r,t,s),o.pointToLocalFrame(n,r,l,l);var d=l.dot(s);c=u=p[0].dot(s);for(var h=1;h<a;h++){var f=p[h].dot(s);f>u&&(u=f),f<c&&(c=f);}if((c-=d)>(u-=d)){var m=c;c=u,u=m;}i[0]=u,i[1]=c;};},{"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"./Shape":43}],39:[function(e,t,n){t.exports=a;var r=e("./Shape"),i=e("../math/Vec3"),o=(e("../math/Quaternion"),e("./ConvexPolyhedron"));function a(e,t,n,a){var s=a,u=[],c=[],l=[],p=[],d=[],h=Math.cos,f=Math.sin;u.push(new i(t*h(0),t*f(0),.5*-n)),p.push(0),u.push(new i(e*h(0),e*f(0),.5*n)),d.push(1);for(var m=0;m<s;m++){var y=2*Math.PI/s*(m+1),g=2*Math.PI/s*(m+.5);m<s-1?(u.push(new i(t*h(y),t*f(y),.5*-n)),p.push(2*m+2),u.push(new i(e*h(y),e*f(y),.5*n)),d.push(2*m+3),l.push([2*m+2,2*m+3,2*m+1,2*m])):l.push([0,1,2*m+1,2*m]),(s%2==1||m<s/2)&&c.push(new i(h(g),f(g),0));}l.push(d),c.push(new i(0,0,1));var v=[];for(m=0;m<p.length;m++){v.push(p[p.length-m-1]);}l.push(v),this.type=r.types.CONVEXPOLYHEDRON,o.call(this,u,l,c);}a.prototype=new o();},{"../math/Quaternion":28,"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],40:[function(e,t,n){var r=e("./Shape"),i=e("./ConvexPolyhedron"),o=e("../math/Vec3"),a=e("../utils/Utils");function s(e,t){t=a.defaults(t,{maxValue:null,minValue:null,elementSize:1}),this.data=e,this.maxValue=t.maxValue,this.minValue=t.minValue,this.elementSize=t.elementSize,null===t.minValue&&this.updateMinValue(),null===t.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,r.call(this),this.pillarConvex=new i(),this.pillarOffset=new o(),this.type=r.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={};}t.exports=s,s.prototype=new r(),s.prototype.update=function(){this._cachedPillars={};},s.prototype.updateMinValue=function(){for(var e=this.data,t=e[0][0],n=0;n!==e.length;n++){for(var r=0;r!==e[n].length;r++){var i=e[n][r];i<t&&(t=i);}}this.minValue=t;},s.prototype.updateMaxValue=function(){for(var e=this.data,t=e[0][0],n=0;n!==e.length;n++){for(var r=0;r!==e[n].length;r++){var i=e[n][r];i>t&&(t=i);}}this.maxValue=t;},s.prototype.setHeightValueAtIndex=function(e,t,n){this.data[e][t]=n,this.clearCachedConvexTrianglePillar(e,t,!1),e>0&&(this.clearCachedConvexTrianglePillar(e-1,t,!0),this.clearCachedConvexTrianglePillar(e-1,t,!1)),t>0&&(this.clearCachedConvexTrianglePillar(e,t-1,!0),this.clearCachedConvexTrianglePillar(e,t-1,!1)),t>0&&e>0&&this.clearCachedConvexTrianglePillar(e-1,t-1,!0);},s.prototype.getRectMinMax=function(e,t,n,r,i){i=i||[];for(var o=this.data,a=this.minValue,s=e;s<=n;s++){for(var u=t;u<=r;u++){var c=o[s][u];c>a&&(a=c);}}i[0]=this.minValue,i[1]=a;},s.prototype.getIndexOfPosition=function(e,t,n,r){var i=this.elementSize,o=this.data,a=Math.floor(e/i),s=Math.floor(t/i);return n[0]=a,n[1]=s,r&&(a<0&&(a=0),s<0&&(s=0),a>=o.length-1&&(a=o.length-1),s>=o[0].length-1&&(s=o[0].length-1)),!(a<0||s<0||a>=o.length-1||s>=o[0].length-1);},s.prototype.getHeightAt=function(e,t,n){var r=[];this.getIndexOfPosition(e,t,r,n);var i=[];return this.getRectMinMax(r[0],r[1]+1,r[0],r[1]+1,i),(i[0]+i[1])/2;},s.prototype.getCacheConvexTrianglePillarKey=function(e,t,n){return e+"_"+t+"_"+(n?1:0);},s.prototype.getCachedConvexTrianglePillar=function(e,t,n){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)];},s.prototype.setCachedConvexTrianglePillar=function(e,t,n,r,i){this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)]={convex:r,offset:i};},s.prototype.clearCachedConvexTrianglePillar=function(e,t,n){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)];},s.prototype.getConvexTrianglePillar=function(e,t,n){var r=this.pillarConvex,a=this.pillarOffset;if(this.cacheEnabled){if(s=this.getCachedConvexTrianglePillar(e,t,n))return this.pillarConvex=s.convex,void(this.pillarOffset=s.offset);r=new i(),a=new o(),this.pillarConvex=r,this.pillarOffset=a;}var s=this.data,u=this.elementSize,c=r.faces;r.vertices.length=6;for(var l=0;l<6;l++){r.vertices[l]||(r.vertices[l]=new o());}for(c.length=5,l=0;l<5;l++){c[l]||(c[l]=[]);}var p=r.vertices,d=(Math.min(s[e][t],s[e+1][t],s[e][t+1],s[e+1][t+1])-this.minValue)/2+this.minValue;n?(a.set((e+.75)*u,(t+.75)*u,d),p[0].set(.25*u,.25*u,s[e+1][t+1]-d),p[1].set(-.75*u,.25*u,s[e][t+1]-d),p[2].set(.25*u,-.75*u,s[e+1][t]-d),p[3].set(.25*u,.25*u,-d-1),p[4].set(-.75*u,.25*u,-d-1),p[5].set(.25*u,-.75*u,-d-1),c[0][0]=0,c[0][1]=1,c[0][2]=2,c[1][0]=5,c[1][1]=4,c[1][2]=3,c[2][0]=2,c[2][1]=5,c[2][2]=3,c[2][3]=0,c[3][0]=3,c[3][1]=4,c[3][2]=1,c[3][3]=0,c[4][0]=1,c[4][1]=4,c[4][2]=5,c[4][3]=2):(a.set((e+.25)*u,(t+.25)*u,d),p[0].set(-.25*u,-.25*u,s[e][t]-d),p[1].set(.75*u,-.25*u,s[e+1][t]-d),p[2].set(-.25*u,.75*u,s[e][t+1]-d),p[3].set(-.25*u,-.25*u,-d-1),p[4].set(.75*u,-.25*u,-d-1),p[5].set(-.25*u,.75*u,-d-1),c[0][0]=0,c[0][1]=1,c[0][2]=2,c[1][0]=5,c[1][1]=4,c[1][2]=3,c[2][0]=0,c[2][1]=2,c[2][2]=5,c[2][3]=3,c[3][0]=1,c[3][1]=0,c[3][2]=3,c[3][3]=4,c[4][0]=4,c[4][1]=5,c[4][2]=2,c[4][3]=1),r.computeNormals(),r.computeEdges(),r.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(e,t,n,r,a);},s.prototype.calculateLocalInertia=function(e,t){return(t=t||new o()).set(0,0,0),t;},s.prototype.volume=function(){return Number.MAX_VALUE;},s.prototype.calculateWorldAABB=function(e,t,n,r){n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),r.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);},s.prototype.updateBoundingSphereRadius=function(){var e=this.data,t=this.elementSize;this.boundingSphereRadius=new o(e.length*t,e[0].length*t,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).norm();};},{"../math/Vec3":30,"../utils/Utils":53,"./ConvexPolyhedron":38,"./Shape":43}],41:[function(e,t,n){t.exports=o;var r=e("./Shape"),i=e("../math/Vec3");function o(){r.call(this),this.type=r.types.PARTICLE;}o.prototype=new r(),o.prototype.constructor=o,o.prototype.calculateLocalInertia=function(e,t){return(t=t||new i()).set(0,0,0),t;},o.prototype.volume=function(){return 0;},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0;},o.prototype.calculateWorldAABB=function(e,t,n,r){n.copy(e),r.copy(e);};},{"../math/Vec3":30,"./Shape":43}],42:[function(e,t,n){t.exports=o;var r=e("./Shape"),i=e("../math/Vec3");function o(){r.call(this),this.type=r.types.PLANE,this.worldNormal=new i(),this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE;}o.prototype=new r(),o.prototype.constructor=o,o.prototype.computeWorldNormal=function(e){var t=this.worldNormal;t.set(0,0,1),e.vmult(t,t),this.worldNormalNeedsUpdate=!1;},o.prototype.calculateLocalInertia=function(e,t){return t=t||new i();},o.prototype.volume=function(){return Number.MAX_VALUE;};var a=new i();o.prototype.calculateWorldAABB=function(e,t,n,r){a.set(0,0,1),t.vmult(a,a);var i=Number.MAX_VALUE;n.set(-i,-i,-i),r.set(i,i,i),1===a.x&&(r.x=e.x),1===a.y&&(r.y=e.y),1===a.z&&(r.z=e.z),-1===a.x&&(n.x=e.x),-1===a.y&&(n.y=e.y),-1===a.z&&(n.z=e.z);},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=Number.MAX_VALUE;};},{"../math/Vec3":30,"./Shape":43}],43:[function(e,t,n){t.exports=r;var r=e("./Shape");function r(){this.id=r.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null;}e("../math/Vec3"),e("../math/Quaternion"),e("../material/Material"),r.prototype.constructor=r,r.prototype.updateBoundingSphereRadius=function(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type;},r.prototype.volume=function(){throw"volume() not implemented for shape type "+this.type;},r.prototype.calculateLocalInertia=function(e,t){throw"calculateLocalInertia() not implemented for shape type "+this.type;},r.idCounter=0,r.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"./Shape":43}],44:[function(e,t,n){t.exports=o;var r=e("./Shape"),i=e("../math/Vec3");function o(e){if(r.call(this),this.radius=void 0!==e?Number(e):1,this.type=r.types.SPHERE,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius();}o.prototype=new r(),o.prototype.constructor=o,o.prototype.calculateLocalInertia=function(e,t){t=t||new i();var n=2*e*this.radius*this.radius/5;return t.x=n,t.y=n,t.z=n,t;},o.prototype.volume=function(){return 4*Math.PI*this.radius/3;},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius;},o.prototype.calculateWorldAABB=function(e,t,n,r){for(var i=this.radius,o=["x","y","z"],a=0;a<o.length;a++){var s=o[a];n[s]=e[s]-i,r[s]=e[s]+i;}};},{"../math/Vec3":30,"./Shape":43}],45:[function(e,t,n){t.exports=u;var r=e("./Shape"),i=e("../math/Vec3"),o=(e("../math/Quaternion"),e("../math/Transform")),a=e("../collision/AABB"),s=e("../utils/Octree");function u(e,t){r.call(this),this.type=r.types.TRIMESH,this.vertices=new Float32Array(e),this.indices=new Int16Array(t),this.normals=new Float32Array(t.length),this.aabb=new a(),this.edges=null,this.scale=new i(1,1,1),this.tree=new s(),this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree();}u.prototype=new r(),u.prototype.constructor=u;var c=new i();u.prototype.updateTree=function(){var e=this.tree;e.reset(),e.aabb.copy(this.aabb);var t=this.scale;e.aabb.lowerBound.x*=1/t.x,e.aabb.lowerBound.y*=1/t.y,e.aabb.lowerBound.z*=1/t.z,e.aabb.upperBound.x*=1/t.x,e.aabb.upperBound.y*=1/t.y,e.aabb.upperBound.z*=1/t.z;for(var n=new a(),r=new i(),o=new i(),s=new i(),u=[r,o,s],c=0;c<this.indices.length/3;c++){var l=3*c;this._getUnscaledVertex(this.indices[l],r),this._getUnscaledVertex(this.indices[l+1],o),this._getUnscaledVertex(this.indices[l+2],s),n.setFromPoints(u),e.insert(n,c);}e.removeEmptyNodes();};var l=new a();u.prototype.getTrianglesInAABB=function(e,t){l.copy(e);var n=this.scale,r=n.x,i=n.y,o=n.z,a=l.lowerBound,s=l.upperBound;return a.x/=r,a.y/=i,a.z/=o,s.x/=r,s.y/=i,s.z/=o,this.tree.aabbQuery(l,t);},u.prototype.setScale=function(e){var t=this.scale.x===this.scale.y===this.scale.z,n=e.x===e.y===e.z;t&&n||this.updateNormals(),this.scale.copy(e),this.updateAABB(),this.updateBoundingSphereRadius();},u.prototype.updateNormals=function(){for(var e=c,t=this.normals,n=0;n<this.indices.length/3;n++){var r=3*n,i=this.indices[r],o=this.indices[r+1],a=this.indices[r+2];this.getVertex(i,m),this.getVertex(o,y),this.getVertex(a,g),u.computeNormal(y,m,g,e),t[r]=e.x,t[r+1]=e.y,t[r+2]=e.z;}},u.prototype.updateEdges=function(){for(var e={},t=function t(_t2,n){e[i<o?i+"_"+o:o+"_"+i]=!0;},n=0;n<this.indices.length/3;n++){var r=3*n,i=this.indices[r],o=this.indices[r+1];this.indices[r+2],t(),t(),t();}var a=Object.keys(e);for(this.edges=new Int16Array(2*a.length),n=0;n<a.length;n++){var s=a[n].split("_");this.edges[2*n]=parseInt(s[0],10),this.edges[2*n+1]=parseInt(s[1],10);}},u.prototype.getEdgeVertex=function(e,t,n){var r=this.edges[2*e+(t?1:0)];this.getVertex(r,n);};var p=new i(),d=new i();u.prototype.getEdgeVector=function(e,t){var n=p,r=d;this.getEdgeVertex(e,0,n),this.getEdgeVertex(e,1,r),r.vsub(n,t);};var h=new i(),f=new i();u.computeNormal=function(e,t,n,r){t.vsub(e,f),n.vsub(t,h),h.cross(f,r),r.isZero()||r.normalize();};var m=new i(),y=new i(),g=new i();u.prototype.getVertex=function(e,t){var n=this.scale;return this._getUnscaledVertex(e,t),t.x*=n.x,t.y*=n.y,t.z*=n.z,t;},u.prototype._getUnscaledVertex=function(e,t){var n=3*e,r=this.vertices;return t.set(r[n],r[n+1],r[n+2]);},u.prototype.getWorldVertex=function(e,t,n,r){return this.getVertex(e,r),o.pointToWorldFrame(t,n,r,r),r;},u.prototype.getTriangleVertices=function(e,t,n,r){var i=3*e;this.getVertex(this.indices[i],t),this.getVertex(this.indices[i+1],n),this.getVertex(this.indices[i+2],r);},u.prototype.getNormal=function(e,t){var n=3*e;return t.set(this.normals[n],this.normals[n+1],this.normals[n+2]);};var v=new a();u.prototype.calculateLocalInertia=function(e,t){this.computeLocalAABB(v);var n=v.upperBound.x-v.lowerBound.x,r=v.upperBound.y-v.lowerBound.y,i=v.upperBound.z-v.lowerBound.z;return t.set(1/12*e*(2*r*2*r+2*i*2*i),1/12*e*(2*n*2*n+2*i*2*i),1/12*e*(2*r*2*r+2*n*2*n));};var x=new i();u.prototype.computeLocalAABB=function(e){var t=e.lowerBound,n=e.upperBound,r=this.vertices.length,i=(this.vertices,x);this.getVertex(0,i),t.copy(i),n.copy(i);for(var o=0;o!==r;o++){this.getVertex(o,i),i.x<t.x?t.x=i.x:i.x>n.x&&(n.x=i.x),i.y<t.y?t.y=i.y:i.y>n.y&&(n.y=i.y),i.z<t.z?t.z=i.z:i.z>n.z&&(n.z=i.z);}},u.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb);},u.prototype.updateBoundingSphereRadius=function(){for(var e=0,t=this.vertices,n=new i(),r=0,o=t.length/3;r!==o;r++){this.getVertex(r,n);var a=n.norm2();a>e&&(e=a);}this.boundingSphereRadius=Math.sqrt(e);},new i();var b=new o(),w=new a();u.prototype.calculateWorldAABB=function(e,t,n,r){var i=b,o=w;i.position=e,i.quaternion=t,this.aabb.toWorldFrame(i,o),n.copy(o.lowerBound),r.copy(o.upperBound);},u.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3;},u.createTorus=function(e,t,n,r,i){e=e||1,t=t||.5,n=n||8,r=r||6,i=i||2*Math.PI;for(var o=[],a=[],s=0;s<=n;s++){for(var c=0;c<=r;c++){var l=c/r*i,p=s/n*Math.PI*2,d=(e+t*Math.cos(p))*Math.cos(l),h=(e+t*Math.cos(p))*Math.sin(l),f=t*Math.sin(p);o.push(d,h,f);}}for(s=1;s<=n;s++){for(c=1;c<=r;c++){var m=(r+1)*s+c-1,y=(r+1)*(s-1)+c-1,g=(r+1)*(s-1)+c,v=(r+1)*s+c;a.push(m,y,v),a.push(y,g,v);}}return new u(o,a);};},{"../collision/AABB":3,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../utils/Octree":50,"./Shape":43}],46:[function(e,t,n){t.exports=i,e("../math/Vec3"),e("../math/Quaternion");var r=e("./Solver");function i(){r.call(this),this.iterations=10,this.tolerance=1e-7;}i.prototype=new r();var o=[],a=[],s=[];i.prototype.solve=function(e,t){var n,r,i,u,c,l=0,p=this.iterations,d=this.tolerance*this.tolerance,h=this.equations,f=h.length,m=t.bodies,y=m.length,g=e;if(0!==f)for(var v=0;v!==y;v++){m[v].updateSolveMassProperties();}var x=a,b=s,w=o;for(x.length=f,b.length=f,w.length=f,v=0;v!==f;v++){var S=h[v];w[v]=0,b[v]=S.computeB(g),x[v]=1/S.computeC();}if(0!==f){for(v=0;v!==y;v++){var M=(A=m[v]).vlambda,_=A.wlambda;M.set(0,0,0),_&&_.set(0,0,0);}for(l=0;l!==p;l++){u=0;for(var E=0;E!==f;E++){S=h[E],n=b[E],r=x[E],(c=w[E])+(i=r*(n-S.computeGWlambda()-S.eps*c))<S.minForce?i=S.minForce-c:c+i>S.maxForce&&(i=S.maxForce-c),w[E]+=i,u+=i>0?i:-i,S.addToWlambda(i);}if(u*u<d)break;}for(v=0;v!==y;v++){var A,T=(A=m[v]).velocity,N=A.angularVelocity;T.vadd(A.vlambda,T),N&&N.vadd(A.wlambda,N);}}return l;};},{"../math/Quaternion":28,"../math/Vec3":30,"./Solver":47}],47:[function(e,t,n){function r(){this.equations=[];}t.exports=r,r.prototype.solve=function(e,t){return 0;},r.prototype.addEquation=function(e){e.enabled&&this.equations.push(e);},r.prototype.removeEquation=function(e){var t=this.equations,n=t.indexOf(e);-1!==n&&t.splice(n,1);},r.prototype.removeAllEquations=function(){this.equations.length=0;};},{}],48:[function(e,t,n){t.exports=o,e("../math/Vec3"),e("../math/Quaternion");var r=e("./Solver"),i=e("../objects/Body");function o(e){for(r.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=e,this.nodes=[],this.nodePool=[];this.nodePool.length<128;){this.nodePool.push(this.createNode());}}o.prototype=new r();var a=[],s=[],u={bodies:[]},c=i.STATIC;function l(e){for(var t=e.length,n=0;n!==t;n++){var r=e[n];if(!(r.visited||r.body.type&c))return r;}return!1;}var p=[];function d(e,t,n,r){for(p.push(e),e.visited=!0,t(e,n,r);p.length;){for(var i,o=p.pop();i=l(o.children);){i.visited=!0,t(i,n,r),p.push(i);}}}function h(e,t,n){t.push(e.body);for(var r=e.eqs.length,i=0;i!==r;i++){var o=e.eqs[i];-1===n.indexOf(o)&&n.push(o);}}function f(e,t){return t.id-e.id;}o.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1};},o.prototype.solve=function(e,t){for(var n=a,r=this.nodePool,i=t.bodies,o=this.equations,c=o.length,p=i.length,m=this.subsolver;r.length<p;){r.push(this.createNode());}n.length=p;for(var y=0;y<p;y++){n[y]=r[y];}for(y=0;y!==p;y++){var g=n[y];g.body=i[y],g.children.length=0,g.eqs.length=0,g.visited=!1;}for(var v=0;v!==c;v++){var x=o[v],b=(y=i.indexOf(x.bi),i.indexOf(x.bj)),w=n[y],S=n[b];w.children.push(S),w.eqs.push(x),S.children.push(w),S.eqs.push(x);}var M,_=0,E=s;m.tolerance=this.tolerance,m.iterations=this.iterations;for(var A=u;M=l(n);){E.length=0,A.bodies.length=0,d(M,h,A.bodies,E);var T=E.length;for(E=E.sort(f),y=0;y!==T;y++){m.addEquation(E[y]);}m.solve(e,A),m.removeAllEquations(),_++;}return _;};},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"./Solver":47}],49:[function(e,t,n){var r=function r(){};t.exports=r,r.prototype={constructor:r,addEventListener:function addEventListener(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this;},hasEventListener:function hasEventListener(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t);},removeEventListener:function removeEventListener(e,t){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[e])return this;var r=n[e].indexOf(t);return-1!==r&&n[e].splice(r,1),this;},dispatchEvent:function dispatchEvent(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=0,r=t.length;n<r;n++){t[n].call(this,e);}}return this;}};},{}],50:[function(e,t,n){var r=e("../collision/AABB"),i=e("../math/Vec3");function o(e){e=e||{},this.root=e.root||null,this.aabb=e.aabb?e.aabb.clone():new r(),this.data=[],this.children=[];}function a(e,t){(t=t||{}).root=null,t.aabb=e,o.call(this,t),this.maxDepth=void 0!==t.maxDepth?t.maxDepth:8;}t.exports=a,a.prototype=new o(),o.prototype.reset=function(e,t){this.children.length=this.data.length=0;},o.prototype.insert=function(e,t,n){var r=this.data;if(n=n||0,!this.aabb.contains(e))return!1;var i=this.children;if(n<(this.maxDepth||this.root.maxDepth)){var o=!1;i.length||(this.subdivide(),o=!0);for(var a=0;8!==a;a++){if(i[a].insert(e,t,n+1))return!0;}o&&(i.length=0);}return r.push(t),!0;};var s=new i();o.prototype.subdivide=function(){var e=this.aabb,t=e.lowerBound,n=e.upperBound,a=this.children;a.push(new o({aabb:new r({lowerBound:new i(0,0,0)})}),new o({aabb:new r({lowerBound:new i(1,0,0)})}),new o({aabb:new r({lowerBound:new i(1,1,0)})}),new o({aabb:new r({lowerBound:new i(1,1,1)})}),new o({aabb:new r({lowerBound:new i(0,1,1)})}),new o({aabb:new r({lowerBound:new i(0,0,1)})}),new o({aabb:new r({lowerBound:new i(1,0,1)})}),new o({aabb:new r({lowerBound:new i(0,1,0)})})),n.vsub(t,s),s.scale(.5,s);for(var u=this.root||this,c=0;8!==c;c++){var l=a[c];l.root=u;var p=l.aabb.lowerBound;p.x*=s.x,p.y*=s.y,p.z*=s.z,p.vadd(t,p),p.vadd(s,l.aabb.upperBound);}},o.prototype.aabbQuery=function(e,t){this.data,this.children;for(var n=[this];n.length;){var r=n.pop();r.aabb.overlaps(e)&&Array.prototype.push.apply(t,r.data),Array.prototype.push.apply(n,r.children);}return t;};var u=new r();o.prototype.rayQuery=function(e,t,n){return e.getAABB(u),u.toLocalFrame(t,u),this.aabbQuery(u,n),n;},o.prototype.removeEmptyNodes=function(){for(var e=[this];e.length;){for(var t=e.pop(),n=t.children.length-1;n>=0;n--){t.children[n].data.length||t.children.splice(n,1);}Array.prototype.push.apply(e,t.children);}};},{"../collision/AABB":3,"../math/Vec3":30}],51:[function(e,t,n){function r(){this.objects=[],this.type=Object;}t.exports=r,r.prototype.release=function(){for(var e=arguments.length,t=0;t!==e;t++){this.objects.push(arguments[t]);}},r.prototype.get=function(){return 0===this.objects.length?this.constructObject():this.objects.pop();},r.prototype.constructObject=function(){throw new Error("constructObject() not implemented in this Pool subclass yet!");};},{}],52:[function(e,t,n){function r(){this.data={keys:[]};}t.exports=r,r.prototype.get=function(e,t){if(e>t){var n=t;t=e,e=n;}return this.data[e+"-"+t];},r.prototype.set=function(e,t,n){if(e>t){var r=t;t=e,e=r;}var i=e+"-"+t;this.get(e,t)||this.data.keys.push(i),this.data[i]=n;},r.prototype.reset=function(){for(var e=this.data,t=e.keys;t.length>0;){delete e[t.pop()];}};},{}],53:[function(e,t,n){function r(){}t.exports=r,r.defaults=function(e,t){for(var n in e=e||{},t){n in e||(e[n]=t[n]);}return e;};},{}],54:[function(e,t,n){t.exports=o;var r=e("../math/Vec3"),i=e("./Pool");function o(){i.call(this),this.type=r;}o.prototype=new i(),o.prototype.constructObject=function(){return new r();};},{"../math/Vec3":30,"./Pool":51}],55:[function(e,t,n){t.exports=d;var r=e("../collision/AABB"),i=e("../shapes/Shape"),o=e("../collision/Ray"),a=e("../math/Vec3"),s=e("../math/Transform"),u=(e("../shapes/ConvexPolyhedron"),e("../math/Quaternion")),c=(e("../solver/Solver"),e("../utils/Vec3Pool")),l=e("../equations/ContactEquation"),p=e("../equations/FrictionEquation");function d(e){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new c(),this.world=e,this.currentContactMaterial=null,this.enableFrictionReduction=!1;}d.prototype.createContactEquation=function(e,t,n,r,i,o){var a;this.contactPointPool.length?((a=this.contactPointPool.pop()).bi=e,a.bj=t):a=new l(e,t),a.enabled=e.collisionResponse&&t.collisionResponse&&n.collisionResponse&&r.collisionResponse;var s=this.currentContactMaterial;a.restitution=s.restitution,a.setSpookParams(s.contactEquationStiffness,s.contactEquationRelaxation,this.world.dt);var u=n.material||e.material,c=r.material||t.material;return u&&c&&u.restitution>=0&&c.restitution>=0&&(a.restitution=u.restitution*c.restitution),a.si=i||n,a.sj=o||r,a;},d.prototype.createFrictionEquationsFromContact=function(e,t){var n=e.bi,r=e.bj,i=e.si,o=e.sj,a=this.world,s=this.currentContactMaterial,u=s.friction,c=i.material||n.material,l=o.material||r.material;if(c&&l&&c.friction>=0&&l.friction>=0&&(u=c.friction*l.friction),u>0){var d=u*a.gravity.length(),h=n.invMass+r.invMass;h>0&&(h=1/h);var f=this.frictionEquationPool,m=f.length?f.pop():new p(n,r,d*h),y=f.length?f.pop():new p(n,r,d*h);return m.bi=y.bi=n,m.bj=y.bj=r,m.minForce=y.minForce=-d*h,m.maxForce=y.maxForce=d*h,m.ri.copy(e.ri),m.rj.copy(e.rj),y.ri.copy(e.ri),y.rj.copy(e.rj),e.ni.tangents(m.t,y.t),m.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),y.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),m.enabled=y.enabled=e.enabled,t.push(m,y),!0;}return!1;};var h=new a(),f=new a(),m=new a();d.prototype.createFrictionFromAverage=function(e){var t=this.result[this.result.length-1];if(this.createFrictionEquationsFromContact(t,this.frictionResult)&&1!==e){var n=this.frictionResult[this.frictionResult.length-2],r=this.frictionResult[this.frictionResult.length-1];h.setZero(),f.setZero(),m.setZero();for(var i=t.bi,o=(t.bj,0);o!==e;o++){(t=this.result[this.result.length-1-o]).bodyA!==i?(h.vadd(t.ni,h),f.vadd(t.ri,f),m.vadd(t.rj,m)):(h.vsub(t.ni,h),f.vadd(t.rj,f),m.vadd(t.ri,m));}var a=1/e;f.scale(a,n.ri),m.scale(a,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),h.normalize(),h.tangents(n.t,r.t);}};var y=new a(),g=new a(),v=new u(),x=new u();d.prototype.getContacts=function(e,t,n,r,i,o,a){this.contactPointPool=i,this.frictionEquationPool=a,this.result=r,this.frictionResult=o;for(var s=v,u=x,c=y,l=g,p=0,d=e.length;p!==d;p++){var h=e[p],f=t[p],m=null;h.material&&f.material&&(m=n.getContactMaterial(h.material,f.material)||null);for(var b=0;b<h.shapes.length;b++){h.quaternion.mult(h.shapeOrientations[b],s),h.quaternion.vmult(h.shapeOffsets[b],c),c.vadd(h.position,c);for(var w=h.shapes[b],S=0;S<f.shapes.length;S++){f.quaternion.mult(f.shapeOrientations[S],u),f.quaternion.vmult(f.shapeOffsets[S],l),l.vadd(f.position,l);var M=f.shapes[S];if(!(c.distanceTo(l)>w.boundingSphereRadius+M.boundingSphereRadius)){var _=null;w.material&&M.material&&(_=n.getContactMaterial(w.material,M.material)||null),this.currentContactMaterial=_||m||n.defaultContactMaterial;var E=this[w.type|M.type];E&&(w.type<M.type?E.call(this,w,M,c,l,s,u,h,f,w,M):E.call(this,M,w,l,c,u,s,f,h,w,M));}}}}},d.prototype[i.types.BOX|i.types.BOX]=d.prototype.boxBox=function(e,t,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t.convexPolyhedronRepresentation,n,r,i,o,a,s,e,t);},d.prototype[i.types.BOX|i.types.CONVEXPOLYHEDRON]=d.prototype.boxConvex=function(e,t,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t,n,r,i,o,a,s,e,t);},d.prototype[i.types.BOX|i.types.PARTICLE]=d.prototype.boxParticle=function(e,t,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexParticle(e.convexPolyhedronRepresentation,t,n,r,i,o,a,s,e,t);},d.prototype[i.types.SPHERE]=d.prototype.sphereSphere=function(e,t,n,r,i,o,a,s){var u=this.createContactEquation(a,s,e,t);r.vsub(n,u.ni),u.ni.normalize(),u.ri.copy(u.ni),u.rj.copy(u.ni),u.ri.mult(e.radius,u.ri),u.rj.mult(-t.radius,u.rj),u.ri.vadd(n,u.ri),u.ri.vsub(a.position,u.ri),u.rj.vadd(r,u.rj),u.rj.vsub(s.position,u.rj),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult);};var b=new a(),w=new a(),S=new a();d.prototype[i.types.PLANE|i.types.TRIMESH]=d.prototype.planeTrimesh=function(e,t,n,r,i,o,u,c){var l=new a(),p=b;p.set(0,0,1),i.vmult(p,p);for(var d=0;d<t.vertices.length/3;d++){t.getVertex(d,l);var h=new a();h.copy(l),s.pointToWorldFrame(r,o,h,l);var f=w;if(l.vsub(n,f),p.dot(f)<=0){var m=this.createContactEquation(u,c,e,t);m.ni.copy(p);var y=S;p.scale(f.dot(p),y),l.vsub(y,y),m.ri.copy(y),m.ri.vsub(u.position,m.ri),m.rj.copy(l),m.rj.vsub(c.position,m.rj),this.result.push(m),this.createFrictionEquationsFromContact(m,this.frictionResult);}}};var M=new a(),_=new a(),E=(new a(),new a()),A=new a(),T=new a(),N=new a(),D=new a(),C=new a(),R=new a(),P=new a(),O=new a(),L=new a(),I=new a(),B=new r(),F=[];d.prototype[i.types.SPHERE|i.types.TRIMESH]=d.prototype.sphereTrimesh=function(e,t,n,r,i,a,u,c){var l=T,p=N,d=D,h=C,f=R,m=P,y=B,g=A,v=_,x=F;s.pointToLocalFrame(r,a,n,f);var b=e.radius;y.lowerBound.set(f.x-b,f.y-b,f.z-b),y.upperBound.set(f.x+b,f.y+b,f.z+b),t.getTrianglesInAABB(y,x);for(var w=E,S=e.radius*e.radius,z=0;z<x.length;z++){for(var k=0;k<3;k++){t.getVertex(t.indices[3*x[z]+k],w),w.vsub(f,v),v.norm2()<=S&&(g.copy(w),s.pointToWorldFrame(r,a,g,w),w.vsub(n,v),(H=this.createContactEquation(u,c,e,t)).ni.copy(v),H.ni.normalize(),H.ri.copy(H.ni),H.ri.scale(e.radius,H.ri),H.ri.vadd(n,H.ri),H.ri.vsub(u.position,H.ri),H.rj.copy(w),H.rj.vsub(c.position,H.rj),this.result.push(H),this.createFrictionEquationsFromContact(H,this.frictionResult));}}for(z=0;z<x.length;z++){for(k=0;k<3;k++){t.getVertex(t.indices[3*x[z]+k],l),t.getVertex(t.indices[3*x[z]+(k+1)%3],p),p.vsub(l,d),f.vsub(p,m);var U=m.dot(d);f.vsub(l,m);var j=m.dot(d);if(j>0&&U<0&&(f.vsub(l,m),h.copy(d),h.normalize(),j=m.dot(h),h.scale(j,m),m.vadd(l,m),(Y=m.distanceTo(f))<e.radius)){var H=this.createContactEquation(u,c,e,t);m.vsub(f,H.ni),H.ni.normalize(),H.ni.scale(e.radius,H.ri),s.pointToWorldFrame(r,a,m,m),m.vsub(c.position,H.rj),s.vectorToWorldFrame(a,H.ni,H.ni),s.vectorToWorldFrame(a,H.ri,H.ri),this.result.push(H),this.createFrictionEquationsFromContact(H,this.frictionResult);}}}for(var q=O,G=L,V=I,W=M,X=(z=0,x.length);z!==X;z++){t.getTriangleVertices(x[z],q,G,V),t.getNormal(x[z],W),f.vsub(q,m);var Y=m.dot(W);W.scale(Y,m),f.vsub(m,m),Y=m.distanceTo(f),o.pointInTriangle(m,q,G,V)&&Y<e.radius&&(H=this.createContactEquation(u,c,e,t),m.vsub(f,H.ni),H.ni.normalize(),H.ni.scale(e.radius,H.ri),s.pointToWorldFrame(r,a,m,m),m.vsub(c.position,H.rj),s.vectorToWorldFrame(a,H.ni,H.ni),s.vectorToWorldFrame(a,H.ri,H.ri),this.result.push(H),this.createFrictionEquationsFromContact(H,this.frictionResult));}x.length=0;};var z=new a(),k=new a();d.prototype[i.types.SPHERE|i.types.PLANE]=d.prototype.spherePlane=function(e,t,n,r,i,o,a,s){var u=this.createContactEquation(a,s,e,t);if(u.ni.set(0,0,1),o.vmult(u.ni,u.ni),u.ni.negate(u.ni),u.ni.normalize(),u.ni.mult(e.radius,u.ri),n.vsub(r,z),u.ni.mult(u.ni.dot(z),k),z.vsub(k,u.rj),-z.dot(u.ni)<=e.radius){var c=u.ri,l=u.rj;c.vadd(n,c),c.vsub(a.position,c),l.vadd(r,l),l.vsub(s.position,l),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult);}};var U=new a(),j=new a(),H=new a();function q(e,t,n){for(var r=null,i=e.length,o=0;o!==i;o++){var a=e[o],s=U;e[(o+1)%i].vsub(a,s);var u=j;s.cross(t,u);var c=H;n.vsub(a,c);var l=u.dot(c);if(!(null===r||l>0&&!0===r||l<=0&&!1===r))return!1;null===r&&(r=l>0);}return!0;}var G=new a(),V=new a(),W=new a(),X=new a(),Y=[new a(),new a(),new a(),new a(),new a(),new a()],Z=new a(),$=new a(),J=new a(),Q=new a();d.prototype[i.types.SPHERE|i.types.BOX]=d.prototype.sphereBox=function(e,t,n,r,i,o,a,s){var u=this.v3pool,c=Y;n.vsub(r,G),t.getSideNormals(c,o);for(var l=e.radius,p=!1,d=$,h=J,f=Q,m=null,y=0,g=0,v=0,x=null,b=0,w=c.length;b!==w&&!1===p;b++){var S=V;S.copy(c[b]);var M=S.norm();S.normalize();var _=G.dot(S);if(_<M+l&&_>0){var E=W,A=X;E.copy(c[(b+1)%3]),A.copy(c[(b+2)%3]);var T=E.norm(),N=A.norm();E.normalize(),A.normalize();var D=G.dot(E),C=G.dot(A);if(D<T&&D>-T&&C<N&&C>-N){var R=Math.abs(_-M-l);(null===x||R<x)&&(x=R,g=D,v=C,m=M,d.copy(S),h.copy(E),f.copy(A),y++);}}}if(y){p=!0;var P=this.createContactEquation(a,s,e,t);d.mult(-l,P.ri),P.ni.copy(d),P.ni.negate(P.ni),d.mult(m,d),h.mult(g,h),d.vadd(h,d),f.mult(v,f),d.vadd(f,P.rj),P.ri.vadd(n,P.ri),P.ri.vsub(a.position,P.ri),P.rj.vadd(r,P.rj),P.rj.vsub(s.position,P.rj),this.result.push(P),this.createFrictionEquationsFromContact(P,this.frictionResult);}for(var O=u.get(),L=Z,I=0;2!==I&&!p;I++){for(var B=0;2!==B&&!p;B++){for(var F=0;2!==F&&!p;F++){O.set(0,0,0),I?O.vadd(c[0],O):O.vsub(c[0],O),B?O.vadd(c[1],O):O.vsub(c[1],O),F?O.vadd(c[2],O):O.vsub(c[2],O),r.vadd(O,L),L.vsub(n,L),L.norm2()<l*l&&(p=!0,(P=this.createContactEquation(a,s,e,t)).ri.copy(L),P.ri.normalize(),P.ni.copy(P.ri),P.ri.mult(l,P.ri),P.rj.copy(O),P.ri.vadd(n,P.ri),P.ri.vsub(a.position,P.ri),P.rj.vadd(r,P.rj),P.rj.vsub(s.position,P.rj),this.result.push(P),this.createFrictionEquationsFromContact(P,this.frictionResult));}}}u.release(O),O=null;var z=u.get(),k=u.get(),U=(P=u.get(),u.get()),j=(R=u.get(),c.length);for(I=0;I!==j&&!p;I++){for(B=0;B!==j&&!p;B++){if(I%3!=B%3){c[B].cross(c[I],z),z.normalize(),c[I].vadd(c[B],k),P.copy(n),P.vsub(k,P),P.vsub(r,P);var H=P.dot(z);for(z.mult(H,U),F=0;F===I%3||F===B%3;){F++;}R.copy(n),R.vsub(U,R),R.vsub(k,R),R.vsub(r,R);var q=Math.abs(H),K=R.norm();if(q<c[F].norm()&&K<l){p=!0;var ee=this.createContactEquation(a,s,e,t);k.vadd(U,ee.rj),ee.rj.copy(ee.rj),R.negate(ee.ni),ee.ni.normalize(),ee.ri.copy(ee.rj),ee.ri.vadd(r,ee.ri),ee.ri.vsub(n,ee.ri),ee.ri.normalize(),ee.ri.mult(l,ee.ri),ee.ri.vadd(n,ee.ri),ee.ri.vsub(a.position,ee.ri),ee.rj.vadd(r,ee.rj),ee.rj.vsub(s.position,ee.rj),this.result.push(ee),this.createFrictionEquationsFromContact(ee,this.frictionResult);}}}}u.release(z,k,P,U,R);};var K=new a(),ee=new a(),te=new a(),ne=new a(),re=new a(),ie=new a(),oe=new a(),ae=new a(),se=new a(),ue=new a();d.prototype[i.types.SPHERE|i.types.CONVEXPOLYHEDRON]=d.prototype.sphereConvex=function(e,t,n,r,i,o,a,s){var u=this.v3pool;n.vsub(r,K);for(var c=t.faceNormals,l=t.faces,p=t.vertices,d=e.radius,h=0;h!==p.length;h++){var f=p[h],m=re;o.vmult(f,m),r.vadd(m,m);var y=ne;if(m.vsub(n,y),y.norm2()<d*d)return g=!0,(R=this.createContactEquation(a,s,e,t)).ri.copy(y),R.ri.normalize(),R.ni.copy(R.ri),R.ri.mult(d,R.ri),m.vsub(r,R.rj),R.ri.vadd(n,R.ri),R.ri.vsub(a.position,R.ri),R.rj.vadd(r,R.rj),R.rj.vsub(s.position,R.rj),this.result.push(R),void this.createFrictionEquationsFromContact(R,this.frictionResult);}for(var g=!1,v=(h=0,l.length);h!==v&&!1===g;h++){var x=c[h],b=l[h],w=ie;o.vmult(x,w);var S=oe;o.vmult(p[b[0]],S),S.vadd(r,S);var M=ae;w.mult(-d,M),n.vadd(M,M);var _=se;M.vsub(S,_);var E=_.dot(w),A=ue;if(n.vsub(S,A),E<0&&A.dot(w)>0){for(var T=[],N=0,D=b.length;N!==D;N++){var C=u.get();o.vmult(p[b[N]],C),r.vadd(C,C),T.push(C);}if(q(T,w,n)){g=!0;var R=this.createContactEquation(a,s,e,t);w.mult(-d,R.ri),w.negate(R.ni);var P=u.get();w.mult(-E,P);var O=u.get();w.mult(-d,O),n.vsub(r,R.rj),R.rj.vadd(O,R.rj),R.rj.vadd(P,R.rj),R.rj.vadd(r,R.rj),R.rj.vsub(s.position,R.rj),R.ri.vadd(n,R.ri),R.ri.vsub(a.position,R.ri),u.release(P),u.release(O),this.result.push(R),this.createFrictionEquationsFromContact(R,this.frictionResult),N=0;for(var L=T.length;N!==L;N++){u.release(T[N]);}return;}for(N=0;N!==b.length;N++){var I=u.get(),B=u.get();o.vmult(p[b[(N+1)%b.length]],I),o.vmult(p[b[(N+2)%b.length]],B),r.vadd(I,I),r.vadd(B,B);var F=ee;B.vsub(I,F);var z=te;F.unit(z);var k=u.get(),U=u.get();n.vsub(I,U);var j=U.dot(z);z.mult(j,k),k.vadd(I,k);var H=u.get();if(k.vsub(n,H),j>0&&j*j<F.norm2()&&H.norm2()<d*d){for(R=this.createContactEquation(a,s,e,t),k.vsub(r,R.rj),k.vsub(n,R.ni),R.ni.normalize(),R.ni.mult(d,R.ri),R.rj.vadd(r,R.rj),R.rj.vsub(s.position,R.rj),R.ri.vadd(n,R.ri),R.ri.vsub(a.position,R.ri),this.result.push(R),this.createFrictionEquationsFromContact(R,this.frictionResult),N=0,L=T.length;N!==L;N++){u.release(T[N]);}return u.release(I),u.release(B),u.release(k),u.release(H),void u.release(U);}u.release(I),u.release(B),u.release(k),u.release(H),u.release(U);}for(N=0,L=T.length;N!==L;N++){u.release(T[N]);}}}},new a(),new a(),d.prototype[i.types.PLANE|i.types.BOX]=d.prototype.planeBox=function(e,t,n,r,i,o,a,s){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.planeConvex(e,t.convexPolyhedronRepresentation,n,r,i,o,a,s);};var ce=new a(),le=new a(),pe=new a(),de=new a();d.prototype[i.types.PLANE|i.types.CONVEXPOLYHEDRON]=d.prototype.planeConvex=function(e,t,n,r,i,o,a,s){var u=ce,c=le;c.set(0,0,1),i.vmult(c,c);for(var l=0,p=pe,d=0;d!==t.vertices.length;d++){if(u.copy(t.vertices[d]),o.vmult(u,u),r.vadd(u,u),u.vsub(n,p),c.dot(p)<=0){var h=this.createContactEquation(a,s,e,t),f=de;c.mult(c.dot(p),f),u.vsub(f,f),f.vsub(n,h.ri),h.ni.copy(c),u.vsub(r,h.rj),h.ri.vadd(n,h.ri),h.ri.vsub(a.position,h.ri),h.rj.vadd(r,h.rj),h.rj.vsub(s.position,h.rj),this.result.push(h),l++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(h,this.frictionResult);}}this.enableFrictionReduction&&l&&this.createFrictionFromAverage(l);};var he=new a(),fe=new a();d.prototype[i.types.CONVEXPOLYHEDRON]=d.prototype.convexConvex=function(e,t,n,r,i,o,a,s,u,c,l,p){var d=he;if(!(n.distanceTo(r)>e.boundingSphereRadius+t.boundingSphereRadius)&&e.findSeparatingAxis(t,n,i,r,o,d,l,p)){var h=[],f=fe;e.clipAgainstHull(n,i,t,r,o,d,-100,100,h);for(var m=0,y=0;y!==h.length;y++){var g=this.createContactEquation(a,s,e,t,u,c),v=g.ri,x=g.rj;d.negate(g.ni),h[y].normal.negate(f),f.mult(h[y].depth,f),h[y].point.vadd(f,v),x.copy(h[y].point),v.vsub(n,v),x.vsub(r,x),v.vadd(n,v),v.vsub(a.position,v),x.vadd(r,x),x.vsub(s.position,x),this.result.push(g),m++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(g,this.frictionResult);}this.enableFrictionReduction&&m&&this.createFrictionFromAverage(m);}};var me=new a(),ye=new a(),ge=new a();d.prototype[i.types.PLANE|i.types.PARTICLE]=d.prototype.planeParticle=function(e,t,n,r,i,o,a,s){var u=me;u.set(0,0,1),a.quaternion.vmult(u,u);var c=ye;if(r.vsub(a.position,c),u.dot(c)<=0){var l=this.createContactEquation(s,a,t,e);l.ni.copy(u),l.ni.negate(l.ni),l.ri.set(0,0,0);var p=ge;u.mult(u.dot(r),p),r.vsub(p,p),l.rj.copy(p),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult);}};var ve=new a();d.prototype[i.types.PARTICLE|i.types.SPHERE]=d.prototype.sphereParticle=function(e,t,n,r,i,o,a,s){var u=ve;if(u.set(0,0,1),r.vsub(n,u),u.norm2()<=e.radius*e.radius){var c=this.createContactEquation(s,a,t,e);u.normalize(),c.rj.copy(u),c.rj.mult(e.radius,c.rj),c.ni.copy(u),c.ni.negate(c.ni),c.ri.set(0,0,0),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult);}};var xe=new u(),be=new a(),we=(new a(),new a()),Se=new a(),Me=new a();d.prototype[i.types.PARTICLE|i.types.CONVEXPOLYHEDRON]=d.prototype.convexParticle=function(e,t,n,r,i,o,a,s){var u=-1,c=we,l=Me,p=null,d=be;if(d.copy(r),d.vsub(n,d),i.conjugate(xe),xe.vmult(d,d),e.pointIsInside(d)){e.worldVerticesNeedsUpdate&&e.computeWorldVertices(n,i),e.worldFaceNormalsNeedsUpdate&&e.computeWorldFaceNormals(i);for(var h=0,f=e.faces.length;h!==f;h++){var m=[e.worldVertices[e.faces[h][0]]],y=e.worldFaceNormals[h];r.vsub(m[0],Se);var g=-y.dot(Se);(null===p||Math.abs(g)<Math.abs(p))&&(p=g,u=h,c.copy(y));}if(-1!==u){var v=this.createContactEquation(s,a,t,e);c.mult(p,l),l.vadd(r,l),l.vsub(n,l),v.rj.copy(l),c.negate(v.ni),v.ri.set(0,0,0);var x=v.ri,b=v.rj;x.vadd(r,x),x.vsub(s.position,x),b.vadd(n,b),b.vsub(a.position,b),this.result.push(v),this.createFrictionEquationsFromContact(v,this.frictionResult);}else console.warn("Point found inside convex, but did not find penetrating face!");}},d.prototype[i.types.BOX|i.types.HEIGHTFIELD]=d.prototype.boxHeightfield=function(e,t,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexHeightfield(e.convexPolyhedronRepresentation,t,n,r,i,o,a,s);};var _e=new a(),Ee=new a(),Ae=[0];d.prototype[i.types.CONVEXPOLYHEDRON|i.types.HEIGHTFIELD]=d.prototype.convexHeightfield=function(e,t,n,r,i,o,a,u){var c=t.data,l=t.elementSize,p=e.boundingSphereRadius,d=Ee,h=Ae,f=_e;s.pointToLocalFrame(r,o,n,f);var m=Math.floor((f.x-p)/l)-1,y=Math.ceil((f.x+p)/l)+1,g=Math.floor((f.y-p)/l)-1,v=Math.ceil((f.y+p)/l)+1;if(!(y<0||v<0||m>c.length||g>c[0].length)){m<0&&(m=0),y<0&&(y=0),g<0&&(g=0),v<0&&(v=0),m>=c.length&&(m=c.length-1),y>=c.length&&(y=c.length-1),v>=c[0].length&&(v=c[0].length-1),g>=c[0].length&&(g=c[0].length-1);var x=[];t.getRectMinMax(m,g,y,v,x);var b=x[0],w=x[1];if(!(f.z-p>w||f.z+p<b))for(var S=m;S<y;S++){for(var M=g;M<v;M++){t.getConvexTrianglePillar(S,M,!1),s.pointToWorldFrame(r,o,t.pillarOffset,d),n.distanceTo(d)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.convexConvex(e,t.pillarConvex,n,d,i,o,a,u,null,null,h,null),t.getConvexTrianglePillar(S,M,!0),s.pointToWorldFrame(r,o,t.pillarOffset,d),n.distanceTo(d)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.convexConvex(e,t.pillarConvex,n,d,i,o,a,u,null,null,h,null);}}}};var Te=new a(),Ne=new a();d.prototype[i.types.SPHERE|i.types.HEIGHTFIELD]=d.prototype.sphereHeightfield=function(e,t,n,r,i,o,a,u){var c=t.data,l=e.radius,p=t.elementSize,d=Ne,h=Te;s.pointToLocalFrame(r,o,n,h);var f=Math.floor((h.x-l)/p)-1,m=Math.ceil((h.x+l)/p)+1,y=Math.floor((h.y-l)/p)-1,g=Math.ceil((h.y+l)/p)+1;if(!(m<0||g<0||f>c.length||g>c[0].length)){f<0&&(f=0),m<0&&(m=0),y<0&&(y=0),g<0&&(g=0),f>=c.length&&(f=c.length-1),m>=c.length&&(m=c.length-1),g>=c[0].length&&(g=c[0].length-1),y>=c[0].length&&(y=c[0].length-1);var v=[];t.getRectMinMax(f,y,m,g,v);var x=v[0],b=v[1];if(!(h.z-l>b||h.z+l<x))for(var w=this.result,S=f;S<m;S++){for(var M=y;M<g;M++){var _=w.length;if(t.getConvexTrianglePillar(S,M,!1),s.pointToWorldFrame(r,o,t.pillarOffset,d),n.distanceTo(d)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.sphereConvex(e,t.pillarConvex,n,d,i,o,a,u),t.getConvexTrianglePillar(S,M,!0),s.pointToWorldFrame(r,o,t.pillarOffset,d),n.distanceTo(d)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.sphereConvex(e,t.pillarConvex,n,d,i,o,a,u),w.length-_>2)return;}}}};},{"../collision/AABB":3,"../collision/Ray":9,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43,"../solver/Solver":47,"../utils/Vec3Pool":54}],56:[function(e,t,n){t.exports=v;var r=e("../shapes/Shape"),i=e("../math/Vec3"),o=e("../math/Quaternion"),a=e("../solver/GSSolver"),s=(e("../utils/Vec3Pool"),e("../equations/ContactEquation"),e("../equations/FrictionEquation"),e("./Narrowphase")),u=e("../utils/EventTarget"),c=e("../collision/ArrayCollisionMatrix"),l=e("../material/Material"),p=e("../material/ContactMaterial"),d=e("../objects/Body"),h=e("../utils/TupleDictionary"),f=e("../collision/RaycastResult"),m=e("../collision/AABB"),y=e("../collision/Ray"),g=e("../collision/NaiveBroadphase");function v(){u.apply(this),this.dt=-1,this.allowSleep=!1,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=0,this.quatNormalizeFast=!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new i(),this.broadphase=new g(),this.bodies=[],this.solver=new a(),this.constraints=[],this.narrowphase=new s(this),this.collisionMatrix=new c(),this.collisionMatrixPrevious=new c(),this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new h(),this.defaultMaterial=new l("default"),this.defaultContactMaterial=new p(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null};}v.prototype=new u(),new m();var x=new y();if(v.prototype.getContactMaterial=function(e,t){return this.contactMaterialTable.get(e.id,t.id);},v.prototype.numObjects=function(){return this.bodies.length;},v.prototype.collisionMatrixTick=function(){var e=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=e,this.collisionMatrix.reset();},v.prototype.add=v.prototype.addBody=function(e){-1===this.bodies.indexOf(e)&&(e.index=this.bodies.length,this.bodies.push(e),e.world=this,e.initPosition.copy(e.position),e.initVelocity.copy(e.velocity),e.timeLastSleepy=this.time,e instanceof d&&(e.initAngularVelocity.copy(e.angularVelocity),e.initQuaternion.copy(e.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=e,this.dispatchEvent(this.addBodyEvent));},v.prototype.addConstraint=function(e){this.constraints.push(e);},v.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);-1!==t&&this.constraints.splice(t,1);},v.prototype.rayTest=function(e,t,n){n instanceof f?this.raycastClosest(e,t,{skipBackfaces:!0},n):this.raycastAll(e,t,{skipBackfaces:!0},n);},v.prototype.raycastAll=function(e,t,n,r){return n.mode=y.ALL,n.from=e,n.to=t,n.callback=r,x.intersectWorld(this,n);},v.prototype.raycastAny=function(e,t,n,r){return n.mode=y.ANY,n.from=e,n.to=t,n.result=r,x.intersectWorld(this,n);},v.prototype.raycastClosest=function(e,t,n,r){return n.mode=y.CLOSEST,n.from=e,n.to=t,n.result=r,x.intersectWorld(this,n);},v.prototype.remove=function(e){e.world=null;var t=this.bodies.length-1,n=this.bodies,r=n.indexOf(e);if(-1!==r){n.splice(r,1);for(var i=0;i!==n.length;i++){n[i].index=i;}this.collisionMatrix.setNumObjects(t),this.removeBodyEvent.body=e,this.dispatchEvent(this.removeBodyEvent);}},v.prototype.removeBody=v.prototype.remove,v.prototype.addMaterial=function(e){this.materials.push(e);},v.prototype.addContactMaterial=function(e){this.contactmaterials.push(e),this.contactMaterialTable.set(e.materials[0].id,e.materials[1].id,e);},"undefined"==typeof performance&&(performance={}),!performance.now){var b=Date.now();performance.timing&&performance.timing.navigationStart&&(b=performance.timing.navigationStart),performance.now=function(){return Date.now()-b;};}var w=new i();v.prototype.step=function(e,t,n){if(n=n||10,0===(t=t||0))this.internalStep(e),this.time+=e;else{var r=Math.floor((this.time+t)/e)-Math.floor(this.time/e);r=Math.min(r,n);for(var i=performance.now(),o=0;o!==r&&(this.internalStep(e),!(performance.now()-i>1e3*e));o++){;}this.time+=t;for(var a=this.time%e/e,s=w,u=this.bodies,c=0;c!==u.length;c++){var l=u[c];l.type!==d.STATIC&&l.sleepState!==d.SLEEPING?(l.position.vsub(l.previousPosition,s),s.scale(a,s),l.position.vadd(s,l.interpolatedPosition)):(l.interpolatedPosition.copy(l.position),l.interpolatedQuaternion.copy(l.quaternion));}}};var S={type:"postStep"},M={type:"preStep"},_={type:"collide",body:null,contact:null},E=[],A=[],T=[],N=[],D=(new i(),new i(),new i(),new i(),new i(),new i(),new i(),new i(),new i(),new o(),new o()),C=new o(),R=new i();v.prototype.internalStep=function(e){this.dt=e;var t,n=this.contacts,i=T,o=N,a=this.numObjects(),s=this.bodies,u=this.solver,c=this.gravity,l=this.doProfiling,p=this.profile,h=d.DYNAMIC,f=this.constraints,m=A,y=(c.norm(),c.x),g=c.y,v=c.z,x=0;for(l&&(t=performance.now()),x=0;x!==a;x++){if((U=s[x]).type&h){var b=U.force,w=U.mass;b.x+=w*y,b.y+=w*g,b.z+=w*v;}}x=0;for(var P=this.subsystems.length;x!==P;x++){this.subsystems[x].update();}l&&(t=performance.now()),i.length=0,o.length=0,this.broadphase.collisionPairs(this,i,o),l&&(p.broadphase=performance.now()-t);var O=f.length;for(x=0;x!==O;x++){if(!(H=f[x]).collideConnected)for(var L=i.length-1;L>=0;L-=1){(H.bodyA===i[L]&&H.bodyB===o[L]||H.bodyB===i[L]&&H.bodyA===o[L])&&(i.splice(L,1),o.splice(L,1));}}this.collisionMatrixTick(),l&&(t=performance.now());var I=E,B=n.length;for(x=0;x!==B;x++){I.push(n[x]);}n.length=0;var F=this.frictionEquations.length;for(x=0;x!==F;x++){m.push(this.frictionEquations[x]);}for(this.frictionEquations.length=0,this.narrowphase.getContacts(i,o,this,n,I,this.frictionEquations,m),l&&(p.narrowphase=performance.now()-t),l&&(t=performance.now()),x=0;x<this.frictionEquations.length;x++){u.addEquation(this.frictionEquations[x]);}for(var z=n.length,k=0;k!==z;k++){var U=(H=n[k]).bi,j=H.bj;H.si,H.sj,(U.material&&j.material&&this.getContactMaterial(U.material,j.material)||this.defaultContactMaterial).friction,U.material&&j.material&&(U.material.friction>=0&&j.material.friction>=0&&(U.material.friction,j.material.friction),U.material.restitution>=0&&j.material.restitution>=0&&(H.restitution=U.material.restitution*j.material.restitution)),u.addEquation(H),U.allowSleep&&U.type===d.DYNAMIC&&U.sleepState===d.SLEEPING&&j.sleepState===d.AWAKE&&j.type!==d.STATIC&&j.velocity.norm2()+j.angularVelocity.norm2()>=2*Math.pow(j.sleepSpeedLimit,2)&&(U._wakeUpAfterNarrowphase=!0),j.allowSleep&&j.type===d.DYNAMIC&&j.sleepState===d.SLEEPING&&U.sleepState===d.AWAKE&&U.type!==d.STATIC&&U.velocity.norm2()+U.angularVelocity.norm2()>=2*Math.pow(U.sleepSpeedLimit,2)&&(j._wakeUpAfterNarrowphase=!0),this.collisionMatrix.set(U,j,!0),this.collisionMatrixPrevious.get(U,j)||(_.body=j,_.contact=H,U.dispatchEvent(_),_.body=U,j.dispatchEvent(_));}for(l&&(p.makeContactConstraints=performance.now()-t,t=performance.now()),x=0;x!==a;x++){(U=s[x])._wakeUpAfterNarrowphase&&(U.wakeUp(),U._wakeUpAfterNarrowphase=!1);}for(O=f.length,x=0;x!==O;x++){var H;(H=f[x]).update(),L=0;for(var q=H.equations.length;L!==q;L++){var G=H.equations[L];u.addEquation(G);}}u.solve(e,this),l&&(p.solve=performance.now()-t),u.removeAllEquations();var V=Math.pow;for(x=0;x!==a;x++){if((U=s[x]).type&h){var W=V(1-U.linearDamping,e),X=U.velocity;X.mult(W,X);var Y=U.angularVelocity;if(Y){var Z=V(1-U.angularDamping,e);Y.mult(Z,Y);}}}for(this.dispatchEvent(M),x=0;x!==a;x++){(U=s[x]).preStep&&U.preStep.call(U);}l&&(t=performance.now());var $=D,J=C,Q=this.stepnumber,K=d.DYNAMIC|d.KINEMATIC,ee=Q%(this.quatNormalizeSkip+1)==0,te=this.quatNormalizeFast,ne=.5*e;for(r.types.PLANE,r.types.CONVEXPOLYHEDRON,x=0;x!==a;x++){var re=s[x],ie=re.force,oe=re.torque;if(re.type&K&&re.sleepState!==d.SLEEPING){var ae=re.velocity,se=re.angularVelocity,ue=re.position,ce=re.quaternion,le=re.invMass,pe=re.invInertiaWorld;ae.x+=ie.x*le*e,ae.y+=ie.y*le*e,ae.z+=ie.z*le*e,re.angularVelocity&&(pe.vmult(oe,R),R.mult(e,R),R.vadd(se,se)),ue.x+=ae.x*e,ue.y+=ae.y*e,ue.z+=ae.z*e,re.angularVelocity&&($.set(se.x,se.y,se.z,0),$.mult(ce,J),ce.x+=ne*J.x,ce.y+=ne*J.y,ce.z+=ne*J.z,ce.w+=ne*J.w,ee&&(te?ce.normalizeFast():ce.normalize())),re.aabb&&(re.aabbNeedsUpdate=!0),re.updateInertiaWorld&&re.updateInertiaWorld();}}for(this.clearForces(),this.broadphase.dirty=!0,l&&(p.integrate=performance.now()-t),this.time+=e,this.stepnumber+=1,this.dispatchEvent(S),x=0;x!==a;x++){var de=(U=s[x]).postStep;de&&de.call(U);}if(this.allowSleep)for(x=0;x!==a;x++){s[x].sleepTick(this.time);}},v.prototype.clearForces=function(){for(var e=this.bodies,t=e.length,n=0;n!==t;n++){var r=e[n];r.force,r.torque,r.force.set(0,0,0),r.torque.set(0,0,0);}};},{"../collision/AABB":3,"../collision/ArrayCollisionMatrix":4,"../collision/NaiveBroadphase":7,"../collision/Ray":9,"../collision/RaycastResult":10,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../material/ContactMaterial":24,"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Shape":43,"../solver/GSSolver":46,"../utils/EventTarget":49,"../utils/TupleDictionary":52,"../utils/Vec3Pool":54,"./Narrowphase":55}]},{},[2])(2);},function(e,t,n){"use strict";var r=n(76);e.exports=function(e){return"symbol"==_typeof(e)?"Symbol":"bigint"==typeof e?"BigInt":r(e);};},function(e,t,n){var r;/**
 * @license Complex.js v2.0.11 11/02/2016
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(n){"use strict";var i=function i(e){return .5*(Math.exp(e)+Math.exp(-e));},o=function o(e){return .5*(Math.exp(e)-Math.exp(-e));},a=function a(){throw SyntaxError("Invalid Param");};function s(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)));}function u(e,t){if(!(this instanceof u))return new u(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(_typeof(e)){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return u.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg);}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return u.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi);}else 2===e.length?(n.re=e[0],n.im=e[1]):a();break;case"string":n.im=n.re=0;var r=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,o=0;null===r&&a();for(var s=0;s<r.length;s++){var c=r[s];" "===c||"\t"===c||"\n"===c||("+"===c?i++:"-"===c?o++:"i"===c||"I"===c?(i+o===0&&a()," "===r[s+1]||isNaN(r[s+1])?n.im+=parseFloat((o%2?"-":"")+"1"):(n.im+=parseFloat((o%2?"-":"")+r[s+1]),s++),i=o=0):((i+o===0||isNaN(c))&&a(),"i"===r[s+1]||"I"===r[s+1]?(n.im+=parseFloat((o%2?"-":"")+c),s++):n.re+=parseFloat((o%2?"-":"")+c),i=o=0));}i+o>0&&a();break;case"number":n.im=0,n.re=e;break;default:a();}return isNaN(n.re)||isNaN(n.im),n;}(e,t);this.re=n.re,this.im=n.im;}u.prototype={re:0,im:0,sign:function sign(){var e=this.abs();return new u(this.re/e,this.im/e);},add:function add(e,t){var n=new u(e,t);return this.isInfinite()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:new u(this.re+n.re,this.im+n.im);},sub:function sub(e,t){var n=new u(e,t);return this.isInfinite()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:new u(this.re-n.re,this.im-n.im);},mul:function mul(e,t){var n=new u(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:0===n.im&&0===this.im?new u(this.re*n.re,0):new u(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re);},div:function div(e,t){var n=new u(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return u.NAN;if(this.isInfinite()||n.isZero())return u.INFINITY;if(this.isZero()||n.isInfinite())return u.ZERO;e=this.re,t=this.im;var r,i,o=n.re,a=n.im;return 0===a?new u(e/o,t/o):Math.abs(o)<Math.abs(a)?new u((e*(i=o/a)+t)/(r=o*i+a),(t*i-e)/r):new u((e+t*(i=a/o))/(r=a*i+o),(t-e*i)/r);},pow:function pow(e,t){var n=new u(e,t);if(e=this.re,t=this.im,n.isZero())return u.ONE;if(0===n.im){if(0===t&&e>=0)return new u(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new u(Math.pow(t,n.re),0);case 1:return new u(0,Math.pow(t,n.re));case 2:return new u(-Math.pow(t,n.re),0);case 3:return new u(0,-Math.pow(t,n.re));}}if(0===e&&0===t&&n.re>0&&n.im>=0)return u.ZERO;var r=Math.atan2(t,e),i=s(e,t);return e=Math.exp(n.re*i-n.im*r),t=n.im*i+n.re*r,new u(e*Math.cos(t),e*Math.sin(t));},sqrt:function sqrt(){var e,t,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new u(Math.sqrt(n),0);e=.5*Math.sqrt(2*(i+n));}else e=Math.abs(r)/Math.sqrt(2*(i-n));return t=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new u(e,r<0?-t:t);},exp:function exp(){var e=Math.exp(this.re);return this.im,new u(e*Math.cos(this.im),e*Math.sin(this.im));},expm1:function expm1(){var e=this.re,t=this.im;return new u(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(e<-t||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(1/24+n*(-1/720+n*(1/40320+n*(-1/3628800+n*(1/4790014600+n*(-1/87178291200+n*(1/20922789888e3)))))))-.5);}(t),Math.exp(e)*Math.sin(t));},log:function log(){var e=this.re,t=this.im;return new u(s(e,t),Math.atan2(t,e));},abs:function abs(){return e=this.re,t=this.im,n=Math.abs(e),r=Math.abs(t),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r));var e,t,n,r;},arg:function arg(){return Math.atan2(this.im,this.re);},sin:function sin(){var e=this.re,t=this.im;return new u(Math.sin(e)*i(t),Math.cos(e)*o(t));},cos:function cos(){var e=this.re,t=this.im;return new u(Math.cos(e)*i(t),-Math.sin(e)*o(t));},tan:function tan(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+i(t);return new u(Math.sin(e)/n,o(t)/n);},cot:function cot(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-i(t);return new u(-Math.sin(e)/n,o(t)/n);},sec:function sec(){var e=this.re,t=this.im,n=.5*i(2*t)+.5*Math.cos(2*e);return new u(Math.cos(e)*i(t)/n,Math.sin(e)*o(t)/n);},csc:function csc(){var e=this.re,t=this.im,n=.5*i(2*t)-.5*Math.cos(2*e);return new u(Math.sin(e)*i(t)/n,-Math.cos(e)*o(t)/n);},asin:function asin(){var e=this.re,t=this.im,n=new u(t*t-e*e+1,-2*e*t).sqrt(),r=new u(n.re-t,n.im+e).log();return new u(r.im,-r.re);},acos:function acos(){var e=this.re,t=this.im,n=new u(t*t-e*e+1,-2*e*t).sqrt(),r=new u(n.re-t,n.im+e).log();return new u(Math.PI/2-r.im,r.re);},atan:function atan(){var e=this.re,t=this.im;if(0===e){if(1===t)return new u(0,1/0);if(-1===t)return new u(0,-1/0);}var n=e*e+(1-t)*(1-t),r=new u((1-t*t-e*e)/n,-2*e/n).log();return new u(-.5*r.im,.5*r.re);},acot:function acot(){var e=this.re,t=this.im;if(0===t)return new u(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).atan():new u(0!==e?e/0:0,0!==t?-t/0:0).atan();},asec:function asec(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(0,1/0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).acos():new u(0!==e?e/0:0,0!==t?-t/0:0).acos();},acsc:function acsc(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).asin():new u(0!==e?e/0:0,0!==t?-t/0:0).asin();},sinh:function sinh(){var e=this.re,t=this.im;return new u(o(e)*Math.cos(t),i(e)*Math.sin(t));},cosh:function cosh(){var e=this.re,t=this.im;return new u(i(e)*Math.cos(t),o(e)*Math.sin(t));},tanh:function tanh(){var e=2*this.re,t=2*this.im,n=i(e)+Math.cos(t);return new u(o(e)/n,Math.sin(t)/n);},coth:function coth(){var e=2*this.re,t=2*this.im,n=i(e)-Math.cos(t);return new u(o(e)/n,-Math.sin(t)/n);},csch:function csch(){var e=this.re,t=this.im,n=Math.cos(2*t)-i(2*e);return new u(-2*o(e)*Math.cos(t)/n,2*i(e)*Math.sin(t)/n);},sech:function sech(){var e=this.re,t=this.im,n=Math.cos(2*t)+i(2*e);return new u(2*i(e)*Math.cos(t)/n,-2*o(e)*Math.sin(t)/n);},asinh:function asinh(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t;},acosh:function acosh(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t;}else{t=e.im;e.im=-e.re,e.re=t;}return e;},atanh:function atanh(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,o=r*r+t*t,a=0!==o?new u((i*r-t*t)/o,(t*r+i*t)/o):new u(-1!==e?e/0:0,0!==t?t/0:0),c=a.re;return a.re=s(a.re,a.im)/2,a.im=Math.atan2(a.im,c)/2,n&&(a.im=-a.im),a;},acoth:function acoth(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).atanh():new u(0!==e?e/0:0,0!==t?-t/0:0).atanh();},acsch:function acsch(){var e=this.re,t=this.im;if(0===t)return new u(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).asinh():new u(0!==e?e/0:0,0!==t?-t/0:0).asinh();},asech:function asech(){var e=this.re,t=this.im;if(this.isZero())return u.INFINITY;var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).acosh():new u(0!==e?e/0:0,0!==t?-t/0:0).acosh();},inverse:function inverse(){if(this.isZero())return u.INFINITY;if(this.isInfinite())return u.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new u(e/n,-t/n);},conjugate:function conjugate(){return new u(this.re,-this.im);},neg:function neg(){return new u(-this.re,-this.im);},ceil:function ceil(e){return e=Math.pow(10,e||0),new u(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e);},floor:function floor(e){return e=Math.pow(10,e||0),new u(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e);},round:function round(e){return e=Math.pow(10,e||0),new u(Math.round(this.re*e)/e,Math.round(this.im*e)/e);},equals:function equals(e,t){var n=new u(e,t);return Math.abs(n.re-this.re)<=u.EPSILON&&Math.abs(n.im-this.im)<=u.EPSILON;},clone:function clone(){return new u(this.re,this.im);},toString:function toString(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==e&&(n+=e),0!==t&&(0!==e?n+=t<0?" - ":" + ":t<0&&(n+="-"),1!==(t=Math.abs(t))&&(n+=t),n+="i"),n||"0");},toVector:function toVector(){return[this.re,this.im];},valueOf:function valueOf(){return 0===this.im?this.re:null;},isNaN:function(_isNaN){function isNaN(){return _isNaN.apply(this,arguments);}isNaN.toString=function(){return _isNaN.toString();};return isNaN;}(function(){return isNaN(this.re)||isNaN(this.im);}),isZero:function isZero(){return!(0!==this.re&&-0!==this.re||0!==this.im&&-0!==this.im);},isFinite:function(_isFinite){function isFinite(){return _isFinite.apply(this,arguments);}isFinite.toString=function(){return _isFinite.toString();};return isFinite;}(function(){return isFinite(this.re)&&isFinite(this.im);}),isInfinite:function isInfinite(){return!(this.isNaN()||this.isFinite());}},u.ZERO=new u(0,0),u.ONE=new u(1,0),u.I=new u(0,1),u.PI=new u(Math.PI,0),u.E=new u(Math.E,0),u.INFINITY=new u(1/0,1/0),u.NAN=new u(NaN,NaN),u.EPSILON=1e-16,void 0===(r=function(){return u;}.apply(t,[]))||(e.exports=r);}();},function(e,t,n){"use strict";var r=n(9);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty);},function(e,t,n){"use strict";var r=n(131);e.exports=function(e){return"symbol"==_typeof(e)?"Symbol":"bigint"==typeof e?"BigInt":r(e);};},function(e,t,n){"use strict";var r=n(69);e.exports=Function.prototype.bind||r;},function(e,t,n){"use strict";(function(t){var r=t.Symbol,i=n(32);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==_typeof(r("foo"))&&"symbol"==_typeof(Symbol("bar"))&&i();};}).call(this,n(21));},function(e,t,n){"use strict";var r=n(2),i=n(75),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")?i(n):n;};},function(e,t,n){"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==_typeof(e);};},function(e,t,n){(function(n){var r;/*!
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var i=function i(){this.init();};i.prototype={init:function init(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e;},volume:function volume(e){var t=this||o;if(e=parseFloat(e),t.ctx||h(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++){if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*e);}}return t;}return t._volume;},mute:function mute(e){var t=this||o;t.ctx||h(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++){if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!e||a._muted);}}return t;},stop:function stop(){for(var e=this||o,t=0;t<e._howls.length;t++){e._howls[t].stop();}return e;},unload:function unload(){for(var e=this||o,t=e._howls.length-1;t>=0;t--){e._howls[t].unload();}return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,h()),e;},codecs:function codecs(e){return(this||o)._codecs[e.replace(/^x-/,"")];},_setup:function _setup(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===new Audio().oncanplaythrough&&(e._canPlayEvent="canplay");}catch(t){e.noAudio=!0;}else e.noAudio=!0;try{new Audio().muted&&(e.noAudio=!0);}catch(e){}return e.noAudio||e._setupCodecs(),e;},_setupCodecs:function _setupCodecs(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio():null;}catch(t){return e;}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e;},_unlockAudio:function _unlockAudio(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function t(n){for(;e._html5AudioPool.length<e.html5PoolSize;){try{var r=new Audio();r._unlocked=!0,e._releaseHtml5Audio(r);}catch(n){e.noAudio=!0;break;}}for(var i=0;i<e._howls.length;i++){if(!e._howls[i]._webAudio)for(var o=e._howls[i]._getSoundIds(),a=0;a<o.length;a++){var s=e._howls[i]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load());}}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++){e._howls[n]._emit("unlock");}};};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e;}},_obtainHtml5Audio:function _obtainHtml5Audio(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=new Audio().play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t["catch"](function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");}),new Audio();},_releaseHtml5Audio:function _releaseHtml5Audio(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t;},_autoSuspend:function _autoSuspend(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++){if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++){if(!e._howls[t]._sounds[n]._paused)return e;}}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function t(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume());};e.ctx.suspend().then(t,t);}},3e4),e;}},_autoResume:function _autoResume(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++){e._howls[t]._emit("resume");}}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e;}};var o=new i(),a=function a(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.");};a.prototype={init:function init(e){var t=this;return o.ctx||h(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function action(){t.play();}}),t._preload&&"none"!==t._preload&&t.load(),t;},load:function load(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,r;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(r=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue;}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase());}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break;}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&c(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.");}},play:function play(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++){n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);}1===i?e=null:r=null;}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function action(){n.play(u);}}),u;}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var c=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),l=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-c),p=1e3*l/Math.abs(s._rate),d=n._sprite[e][0]/1e3,h=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var f=function f(){s._paused=!1,s._seek=c,s._start=d,s._stop=h,s._loop=!(!s._loop&&!n._sprite[e][2]);};if(!(c>=h)){var m=s._node;if(n._webAudio){var y=function y(){n._playLock=!1,f(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;m.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===m.bufferSource.start?s._loop?m.bufferSource.noteGrainOn(0,c,86400):m.bufferSource.noteGrainOn(0,c,l):s._loop?m.bufferSource.start(0,c,86400):m.bufferSource.start(0,c,l),p!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),p)),t||setTimeout(function(){n._emit("play",s._id),n._loadQueue();},0);};"running"===o.state&&"interrupted"!==o.ctx.state?y():(n._playLock=!0,n.once("resume",y),n._clearTimer(s._id));}else{var g=function g(){m.currentTime=c,m.muted=s._muted||n._muted||o._muted||m.muted,m.volume=s._volume*o.volume(),m.playbackRate=s._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,f(),r.then(function(){n._playLock=!1,m._unlocked=!0,t||(n._emit("play",s._id),n._loadQueue());})["catch"](function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0;})):t||(n._playLock=!1,f(),n._emit("play",s._id),n._loadQueue()),m.playbackRate=s._rate,m.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),p):(n._endTimers[s._id]=function(){n._ended(s),m.removeEventListener("ended",n._endTimers[s._id],!1);},m.addEventListener("ended",n._endTimers[s._id],!1));}catch(e){n._emit("playerror",s._id,e);}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var v=window&&window.ejecta||!m.readyState&&o._navigator.isCocoonJS;if(m.readyState>=3||v)g();else{n._playLock=!0;var x=function x(){g(),m.removeEventListener(o._canPlayEvent,x,!1);};m.addEventListener(o._canPlayEvent,x,!1),n._clearTimer(s._id);}}return s._id;}n._ended(s);},pause:function pause(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function action(){t.pause(e);}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node);}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null);}return t;},stop:function stop(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function action(){n.stop(e);}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id));}return n;},mute:function mute(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function action(){n.mute(e,t);}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e;}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||e),n._emit("mute",a._id));}return n;},volume:function volume(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?t=parseInt(i[0],10):e=parseFloat(i[0]);}else i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function action(){r.volume.apply(r,i);}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var u=0;u<t.length;u++){(n=r._soundById(t[u]))&&(n._volume=e,i[2]||r._stopFade(t[u]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),r._emit("volume",n._id));}return r;},fade:function fade(e,t,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function action(){i.fade(e,t,n,r);}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),i.volume(e,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if(r||i._stopFade(a[s]),i._webAudio&&!u._muted){var c=o.ctx.currentTime,l=c+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,c),u._node.gain.linearRampToValueAtTime(t,l);}i._startFadeInterval(u,e,t,n,a[s],void 0===r);}}return i;},_startFadeInterval:function _startFadeInterval(e,t,n,r,i,o){var a=this,s=t,u=n-t,c=Math.abs(u/.01),l=Math.max(4,c>0?r/c:r),p=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var i=(Date.now()-p)/r;p=Date.now(),s+=u*i,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id));},l);},_stopFade:function _stopFade(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this;},loop:function loop(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;e=i[0],r._loop=e;}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=r._getSoundIds(t),a=0;a<o.length;a++){(n=r._soundById(o[a]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));}return r;},rate:function rate(){var e,t,n,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?t=parseInt(i[0],10):e=parseFloat(i[0]);}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function action(){r.rate.apply(r,i);}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var u=0;u<t.length;u++){if(n=r._soundById(t[u])){r.playing(t[u])&&(n._rateSeek=r.seek(t[u]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var c=r.seek(t[u]),l=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-c,p=1e3*l/Math.abs(n._rate);!r._endTimers[t[u]]&&n._paused||(r._clearTimer(t[u]),r._endTimers[t[u]]=setTimeout(r._ended.bind(r,n),p)),r._emit("rate",n._id);}}return r;},seek:function seek(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){var i=n._getSoundIds(),a=i.indexOf(r[0]);a>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]));}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function action(){n.seek.apply(n,r);}}),n;var s=n._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?o.ctx.currentTime-s._playStart:0,c=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(c+u*Math.abs(s._rate));}return s._node.currentTime;}var l=n.playing(t);l&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var p=function p(){n._emit("seek",t),l&&n.play(t,!0);};if(l&&!n._webAudio){var d=function d(){n._playLock?setTimeout(d,0):p();};setTimeout(d,0);}else p();}return n;},playing:function playing(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused;}for(var n=0;n<this._sounds.length;n++){if(!this._sounds[n]._paused)return!0;}return!1;},duration:function duration(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t;},state:function state(){return this._state;},unload:function unload(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),o._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);}var r=o._howls.indexOf(e);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++){if(o._howls[n]._src===e._src||e._src.indexOf(o._howls[n]._src)>=0){i=!1;break;}}return u&&i&&delete u[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null;},on:function on(e,t,n,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this;},off:function off(e,t,n){var r=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(t===r[i].fn&&o||!t&&o){r.splice(i,1);break;}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++){0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[]);}}return this;},once:function once(e,t,n){return this.on(e,t,n,1),this;},_emit:function _emit(e,t,n){for(var r=this["_on"+e],i=r.length-1;i>=0;i--){r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n);}.bind(this,r[i].fn),0),r[i].once&&this.off(e,r[i].fn,r[i].id));}return this._loadQueue(e),this;},_loadQueue:function _loadQueue(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action();}return this;},_ended:function _ended(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r);}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this;},_clearTimer:function _clearTimer(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1);}delete this._endTimers[e];}return this;},_soundById:function _soundById(e){for(var t=0;t<this._sounds.length;t++){if(e===this._sounds[t]._id)return this._sounds[t];}return null;},_inactiveSound:function _inactiveSound(){this._drain();for(var e=0;e<this._sounds.length;e++){if(this._sounds[e]._ended)return this._sounds[e].reset();}return new s(this);},_drain:function _drain(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++){this._sounds[n]._ended&&t++;}for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--);}}},_getSoundIds:function _getSoundIds(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++){t.push(this._sounds[n]._id);}return t;}return[e];},_refreshBuffer:function _refreshBuffer(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=u[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this;},_cleanBuffer:function _cleanBuffer(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer;}catch(e){}return e.bufferSource=null,this;},_clearSound:function _clearSound(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA");}};var s=function s(e){this._parent=e,this.init();};s.prototype={init:function init(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this;},create:function create(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*o.volume(),this._node.load()),this;},reset:function reset(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this;},_errorListener:function _errorListener(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1);},_loadListener:function _loadListener(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1);},_endListener:function _endListener(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1);}};var u={},c=function c(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i){r[i]=n.charCodeAt(i);}p(r.buffer,e);}else{var o=new XMLHttpRequest();o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){o.setRequestHeader(t,e._xhr.headers[t]);}),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?p(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".");},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load());},l(o);}},l=function l(e){try{e.send();}catch(t){e.onerror();}},p=function p(e,t){var n=function n(){t._emit("loaderror",null,"Decoding audio data failed.");},r=function r(e){e&&t._sounds.length>0?(u[t._src]=e,d(t,e)):n();};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(r)["catch"](n):o.ctx.decodeAudioData(e,r,n);},d=function d(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue());},h=function h(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext():"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext():o.usingWebAudio=!1;}catch(e){o.usingWebAudio=!1;}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1);}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup();}};void 0===(r=function(){return{Howler:o,Howl:a};}.apply(t,[]))||(e.exports=r),t.Howler=o,t.Howl=a,void 0!==n?(n.HowlerGlobal=i,n.Howler=o,n.Howl=a,n.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=o,window.Howl=a,window.Sound=s);}(),/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--){this._howls[t].stereo(e);}return this;},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this;},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof e?a:(this._orientation=[e,t,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,r,i,o),this);},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t);}),Howl.prototype.stereo=function(e,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function action(){r.stereo(e,n);}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0];}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),r._emit("stereo",s._id);}}return r;},Howl.prototype.pos=function(e,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function action(){o.pos(e,n,r,i);}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof e)return o._pos;o._pos=[e,n,r];}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,r],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(e,n,r)),o._emit("pos",u._id);}}return o;},Howl.prototype.orientation=function(e,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function action(){o.orientation(e,n,r,i);}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof e)return o._orientation;o._orientation=[e,n,r];}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,r],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),t(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(e,n,r)),o._emit("orientation",u._id);}}return o;},Howl.prototype.pannerAttr=function(){var e,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=_typeof(o[0]))return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;e=o[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:i._panningModel});}else 2===o.length&&(e=o[0],n=parseInt(o[1],10));for(var a=i._getSoundIds(n),s=0;s<a.length;s++){if(r=i._soundById(a[s])){var u=r._pannerAttr;u={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:u.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:u.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:u.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:u.panningModel};var c=r._panner;c?(c.coneInnerAngle=u.coneInnerAngle,c.coneOuterAngle=u.coneOuterAngle,c.coneOuterGain=u.coneOuterGain,c.distanceModel=u.distanceModel,c.maxDistance=u.maxDistance,c.refDistance=u.refDistance,c.rolloffFactor=u.rolloffFactor,c.panningModel=u.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),t(r,"spatial"));}}return i;},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id);};}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this);};}(Sound.prototype.reset);var t=function t(e,_t3){"spatial"===(_t3=_t3||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0);};}();}).call(this,n(21));},function(e,t,n){var r;/**
 * @license Fraction.js v4.0.12 09/09/2015
 * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(n){"use strict";var i={s:1,n:0,d:1};function o(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message;}function n(){}return n.prototype=Error.prototype,t.prototype=new n(),t;}var a=d.DivisionByZero=o("DivisionByZero"),s=d.InvalidParameter=o("InvalidParameter");function u(e,t){return isNaN(e=parseInt(e,10))&&c(),e*t;}function c(){throw new s();}var l=function l(e,t){var n,r=0,o=1,s=1,l=0,p=0,d=0,h=1,f=1,m=0,y=1,g=1,v=1,x=1e7;if(null==e);else if(void 0!==t)s=(r=e)*(o=t);else switch(_typeof(e)){case"object":"d"in e&&"n"in e?(r=e.n,o=e.d,"s"in e&&(r*=e.s)):0 in e?(r=e[0],1 in e&&(o=e[1])):c(),s=r*o;break;case"number":if(e<0&&(s=e,e=-e),e%1==0)r=e;else if(e>0){for(e>=1&&(e/=f=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));y<=x&&v<=x;){if(e===(n=(m+g)/(y+v))){y+v<=x?(r=m+g,o=y+v):v>y?(r=g,o=v):(r=m,o=y);break;}e>n?(m+=g,y+=v):(g+=m,v+=y),y>x?(r=g,o=v):(r=m,o=y);}r*=f;}else(isNaN(e)||isNaN(t))&&(o=r=NaN);break;case"string":if(null===(y=e.match(/\d+|./g))&&c(),"-"===y[m]?(s=-1,m++):"+"===y[m]&&m++,y.length===m+1?p=u(y[m++],s):"."===y[m+1]||"."===y[m]?("."!==y[m]&&(l=u(y[m++],s)),(++m+1===y.length||"("===y[m+1]&&")"===y[m+3]||"'"===y[m+1]&&"'"===y[m+3])&&(p=u(y[m],s),h=Math.pow(10,y[m].length),m++),("("===y[m]&&")"===y[m+2]||"'"===y[m]&&"'"===y[m+2])&&(d=u(y[m+1],s),f=Math.pow(10,y[m+1].length)-1,m+=3)):"/"===y[m+1]||":"===y[m+1]?(p=u(y[m],s),h=u(y[m+2],1),m+=3):"/"===y[m+3]&&" "===y[m+1]&&(l=u(y[m],s),p=u(y[m+2],s),h=u(y[m+4],1),m+=5),y.length<=m){s=r=d+(o=h*f)*l+f*p;break;}default:c();}if(0===o)throw new a();i.s=s<0?-1:1,i.n=Math.abs(r),i.d=Math.abs(o);};function p(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e;}}function d(e,t){if(!(this instanceof d))return new d(e,t);l(e,t),e=d.REDUCE?p(i.d,i.n):1,this.s=i.s,this.n=i.n/e,this.d=i.d/e;}d.REDUCE=1,d.prototype={s:1,n:0,d:1,abs:function abs(){return new d(this.n,this.d);},neg:function neg(){return new d(-this.s*this.n,this.d);},add:function add(e,t){return l(e,t),new d(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d);},sub:function sub(e,t){return l(e,t),new d(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d);},mul:function mul(e,t){return l(e,t),new d(this.s*i.s*this.n*i.n,this.d*i.d);},div:function div(e,t){return l(e,t),new d(this.s*i.s*this.n*i.d,this.d*i.n);},clone:function clone(){return new d(this);},mod:function mod(e,t){return isNaN(this.n)||isNaN(this.d)?new d(NaN):void 0===e?new d(this.s*this.n%this.d,1):(l(e,t),0===i.n&&0===this.d&&d(0,0),new d(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d));},gcd:function gcd(e,t){return l(e,t),new d(p(i.n,this.n)*p(i.d,this.d),i.d*this.d);},lcm:function lcm(e,t){return l(e,t),0===i.n&&0===this.n?new d():new d(i.n*this.n,p(i.n,this.n)*p(i.d,this.d));},ceil:function ceil(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.ceil(e*this.s*this.n/this.d),e);},floor:function floor(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.floor(e*this.s*this.n/this.d),e);},round:function round(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.round(e*this.s*this.n/this.d),e);},inverse:function inverse(){return new d(this.s*this.d,this.n);},pow:function pow(e){return e<0?new d(Math.pow(this.s*this.d,-e),Math.pow(this.n,-e)):new d(Math.pow(this.s*this.n,e),Math.pow(this.d,e));},equals:function equals(e,t){return l(e,t),this.s*this.n*i.d==i.s*i.n*this.d;},compare:function compare(e,t){l(e,t);var n=this.s*this.n*i.d-i.s*i.n*this.d;return(0<n)-(n<0);},simplify:function simplify(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function n(e){return 1===e.length?new d(e[0]):n(e.slice(1)).inverse().add(e[0]);}e=e||.001;for(var r=0;r<t.length;r++){var i=n(t.slice(0,r+1));if(i.sub(this.abs()).abs().valueOf()<e)return i.mul(this.s);}return this;},divisible:function divisible(e,t){return l(e,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d));},valueOf:function valueOf(){return this.s*this.n/this.d;},toFraction:function toFraction(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n;},toLatex:function toLatex(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n;},toContinued:function toContinued(){var e,t=this.n,n=this.d,r=[];if(isNaN(this.n)||isNaN(this.d))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e;}while(1!==t);return r;},toString:function toString(e){var t,n=this.n,r=this.d;if(isNaN(n)||isNaN(r))return"NaN";d.REDUCE||(n/=t=p(n,r),r/=t),e=e||15;var i=function(e,t){for(;t%2==0;t/=2){;}for(;t%5==0;t/=5){;}if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++){if(n=10*n%t,r>2e3)return 0;}return r;}(0,r),o=function(e,t,n){for(var r=1,i=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1){1&t&&(r=r*e%n);}return r;}(10,n,t),o=0;o<300;o++){if(r===i)return o;r=10*r%t,i=10*i%t;}return 0;}(0,r,i),a=-1===this.s?"-":"";if(a+=n/r|0,n%=r,(n*=10)&&(a+="."),i){for(var s=o;s--;){a+=n/r|0,n%=r,n*=10;}a+="(";for(s=i;s--;){a+=n/r|0,n%=r,n*=10;}a+=")";}else for(s=e;n&&s--;){a+=n/r|0,n%=r,n*=10;}return a;}},void 0===(r=function(){return d;}.apply(t,[]))||(e.exports=r);}();},function(e,t){e.exports=function e(t,n){"use strict";var r,i,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,c=/^0/,l=function l(t){return e.insensitive&&(""+t).toLowerCase()||""+t;},p=l(t).replace(a,"")||"",d=l(n).replace(a,"")||"",h=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=d.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(p.match(u),16)||1!==h.length&&p.match(s)&&Date.parse(p),y=parseInt(d.match(u),16)||m&&d.match(s)&&Date.parse(d)||null;if(y){if(m<y)return-1;if(m>y)return 1;}for(var g=0,v=Math.max(h.length,f.length);g<v;g++){if(r=!(h[g]||"").match(c)&&parseFloat(h[g])||h[g]||0,i=!(f[g]||"").match(c)&&parseFloat(f[g])||f[g]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(_typeof(r)!=_typeof(i)&&(r+="",i+=""),r<i)return-1;if(r>i)return 1;}return 0;};},function(e,t,n){"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==_typeof(e);};},function(e,t,n){"use strict";var r=n(70),i="function"==typeof Symbol&&"symbol"==_typeof(Symbol("foo")),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,u=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e){return!1;}return e.x===e;}catch(e){return!1;}}(),c=function c(e,t,n,r){var i;(!(t in e)||"function"==typeof(i=r)&&"[object Function]"===o.call(i)&&r())&&(u?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n);},l=function l(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);i&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1){c(e,o[s],t[o[s]],n[o[s]]);}};l.supportsDescriptors=!!u,e.exports=l;},function(e,t,n){"use strict";var r=n(3),i=n(50),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")?i(n):n;};},function(e,t,n){"use strict";e.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.any` requires a global `Promise` be available.");};},function(e,t,n){"use strict";var r=SyntaxError,i=Function,o=TypeError,a=function a(e){try{return Function('"use strict"; return ('+e+").constructor;")();}catch(e){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"");}catch(e){s=null;}var u=function u(){throw new o();},c=s?function(){try{return arguments.callee,u;}catch(e){try{return s(arguments,"callee").get;}catch(e){return u;}}}():u,l=n(10)(),p=Object.getPrototypeOf||function(e){return e.__proto__;},d=a("async function* () {}"),h=d?d.prototype:void 0,f=h?h.prototype:void 0,m="undefined"==typeof Uint8Array?void 0:p(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":l?p([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":a("async function () {}"),"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":f?p(f):void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":a("function* () {}"),"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?p(p([][Symbol.iterator]())):void 0,"%JSON%":"object"==(typeof JSON==="undefined"?"undefined":_typeof(JSON))?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?p(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?p(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?p(""[Symbol.iterator]()):void 0,"%Symbol%":l?Symbol:void 0,"%SyntaxError%":r,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=n(9),x=n(7),b=v.call(Function.call,Array.prototype.concat),w=v.call(Function.apply,Array.prototype.splice),S=v.call(Function.call,String.prototype.replace),M=v.call(Function.call,String.prototype.slice),_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,A=function A(e){var t=M(e,0,1),n=M(e,-1);if("%"===t&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return S(e,_,function(e,t,n,r){i[i.length]=n?S(r,E,"$1"):t||e;}),i;},T=function T(e,t){var n,i=e;if(x(g,i)&&(i="%"+(n=g[i])[0]+"%"),x(y,i)){var a=y[i];if(void 0===a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a};}throw new r("intrinsic "+e+" does not exist!");};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');var n=A(e),i=n.length>0?n[0]:"",a=T("%"+i+"%",t),u=a.name,c=a.value,l=!1,p=a.alias;p&&(i=p[0],w(n,b([0,1],p)));for(var d=1,h=!0;d<n.length;d+=1){var f=n[d],m=M(f,0,1),g=M(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new r("property names with quotes must have matching quotes");if("constructor"!==f&&h||(l=!0),x(y,u="%"+(i+="."+f)+"%"))c=y[u];else if(null!=c){if(!(f in c)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return;}if(s&&d+1>=n.length){var v=s(c,f);c=(h=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:c[f];}else h=x(c,f),c=c[f];h&&!l&&(y[u]=c);}}return c;};},function(e,t){var n;n=function(){return this;}();try{n=n||new Function("return this")();}catch(e){"object"==(typeof window==="undefined"?"undefined":_typeof(window))&&(n=window);}e.exports=n;},function(e,t,n){"use strict";var r=n(2)("%Array%"),i=!r.isArray&&n(11)("Object.prototype.toString");e.exports=r.isArray||function(e){return"[object Array]"===i(e);};},function(e,t,n){"use strict";e.exports=function(e){return!!e;};},function(e,t,n){"use strict";var r=n(20),i=n(122),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n;};},function(e,t,n){"use strict";var r=n(3),i=r("%TypeError%"),o=r("%SyntaxError%"),a=n(7),s={"Property Descriptor":function PropertyDescriptor(e,t){if("Object"!==e(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t){if(a(t,r)&&!n[r])return!1;}var o=a(t,"[[Value]]"),s=a(t,"[[Get]]")||a(t,"[[Set]]");if(o&&s)throw new i("Property Descriptors may not be both accessor and data descriptors");return!0;}};e.exports=function(e,t,n,r){var a=s[t];if("function"!=typeof a)throw new o("unknown record type: "+t);if(!a(e,r))throw new i(n+" must be a "+t);};},function(e,t,n){e.exports=n.p+"logo.svg";},function(e,t,n){"use strict";var r,i,o;i=[],void 0===(o="function"==typeof(r=function r(){function e(){return!0;}function t(){return!1;}function n(){}return function r(){var i=[{name:"number",test:function test(e){return"number"==typeof e;}},{name:"string",test:function test(e){return"string"==typeof e;}},{name:"boolean",test:function test(e){return"boolean"==typeof e;}},{name:"Function",test:function test(e){return"function"==typeof e;}},{name:"Array",test:Array.isArray},{name:"Date",test:function test(e){return e instanceof Date;}},{name:"RegExp",test:function test(e){return e instanceof RegExp;}},{name:"Object",test:function test(e){return"object"==_typeof(e)&&null!==e&&e.constructor===Object;}},{name:"null",test:function test(e){return null===e;}},{name:"undefined",test:function test(e){return void 0===e;}}],o={name:"any",test:e},a=[],s=[],u={types:i,conversions:s,ignore:a};function c(e){var t=k(u.types,function(t){return t.name===e;});if(t)return t;if("any"===e)return o;var n=k(u.types,function(t){return t.name.toLowerCase()===e.toLowerCase();});throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""));}function l(e){return e===o?999:u.types.indexOf(e);}function p(e){var t=k(u.types,function(t){return t.test(e);});if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e);}function d(e){return e.map(function(e){var t=e.types.map(b);return(e.restParam?"...":"")+t.join("|");}).join(",");}function h(e,t){var n=0===e.indexOf("..."),r=(n?e.length>3?e.slice(3):"any":e).split("|").map(P).filter(O).filter(R),i=function(e,t){var n={};return e.forEach(function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e);}),Object.keys(n).map(function(e){return n[e];});}(t,r),o=r.map(function(e){var t=c(e);return{name:e,typeIndex:l(t),test:t.test,conversion:null,conversionIndex:-1};}),a=i.map(function(e){var n=c(e.from);return{name:e.from,typeIndex:l(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)};});return{types:o.concat(a),restParam:n};}function f(e){var t=B(e);return!!t&&t.restParam;}function m(e){return e.types.some(function(e){return null!=e.conversion;});}function y(t){if(t&&0!==t.types.length){if(1===t.types.length)return c(t.types[0].name).test;if(2===t.types.length){var n=c(t.types[0].name).test,r=c(t.types[1].name).test;return function(e){return n(e)||r(e);};}var i=t.types.map(function(e){return c(e.name).test;});return function(e){for(var t=0;t<i.length;t++){if(i[t](e))return!0;}return!1;};}return e;}function g(e){var t,n,r,i;if(f(e)){var o=(t=(i=e,i.slice(0,i.length-1)).map(y)).length,a=y(B(e));return function(e){for(var n=0;n<t.length;n++){if(!t[n](e[n]))return!1;}return function(e){for(var t=o;t<e.length;t++){if(!a(e[t]))return!1;}return!0;}(e)&&e.length>=o+1;};}return 0===e.length?function(e){return 0===e.length;}:1===e.length?(n=y(e[0]),function(e){return n(e[0])&&1===e.length;}):2===e.length?(n=y(e[0]),r=y(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length;}):(t=e.map(y),function(e){for(var n=0;n<t.length;n++){if(!t[n](e[n]))return!1;}return e.length===t.length;});}function v(e,t){return t<e.params.length?e.params[t]:f(e.params)?B(e.params):null;}function x(e,t,n){var r=v(e,t);return(r?n?r.types.filter(w):r.types:[]).map(b);}function b(e){return e.name;}function w(e){return null===e.conversion||void 0===e.conversion;}function S(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++){t[e[n]]=!0;}return Object.keys(t);}(U(e,function(e){return x(e,t,!1);}));return-1!==n.indexOf("any")?["any"]:n;}function M(e,t,n){var r,i,o,a=e||"unnamed",s=n;for(o=0;o<t.length;o++){var u=s.filter(function(e){var n=y(v(e,o));return(o<e.params.length||f(e.params))&&n(t[o]);});if(0===u.length){if((i=S(s,o)).length>0){var c=p(t[o]);return(r=new TypeError("Unexpected type of argument in function "+a+" (expected: "+i.join(" or ")+", actual: "+c+", index: "+o+")")).data={category:"wrongType",fn:a,index:o,actual:c,expected:i},r;}}else s=u;}var l=s.map(function(e){return f(e.params)?1/0:e.params.length;});if(t.length<Math.min.apply(null,l))return i=S(s,o),(r=new TypeError("Too few arguments in function "+a+" (expected: "+i.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:a,index:t.length,expected:i},r;var d=Math.max.apply(null,l);return t.length>d?((r=new TypeError("Too many arguments in function "+a+" (expected: "+d+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:a,index:t.length,expectedLength:d},r):((r=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:t.map(p)},r);}function _(e){for(var t=999,n=0;n<e.types.length;n++){w(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));}return t;}function E(e){for(var t=999,n=0;n<e.types.length;n++){w(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));}return t;}function A(e,t){var n;return 0!=(n=e.restParam-t.restParam)||0!=(n=m(e)-m(t))||0!=(n=_(e)-_(t))?n:E(e)-E(t);}function T(e,t){var n,r,i=Math.min(e.params.length,t.params.length);if(0!=(r=e.params.some(m)-t.params.some(m)))return r;for(n=0;n<i;n++){if(0!=(r=m(e.params[n])-m(t.params[n])))return r;}for(n=0;n<i;n++){if(0!==(r=A(e.params[n],t.params[n])))return r;}return e.params.length-t.params.length;}function N(e){var t,n,r,i,o=[],a=[];switch(e.types.forEach(function(e){e.conversion&&(o.push(c(e.conversion.from).test),a.push(e.conversion.convert));}),a.length){case 0:return function(e){return e;};case 1:return t=o[0],r=a[0],function(e){return t(e)?r(e):e;};case 2:return t=o[0],n=o[1],r=a[0],i=a[1],function(e){return t(e)?r(e):n(e)?i(e):e;};default:return function(e){for(var t=0;t<a.length;t++){if(o[t](e))return a[t](e);}return e;};}}function D(e,t){return function e(n,r,i){if(r<n.length){var o,a=n[r],s=t?a.types.filter(w):a.types;if(a.restParam){var u=s.filter(w);o=u.length<s.length?[u,s]:[s];}else o=s.map(function(e){return[e];});return U(o,function(t){return e(n,r+1,i.concat([t]));});}return[i.map(function(e,t){return{types:e,restParam:t===n.length-1&&f(n)};})];}(e,0,[]);}function C(e,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(r).map(function(e){return function(e,t,n){var r=[];return""!==e.trim()&&(r=e.split(",").map(P).map(function(e,t,r){var i=h(e,n);if(i.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return i;})),r.some(I)?null:{params:r,fn:t};}(e,r[e],u.conversions);}).filter(L).forEach(function(e){var t=k(i,function(t){return function(e,t){for(var n=Math.max(e.params.length,t.params.length),r=0;r<n;r++){if(!z(x(e,r,!0),x(t,r,!0)))return!1;}var i=e.params.length,o=t.params.length,a=f(e.params),s=f(t.params);return a?s?i===o:o>=i:s?i>=o:i===o;}(t,e);});if(t)throw new TypeError('Conflicting signatures "'+d(t.params)+'" and "'+d(e.params)+'".');i.push(e);});var o=U(i,function(e){return(e?D(e.params,!1):[]).map(function(t){return{params:t,fn:e.fn};});}).filter(L);o.sort(T);var a=o[0]&&o[0].params.length<=2&&!f(o[0].params),s=o[1]&&o[1].params.length<=2&&!f(o[1].params),c=o[2]&&o[2].params.length<=2&&!f(o[2].params),l=o[3]&&o[3].params.length<=2&&!f(o[3].params),p=o[4]&&o[4].params.length<=2&&!f(o[4].params),v=o[5]&&o[5].params.length<=2&&!f(o[5].params),b=a&&s&&c&&l&&p&&v,w=o.map(function(e){return g(e.params);}),S=a?y(o[0].params[0]):t,_=s?y(o[1].params[0]):t,E=c?y(o[2].params[0]):t,A=l?y(o[3].params[0]):t,C=p?y(o[4].params[0]):t,R=v?y(o[5].params[0]):t,O=a?y(o[0].params[1]):t,B=s?y(o[1].params[1]):t,j=c?y(o[2].params[1]):t,H=l?y(o[3].params[1]):t,q=p?y(o[4].params[1]):t,G=v?y(o[5].params[1]):t,V=o.map(function(e){return function(e,t){var n=t;if(e.some(m)){var r=f(e),i=e.map(N);n=function n(){for(var e=[],n=r?arguments.length-1:arguments.length,o=0;o<n;o++){e[o]=i[o](arguments[o]);}return r&&(e[n]=arguments[n].map(i[n])),t.apply(this,e);};}var o=n;if(f(e)){var a=e.length-1;o=function o(){return n.apply(this,F(arguments,0,a).concat([F(arguments,a)]));};}return o;}(e.params,e.fn);}),W=a?V[0]:n,X=s?V[1]:n,Y=c?V[2]:n,Z=l?V[3]:n,$=p?V[4]:n,J=v?V[5]:n,Q=a?o[0].params.length:-1,K=s?o[1].params.length:-1,ee=c?o[2].params.length:-1,te=l?o[3].params.length:-1,ne=p?o[4].params.length:-1,re=v?o[5].params.length:-1,ie=b?6:0,oe=o.length,ae=function ae(){for(var t=ie;t<oe;t++){if(w[t](arguments))return V[t].apply(this,arguments);}throw M(e,arguments,o);},se=function e(t,n){return arguments.length===Q&&S(t)&&O(n)?W.apply(e,arguments):arguments.length===K&&_(t)&&B(n)?X.apply(e,arguments):arguments.length===ee&&E(t)&&j(n)?Y.apply(e,arguments):arguments.length===te&&A(t)&&H(n)?Z.apply(e,arguments):arguments.length===ne&&C(t)&&q(n)?$.apply(e,arguments):arguments.length===re&&R(t)&&G(n)?J.apply(e,arguments):ae.apply(e,arguments);};try{Object.defineProperty(se,"name",{value:e});}catch(e){}return se.signatures=function(e){var t={};return e.forEach(function(e){e.params.some(m)||D(e.params,!0).forEach(function(n){t[d(n)]=e.fn;});}),t;}(o),se;}function R(e){return-1===u.ignore.indexOf(e);}function P(e){return e.trim();}function O(e){return!!e;}function L(e){return null!==e;}function I(e){return 0===e.types.length;}function B(e){return e[e.length-1];}function F(e,t,n){return Array.prototype.slice.call(e,t,n);}function z(e,t){for(var n=0;n<e.length;n++){if(r=t,i=e[n],-1!==r.indexOf(i))return!0;}var r,i;return!1;}function k(e,t){for(var n=0;n<e.length;n++){if(t(e[n]))return e[n];}}function U(e,t){return Array.prototype.concat.apply([],e.map(t));}function j(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(("object"==_typeof(r.signatures)||"string"==typeof r.signature)&&""!==r.name)if(""===t)t=r.name;else if(t!==r.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw i.data={actual:r.name,expected:t},i;}}return t;}function H(e){var t,n={};function r(e,r){if(n.hasOwnProperty(e)&&r!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t;}for(var i=0;i<e.length;i++){var o=e[i];if("object"==_typeof(o.signatures))for(var a in o.signatures){o.signatures.hasOwnProperty(a)&&(r(a,o.signatures[a]),n[a]=o.signatures[a]);}else{if("string"!=typeof o.signature)throw(t=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},t;r(o.signature,o),n[o.signature]=o;}}return n;}return(u=C("typed",{"string, Object":C,Object:function Object(e){var t=[];for(var n in e){e.hasOwnProperty(n)&&t.push(e[n]);}return C(j(t),e);},"...Function":function Function(e){return C(j(e),H(e));},"string, ...Function":function stringFunction(e,t){return C(e,H(t));}})).create=r,u.types=i,u.conversions=s,u.ignore=a,u.convert=function(e,t){var n=p(e);if(t===n)return e;for(var r=0;r<u.conversions.length;r++){var i=u.conversions[r];if(i.from===n&&i.to===t)return i.convert(e);}throw new Error("Cannot convert from "+n+" to "+t);},u.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var r=0;r<n.length;r++){n[r]=n[r].trim();}}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t;}var i=n.join(","),o=e.signatures[i];if(o)return o;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))");},u.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<u.types.length;n++){if("Object"===u.types[n].name)return void u.types.splice(n,0,e);}u.types.push(e);},u.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(e);},u;}();})?r.apply(t,i):r)||(e.exports=o);},function(e,t,n){"use strict";(function(t){var n=[],r=void 0===t?window:t,i=Math.pow(256,6),o=Math.pow(2,52),a=2*o,s=Math.random;function u(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<256;){a[i]=i++;}for(i=0;i<256;i++){a[i]=a[o=255&o+e[i%n]+(t=a[i])],a[o]=t;}(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,a=r.S;e--;){t=a[i=255&i+1],n=256*n+a[255&(a[i]=a[o=255&o+t])+(a[o]=t)];}return r.i=i,r.j=o,n;})(256);}function c(e,t){var n,r=[],i=_typeof(e)[0];if(t&&"o"==i)for(n in e){try{r.push(c(e[n],t-1));}catch(e){}}return r.length?r:"s"==i?e:e+"\0";}function l(e,t){for(var n,r=e+"",i=0;i<r.length;){t[255&i]=255&(n^=19*t[255&i])+r.charCodeAt(i++);}return d(t);}function p(e){try{return r.crypto.getRandomValues(e=new Uint8Array(256)),d(e);}catch(e){return[+new Date(),r,r.navigator&&r.navigator.plugins,r.screen,d(n)];}}function d(e){return String.fromCharCode.apply(0,e);}e.exports=function(t,r){if(r&&!0===r.global)return r.global=!1,Math.random=e.exports(t,r),r.global=!0,Math.random;var s=r&&r.entropy||!1,h=[],f=(l(c(s?[t,d(n)]:0 in arguments?t:p(),3),h),new u(h));return l(d(f.S),n),function(){for(var e=f.g(6),t=i,n=0;e<o;){e=256*(e+n),t*=256,n=f.g(1);}for(;e>=a;){e/=2,t/=2,n>>>=1;}return(e+n)/t;};},e.exports.resetGlobal=function(){Math.random=s;},l(Math.random(),n);}).call(this,n(21));},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==_typeof(e)&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n;};},function(e,t,n){"use strict";n(19)();var r=n(72)(),i=n(113),o=n(115),a=n(43),s=n(117),u=n(126),c=a("Promise.all"),l=a("Promise.reject"),p=function p(e){return e;};e.exports=function(e){var t=this;if("Object"!==o(t))throw new TypeError("`this` value must be an object");var n=function n(e){return l(t,e);};return c(t,u(s(e),function(e){var r=i(t,e);try{return r.then(n,p);}catch(e){return e;}})).then(function(e){throw new r(e,"Every promise rejected");},p);};},function(e,t,n){"use strict";var r=n(2),i=n(74),o=n(78),a=n(5),s=n(82),u=r("%TypeError%");e.exports=function(e,t,n){if("String"!==a(e))throw new u("Assertion failed: `S` must be a String");if(!o(t)||t<0||t>s)throw new u("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if("Boolean"!==a(n))throw new u("Assertion failed: `unicode` must be a Boolean");return n?t+1>=e.length?t+1:t+i(e,t)["[[CodeUnitCount]]"]:t+1;};},function(e,t,n){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==_typeof(Symbol.iterator))return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e){return!1;}if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1;}return!0;};},function(e,t,n){"use strict";e.exports=function(e){return"number"==typeof e&&e>=55296&&e<=56319;};},function(e,t,n){"use strict";e.exports=function(e){return"number"==typeof e&&e>=56320&&e<=57343;};},function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e;};},function(e,t,n){"use strict";var r=n(2),i=r("%TypeError%"),o=r("%SyntaxError%"),a=n(7),s={"Property Descriptor":function PropertyDescriptor(e,t){if("Object"!==e(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t){if(a(t,r)&&!n[r])return!1;}var o=a(t,"[[Value]]"),s=a(t,"[[Get]]")||a(t,"[[Set]]");if(o&&s)throw new i("Property Descriptors may not be both accessor and data descriptors");return!0;}};e.exports=function(e,t,n,r){var a=s[t];if("function"!=typeof a)throw new o("unknown record type: "+t);if(!a(e,r))throw new i(n+" must be a "+t);};},function(e,t,n){"use strict";e.exports=n(92);},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(39),o=n(37),a=n(12);e.exports=function(e,t){if(!a(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var n=i(e,t);if(null!=n){if(!o(n))throw new r(t+"is not a function");return n;}};},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(12),o=n(97);e.exports=function(e,t){if(!i(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");return o(e)[t];};},function(e,t,n){"use strict";var r=n(10)(),i=n(2),o=n(11),a=i("%Symbol.iterator%",!0),s=o("String.prototype.slice");e.exports=function(e,t){var n;return r?n=e.GetMethod(t,a):e.IsArray(t)?n=function n(){var e=-1,t=this;return{next:function next(){return{done:(e+=1)>=t.length,value:t[e]};}};}:"String"===e.Type(t)&&(n=function n(){var n=0;return{next:function next(){var r=e.AdvanceStringIndex(t,n,!0),i=s(t,n,r);return n=r,{done:r>t.length,value:i};}};}),n;};},function(e,t,n){"use strict";var r=n(2),i=n(11),o=r("%Reflect.apply%",!0)||i("%Function.prototype.apply%");e.exports=function(e,t){var n=arguments.length>2?arguments[2]:[];return o(e,t,n);};},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(104),o=n(12),a=n(5);e.exports=function(e,t){if("Object"!==a(e))throw new r("Assertion failed: Type(O) is not Object");if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true, got "+i(t));return e[t];};},function(e,t,n){"use strict";var r=n(44),i=n(114),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")?i(n):n;};},function(e,t,n){"use strict";var r=TypeError,i=Object.getOwnPropertyDescriptor;if(i)try{i({},"");}catch(e){i=null;}var o=function o(){throw new r();},a=i?function(){try{return arguments.callee,o;}catch(e){try{return i(arguments,"callee").get;}catch(e){return o;}}}():o,s=n(10)(),u=Object.getPrototypeOf||function(e){return e.__proto__;},c=void 0,l="undefined"==typeof Uint8Array?void 0:u(Uint8Array),p={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":s?u([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":c&&s&&Symbol.asyncIterator?c[Symbol.asyncIterator]():void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?u(u([][Symbol.iterator]())):void 0,"%JSON%":"object"==(typeof JSON==="undefined"?"undefined":_typeof(JSON))?JSON:void 0,"%JSONParse%":"object"==(typeof JSON==="undefined"?"undefined":_typeof(JSON))?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&s?u(new Map()[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&s?u(new Set()[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":s?u(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":s?Symbol:void 0,"%SymbolPrototype%":s?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":l,"%TypedArrayPrototype%":l?l.prototype:void 0,"%TypeError%":r,"%TypeErrorPrototype%":r.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},d=n(9).call(Function.call,String.prototype.replace),h=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,m=function m(e){var t=[];return d(e,h,function(e,n,r,i){t[t.length]=r?d(i,f,"$1"):n||e;}),t;},y=function y(e,t){if(!(e in p))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===p[e]&&!t)throw new r("intrinsic "+e+" exists, but is not available. Please file an issue!");return p[e];};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=m(e),o=y("%"+(n.length>0?n[0]:"")+"%",t),a=1;a<n.length;a+=1){if(null!=o)if(i&&a+1>=n.length){var s=i(o,n[a]);if(!t&&!(n[a]in o))throw new r("base intrinsic for "+e+" exists, but the property is not available.");o=s?s.get||s.value:o[n[a]];}else o=o[n[a]];}return o;};},function(e,t,n){"use strict";var r=String.prototype.valueOf,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==_typeof(Symbol.toStringTag);e.exports=function(e){return"string"==typeof e||"object"==_typeof(e)&&(o?function(e){try{return r.call(e),!0;}catch(e){return!1;}}(e):"[object String]"===i.call(e));};},function(e,t,n){"use strict";e.exports=n(127);},function(e,t,n){"use strict";var r=n(128),i=n(141),o=n(142),a=n(48),s=n(149),u=n(58),c=n(150),l=n(159),p=n(160),d=n(24),h=n(45),f=Object("a"),m="a"!==f[0]||!(0 in f),y=d("String.prototype.split");e.exports=function(e){var t,n=l(this),d=m&&h(n)?y(n,""):n,f=c(d.length);if(!u(e))throw new TypeError("Array.prototype.map callback must be a function");arguments.length>1&&(t=arguments[1]);for(var g=r(n,f),v=0;v<f;){var x=p(v),b=s(n,x);if(b){var w=a(n,x),S=i(e,t,[w,v,n]);o(g,x,S);}v+=1;}return g;};},function(e,t,n){"use strict";var r=n(3)("%TypeError%"),i=n(129),o=n(16),a=n(8);e.exports=function(e,t){if("Object"!==a(e))throw new r("Assertion failed: Type(O) is not Object");if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true, got "+i(t));return e[t];};},function(e,t,n){"use strict";var r=n(3)("%Array%"),i=!r.isArray&&n(18)("Object.prototype.toString");e.exports=r.isArray||function(e){return"[object Array]"===i(e);};},function(e,t,n){"use strict";var r=n(9),i=n(3),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),u=i("%Object.defineProperty%",!0);if(u)try{u({},"a",{value:1});}catch(e){u=null;}e.exports=function(){return s(r,a,arguments);};var c=function c(){return s(r,o,arguments);};u?u(e.exports,"apply",{value:c}):e.exports.apply=c;},function(e,t,n){"use strict";var r=n(3)("%Object.defineProperty%",!0);if(r)try{r({},"a",{value:1});}catch(e){r=null;}var i=n(18)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,n,o,a,s){if(!r){if(!e(s))return!1;if(!s["[[Configurable]]"]||!s["[[Writable]]"])return!1;if(a in o&&i(o,a)!==!!s["[[Enumerable]]"])return!1;var u=s["[[Value]]"];return o[a]=u,t(o[a],u);}return r(o,a,n(s)),!0;};},function(e,t,n){"use strict";var r=n(25),i=n(8);e.exports=function(e){if(void 0===e)return e;r(i,"Property Descriptor","Desc",e);var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=e["[[Configurable]]"]),t;};},function(e,t,n){"use strict";var r=n(7),i=n(25),o=n(8);e.exports=function(e){return void 0!==e&&(i(o,"Property Descriptor","Desc",e),!(!r(e,"[[Value]]")&&!r(e,"[[Writable]]")));};},function(e,t,n){"use strict";var r=n(55);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:r(e)&&r(t);};},function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e;};},function(e,t,n){"use strict";var r=n(7),i=n(3)("%TypeError%"),o=n(8),a=n(57),s=n(58);e.exports=function(e){if("Object"!==o(e))throw new i("ToPropertyDescriptor requires an object");var t={};if(r(e,"enumerable")&&(t["[[Enumerable]]"]=a(e.enumerable)),r(e,"configurable")&&(t["[[Configurable]]"]=a(e.configurable)),r(e,"value")&&(t["[[Value]]"]=e.value),r(e,"writable")&&(t["[[Writable]]"]=a(e.writable)),r(e,"get")){var n=e.get;if(void 0!==n&&!s(n))throw new i("getter must be a function");t["[[Get]]"]=n;}if(r(e,"set")){var u=e.set;if(void 0!==u&&!s(u))throw new i("setter must be a function");t["[[Set]]"]=u;}if((r(t,"[[Get]]")||r(t,"[[Set]]"))&&(r(t,"[[Value]]")||r(t,"[[Writable]]")))throw new i("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t;};},function(e,t,n){"use strict";e.exports=function(e){return!!e;};},function(e,t,n){"use strict";e.exports=n(136);},function(e,t,n){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=_typeof(e);};},function(e,t,n){"use strict";var r=n(161),i=n(47);e.exports=function(){var e=Array.prototype.map;return r(e)?e:i;};},function(e,t,n){"use strict";var r=n(19),i=n(30);e.exports=function(){return r(),"function"==typeof Promise.any?Promise.any:i;};},function(e,t,n){var r,i;/*! VelocityJS.org (1.5.2). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */ /*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */!function(e){"use strict";if(!e.jQuery){var t=function t(e,n){return new t.fn.init(e,n);};t.isWindow=function(e){return e&&e===e.window;},t.type=function(e){return e?"object"==_typeof(e)||"function"==typeof e?r[o.call(e)]||"object":_typeof(e):e+"";},t.isArray=Array.isArray||function(e){return"array"===t.type(e);},t.isPlainObject=function(e){var n;if(!e||"object"!==t.type(e)||e.nodeType||t.isWindow(e))return!1;try{if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1;}catch(e){return!1;}for(n in e){;}return void 0===n||i.call(e,n);},t.each=function(e,t,n){var r=0,i=e.length,o=u(e);if(n){if(o)for(;r<i&&!1!==t.apply(e[r],n);r++){;}else for(r in e){if(e.hasOwnProperty(r)&&!1===t.apply(e[r],n))break;}}else if(o)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++){;}else for(r in e){if(e.hasOwnProperty(r)&&!1===t.call(e[r],r,e[r]))break;}return e;},t.data=function(e,r,i){if(void 0===i){var o=e[t.expando],a=o&&n[o];if(void 0===r)return a;if(a&&r in a)return a[r];}else if(void 0!==r){var s=e[t.expando]||(e[t.expando]=++t.uuid);return n[s]=n[s]||{},n[s][r]=i,i;}},t.removeData=function(e,r){var i=e[t.expando],o=i&&n[i];o&&(r?t.each(r,function(e,t){delete o[t];}):delete n[i]);},t.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[u]||{},u++),"object"!=_typeof(s)&&"function"!==t.type(s)&&(s={}),u===c&&(s=this,u--);u<c;u++){if(o=arguments[u])for(i in o){o.hasOwnProperty(i)&&(e=s[i],s!==(r=o[i])&&(l&&r&&(t.isPlainObject(r)||(n=t.isArray(r)))?(n?(n=!1,a=e&&t.isArray(e)?e:[]):a=e&&t.isPlainObject(e)?e:{},s[i]=t.extend(l,a,r)):void 0!==r&&(s[i]=r)));}}return s;},t.queue=function(e,n,r){if(e){n=(n||"fx")+"queue";var i,o,a,s=t.data(e,n);return r?(!s||t.isArray(r)?s=t.data(e,n,(a=o||[],(i=r)&&(u(Object(i))?function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;){e[i++]=t[r++];}if(n!=n)for(;void 0!==t[r];){e[i++]=t[r++];}e.length=i;}(a,"string"==typeof i?[i]:i):[].push.call(a,i)),a)):s.push(r),s):s||[];}},t.dequeue=function(e,n){t.each(e.nodeType?[e]:e,function(e,r){n=n||"fx";var i=t.queue(r,n),o=i.shift();"inprogress"===o&&(o=i.shift()),o&&("fx"===n&&i.unshift("inprogress"),o.call(r,function(){t.dequeue(r,n);}));});},t.fn=t.prototype={init:function init(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.");},offset:function offset(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)};},position:function position(){var e=this[0],n=function(e){for(var t=e.offsetParent;t&&"html"!==t.nodeName.toLowerCase()&&t.style&&"static"===t.style.position.toLowerCase();){t=t.offsetParent;}return t||document;}(e),r=this.offset(),i=/^(?:body|html)$/i.test(n.nodeName)?{top:0,left:0}:t(n).offset();return r.top-=parseFloat(e.style.marginTop)||0,r.left-=parseFloat(e.style.marginLeft)||0,n.style&&(i.top+=parseFloat(n.style.borderTopWidth)||0,i.left+=parseFloat(n.style.borderLeftWidth)||0),{top:r.top-i.top,left:r.left-i.left};}};var n={};t.expando="velocity"+new Date().getTime(),t.uuid=0;for(var r={},i=r.hasOwnProperty,o=r.toString,a="Boolean Number String Function Array Date RegExp Object Error".split(" "),s=0;s<a.length;s++){r["[object "+a[s]+"]"]=a[s].toLowerCase();}t.fn.init.prototype=t.fn,e.Velocity={Utilities:t};}function u(e){var n=e.length,r=t.type(e);return"function"!==r&&!t.isWindow(e)&&(!(1!==e.nodeType||!n)||"array"===r||0===n||"number"==typeof n&&n>0&&n-1 in e);}}(window),function(o){"use strict";"object"==_typeof(e.exports)?e.exports=o():void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i);}(function(){"use strict";return function(e,t,n,r){var i,o=function(){if(n.documentMode)return n.documentMode;for(var e=7;e>4;e--){var t=n.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;}}(),a=(i=0,t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){var t,n=new Date().getTime();return t=Math.max(0,16-(n-i)),i=n+t,setTimeout(function(){e(n+t);},t);}),s=function(){var e=t.performance||{};if("function"!=typeof e.now){var n=e.timing&&e.timing.navigationStart?e.timing.navigationStart:new Date().getTime();e.now=function(){return new Date().getTime()-n;};}return e;}();var u=function(){var e=Array.prototype.slice;try{return e.call(n.documentElement),e;}catch(t){return function(t,n){var r=this.length;if("number"!=typeof t&&(t=0),"number"!=typeof n&&(n=r),this.slice)return e.call(this,t,n);var i,o=[],a=t>=0?t:Math.max(0,r+t),s=(n<0?r+n:Math.min(n,r))-a;if(s>0)if(o=new Array(s),this.charAt)for(i=0;i<s;i++){o[i]=this.charAt(a+i);}else for(i=0;i<s;i++){o[i]=this[a+i];}return o;};}}(),c=function c(){return Array.prototype.includes?function(e,t){return e.includes(t);}:Array.prototype.indexOf?function(e,t){return e.indexOf(t)>=0;}:function(e,t){for(var n=0;n<e.length;n++){if(e[n]===t)return!0;}return!1;};};function l(e){return d.isWrapped(e)?e=u.call(e):d.isNode(e)&&(e=[e]),e;}var p,d={isNumber:function isNumber(e){return"number"==typeof e;},isString:function isString(e){return"string"==typeof e;},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e);},isFunction:function isFunction(e){return"[object Function]"===Object.prototype.toString.call(e);},isNode:function isNode(e){return e&&e.nodeType;},isWrapped:function isWrapped(e){return e&&e!==t&&d.isNumber(e.length)&&!d.isString(e)&&!d.isFunction(e)&&!d.isNode(e)&&(0===e.length||d.isNode(e[0]));},isSVG:function isSVG(e){return t.SVGElement&&e instanceof t.SVGElement;},isEmptyObject:function isEmptyObject(e){for(var t in e){if(e.hasOwnProperty(t))return!1;}return!0;}},h=!1;if(e.fn&&e.fn.jquery?(p=e,h=!0):p=t.Velocity.Utilities,o<=8&&!h)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(o<=7)){var f={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t.navigator.userAgent),isAndroid:/Android/i.test(t.navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(t.navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(t.navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[],delayedElements:{count:0}},CSS:{},Utilities:p,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:400,easing:"swing",begin:void 0,complete:void 0,progress:void 0,display:void 0,visibility:void 0,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0,promiseRejectEmpty:!0},init:function init(e){p.data(e,"velocity",{isSVG:d.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}});},hook:null,mock:!1,version:{major:1,minor:5,patch:2},debug:!1,timestamp:!0,pauseAll:function pauseAll(e){var t=new Date().getTime();p.each(f.State.calls,function(t,n){if(n){if(void 0!==e&&(n[2].queue!==e||!1===n[2].queue))return!0;n[5]={resume:!1};}}),p.each(f.State.delayedElements,function(e,n){n&&w(n,t);});},resumeAll:function resumeAll(e){var t=new Date().getTime();p.each(f.State.calls,function(t,n){if(n){if(void 0!==e&&(n[2].queue!==e||!1===n[2].queue))return!0;n[5]&&(n[5].resume=!0);}}),p.each(f.State.delayedElements,function(e,n){n&&S(n,t);});}};void 0!==t.pageYOffset?(f.State.scrollAnchor=t,f.State.scrollPropertyLeft="pageXOffset",f.State.scrollPropertyTop="pageYOffset"):(f.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,f.State.scrollPropertyLeft="scrollLeft",f.State.scrollPropertyTop="scrollTop");var m=function(){function e(e){return-e.tension*e.x-e.friction*e.v;}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)};}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),c=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+c*r,n;}return function e(t,r,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},c=[0],l=0;for(t=parseFloat(t)||500,r=parseFloat(r)||20,i=i||null,u.tension=t,u.friction=r,a=(o=null!==i)?(l=e(t,r))/i*.016:.016;s=n(s||u,a),c.push(1+s.x),l+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;){;}return o?function(e){return c[e*(c.length-1)|0];}:l;};}();f.Easings={linear:function linear(e){return e;},swing:function swing(e){return .5-Math.cos(e*Math.PI)/2;},spring:function spring(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e);}},p.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){f.Easings[t[0]]=_.apply(null,t[1]);});var y=f.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"],units:["%","em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","Q","in","pc","pt","px","deg","grad","rad","turn","s","ms"],colorNames:{aliceblue:"240,248,255",antiquewhite:"250,235,215",aquamarine:"127,255,212",aqua:"0,255,255",azure:"240,255,255",beige:"245,245,220",bisque:"255,228,196",black:"0,0,0",blanchedalmond:"255,235,205",blueviolet:"138,43,226",blue:"0,0,255",brown:"165,42,42",burlywood:"222,184,135",cadetblue:"95,158,160",chartreuse:"127,255,0",chocolate:"210,105,30",coral:"255,127,80",cornflowerblue:"100,149,237",cornsilk:"255,248,220",crimson:"220,20,60",cyan:"0,255,255",darkblue:"0,0,139",darkcyan:"0,139,139",darkgoldenrod:"184,134,11",darkgray:"169,169,169",darkgrey:"169,169,169",darkgreen:"0,100,0",darkkhaki:"189,183,107",darkmagenta:"139,0,139",darkolivegreen:"85,107,47",darkorange:"255,140,0",darkorchid:"153,50,204",darkred:"139,0,0",darksalmon:"233,150,122",darkseagreen:"143,188,143",darkslateblue:"72,61,139",darkslategray:"47,79,79",darkturquoise:"0,206,209",darkviolet:"148,0,211",deeppink:"255,20,147",deepskyblue:"0,191,255",dimgray:"105,105,105",dimgrey:"105,105,105",dodgerblue:"30,144,255",firebrick:"178,34,34",floralwhite:"255,250,240",forestgreen:"34,139,34",fuchsia:"255,0,255",gainsboro:"220,220,220",ghostwhite:"248,248,255",gold:"255,215,0",goldenrod:"218,165,32",gray:"128,128,128",grey:"128,128,128",greenyellow:"173,255,47",green:"0,128,0",honeydew:"240,255,240",hotpink:"255,105,180",indianred:"205,92,92",indigo:"75,0,130",ivory:"255,255,240",khaki:"240,230,140",lavenderblush:"255,240,245",lavender:"230,230,250",lawngreen:"124,252,0",lemonchiffon:"255,250,205",lightblue:"173,216,230",lightcoral:"240,128,128",lightcyan:"224,255,255",lightgoldenrodyellow:"250,250,210",lightgray:"211,211,211",lightgrey:"211,211,211",lightgreen:"144,238,144",lightpink:"255,182,193",lightsalmon:"255,160,122",lightseagreen:"32,178,170",lightskyblue:"135,206,250",lightslategray:"119,136,153",lightsteelblue:"176,196,222",lightyellow:"255,255,224",limegreen:"50,205,50",lime:"0,255,0",linen:"250,240,230",magenta:"255,0,255",maroon:"128,0,0",mediumaquamarine:"102,205,170",mediumblue:"0,0,205",mediumorchid:"186,85,211",mediumpurple:"147,112,219",mediumseagreen:"60,179,113",mediumslateblue:"123,104,238",mediumspringgreen:"0,250,154",mediumturquoise:"72,209,204",mediumvioletred:"199,21,133",midnightblue:"25,25,112",mintcream:"245,255,250",mistyrose:"255,228,225",moccasin:"255,228,181",navajowhite:"255,222,173",navy:"0,0,128",oldlace:"253,245,230",olivedrab:"107,142,35",olive:"128,128,0",orangered:"255,69,0",orange:"255,165,0",orchid:"218,112,214",palegoldenrod:"238,232,170",palegreen:"152,251,152",paleturquoise:"175,238,238",palevioletred:"219,112,147",papayawhip:"255,239,213",peachpuff:"255,218,185",peru:"205,133,63",pink:"255,192,203",plum:"221,160,221",powderblue:"176,224,230",purple:"128,0,128",red:"255,0,0",rosybrown:"188,143,143",royalblue:"65,105,225",saddlebrown:"139,69,19",salmon:"250,128,114",sandybrown:"244,164,96",seagreen:"46,139,87",seashell:"255,245,238",sienna:"160,82,45",silver:"192,192,192",skyblue:"135,206,235",slateblue:"106,90,205",slategray:"112,128,144",snow:"255,250,250",springgreen:"0,255,127",steelblue:"70,130,180",tan:"210,180,140",teal:"0,128,128",thistle:"216,191,216",tomato:"255,99,71",turquoise:"64,224,208",violet:"238,130,238",wheat:"245,222,179",whitesmoke:"245,245,245",white:"255,255,255",yellowgreen:"154,205,50",yellow:"255,255,0"}},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function register(){for(var e=0;e<y.Lists.colors.length;e++){var t="color"===y.Lists.colors[e]?"0 0 0 1":"255 255 255 1";y.Hooks.templates[y.Lists.colors[e]]=["Red Green Blue Alpha",t];}var n,r,i;if(o)for(n in y.Hooks.templates){if(y.Hooks.templates.hasOwnProperty(n)){i=(r=y.Hooks.templates[n])[0].split(" ");var a=r[1].match(y.RegEx.valueSplit);"Color"===i[0]&&(i.push(i.shift()),a.push(a.shift()),y.Hooks.templates[n]=[i.join(" "),a.join(" ")]);}}for(n in y.Hooks.templates){if(y.Hooks.templates.hasOwnProperty(n))for(var s in i=(r=y.Hooks.templates[n])[0].split(" ")){if(i.hasOwnProperty(s)){var u=n+i[s],c=s;y.Hooks.registered[u]=[n,c];}}}},getRoot:function getRoot(e){var t=y.Hooks.registered[e];return t?t[0]:e;},getUnit:function getUnit(e,t){var n=(e.substr(t||0,5).match(/^[a-z%]+/)||[])[0]||"";return n&&c(y.Lists.units)?n:"";},fixColors:function fixColors(e){return e.replace(/(rgba?\(\s*)?(\b[a-z]+\b)/g,function(e,t,n){return y.Lists.colorNames.hasOwnProperty(n)?(t||"rgba(")+y.Lists.colorNames[n]+(t?"":",1)"):t+n;});},cleanRootPropertyValue:function cleanRootPropertyValue(e,t){return y.RegEx.valueUnwrap.test(t)&&(t=t.match(y.RegEx.valueUnwrap)[1]),y.Values.isCSSNullValue(t)&&(t=y.Hooks.templates[e][1]),t;},extractValue:function extractValue(e,t){var n=y.Hooks.registered[e];if(n){var r=n[0],i=n[1];return(t=y.Hooks.cleanRootPropertyValue(r,t)).toString().match(y.RegEx.valueSplit)[i];}return t;},injectValue:function injectValue(e,t,n){var r=y.Hooks.registered[e];if(r){var i,o=r[0],a=r[1];return(i=(n=y.Hooks.cleanRootPropertyValue(o,n)).toString().match(y.RegEx.valueSplit))[a]=t,i.join(" ");}return n;}},Normalizations:{registered:{clip:function clip(e,t,n){switch(e){case"name":return"clip";case"extract":var r;return r=y.RegEx.wrappedValueAlreadyExtracted.test(n)?n:(r=n.toString().match(y.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):n;case"inject":return"rect("+n+")";}},blur:function blur(e,t,n){switch(e){case"name":return f.State.isFirefox?"filter":"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var i=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=i?i[1]:0;}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none";}},opacity:function opacity(e,t,n){if(o<=8)switch(e){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=r?r[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")";}else switch(e){case"name":return"opacity";case"extract":case"inject":return n;}}},register:function register(){o&&!(o>9)||f.State.isGingerbread||(y.Lists.transformsBase=y.Lists.transformsBase.concat(y.Lists.transforms3D));for(var e=0;e<y.Lists.transformsBase.length;e++){!function(){var t=y.Lists.transformsBase[e];y.Normalizations.registered[t]=function(e,n,r){switch(e){case"name":return"transform";case"extract":return void 0===b(n)||void 0===b(n).transformCache[t]?/^scale/i.test(t)?1:0:b(n).transformCache[t].replace(/[()]/g,"");case"inject":var i=!1;switch(t.substr(0,t.length-1)){case"translate":i=!/(%|px|em|rem|vw|vh|\d)$/i.test(r);break;case"scal":case"scale":f.State.isAndroid&&void 0===b(n).transformCache[t]&&r<1&&(r=1),i=!/(\d)$/i.test(r);break;case"skew":case"rotate":i=!/(deg|\d)$/i.test(r);}return i||(b(n).transformCache[t]="("+r+")"),b(n).transformCache[t];}};}();}for(var t=0;t<y.Lists.colors.length;t++){!function(){var e=y.Lists.colors[t];y.Normalizations.registered[e]=function(t,n,r){switch(t){case"name":return e;case"extract":var i;if(y.RegEx.wrappedValueAlreadyExtracted.test(r))i=r;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(r)?a=void 0!==s[r]?s[r]:s.black:y.RegEx.isHex.test(r)?a="rgb("+y.Values.hexToRgb(r).join(" ")+")":/^rgba?\(/i.test(r)||(a=s.black),i=(a||r).toString().match(y.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ");}return(!o||o>8)&&3===i.split(" ").length&&(i+=" 1"),i;case"inject":return /^rgb/.test(r)?r:(o<=8?4===r.split(" ").length&&(r=r.split(/\s+/).slice(0,3).join(" ")):3===r.split(" ").length&&(r+=" 1"),(o<=8?"rgb":"rgba")+"("+r.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")");}};}();}function n(e,t,n){if("border-box"===y.getPropertyValue(t,"boxSizing").toString().toLowerCase()===(n||!1)){var r,i,o=0,a="width"===e?["Left","Right"]:["Top","Bottom"],s=["padding"+a[0],"padding"+a[1],"border"+a[0]+"Width","border"+a[1]+"Width"];for(r=0;r<s.length;r++){i=parseFloat(y.getPropertyValue(t,s[r])),isNaN(i)||(o+=i);}return n?-o:o;}return 0;}function r(e,t){return function(r,i,o){switch(r){case"name":return e;case"extract":return parseFloat(o)+n(e,i,t);case"inject":return parseFloat(o)-n(e,i,t)+"px";}};}y.Normalizations.registered.innerWidth=r("width",!0),y.Normalizations.registered.innerHeight=r("height",!0),y.Normalizations.registered.outerWidth=r("width"),y.Normalizations.registered.outerHeight=r("height");}},Names:{camelCase:function camelCase(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase();});},SVGAttribute:function SVGAttribute(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(o||f.State.isAndroid&&!f.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e);},prefixCheck:function prefixCheck(e){if(f.State.prefixMatches[e])return[f.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,r=t.length;n<r;n++){var i;if(i=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase();}),d.isString(f.State.prefixElement.style[i]))return f.State.prefixMatches[e]=i,[i,!0];}return[e,!1];}},Values:{hexToRgb:function hexToRgb(e){var t;return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r;}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0];},isCSSNullValue:function isCSSNullValue(e){return!e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e);},getUnitType:function getUnitType(e){return /^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px";},getDisplayType:function getDisplayType(e){var t=e&&e.tagName.toString().toLowerCase();return /^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block";},addClass:function addClass(e,t){if(e)if(e.classList)e.classList.add(t);else if(d.isString(e.className))e.className+=(e.className.length?" ":"")+t;else{var n=e.getAttribute(o<=7?"className":"class")||"";e.setAttribute("class",n+(n?" ":"")+t);}},removeClass:function removeClass(e,t){if(e)if(e.classList)e.classList.remove(t);else if(d.isString(e.className))e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ");else{var n=e.getAttribute(o<=7?"className":"class")||"";e.setAttribute("class",n.replace(new RegExp("(^|s)"+t.split(" ").join("|")+"(s|$)","gi")," "));}}},getPropertyValue:function getPropertyValue(e,n,r,i){function a(e,n){var r=0;if(o<=8)r=p.css(e,n);else{var s=!1;/^(width|height)$/.test(n)&&0===y.getPropertyValue(e,"display")&&(s=!0,y.setPropertyValue(e,"display",y.Values.getDisplayType(e)));var u,c=function c(){s&&y.setPropertyValue(e,"display","none");};if(!i){if("height"===n&&"border-box"!==y.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var l=e.offsetHeight-(parseFloat(y.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(y.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(y.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(y.getPropertyValue(e,"paddingBottom"))||0);return c(),l;}if("width"===n&&"border-box"!==y.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var d=e.offsetWidth-(parseFloat(y.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(y.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(y.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(y.getPropertyValue(e,"paddingRight"))||0);return c(),d;}}u=void 0===b(e)?t.getComputedStyle(e,null):b(e).computedStyle?b(e).computedStyle:b(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===n&&(n="borderTopColor"),""!==(r=9===o&&"filter"===n?u.getPropertyValue(n):u[n])&&null!==r||(r=e.style[n]),c();}if("auto"===r&&/^(top|right|bottom|left)$/i.test(n)){var h=a(e,"position");("fixed"===h||"absolute"===h&&/top|left/i.test(n))&&(r=p(e).position()[n]+"px");}return r;}var s;if(y.Hooks.registered[n]){var u=n,c=y.Hooks.getRoot(u);void 0===r&&(r=y.getPropertyValue(e,y.Names.prefixCheck(c)[0])),y.Normalizations.registered[c]&&(r=y.Normalizations.registered[c]("extract",e,r)),s=y.Hooks.extractValue(u,r);}else if(y.Normalizations.registered[n]){var l,d;"transform"!==(l=y.Normalizations.registered[n]("name",e))&&(d=a(e,y.Names.prefixCheck(l)[0]),y.Values.isCSSNullValue(d)&&y.Hooks.templates[n]&&(d=y.Hooks.templates[n][1])),s=y.Normalizations.registered[n]("extract",e,d);}if(!/^[\d-]/.test(s)){var h=b(e);if(h&&h.isSVG&&y.Names.SVGAttribute(n)){if(/^(height|width)$/i.test(n))try{s=e.getBBox()[n];}catch(e){s=0;}else s=e.getAttribute(n);}else s=a(e,y.Names.prefixCheck(n)[0]);}return y.Values.isCSSNullValue(s)&&(s=0),f.debug>=2&&console.log("Get "+n+": "+s),s;},setPropertyValue:function setPropertyValue(e,n,r,i,a){var s=n;if("scroll"===n)a.container?a.container["scroll"+a.direction]=r:"Left"===a.direction?t.scrollTo(r,a.alternateValue):t.scrollTo(a.alternateValue,r);else if(y.Normalizations.registered[n]&&"transform"===y.Normalizations.registered[n]("name",e))y.Normalizations.registered[n]("inject",e,r),s="transform",r=b(e).transformCache[n];else{if(y.Hooks.registered[n]){var u=n,c=y.Hooks.getRoot(n);i=i||y.getPropertyValue(e,c),r=y.Hooks.injectValue(u,r,i),n=c;}if(y.Normalizations.registered[n]&&(r=y.Normalizations.registered[n]("inject",e,r),n=y.Normalizations.registered[n]("name",e)),s=y.Names.prefixCheck(n)[0],o<=8)try{e.style[s]=r;}catch(e){f.debug&&console.log("Browser does not support ["+r+"] for ["+s+"]");}else{var l=b(e);l&&l.isSVG&&y.Names.SVGAttribute(n)?e.setAttribute(n,r):e.style[s]=r;}f.debug>=2&&console.log("Set "+n+" ("+s+"): "+r);}return[s,r];},flushTransformCache:function flushTransformCache(e){var t="",n=b(e);if((o||f.State.isAndroid&&!f.State.isChrome)&&n&&n.isSVG){var r=function r(t){return parseFloat(y.getPropertyValue(e,t));},i={translate:[r("translateX"),r("translateY")],skewX:[r("skewX")],skewY:[r("skewY")],scale:1!==r("scale")?[r("scale"),r("scale")]:[r("scaleX"),r("scaleY")],rotate:[r("rotateZ"),0,0]};p.each(b(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),i[e]&&(t+=e+"("+i[e].join(" ")+") ",delete i[e]);});}else{var a,s;p.each(b(e).transformCache,function(n){if(a=b(e).transformCache[n],"transformPerspective"===n)return s=a,!0;9===o&&"rotateZ"===n&&(n="rotate"),t+=n+a+" ";}),s&&(t="perspective"+s+" "+t);}y.setPropertyValue(e,"transform",t);}};y.Hooks.register(),y.Normalizations.register(),f.hook=function(e,t,n){var r;return e=l(e),p.each(e,function(e,i){if(void 0===b(i)&&f.init(i),void 0===n)void 0===r&&(r=y.getPropertyValue(i,t));else{var o=y.setPropertyValue(i,t,n);"transform"===o[0]&&f.CSS.flushTransformCache(i),r=o;}}),r;};var g=function g(){var e;function r(){return i?v.promise||null:o;}var i,o,a,s,u,h,m=arguments[0]&&(arguments[0].p||p.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||d.isString(arguments[0].properties));d.isWrapped(this)?(i=!1,a=0,s=this,o=this):(i=!0,a=1,s=m?arguments[0].elements||arguments[0].e:arguments[0]);var v={promise:null,resolver:null,rejecter:null};if(i&&f.Promise&&(v.promise=new f.Promise(function(e,t){v.resolver=e,v.rejecter=t;})),m?(u=arguments[0].properties||arguments[0].p,h=arguments[0].options||arguments[0].o):(u=arguments[a],h=arguments[a+1]),s=l(s)){var x,M=s.length,_=0;if(!/^(stop|finish|finishAll|pause|resume)$/i.test(u)&&!p.isPlainObject(h)){var N=a+1;h={};for(var D=N;D<arguments.length;D++){d.isArray(arguments[D])||!/^(fast|normal|slow)$/i.test(arguments[D])&&!/^\d/.test(arguments[D])?d.isString(arguments[D])||d.isArray(arguments[D])?h.easing=arguments[D]:d.isFunction(arguments[D])&&(h.complete=arguments[D]):h.duration=arguments[D];}}switch(u){case"scroll":x="scroll";break;case"reverse":x="reverse";break;case"pause":var C=new Date().getTime();return p.each(s,function(e,t){w(t,C);}),p.each(f.State.calls,function(e,t){var n=!1;t&&p.each(t[1],function(e,r){var i=void 0===h?"":h;return!0!==i&&t[2].queue!==i&&(void 0!==h||!1!==t[2].queue)||(p.each(s,function(e,i){if(i===r)return t[5]={resume:!1},n=!0,!1;}),!n&&void 0);});}),r();case"resume":return p.each(s,function(e,t){S(t);}),p.each(f.State.calls,function(e,t){var n=!1;t&&p.each(t[1],function(e,r){var i=void 0===h?"":h;return!0!==i&&t[2].queue!==i&&(void 0!==h||!1!==t[2].queue)||!t[5]||(p.each(s,function(e,i){if(i===r)return t[5].resume=!0,n=!0,!1;}),!n&&void 0);});}),r();case"finish":case"finishAll":case"stop":p.each(s,function(e,t){b(t)&&b(t).delayTimer&&(clearTimeout(b(t).delayTimer.setTimeout),b(t).delayTimer.next&&b(t).delayTimer.next(),delete b(t).delayTimer),"finishAll"!==u||!0!==h&&!d.isString(h)||(p.each(p.queue(t,d.isString(h)?h:""),function(e,t){d.isFunction(t)&&t();}),p.queue(t,d.isString(h)?h:"",[]));});var R=[];return p.each(f.State.calls,function(e,t){t&&p.each(t[1],function(n,r){var i=void 0===h?"":h;if(!0!==i&&t[2].queue!==i&&(void 0!==h||!1!==t[2].queue))return!0;p.each(s,function(n,o){if(o===r)if((!0===h||d.isString(h))&&(p.each(p.queue(o,d.isString(h)?h:""),function(e,t){d.isFunction(t)&&t(null,!0);}),p.queue(o,d.isString(h)?h:"",[])),"stop"===u){var a=b(o);a&&a.tweensContainer&&(!0===i||""===i)&&p.each(a.tweensContainer,function(e,t){t.endValue=t.currentValue;}),R.push(e);}else"finish"!==u&&"finishAll"!==u||(t[2].duration=1);});});}),"stop"===u&&(p.each(R,function(e,t){T(t,!0);}),v.promise&&v.resolver(s)),r();default:if(!p.isPlainObject(u)||d.isEmptyObject(u)){if(d.isString(u)&&f.Redirects[u]){var P=(e=p.extend({},h)).duration,O=e.delay||0;return!0===e.backwards&&(s=p.extend(!0,[],s).reverse()),p.each(s,function(t,n){parseFloat(e.stagger)?e.delay=O+parseFloat(e.stagger)*t:d.isFunction(e.stagger)&&(e.delay=O+e.stagger.call(n,t,M)),e.drag&&(e.duration=parseFloat(P)||(/^(callout|transition)/.test(u)?1e3:400),e.duration=Math.max(e.duration*(e.backwards?1-t/M:(t+1)/M),.75*e.duration,200)),f.Redirects[u].call(n,n,e||{},t,M,s,v.promise?v:void 0);}),r();}var L="Velocity: First argument ("+u+") was not a property map, a known action, or a registered redirect. Aborting.";return v.promise?v.rejecter(new Error(L)):t.console&&console.log(L),r();}x="start";}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},B=[];p.each(s,function(e,t){d.isNode(t)&&U(t,e);}),(e=p.extend({},f.defaults,h)).loop=parseInt(e.loop,10);var F=2*e.loop-1;if(e.loop)for(var z=0;z<F;z++){var k={delay:e.delay,progress:e.progress};z===F-1&&(k.display=e.display,k.visibility=e.visibility,k.complete=e.complete),g(s,"reverse",k);}return r();}function U(e,r){var i,o,a=p.extend({},f.defaults,h),l={};switch(void 0===b(e)&&f.init(e),parseFloat(a.delay)&&!1!==a.queue&&p.queue(e,a.queue,function(t,n){if(!0===n)return!0;f.velocityQueueEntryFlag=!0;var r=f.State.delayedElements.count++;f.State.delayedElements[r]=e;var i,o=(i=r,function(){f.State.delayedElements[i]=!1,t();});b(e).delayBegin=new Date().getTime(),b(e).delay=parseFloat(a.delay),b(e).delayTimer={setTimeout:setTimeout(t,parseFloat(a.delay)),next:o};}),a.duration.toString().toLowerCase()){case"fast":a.duration=200;break;case"normal":a.duration=400;break;case"slow":a.duration=600;break;default:a.duration=parseFloat(a.duration)||1;}function m(o){var m,g;if(a.begin&&0===_)try{a.begin.call(s,s);}catch(e){setTimeout(function(){throw e;},1);}if("scroll"===x){var w,S,T,N=/^x$/i.test(a.axis)?"Left":"Top",D=parseFloat(a.offset)||0;a.container?d.isWrapped(a.container)||d.isNode(a.container)?(a.container=a.container[0]||a.container,T=(w=a.container["scroll"+N])+p(e).position()[N.toLowerCase()]+D):a.container=null:(w=f.State.scrollAnchor[f.State["scrollProperty"+N]],S=f.State.scrollAnchor[f.State["scrollProperty"+("Left"===N?"Top":"Left")]],T=p(e).offset()[N.toLowerCase()]+D),l={scroll:{rootPropertyValue:!1,startValue:w,currentValue:w,endValue:T,unitType:"",easing:a.easing,scrollData:{container:a.container,direction:N,alternateValue:S}},element:e},f.debug&&console.log("tweensContainer (scroll): ",l.scroll,e);}else if("reverse"===x){if(!(m=b(e)))return;if(!m.tweensContainer)return void p.dequeue(e,a.queue);for(var C in"none"===m.opts.display&&(m.opts.display="auto"),"hidden"===m.opts.visibility&&(m.opts.visibility="visible"),m.opts.loop=!1,m.opts.begin=null,m.opts.complete=null,h.easing||delete a.easing,h.duration||delete a.duration,a=p.extend({},m.opts,a),g=p.extend(!0,{},m?m.tweensContainer:null)){if(g.hasOwnProperty(C)&&"element"!==C){var R=g[C].startValue;g[C].startValue=g[C].currentValue=g[C].endValue,g[C].endValue=R,d.isEmptyObject(h)||(g[C].easing=a.easing),f.debug&&console.log("reverse tweensContainer ("+C+"): "+JSON.stringify(g[C]),e);}}l=g;}else if("start"===x){(m=b(e))&&m.tweensContainer&&!0===m.isAnimating&&(g=m.tweensContainer);var P=function P(t,n){var i,o,s;return d.isFunction(t)&&(t=t.call(e,r,M)),d.isArray(t)?(i=t[0],!d.isArray(t[1])&&/^[\d-]/.test(t[1])||d.isFunction(t[1])||y.RegEx.isHex.test(t[1])?s=t[1]:d.isString(t[1])&&!y.RegEx.isHex.test(t[1])&&f.Easings[t[1]]||d.isArray(t[1])?(o=n?t[1]:E(t[1],a.duration),s=t[2]):s=t[1]||t[2]):i=t,n||(o=o||a.easing),d.isFunction(i)&&(i=i.call(e,r,M)),d.isFunction(s)&&(s=s.call(e,r,M)),[i||0,o,s];},O=function O(r,o){var s,u=y.Hooks.getRoot(r),c=!1,h=o[0],v=o[1],x=o[2];if(m&&m.isSVG||"tween"===u||!1!==y.Names.prefixCheck(u)[1]||void 0!==y.Normalizations.registered[u]){(void 0!==a.display&&null!==a.display&&"none"!==a.display||void 0!==a.visibility&&"hidden"!==a.visibility)&&/opacity|filter/.test(r)&&!x&&0!==h&&(x=0),a._cacheValues&&g&&g[r]?(void 0===x&&(x=g[r].endValue+g[r].unitType),c=m.rootPropertyValueCache[u]):y.Hooks.registered[r]?void 0===x?(c=y.getPropertyValue(e,u),x=y.getPropertyValue(e,r,c)):c=y.Hooks.templates[u][1]:void 0===x&&(x=y.getPropertyValue(e,r));var b,w,S,M=!1,_=function _(e,t){var n,r;return r=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,"";}),n||(n=y.Values.getUnitType(e)),[r,n];};if(x!==h&&d.isString(x)&&d.isString(h)){s="";var E=0,A=0,T=[],N=[],D=0,C=0,R=0;for(x=y.Hooks.fixColors(x),h=y.Hooks.fixColors(h);E<x.length&&A<h.length;){var P=x[E],O=h[A];if(/[\d\.-]/.test(P)&&/[\d\.-]/.test(O)){for(var L=P,B=O,F=".",z=".";++E<x.length;){if((P=x[E])===F)F="..";else if(!/\d/.test(P))break;L+=P;}for(;++A<h.length;){if((O=h[A])===z)z="..";else if(!/\d/.test(O))break;B+=O;}var k=y.Hooks.getUnit(x,E),U=y.Hooks.getUnit(h,A);if(E+=k.length,A+=U.length,k===U)L===B?s+=L+k:(s+="{"+T.length+(C?"!":"")+"}"+k,T.push(parseFloat(L)),N.push(parseFloat(B)));else{var j=parseFloat(L),H=parseFloat(B);s+=(D<5?"calc":"")+"("+(j?"{"+T.length+(C?"!":"")+"}":"0")+k+" + "+(H?"{"+(T.length+(j?1:0))+(C?"!":"")+"}":"0")+U+")",j&&(T.push(j),N.push(0)),H&&(T.push(0),N.push(H));}}else{if(P!==O){D=0;break;}s+=P,E++,A++,0===D&&"c"===P||1===D&&"a"===P||2===D&&"l"===P||3===D&&"c"===P||D>=4&&"("===P?D++:(D&&D<5||D>=4&&")"===P&&--D<5)&&(D=0),0===C&&"r"===P||1===C&&"g"===P||2===C&&"b"===P||3===C&&"a"===P||C>=3&&"("===P?(3===C&&"a"===P&&(R=1),C++):R&&","===P?++R>3&&(C=R=0):(R&&C<(R?5:4)||C>=(R?4:3)&&")"===P&&--C<(R?5:4))&&(C=R=0);}}E===x.length&&A===h.length||(f.debug&&console.error('Trying to pattern match mis-matched strings ["'+h+'", "'+x+'"]'),s=void 0),s&&(T.length?(f.debug&&console.log('Pattern found "'+s+'" -> ',T,N,"["+x+","+h+"]"),x=T,h=N,w=S=""):s=void 0);}s||(x=(b=_(r,x))[0],S=b[1],h=(b=_(r,h))[0].replace(/^([+-\/*])=/,function(e,t){return M=t,"";}),w=b[1],x=parseFloat(x)||0,h=parseFloat(h)||0,"%"===w&&(/^(fontSize|lineHeight)$/.test(r)?(h/=100,w="em"):/^scale/.test(r)?(h/=100,w=""):/(Red|Green|Blue)$/i.test(r)&&(h=h/100*255,w="")));if(/[\/*]/.test(M))w=S;else if(S!==w&&0!==x)if(0===h)w=S;else{i=i||function(){var r={myParent:e.parentNode||n.body,position:y.getPropertyValue(e,"position"),fontSize:y.getPropertyValue(e,"fontSize")},i=r.position===I.lastPosition&&r.myParent===I.lastParent,o=r.fontSize===I.lastFontSize;I.lastParent=r.myParent,I.lastPosition=r.position,I.lastFontSize=r.fontSize;var a={};if(o&&i)a.emToPx=I.lastEmToPx,a.percentToPxWidth=I.lastPercentToPxWidth,a.percentToPxHeight=I.lastPercentToPxHeight;else{var s=m&&m.isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");f.init(s),r.myParent.appendChild(s),p.each(["overflow","overflowX","overflowY"],function(e,t){f.CSS.setPropertyValue(s,t,"hidden");}),f.CSS.setPropertyValue(s,"position",r.position),f.CSS.setPropertyValue(s,"fontSize",r.fontSize),f.CSS.setPropertyValue(s,"boxSizing","content-box"),p.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){f.CSS.setPropertyValue(s,t,"100%");}),f.CSS.setPropertyValue(s,"paddingLeft","100em"),a.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(y.getPropertyValue(s,"width",null,!0))||1)/100,a.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(y.getPropertyValue(s,"height",null,!0))||1)/100,a.emToPx=I.lastEmToPx=(parseFloat(y.getPropertyValue(s,"paddingLeft"))||1)/100,r.myParent.removeChild(s);}return null===I.remToPx&&(I.remToPx=parseFloat(y.getPropertyValue(n.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(t.innerWidth)/100,I.vhToPx=parseFloat(t.innerHeight)/100),a.remToPx=I.remToPx,a.vwToPx=I.vwToPx,a.vhToPx=I.vhToPx,f.debug>=1&&console.log("Unit ratios: "+JSON.stringify(a),e),a;}();var q=/margin|padding|left|right|width|text|word|letter/i.test(r)||/X$/.test(r)||"x"===r?"x":"y";switch(S){case"%":x*="x"===q?i.percentToPxWidth:i.percentToPxHeight;break;case"px":break;default:x*=i[S+"ToPx"];}switch(w){case"%":x*=1/("x"===q?i.percentToPxWidth:i.percentToPxHeight);break;case"px":break;default:x*=1/i[w+"ToPx"];}}switch(M){case"+":h=x+h;break;case"-":h=x-h;break;case"*":h*=x;break;case"/":h=x/h;}l[r]={rootPropertyValue:c,startValue:x,currentValue:x,endValue:h,unitType:w,easing:v},s&&(l[r].pattern=s),f.debug&&console.log("tweensContainer ("+r+"): "+JSON.stringify(l[r]),e);}else f.debug&&console.log("Skipping ["+u+"] due to a lack of browser support.");};for(var L in u){if(u.hasOwnProperty(L)){var F=y.Names.camelCase(L),z=P(u[L]);if(c(y.Lists.colors)){var k=z[0],U=z[1],j=z[2];if(y.RegEx.isHex.test(k)){for(var H=["Red","Green","Blue"],q=y.Values.hexToRgb(k),G=j?y.Values.hexToRgb(j):void 0,V=0;V<H.length;V++){var W=[q[V]];U&&W.push(U),void 0!==G&&W.push(G[V]),O(F+H[V],W);}continue;}}O(F,z);}}l.element=e;}l.element&&(y.Values.addClass(e,"velocity-animating"),B.push(l),(m=b(e))&&(""===a.queue&&(m.tweensContainer=l,m.opts=a),m.isAnimating=!0),_===M-1?(f.State.calls.push([B,s,a,null,v.resolver,null,0]),!1===f.State.isTicking&&(f.State.isTicking=!0,A())):_++);}if(!1!==f.mock&&(!0===f.mock?a.duration=a.delay=1:(a.duration*=parseFloat(f.mock)||1,a.delay*=parseFloat(f.mock)||1)),a.easing=E(a.easing,a.duration),a.begin&&!d.isFunction(a.begin)&&(a.begin=null),a.progress&&!d.isFunction(a.progress)&&(a.progress=null),a.complete&&!d.isFunction(a.complete)&&(a.complete=null),void 0!==a.display&&null!==a.display&&(a.display=a.display.toString().toLowerCase(),"auto"===a.display&&(a.display=f.CSS.Values.getDisplayType(e))),void 0!==a.visibility&&null!==a.visibility&&(a.visibility=a.visibility.toString().toLowerCase()),a.mobileHA=a.mobileHA&&f.State.isMobile&&!f.State.isGingerbread,!1===a.queue){if(a.delay){var g=f.State.delayedElements.count++;f.State.delayedElements[g]=e;var w=(o=g,function(){f.State.delayedElements[o]=!1,m();});b(e).delayBegin=new Date().getTime(),b(e).delay=parseFloat(a.delay),b(e).delayTimer={setTimeout:setTimeout(m,parseFloat(a.delay)),next:w};}else m();}else p.queue(e,a.queue,function(e,t){if(!0===t)return v.promise&&v.resolver(s),!0;f.velocityQueueEntryFlag=!0,m();});""!==a.queue&&"fx"!==a.queue||"inprogress"===p.queue(e)[0]||p.dequeue(e);}v.promise&&(u&&h&&!1===h.promiseRejectEmpty?v.resolver():v.rejecter());};(f=p.extend(g,f)).animate=g;var v=t.requestAnimationFrame||a;if(!f.State.isMobile&&void 0!==n.hidden){var x=function x(){n.hidden?(v=function v(e){return setTimeout(function(){e(!0);},16);},A()):v=t.requestAnimationFrame||a;};x(),n.addEventListener("visibilitychange",x);}return e.Velocity=f,e!==t&&(e.fn.velocity=g,e.fn.velocity.defaults=f.defaults),p.each(["Down","Up"],function(e,t){f.Redirects["slide"+t]=function(e,n,r,i,o,a){var s=p.extend({},n),u=s.begin,c=s.complete,l={},d={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""};void 0===s.display&&(s.display="Down"===t?"inline"===f.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),s.begin=function(){for(var n in 0===r&&u&&u.call(o,o),d){if(d.hasOwnProperty(n)){l[n]=e.style[n];var i=y.getPropertyValue(e,n);d[n]="Down"===t?[i,0]:[0,i];}}l.overflow=e.style.overflow,e.style.overflow="hidden";},s.complete=function(){for(var t in l){l.hasOwnProperty(t)&&(e.style[t]=l[t]);}r===i-1&&(c&&c.call(o,o),a&&a.resolver(o));},f(e,d,s);};}),p.each(["In","Out"],function(e,t){f.Redirects["fade"+t]=function(e,n,r,i,o,a){var s=p.extend({},n),u=s.complete,c={opacity:"In"===t?1:0};0!==r&&(s.begin=null),s.complete=r!==i-1?null:function(){u&&u.call(o,o),a&&a.resolver(o);},void 0===s.display&&(s.display="In"===t?"auto":"none"),f(this,c,s);};}),f;}function b(e){var t=p.data(e,"velocity");return null===t?void 0:t;}function w(e,t){var n=b(e);n&&n.delayTimer&&!n.delayPaused&&(n.delayRemaining=n.delay-t+n.delayBegin,n.delayPaused=!0,clearTimeout(n.delayTimer.setTimeout));}function S(e,t){var n=b(e);n&&n.delayTimer&&n.delayPaused&&(n.delayPaused=!1,n.delayTimer.setTimeout=setTimeout(n.delayTimer.next,n.delayRemaining));}function M(e){return function(t){return Math.round(t*e)*(1/e);};}function _(e,n,r,i){var o=4,a=.001,s=1e-7,u=10,c=11,l=1/(c-1),p=("Float32Array"in t);if(4!==arguments.length)return!1;for(var d=0;d<4;++d){if("number"!=typeof arguments[d]||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;}e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var h=p?new Float32Array(c):new Array(c);function f(e,t){return 1-3*t+3*e;}function m(e,t){return 3*t-6*e;}function y(e){return 3*e;}function g(e,t,n){return((f(t,n)*e+m(t,n))*e+y(t))*e;}function v(e,t,n){return 3*f(t,n)*e*e+2*m(t,n)*e+y(t);}function x(t,n){for(var i=0;i<o;++i){var a=v(n,e,r);if(0===a)return n;n-=(g(n,e,r)-t)/a;}return n;}function b(){for(var t=0;t<c;++t){h[t]=g(t*l,e,r);}}function w(t,n,i){var o,a,c=0;do{(o=g(a=n+(i-n)/2,e,r)-t)>0?i=a:n=a;}while(Math.abs(o)>s&&++c<u);return a;}function S(t){for(var n=0,i=1,o=c-1;i!==o&&h[i]<=t;++i){n+=l;}--i;var s=n+(t-h[i])/(h[i+1]-h[i])*l,u=v(s,e,r);return u>=a?x(t,s):0===u?s:w(t,n,n+l);}var M=!1;function _(){M=!0,e===n&&r===i||b();}var E=function E(t){return M||_(),e===n&&r===i?t:0===t?0:1===t?1:g(S(t),n,i);};E.getControlPoints=function(){return[{x:e,y:n},{x:r,y:i}];};var A="generateBezier("+[e,n,r,i]+")";return E.toString=function(){return A;},E;}function E(e,t){var n=e;return d.isString(e)?f.Easings[e]||(n=!1):n=d.isArray(e)&&1===e.length?M.apply(null,e):d.isArray(e)&&2===e.length?m.apply(null,e.concat([t])):!(!d.isArray(e)||4!==e.length)&&_.apply(null,e),!1===n&&(n=f.Easings[f.defaults.easing]?f.defaults.easing:"swing"),n;}function A(e){if(e){var t=f.timestamp&&!0!==e?e:s.now(),n=f.State.calls.length;n>1e4&&(f.State.calls=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i);}return r;}(f.State.calls),n=f.State.calls.length);for(var r=0;r<n;r++){if(f.State.calls[r]){var i=f.State.calls[r],a=i[0],u=i[2],c=i[3],l=!c,h=null,m=i[5],g=i[6];if(c||(c=f.State.calls[r][3]=t-16),m){if(!0!==m.resume)continue;c=i[3]=Math.round(t-g-16),i[5]=null;}g=i[6]=t-c;for(var x=Math.min(g/u.duration,1),w=0,S=a.length;w<S;w++){var M=a[w],_=M.element;if(b(_)){var E=!1;if(void 0!==u.display&&null!==u.display&&"none"!==u.display){if("flex"===u.display){p.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],function(e,t){y.setPropertyValue(_,"display",t);});}y.setPropertyValue(_,"display",u.display);}for(var N in void 0!==u.visibility&&"hidden"!==u.visibility&&y.setPropertyValue(_,"visibility",u.visibility),M){if(M.hasOwnProperty(N)&&"element"!==N){var D,C=M[N],R=d.isString(C.easing)?f.Easings[C.easing]:C.easing;if(d.isString(C.pattern)){var P=1===x?function(e,t,n){var r=C.endValue[t];return n?Math.round(r):r;}:function(e,t,n){var r=C.startValue[t],i=C.endValue[t]-r,o=r+i*R(x,u,i);return n?Math.round(o):o;};D=C.pattern.replace(/{(\d+)(!)?}/g,P);}else if(1===x)D=C.endValue;else{var O=C.endValue-C.startValue;D=C.startValue+O*R(x,u,O);}if(!l&&D===C.currentValue)continue;if(C.currentValue=D,"tween"===N)h=D;else{var L;if(y.Hooks.registered[N]){L=y.Hooks.getRoot(N);var I=b(_).rootPropertyValueCache[L];I&&(C.rootPropertyValue=I);}var B=y.setPropertyValue(_,N,C.currentValue+(o<9&&0===parseFloat(D)?"":C.unitType),C.rootPropertyValue,C.scrollData);y.Hooks.registered[N]&&(y.Normalizations.registered[L]?b(_).rootPropertyValueCache[L]=y.Normalizations.registered[L]("extract",null,B[1]):b(_).rootPropertyValueCache[L]=B[1]),"transform"===B[0]&&(E=!0);}}}u.mobileHA&&void 0===b(_).transformCache.translate3d&&(b(_).transformCache.translate3d="(0px, 0px, 0px)",E=!0),E&&y.flushTransformCache(_);}}void 0!==u.display&&"none"!==u.display&&(f.State.calls[r][2].display=!1),void 0!==u.visibility&&"hidden"!==u.visibility&&(f.State.calls[r][2].visibility=!1),u.progress&&u.progress.call(i[1],i[1],x,Math.max(0,c+u.duration-t),c,h),1===x&&T(r);}}}f.State.isTicking&&v(A);}function T(e,t){if(!f.State.calls[e])return!1;for(var n=f.State.calls[e][0],r=f.State.calls[e][1],i=f.State.calls[e][2],o=f.State.calls[e][4],a=!1,s=0,u=n.length;s<u;s++){var c=n[s].element;t||i.loop||("none"===i.display&&y.setPropertyValue(c,"display",i.display),"hidden"===i.visibility&&y.setPropertyValue(c,"visibility",i.visibility));var l=b(c);if(!0!==i.loop&&(void 0===p.queue(c)[1]||!/\.velocityQueueEntryFlag/i.test(p.queue(c)[1]))&&l){l.isAnimating=!1,l.rootPropertyValueCache={};var d=!1;p.each(y.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,r=l.transformCache[t];void 0!==l.transformCache[t]&&new RegExp("^\\("+n+"[^.]").test(r)&&(d=!0,delete l.transformCache[t]);}),i.mobileHA&&(d=!0,delete l.transformCache.translate3d),d&&y.flushTransformCache(c),y.Values.removeClass(c,"velocity-animating");}if(!t&&i.complete&&!i.loop&&s===u-1)try{i.complete.call(r,r);}catch(e){setTimeout(function(){throw e;},1);}o&&!0!==i.loop&&o(r),l&&!0===i.loop&&!t&&(p.each(l.tweensContainer,function(e,t){if(/^rotate/.test(e)&&(parseFloat(t.startValue)-parseFloat(t.endValue))%360==0){var n=t.startValue;t.startValue=t.endValue,t.endValue=n;}/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100);}),f(c,"reverse",{loop:!0,delay:i.delay})),!1!==i.queue&&p.dequeue(c,i.queue);}f.State.calls[e]=!1;for(var h=0,m=f.State.calls.length;h<m;h++){if(!1!==f.State.calls[h]){a=!0;break;}}!1===a&&(f.State.isTicking=!1,delete f.State.calls,f.State.calls=[]);}jQuery.fn.velocity=jQuery.fn.animate;}(window.jQuery||window.Zepto||window,window,window?window.document:void 0);});},function(e,t,n){e.exports=n.p+"f19d41c15ccf800fa2ffa39de92a0644.glb";},function(e,t,n){e.exports=n.p+"ball.svg";},function(e,t,n){var r;!function(i){"use strict";var o,a,s,u=9e15,c="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",p="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",d={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-u,maxE:u,crypto:!1},h=!0,f="[DecimalError] Invalid argument: ",m=Math.floor,y=Math.pow,g=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,v=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,x=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,b=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,w=1e7,S=l.length-1,M=p.length-1,_={name:"[object Decimal]"};function E(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++){(n=7-(r=e[t]+"").length)&&(o+=B(n)),o+=r;}(n=7-(r=(a=e[t])+"").length)&&(o+=B(n));}else if(0===a)return"0";for(;a%10==0;){a/=10;}return o+a;}function A(e,t,n){if(e!==~~e||e<t||e>n)throw Error(f+e);}function T(e,t,n,r){var i,o,a,s;for(o=e[0];o>=10;o/=10){--t;}return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),o=y(10,7-t),s=e[i]%o|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(e[i+1]/o/100|0)==y(10,t-2)-1||(s==o/2||0==s)&&0==(e[i+1]/o/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==o||!r&&n>3&&s+1==o/2)&&(e[i+1]/o/1e3|0)==y(10,t-3)-1,a;}function N(e,t,n){for(var r,i,o=[0],a=0,s=e.length;a<s;){for(i=o.length;i--;){o[i]*=t;}for(o[0]+=c.indexOf(e.charAt(a++)),r=0;r<o.length;r++){o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n);}}return o.reverse();}_.absoluteValue=_.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),C(e);},_.ceil=function(){return C(new this.constructor(this),this.e+1,2);},_.comparedTo=_.cmp=function(e){var t,n,r,i,o=this,a=o.d,s=(e=new o.constructor(e)).d,u=o.s,c=e.s;if(!a||!s)return u&&c?u!==c?u:a===s?0:!a^u<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?u:s[0]?-c:0;if(u!==c)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(t=0,n=(r=a.length)<(i=s.length)?r:i;t<n;++t){if(a[t]!==s[t])return a[t]>s[t]^u<0?1:-1;}return r===i?0:r>i^u<0?1:-1;},_.cosine=_.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?(n=Math.ceil(i/3),r=(1/W(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10");e.precision+=n,t=V(e,1,t.times(r),new e(1));for(var o=n;o--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1);}return e.precision-=n,t;}(r,X(r,n)),r.precision=e,r.rounding=t,C(2==s||3==s?n.neg():n,e,t,!0)):new r(1):new r(NaN);},_.cubeRoot=_.cbrt=function(){var e,t,n,r,i,o,a,s,u,c,l=this,p=l.constructor;if(!l.isFinite()||l.isZero())return new p(l);for(h=!1,(o=l.s*y(l.s*l,1/3))&&Math.abs(o)!=1/0?r=new p(o.toString()):(n=E(l.d),(o=((e=l.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=y(n,1/3),e=m((e+1)/3)-(e%3==(e<0?-1:2)),(r=new p(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),a=(e=p.precision)+3;;){if(c=(u=(s=r).times(s).times(s)).plus(l),r=D(c.plus(l).times(s),c.plus(u),a+2,1),E(s.d).slice(0,a)===(n=E(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(C(r,e+1,1),t=!r.times(r).times(r).eq(l));break;}if(!i&&(C(s,e+1,0),s.times(s).times(s).eq(l))){r=s;break;}a+=4,i=1;}}return h=!0,C(r,e,p.rounding,t);},_.decimalPlaces=_.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-m(this.e/7)),e=t[e])for(;e%10==0;e/=10){n--;}n<0&&(n=0);}return n;},_.dividedBy=_.div=function(e){return D(this,new this.constructor(e));},_.dividedToIntegerBy=_.divToInt=function(e){var t=this.constructor;return C(D(this,new t(e),0,1,1),t.precision,t.rounding);},_.equals=_.eq=function(e){return 0===this.cmp(e);},_.floor=function(){return C(new this.constructor(this),this.e+1,3);},_.greaterThan=_.gt=function(e){return this.cmp(e)>0;},_.greaterThanOrEqualTo=_.gte=function(e){var t=this.cmp(e);return 1==t||0===t;},_.hyperbolicCosine=_.cosh=function(){var e,t,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?t=(1/W(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=V(a,1,o.times(t),new a(1),!0);for(var u,c=e,l=new a(8);c--;){u=o.times(o),o=s.minus(u.times(l.minus(u.times(l))));}return C(o,a.precision=n,a.rounding=r,!0);},_.hyperbolicSine=_.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=V(o,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=V(o,2,i=i.times(1/W(5,e)),i,!0);for(var a,s=new o(5),u=new o(16),c=new o(20);e--;){a=i.times(i),i=i.times(s.plus(a.times(u.times(a).plus(c))));}}return o.precision=t,o.rounding=n,C(i,t,n,!0);},_.hyperbolicTangent=_.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,D(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s);},_.inverseCosine=_.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?t.isNeg()?L(n,i,o):new n(0):new n(NaN):t.isZero()?L(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=L(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t));},_.inverseHyperbolicCosine=_.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,h=!1,n=n.times(n).minus(1).sqrt().plus(n),h=!0,r.precision=e,r.rounding=t,n.ln()):new r(n);},_.inverseHyperbolicSine=_.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,h=!1,n=n.times(n).plus(1).sqrt().plus(n),h=!0,r.precision=e,r.rounding=t,n.ln());},_.inverseHyperbolicTangent=_.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?C(new o(i),e,t,!0):(o.precision=n=r-i.e,i=D(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN);},_.inverseSine=_.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==t?0===t?((e=L(o,n+4,r).times(.5)).s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)));},_.inverseTangent=_.atan=function(){var e,t,n,r,i,o,a,s,u,c=this,l=c.constructor,p=l.precision,d=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&p+4<=M)return(a=L(l,p+4,d).times(.25)).s=c.s,a;}else{if(!c.s)return new l(NaN);if(p+4<=M)return(a=L(l,p+4,d).times(.5)).s=c.s,a;}for(l.precision=s=p+10,l.rounding=1,e=n=Math.min(28,s/7+2|0);e;--e){c=c.div(c.times(c).plus(1).sqrt().plus(1));}for(h=!1,t=Math.ceil(s/7),r=1,u=c.times(c),a=new l(c),i=c;-1!==e;){if(i=i.times(u),o=a.minus(i.div(r+=2)),i=i.times(u),void 0!==(a=o.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===o.d[e]&&e--;){;}}return n&&(a=a.times(2<<n-1)),h=!0,C(a,l.precision=p,l.rounding=d,!0);},_.isFinite=function(){return!!this.d;},_.isInteger=_.isInt=function(){return!!this.d&&m(this.e/7)>this.d.length-2;},_.isNaN=function(){return!this.s;},_.isNegative=_.isNeg=function(){return this.s<0;},_.isPositive=_.isPos=function(){return this.s>0;},_.isZero=function(){return!!this.d&&0===this.d[0];},_.lessThan=_.lt=function(e){return this.cmp(e)<0;},_.lessThanOrEqualTo=_.lte=function(e){return this.cmp(e)<1;},_.logarithm=_.log=function(e){var t,n,r,i,o,a,s,u,c=this.constructor,l=c.precision,p=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10);}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;){i/=10;}o=1!==i;}if(h=!1,a=j(this,s=l+5),r=t?O(c,s+10):j(e,s),T((u=D(a,r,s,1)).d,i=l,p))do{if(a=j(this,s+=10),r=t?O(c,s+10):j(e,s),u=D(a,r,s,1),!o){+E(u.d).slice(i+1,i+15)+1==1e14&&(u=C(u,l+1,0));break;}}while(T(u.d,i+=10,p));return h=!0,C(u,l,p);},_.minus=_.sub=function(e){var t,n,r,i,o,a,s,u,c,l,p,d,f=this,y=f.constructor;if(e=new y(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new y(e.d||f.s!==e.s?f:NaN):e=new y(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(c=f.d,d=e.d,s=y.precision,u=y.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!c[0])return new y(3===u?-0:0);e=new y(f);}return h?C(e,s,u):e;}if(n=m(e.e/7),l=m(f.e/7),c=c.slice(),o=l-n){for((p=o<0)?(t=c,o=-o,a=d.length):(t=d,n=l,a=c.length),o>(r=Math.max(Math.ceil(s/7),a)+2)&&(o=r,t.length=1),t.reverse(),r=o;r--;){t.push(0);}t.reverse();}else{for((p=(r=c.length)<(a=d.length))&&(a=r),r=0;r<a;r++){if(c[r]!=d[r]){p=c[r]<d[r];break;}}o=0;}for(p&&(t=c,c=d,d=t,e.s=-e.s),a=c.length,r=d.length-a;r>0;--r){c[a++]=0;}for(r=d.length;r>o;){if(c[--r]<d[r]){for(i=r;i&&0===c[--i];){c[i]=w-1;}--c[i],c[r]+=w;}c[r]-=d[r];}for(;0===c[--a];){c.pop();}for(;0===c[0];c.shift()){--n;}return c[0]?(e.d=c,e.e=P(c,n),h?C(e,s,u):e):new y(3===u?-0:0);},_.modulo=_.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?C(new r(n),r.precision,r.rounding):(h=!1,9==r.modulo?(t=D(n,e.abs(),0,3,1)).s*=e.s:t=D(n,e,0,r.modulo,1),t=t.times(e),h=!0,n.minus(t));},_.naturalExponential=_.exp=function(){return U(this);},_.naturalLogarithm=_.ln=function(){return j(this);},_.negated=_.neg=function(){var e=new this.constructor(this);return e.s=-e.s,C(e);},_.plus=_.add=function(e){var t,n,r,i,o,a,s,u,c,l,p=this,d=p.constructor;if(e=new d(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new d(e.d||p.s===e.s?p:NaN)):e=new d(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(c=p.d,l=e.d,s=d.precision,u=d.rounding,!c[0]||!l[0])return l[0]||(e=new d(p)),h?C(e,s,u):e;if(o=m(p.e/7),r=m(e.e/7),c=c.slice(),i=o-r){for(i<0?(n=c,i=-i,a=l.length):(n=l,r=o,a=c.length),i>(a=(o=Math.ceil(s/7))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;){n.push(0);}n.reverse();}for((a=c.length)-(i=l.length)<0&&(i=a,n=l,l=c,c=n),t=0;i;){t=(c[--i]=c[i]+l[i]+t)/w|0,c[i]%=w;}for(t&&(c.unshift(t),++r),a=c.length;0==c[--a];){c.pop();}return e.d=c,e.e=P(c,r),h?C(e,s,u):e;},_.precision=_.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(f+e);return n.d?(t=I(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t;},_.round=function(){var e=this,t=e.constructor;return C(new t(e),e.e+1,t.rounding);},_.sine=_.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return V(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/W(5,n)),t=V(e,2,t,t);for(var i,o=new e(5),a=new e(16),s=new e(20);n--;){i=t.times(t),t=t.times(o.plus(i.times(a.times(i).minus(s))));}return t;}(r,X(r,n)),r.precision=e,r.rounding=t,C(s>2?n.neg():n,e,t,!0)):new r(NaN);},_.squareRoot=_.sqrt=function(){var e,t,n,r,i,o,a=this,s=a.d,u=a.e,c=a.s,l=a.constructor;if(1!==c||!s||!s[0])return new l(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);for(h=!1,0==(c=Math.sqrt(+a))||c==1/0?(((t=E(s)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=m((u+1)/2)-(u<0||u%2),r=new l(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new l(c.toString()),n=(u=l.precision)+3;;){if(r=(o=r).plus(D(a,o,n+2,1)).times(.5),E(o.d).slice(0,n)===(t=E(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(C(r,u+1,1),e=!r.times(r).eq(a));break;}if(!i&&(C(o,u+1,0),o.times(o).eq(a))){r=o;break;}n+=4,i=1;}}return h=!0,C(r,u,l.rounding,e);},_.tangent=_.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=D(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,C(2==s||4==s?n.neg():n,e,t,!0)):new r(NaN);},_.times=_.mul=function(e){var t,n,r,i,o,a,s,u,c,l=this,p=l.constructor,d=l.d,f=(e=new p(e)).d;if(e.s*=l.s,!(d&&d[0]&&f&&f[0]))return new p(!e.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*e.s:e.s/0);for(n=m(l.e/7)+m(e.e/7),(u=d.length)<(c=f.length)&&(o=d,d=f,f=o,a=u,u=c,c=a),o=[],r=a=u+c;r--;){o.push(0);}for(r=c;--r>=0;){for(t=0,i=u+r;i>r;){s=o[i]+f[r]*d[i-r-1]+t,o[i--]=s%w|0,t=s/w|0;}o[i]=(o[i]+t)%w|0;}for(;!o[--a];){o.pop();}return t?++n:o.shift(),e.d=o,e.e=P(o,n),h?C(e,p.precision,p.rounding):e;},_.toBinary=function(e,t){return Y(this,2,e,t);},_.toDecimalPlaces=_.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(A(e,0,1e9),void 0===t?t=r.rounding:A(t,0,8),C(n,e+n.e+1,t));},_.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=R(r,!0):(A(e,0,1e9),void 0===t?t=i.rounding:A(t,0,8),n=R(r=C(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n;},_.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?n=R(i):(A(e,0,1e9),void 0===t?t=o.rounding:A(t,0,8),n=R(r=C(new o(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n;},_.toFraction=function(e){var t,n,r,i,o,a,s,u,c,l,p,d,m=this,g=m.d,v=m.constructor;if(!g)return new v(m);if(c=n=new v(1),r=u=new v(0),a=(o=(t=new v(r)).e=I(g)-m.e-1)%7,t.d[0]=y(10,a<0?7+a:a),null==e)e=o>0?t:c;else{if(!(s=new v(e)).isInt()||s.lt(c))throw Error(f+s);e=s.gt(t)?o>0?t:c:s;}for(h=!1,s=new v(E(g)),l=v.precision,v.precision=o=7*g.length*2;p=D(s,t,0,1,1),1!=(i=n.plus(p.times(r))).cmp(e);){n=r,r=i,i=c,c=u.plus(p.times(i)),u=i,i=t,t=s.minus(p.times(i)),s=i;}return i=D(e.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=m.s,d=D(c,r,o,1).minus(m).abs().cmp(D(u,n,o,1).minus(m).abs())<1?[c,r]:[u,n],v.precision=l,h=!0,d;},_.toHexadecimal=_.toHex=function(e,t){return Y(this,16,e,t);},_.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding;}else{if(e=new r(e),void 0===t?t=r.rounding:A(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e;}return e.d[0]?(h=!1,n=D(n,e,0,t,1).times(e),h=!0,C(n)):(e.s=n.s,n=e),n;},_.toNumber=function(){return+this;},_.toOctal=function(e,t){return Y(this,8,e,t);},_.toPower=_.pow=function(e){var t,n,r,i,o,a,s=this,u=s.constructor,c=+(e=new u(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new u(y(+s,c));if((s=new u(s)).eq(1))return s;if(r=u.precision,o=u.rounding,e.eq(1))return C(s,r,o);if((t=m(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=F(u,s,n,r),e.s<0?new u(1).div(i):C(i,r,o);if((a=s.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s;}return(t=0!=(n=y(+s,c))&&isFinite(n)?new u(n+"").e:m(c*(Math.log("0."+E(s.d))/Math.LN10+s.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?a/0:0):(h=!1,u.rounding=s.s=1,n=Math.min(12,(t+"").length),(i=U(e.times(j(s,r+n)),r)).d&&T((i=C(i,r+5,1)).d,r,o)&&(t=r+10,+E((i=C(U(e.times(j(s,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=C(i,r+1,0))),i.s=a,h=!0,u.rounding=o,C(i,r,o));},_.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=R(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(A(e,1,1e9),void 0===t?t=i.rounding:A(t,0,8),n=R(r=C(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n;},_.toSignificantDigits=_.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(A(e,1,1e9),void 0===t?t=n.rounding:A(t,0,8)),C(new n(this),e,t);},_.toString=function(){var e=this,t=e.constructor,n=R(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n;},_.truncated=_.trunc=function(){return C(new this.constructor(this),this.e+1,1);},_.valueOf=_.toJSON=function(){var e=this,t=e.constructor,n=R(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n;};var D=function(){function e(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;){r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;}return i&&e.unshift(i),e;}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++){if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break;}}return o;}function n(e,t,n,r){for(var i=0;n--;){e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];}for(;!e[0]&&e.length>1;){e.shift();}}return function(r,i,o,s,u,c){var l,p,d,h,f,y,g,v,x,b,S,M,_,E,A,T,N,D,R,P,O=r.constructor,L=r.s==i.s?1:-1,I=r.d,B=i.d;if(!(I&&I[0]&&B&&B[0]))return new O(r.s&&i.s&&(I?!B||I[0]!=B[0]:B)?I&&0==I[0]||!B?0*L:L/0:NaN);for(c?(f=1,p=r.e-i.e):(c=w,f=7,p=m(r.e/f)-m(i.e/f)),R=B.length,N=I.length,b=(x=new O(L)).d=[],d=0;B[d]==(I[d]||0);d++){;}if(B[d]>(I[d]||0)&&p--,null==o?(E=o=O.precision,s=O.rounding):E=u?o+(r.e-i.e)+1:o,E<0)b.push(1),y=!0;else{if(E=E/f+2|0,d=0,1==R){for(h=0,B=B[0],E++;(d<N||h)&&E--;d++){A=h*c+(I[d]||0),b[d]=A/B|0,h=A%B|0;}y=h||d<N;}else{for((h=c/(B[0]+1)|0)>1&&(B=e(B,h,c),I=e(I,h,c),R=B.length,N=I.length),T=R,M=(S=I.slice(0,R)).length;M<R;){S[M++]=0;}(P=B.slice()).unshift(0),D=B[0],B[1]>=c/2&&++D;do{h=0,(l=t(B,S,R,M))<0?(_=S[0],R!=M&&(_=_*c+(S[1]||0)),(h=_/D|0)>1?(h>=c&&(h=c-1),1==(l=t(g=e(B,h,c),S,v=g.length,M=S.length))&&(h--,n(g,R<v?P:B,v,c))):(0==h&&(l=h=1),g=B.slice()),(v=g.length)<M&&g.unshift(0),n(S,g,M,c),-1==l&&(l=t(B,S,R,M=S.length))<1&&(h++,n(S,R<M?P:B,M,c)),M=S.length):0===l&&(h++,S=[0]),b[d++]=h,l&&S[0]?S[M++]=I[T]||0:(S=[I[T]],M=1);}while((T++<N||void 0!==S[0])&&E--);y=void 0!==S[0];}b[0]||b.shift();}if(1==f)x.e=p,a=y;else{for(d=1,h=b[0];h>=10;h/=10){d++;}x.e=d+p*f-1,C(x,u?o+x.e+1:o,s,y);}return x;};}();function C(e,t,n,r){var i,o,a,s,u,c,l,p,d,f=e.constructor;e:if(null!=t){if(!(p=e.d))return e;for(i=1,s=p[0];s>=10;s/=10){i++;}if((o=t-i)<0)o+=7,a=t,u=(l=p[d=0])/y(10,i-a-1)%10|0;else if((d=Math.ceil((o+1)/7))>=(s=p.length)){if(!r)break e;for(;s++<=d;){p.push(0);}l=u=0,i=1,a=(o%=7)-7+1;}else{for(l=s=p[d],i=1;s>=10;s/=10){i++;}u=(a=(o%=7)-7+i)<0?0:l/y(10,i-a-1)%10|0;}if(r=r||t<0||void 0!==p[d+1]||(a<0?l:l%y(10,i-a-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(o>0?a>0?l/y(10,i-a):0:p[d-1])%10&1||n==(e.s<0?8:7)),t<1||!p[0])return p.length=0,c?(t-=e.e+1,p[0]=y(10,(7-t%7)%7),e.e=-t||0):p[0]=e.e=0,e;if(0==o?(p.length=d,s=1,d--):(p.length=d+1,s=y(10,7-o),p[d]=a>0?(l/y(10,i-a)%y(10,a)|0)*s:0),c)for(;;){if(0==d){for(o=1,a=p[0];a>=10;a/=10){o++;}for(a=p[0]+=s,s=1;a>=10;a/=10){s++;}o!=s&&(e.e++,p[0]==w&&(p[0]=1));break;}if(p[d]+=s,p[d]!=w)break;p[d--]=0,s=1;}for(o=p.length;0===p[--o];){p.pop();}}return h&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e;}function R(e,t,n){if(!e.isFinite())return H(e);var r,i=e.e,o=E(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+B(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+B(-i-1)+o,n&&(r=n-a)>0&&(o+=B(r))):i>=a?(o+=B(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+B(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=B(r))),o;}function P(e,t){var n=e[0];for(t*=7;n>=10;n/=10){t++;}return t;}function O(e,t,n){if(t>S)throw h=!0,n&&(e.precision=n),Error("[DecimalError] Precision limit exceeded");return C(new e(l),t,1,!0);}function L(e,t,n){if(t>M)throw Error("[DecimalError] Precision limit exceeded");return C(new e(p),t,n,!0);}function I(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10){n--;}for(t=e[0];t>=10;t/=10){n++;}}return n;}function B(e){for(var t="";e--;){t+="0";}return t;}function F(e,t,n,r){var i,o=new e(1),a=Math.ceil(r/7+4);for(h=!1;;){if(n%2&&Z((o=o.times(t)).d,a)&&(i=!0),0===(n=m(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break;}Z((t=t.times(t)).d,a);}return h=!0,o;}function z(e){return 1&e.d[e.d.length-1];}function k(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;){if(!(r=new e(t[o])).s){i=r;break;}i[n](r)&&(i=r);}return i;}function U(e,t){var n,r,i,o,a,s,u,c=0,l=0,p=0,d=e.constructor,f=d.rounding,m=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(h=!1,u=m):u=t,s=new d(.03125);e.e>-2;){e=e.times(s),p+=5;}for(u+=r=Math.log(y(2,p))/Math.LN10*2+5|0,n=o=a=new d(1),d.precision=u;;){if(o=C(o.times(e),u,1),n=n.times(++l),E((s=a.plus(D(o,n,u,1))).d).slice(0,u)===E(a.d).slice(0,u)){for(i=p;i--;){a=C(a.times(a),u,1);}if(null!=t)return d.precision=m,a;if(!(c<3&&T(a.d,u-r,f,c)))return C(a,d.precision=m,f,h=!0);d.precision=u+=10,n=o=s=new d(1),l=0,c++;}a=s;}}function j(e,t){var n,r,i,o,a,s,u,c,l,p,d,f=1,m=e,y=m.d,g=m.constructor,v=g.rounding,x=g.precision;if(m.s<0||!y||!y[0]||!m.e&&1==y[0]&&1==y.length)return new g(y&&!y[0]?-1/0:1!=m.s?NaN:y?0:m);if(null==t?(h=!1,l=x):l=t,g.precision=l+=10,r=(n=E(y)).charAt(0),!(Math.abs(o=m.e)<15e14))return c=O(g,l+2,x).times(o+""),m=j(new g(r+"."+n.slice(1)),l-10).plus(c),g.precision=x,null==t?C(m,x,v,h=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;){r=(n=E((m=m.times(e)).d)).charAt(0),f++;}for(o=m.e,r>1?(m=new g("0."+n),o++):m=new g(r+"."+n.slice(1)),p=m,u=a=m=D(m.minus(1),m.plus(1),l,1),d=C(m.times(m),l,1),i=3;;){if(a=C(a.times(d),l,1),E((c=u.plus(D(a,new g(i),l,1))).d).slice(0,l)===E(u.d).slice(0,l)){if(u=u.times(2),0!==o&&(u=u.plus(O(g,l+2,x).times(o+""))),u=D(u,new g(f),l,1),null!=t)return g.precision=x,u;if(!T(u.d,l-10,v,s))return C(u,g.precision=x,v,h=!0);g.precision=l+=10,c=a=m=D(p.minus(1),p.plus(1),l,1),d=C(m.times(m),l,1),i=s=1;}u=c,i+=2;}}function H(e){return String(e.s*e.s/0);}function q(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++){;}for(i=t.length;48===t.charCodeAt(i-1);--i){;}if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;){e.d.push(+t.slice(r,r+=7));}r=7-(t=t.slice(r)).length;}else r-=i;for(;r--;){t+="0";}e.d.push(+t),h&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]));}else e.e=0,e.d=[0];return e;}function G(e,t){var n,r,i,a,s,u,c,l,p;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(v.test(t))n=16,t=t.toLowerCase();else if(g.test(t))n=2;else{if(!x.test(t))throw Error(f+t);n=8;}for((a=t.search(/p/i))>0?(c=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),s=(a=t.indexOf("."))>=0,r=e.constructor,s&&(a=(u=(t=t.replace(".","")).length)-a,i=F(r,new r(n),a,2*a)),a=p=(l=N(t,n,w)).length-1;0===l[a];--a){l.pop();}return a<0?new r(0*e.s):(e.e=P(l,p),e.d=l,h=!1,s&&(e=D(e,i,4*u)),c&&(e=e.times(Math.abs(c)<54?y(2,c):o.pow(2,c))),h=!0,e);}function V(e,t,n,r,i){var o,a,s,u,c=e.precision,l=Math.ceil(c/7);for(h=!1,u=n.times(n),s=new e(r);;){if(a=D(s.times(u),new e(t++*t++),c,1),s=i?r.plus(a):r.minus(a),r=D(a.times(u),new e(t++*t++),c,1),void 0!==(a=s.plus(r)).d[l]){for(o=l;a.d[o]===s.d[o]&&o--;){;}if(-1==o)break;}o=s,s=r,r=a,a=o;}return h=!0,a.d.length=l+1,a;}function W(e,t){for(var n=e;--t;){n*=e;}return n;}function X(e,t){var n,r=t.s<0,i=L(e,e.precision,1),o=i.times(.5);if((t=t.abs()).lte(o))return s=r?4:1,t;if((n=t.divToInt(i)).isZero())s=r?3:2;else{if((t=t.minus(n.times(i))).lte(o))return s=z(n)?r?2:3:r?4:1,t;s=z(n)?r?1:4:r?3:2;}return t.minus(i).abs();}function Y(e,t,n,r){var i,o,s,u,l,p,d,h,f,m=e.constructor,y=void 0!==n;if(y?(A(n,1,1e9),void 0===r?r=m.rounding:A(r,0,8)):(n=m.precision,r=m.rounding),e.isFinite()){for(y?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(s=(d=R(e)).indexOf("."))>=0&&(d=d.replace(".",""),(f=new m(1)).e=d.length-s,f.d=N(R(f),10,i),f.e=f.d.length),o=l=(h=N(d,10,i)).length;0==h[--l];){h.pop();}if(h[0]){if(s<0?o--:((e=new m(e)).d=h,e.e=o,h=(e=D(e,f,n,r,0,i)).d,o=e.e,p=a),s=h[n],u=i/2,p=p||void 0!==h[n+1],p=r<4?(void 0!==s||p)&&(0===r||r===(e.s<0?3:2)):s>u||s===u&&(4===r||p||6===r&&1&h[n-1]||r===(e.s<0?8:7)),h.length=n,p)for(;++h[--n]>i-1;){h[n]=0,n||(++o,h.unshift(1));}for(l=h.length;!h[l-1];--l){;}for(s=0,d="";s<l;s++){d+=c.charAt(h[s]);}if(y){if(l>1)if(16==t||8==t){for(s=16==t?4:3,--l;l%s;l++){d+="0";}for(l=(h=N(d,i,t)).length;!h[l-1];--l){;}for(s=1,d="1.";s<l;s++){d+=c.charAt(h[s]);}}else d=d.charAt(0)+"."+d.slice(1);d=d+(o<0?"p":"p+")+o;}else if(o<0){for(;++o;){d="0"+d;}d="0."+d;}else if(++o>l)for(o-=l;o--;){d+="0";}else o<l&&(d=d.slice(0,o)+"."+d.slice(o));}else d=y?"0p+0":"0";d=(16==t?"0x":2==t?"0b":8==t?"0o":"")+d;}else d=H(e);return e.s<0?"-"+d:d;}function Z(e,t){if(e.length>t)return e.length=t,!0;}function $(e){return new this(e).abs();}function J(e){return new this(e).acos();}function Q(e){return new this(e).acosh();}function K(e,t){return new this(e).plus(t);}function ee(e){return new this(e).asin();}function te(e){return new this(e).asinh();}function ne(e){return new this(e).atan();}function re(e){return new this(e).atanh();}function ie(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?L(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=L(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(D(e,t,o,1)),t=L(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(D(e,t,o,1)):(n=L(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n;}function oe(e){return new this(e).cbrt();}function ae(e){return C(e=new this(e),e.e+1,2);}function se(e){if(!e||"object"!=_typeof(e))throw Error("[DecimalError] Object expected");var t,n,r,i=!0===e.defaults,o=["precision",1,1e9,"rounding",0,8,"toExpNeg",-u,0,"toExpPos",0,u,"maxE",0,u,"minE",-u,0,"modulo",0,9];for(t=0;t<o.length;t+=3){if(n=o[t],i&&(this[n]=d[n]),void 0!==(r=e[n])){if(!(m(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(f+n+": "+r);this[n]=r;}}if(n="crypto",i&&(this[n]=d[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(f+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[n]=!0;}else this[n]=!1;}return this;}function ue(e){return new this(e).cos();}function ce(e){return new this(e).cosh();}function le(e,t){return new this(e).div(t);}function pe(e){return new this(e).exp();}function de(e){return C(e=new this(e),e.e+1,3);}function he(){var e,t,n=new this(0);for(h=!1,e=0;e<arguments.length;){if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return h=!0,new this(1/0);n=t;}}return h=!0,n.sqrt();}function fe(e){return e instanceof o||e&&"[object Decimal]"===e.name||!1;}function me(e){return new this(e).ln();}function ye(e,t){return new this(e).log(t);}function ge(e){return new this(e).log(2);}function ve(e){return new this(e).log(10);}function xe(){return k(this,arguments,"lt");}function be(){return k(this,arguments,"gt");}function we(e,t){return new this(e).mod(t);}function Se(e,t){return new this(e).mul(t);}function Me(e,t){return new this(e).pow(t);}function _e(e){var t,n,r,i,o=0,a=new this(1),s=[];if(void 0===e?e=this.precision:A(e,1,1e9),r=Math.ceil(e/7),this.crypto){if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;){(i=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;}else{if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(t=crypto.randomBytes(r*=4);o<r;){(i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(s.push(i%1e7),o+=4);}o=r/4;}}else for(;o<r;){s[o++]=1e7*Math.random()|0;}for(e%=7,(r=s[--o])&&e&&(i=y(10,7-e),s[o]=(r/i|0)*i);0===s[o];o--){s.pop();}if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7){s.shift();}for(r=1,i=s[0];i>=10;i/=10){r++;}r<7&&(n-=7-r);}return a.e=n,a.d=s,a;}function Ee(e){return C(e=new this(e),e.e+1,this.rounding);}function Ae(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN;}function Te(e){return new this(e).sin();}function Ne(e){return new this(e).sinh();}function De(e){return new this(e).sqrt();}function Ce(e,t){return new this(e).sub(t);}function Re(e){return new this(e).tan();}function Pe(e){return new this(e).tanh();}function Oe(e){return C(e=new this(e),e.e+1,1);}(o=function e(t){var n,r,i;function o(e){var t,n,r,i=this;if(!(i instanceof o))return new o(e);if(i.constructor=o,e instanceof o)return i.s=e.s,void(h?!e.d||e.e>o.maxE?(i.e=NaN,i.d=null):e.e<o.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=_typeof(e))){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10){t++;}return void(h?t>o.maxE?(i.e=NaN,i.d=null):t<o.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]));}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):q(i,e.toString());}if("string"!==r)throw Error(f+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),b.test(e)?q(i,e):G(i,e);}if(o.prototype=_,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=se,o.clone=e,o.isDecimal=fe,o.abs=$,o.acos=J,o.acosh=Q,o.add=K,o.asin=ee,o.asinh=te,o.atan=ne,o.atanh=re,o.atan2=ie,o.cbrt=oe,o.ceil=ae,o.cos=ue,o.cosh=ce,o.div=le,o.exp=pe,o.floor=de,o.hypot=he,o.ln=me,o.log=ye,o.log10=ve,o.log2=ge,o.max=xe,o.min=be,o.mod=we,o.mul=Se,o.pow=Me,o.random=_e,o.round=Ee,o.sign=Ae,o.sin=Te,o.sinh=Ne,o.sqrt=De,o.sub=Ce,o.tan=Re,o.tanh=Pe,o.trunc=Oe,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;){t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);}return o.config(t),o;}(d))["default"]=o.Decimal=o,l=new o(l),p=new o(p),void 0===(r=function(){return o;}.call(t,n,t,e))||(e.exports=r);}();},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}}return e;},i={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},o={"":"\\--","":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},a=function a(e,t){return r({},e,t);};e.exports=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preserveFormatting,s=void 0!==n&&n,u=t.escapeMapFn,c=void 0===u?a:u,l=String(e),p="",d=c(r({},i),s?r({},o):{}),h=Object.keys(d),f=function f(){var e=!1;h.forEach(function(t,n){e||l.length>=t.length&&l.slice(0,t.length)===t&&(p+=d[h[n]],l=l.slice(t.length,l.length),e=!0);}),e||(p+=l.slice(0,1),l=l.slice(1,l.length));};l;){f();}return p;};},function(e,t){function n(){}n.prototype={on:function on(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this;},once:function once(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments);}return i._=t,this.on(e,i,n);},emit:function emit(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++){n[r].fn.apply(n[r].ctx,t);}return this;},off:function off(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++){r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);}return i.length?n[e]=i:delete n[e],this;}},e.exports=n,e.exports.TinyEmitter=n;},function(e,t,n){"use strict";var r=n(9),i=n(17),o=n(19),a=n(30),s=n(61),u=n(163);o();var c=r.call(Function.call,s()),l=function l(e){return c(void 0===this?Promise:this,e);};i(l,{getPolyfill:s,implementation:a,shim:u}),e.exports=l;},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==o.call(t))throw new TypeError(r+t);for(var n,a=i.call(arguments,1),s=function s(){if(this instanceof n){var r=t.apply(this,a.concat(i.call(arguments)));return Object(r)===r?r:this;}return t.apply(e,a.concat(i.call(arguments)));},u=Math.max(0,t.length-a.length),c=[],l=0;l<u;l++){c.push("$"+l);}if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var p=function p(){};p.prototype=t.prototype,n.prototype=new p(),p.prototype=null;}return n;};},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(29),o=Object.keys,a=o?function(e){return o(e);}:n(71),s=Object.keys;a.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length;}(1,2)||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e);}):Object.keys=a;return Object.keys||a;},e.exports=a;},function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(29),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),c=s.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function p(e){var t=e.constructor;return t&&t.prototype===e;},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window){try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==_typeof(window[e]))try{p(window[e]);}catch(e){return!0;}}catch(e){return!0;}}return!1;}();r=function r(e){var t=null!==e&&"object"==_typeof(e),n="[object Function]"===o.call(e),r=a(e),s=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var f=c&&n;if(s&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m){d.push(String(m));}if(r&&e.length>0)for(var y=0;y<e.length;++y){d.push(String(y));}else for(var g in e){f&&"prototype"===g||!i.call(e,g)||d.push(String(g));}if(u)for(var v=function(e){if("undefined"==typeof window||!h)return p(e);try{return p(e);}catch(e){return!1;}}(e),x=0;x<l.length;++x){v&&"constructor"===l[x]||!i.call(e,l[x])||d.push(l[x]);}return d;};}e.exports=r;},function(e,t,n){"use strict";var r=n(73);e.exports=function(){return"function"==typeof AggregateError?AggregateError:r;};},function(e,t,n){"use strict";var r=n(31),i=n(83),o=n(38),a=n(22),s=n(100),u=n(109),c=n(5),l=n(20),p=n(40),d=n(17),h=l("%Error%");function f(e,t){var n=new h(t);u(n,m),delete n.constructor;var l=s(e,p({AdvanceStringIndex:r,GetMethod:o,IsArray:a,Type:c},e));return i(n,"errors",l),n;}var m=f.prototype;d(f.prototype,{constructor:f,message:"",name:"AggregateError"}),u(f.prototype,Error.prototype),e.exports=f;},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(11),o=n(33),a=n(34),s=n(5),u=n(77),c=i("String.prototype.charAt"),l=i("String.prototype.charCodeAt");e.exports=function(e,t){if("String"!==s(e))throw new r("Assertion failed: `string` must be a String");var n=e.length;if(t<0||t>=n)throw new r("Assertion failed: `position` must be >= 0, and < the length of `string`");var i=l(e,t),p=c(e,t),d=o(i),h=a(i);if(!d&&!h)return{"[[CodePoint]]":p,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(h||t+1===n)return{"[[CodePoint]]":p,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var f=l(e,t+1);return a(f)?{"[[CodePoint]]":u(i,f),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":p,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};};},function(e,t,n){"use strict";var r=n(9),i=n(2),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),u=i("%Object.defineProperty%",!0);if(u)try{u({},"a",{value:1});}catch(e){u=null;}e.exports=function(){return s(r,a,arguments);};var c=function c(){return s(r,o,arguments);};u?u(e.exports,"apply",{value:c}):e.exports.apply=c;},function(e,t,n){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==_typeof(e)?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0;};},function(e,t,n){"use strict";var r=n(2),i=r("%TypeError%"),o=r("%String.fromCharCode%"),a=n(33),s=n(34);e.exports=function(e,t){if(!a(e)||!s(t))throw new i("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return o(e)+o(t);};},function(e,t,n){"use strict";var r=n(79),i=n(80),o=n(35),a=n(81);e.exports=function(e){if("number"!=typeof e||o(e)||!a(e))return!1;var t=r(e);return i(t)===t;};},function(e,t,n){"use strict";var r=n(2)("%Math.abs%");e.exports=function(e){return r(e);};},function(e,t,n){"use strict";var r=Math.floor;e.exports=function(e){return r(e);};},function(e,t,n){"use strict";var r=Number.isNaN||function(e){return e!=e;};e.exports=Number.isFinite||function(e){return"number"==typeof e&&!r(e)&&e!==1/0&&e!==-1/0;};},function(e,t,n){"use strict";var r=n(2),i=r("%Math%"),o=r("%Number%");e.exports=o.MAX_SAFE_INTEGER||i.pow(2,53)-1;},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(84),o=n(12),a=n(5);e.exports=function(e,t,n){if("Object"!==a(e))throw new r("Assertion failed: Type(O) is not Object");if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var s=i(e,t,n);if(!s)throw new r("unable to create data property");return s;};},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(85),o=n(86),a=n(87),s=n(93),u=n(94),c=n(12),l=n(96),p=n(5);e.exports=function(e,t,n){if("Object"!==p(e))throw new r("Assertion failed: Type(O) is not Object");if(!c(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var d=a(e,t),h=!d||u(e);return!(d&&(!d["[[Writable]]"]||!d["[[Configurable]]"])||!h)&&i(s,l,o,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0});};},function(e,t,n){"use strict";var r=n(2)("%Object.defineProperty%",!0);if(r)try{r({},"a",{value:1});}catch(e){r=null;}var i=n(11)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,n,o,a,s){if(!r){if(!e(s))return!1;if(!s["[[Configurable]]"]||!s["[[Writable]]"])return!1;if(a in o&&i(o,a)!==!!s["[[Enumerable]]"])return!1;var u=s["[[Value]]"];return o[a]=u,t(o[a],u);}return r(o,a,n(s)),!0;};},function(e,t,n){"use strict";var r=n(36),i=n(5);e.exports=function(e){if(void 0===e)return e;r(i,"Property Descriptor","Desc",e);var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=e["[[Configurable]]"]),t;};},function(e,t,n){"use strict";var r=n(2),i=n(88),o=r("%TypeError%"),a=n(11)("Object.prototype.propertyIsEnumerable"),s=n(7),u=n(22),c=n(12),l=n(89),p=n(91),d=n(5);e.exports=function(e,t){if("Object"!==d(e))throw new o("Assertion failed: O must be an Object");if(!c(t))throw new o("Assertion failed: P must be a Property Key");if(s(e,t)){if(!i){var n=u(e)&&"length"===t,r=l(e)&&"lastIndex"===t;return{"[[Configurable]]":!(n||r),"[[Enumerable]]":a(e,t),"[[Value]]":e[t],"[[Writable]]":!0};}return p(i(e,t));}};},function(e,t,n){"use strict";var r=n(2)("%Object.getOwnPropertyDescriptor%");if(r)try{r([],"length");}catch(e){r=null;}e.exports=r;},function(e,t,n){"use strict";var r=n(2)("%Symbol.match%",!0),i=n(90),o=n(23);e.exports=function(e){if(!e||"object"!=_typeof(e))return!1;if(r){var t=e[r];if(void 0!==t)return o(t);}return i(e);};},function(e,t,n){"use strict";var r,i,o,a,s=n(10)()&&"symbol"==_typeof(Symbol.toStringTag);if(s){r=Function.call.bind(Object.prototype.hasOwnProperty),i=Function.call.bind(RegExp.prototype.exec),o={};var u=function u(){throw o;};a={toString:u,valueOf:u},"symbol"==_typeof(Symbol.toPrimitive)&&(a[Symbol.toPrimitive]=u);}var c=Object.prototype.toString,l=Object.getOwnPropertyDescriptor;e.exports=s?function(e){if(!e||"object"!=_typeof(e))return!1;var t=l(e,"lastIndex");if(!(t&&r(t,"value")))return!1;try{i(e,a);}catch(e){return e===o;}}:function(e){return!(!e||"object"!=_typeof(e)&&"function"!=typeof e)&&"[object RegExp]"===c.call(e);};},function(e,t,n){"use strict";var r=n(7),i=n(2)("%TypeError%"),o=n(5),a=n(23),s=n(37);e.exports=function(e){if("Object"!==o(e))throw new i("ToPropertyDescriptor requires an object");var t={};if(r(e,"enumerable")&&(t["[[Enumerable]]"]=a(e.enumerable)),r(e,"configurable")&&(t["[[Configurable]]"]=a(e.configurable)),r(e,"value")&&(t["[[Value]]"]=e.value),r(e,"writable")&&(t["[[Writable]]"]=a(e.writable)),r(e,"get")){var n=e.get;if(void 0!==n&&!s(n))throw new i("getter must be a function");t["[[Get]]"]=n;}if(r(e,"set")){var u=e.set;if(void 0!==u&&!s(u))throw new i("setter must be a function");t["[[Set]]"]=u;}if((r(t,"[[Get]]")||r(t,"[[Set]]"))&&(r(t,"[[Value]]")||r(t,"[[Writable]]")))throw new i("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t;};},function(e,t,n){"use strict";var r,i,o=Function.prototype.toString,a="object"==(typeof Reflect==="undefined"?"undefined":_typeof(Reflect))&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{r=Object.defineProperty({},"length",{get:function get(){throw i;}}),i={},a(function(){throw 42;},null,r);}catch(e){e!==i&&(a=null);}else a=null;var s=/^\s*class\b/,u=function u(e){try{var t=o.call(e);return s.test(t);}catch(e){return!1;}},c=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==_typeof(Symbol.toStringTag);e.exports=a?function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=_typeof(e))return!1;if("function"==typeof e&&!e.prototype)return!0;try{a(e,null,r);}catch(e){if(e!==i)return!1;}return!u(e);}:function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=_typeof(e))return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return function(e){try{return!u(e)&&(o.call(e),!0);}catch(e){return!1;}}(e);if(u(e))return!1;var t=c.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t;};},function(e,t,n){"use strict";var r=n(7),i=n(36),o=n(5);e.exports=function(e){return void 0!==e&&(i(o,"Property Descriptor","Desc",e),!(!r(e,"[[Value]]")&&!r(e,"[[Writable]]")));};},function(e,t,n){"use strict";var r=n(2)("%Object%"),i=n(95),o=r.preventExtensions,a=r.isExtensible;e.exports=o?function(e){return!i(e)&&a(e);}:function(e){return!i(e);};},function(e,t,n){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=_typeof(e);};},function(e,t,n){"use strict";var r=n(35);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:r(e)&&r(t);};},function(e,t,n){"use strict";var r=n(2)("%Object%"),i=n(98);e.exports=function(e){return i(e),r(e);};},function(e,t,n){"use strict";e.exports=n(99);},function(e,t,n){"use strict";var r=n(2)("%TypeError%");e.exports=function(e,t){if(null==e)throw new r(t||"Cannot call method on "+e);return e;};},function(e,t,n){"use strict";var r=n(11)("Array.prototype.push"),i=n(101),o=n(102),a=n(108);e.exports=function(e,t){for(var n=i(e,t),s=[],u=!0;u;){if(u=o(n)){var c=a(u);r(s,c);}}return s;};},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(40),o=n(31),a=n(41),s=n(38),u=n(22),c=n(5);e.exports=function(e,t){var n=t;arguments.length<2&&(n=i({AdvanceStringIndex:o,GetMethod:s,IsArray:u,Type:c},e));var l=a(n,e);if("Object"!==c(l))throw new r("iterator must return an object");return l;};},function(e,t,n){"use strict";var r=n(103),i=n(106);e.exports=function(e){var t=i(e);return!0!==r(t)&&t;};},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(42),o=n(23),a=n(5);e.exports=function(e){if("Object"!==a(e))throw new r("Assertion failed: Type(iterResult) is not Object");return o(i(e,"done"));};},function(e,t,n){var r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"==typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"==typeof u.get?u.get:null,l=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h=Boolean.prototype.valueOf,f=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,g="function"==typeof BigInt?BigInt.prototype.valueOf:null,v=Object.getOwnPropertySymbols,x="function"==typeof Symbol?Symbol.prototype.toString:null,b=Object.prototype.propertyIsEnumerable,w=n(105).custom,S=w&&A(w)?w:null;function M(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r;}function _(e){return String(e).replace(/"/g,"&quot;");}function E(e){return"[object Array]"===D(e);}function A(e){return"[object Symbol]"===D(e);}e.exports=function e(t,n,r,i){var s=n||{};if(N(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(N(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!N(s,"customInspect")||s.customInspect;if("boolean"!=typeof u)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(N(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return e(t.slice(0,n.maxStringLength),n)+i;}return M(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,R),"single",n);}(t,s);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var f=void 0===s.depth?5:s.depth;if(void 0===r&&(r=0),r>=f&&f>0&&"object"==_typeof(t))return E(t)?"[Array]":"[Object]";var v=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=Array(e.indent+1).join(" ");}return{base:n,prev:Array(t+1).join(n)};}(s,r);if(void 0===i)i=[];else if(C(i,t)>=0)return"[Circular]";function b(t,n,o){if(n&&(i=i.slice()).push(n),o){var a={depth:s.depth};return N(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,r+1,i);}return e(t,s,r+1,i);}if("function"==typeof t){var w=function(e){if(e.name)return e.name;var t=y.call(m.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null;}(t),T=B(t,b);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(T.length>0?" { "+T.join(", ")+" }":"");}if(A(t)){var F=x.call(t);return"object"==_typeof(t)?P(F):F;}if(function(e){if(!e||"object"!=_typeof(e))return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute;}(t)){for(var z="<"+String(t.nodeName).toLowerCase(),k=t.attributes||[],U=0;U<k.length;U++){z+=" "+k[U].name+"="+M(_(k[U].value),"double",s);}return z+=">",t.childNodes&&t.childNodes.length&&(z+="..."),z+="</"+String(t.nodeName).toLowerCase()+">";}if(E(t)){if(0===t.length)return"[]";var j=B(t,b);return v&&!function(e){for(var t=0;t<e.length;t++){if(C(e[t],"\n")>=0)return!1;}return!0;}(j)?"["+I(j,v)+"]":"[ "+j.join(", ")+" ]";}if(function(e){return"[object Error]"===D(e);}(t)){var H=B(t,b);return 0===H.length?"["+String(t)+"]":"{ ["+String(t)+"] "+H.join(", ")+" }";}if("object"==_typeof(t)&&u){if(S&&"function"==typeof t[S])return t[S]();if("function"==typeof t.inspect)return t.inspect();}if(function(e){if(!o||!e||"object"!=_typeof(e))return!1;try{o.call(e);try{c.call(e);}catch(e){return!0;}return e instanceof Map;}catch(e){}return!1;}(t)){var q=[];return a.call(t,function(e,n){q.push(b(n,t,!0)+" => "+b(e,t));}),L("Map",o.call(t),q,v);}if(function(e){if(!c||!e||"object"!=_typeof(e))return!1;try{c.call(e);try{o.call(e);}catch(e){return!0;}return e instanceof Set;}catch(e){}return!1;}(t)){var G=[];return l.call(t,function(e){G.push(b(e,t));}),L("Set",c.call(t),G,v);}if(function(e){if(!p||!e||"object"!=_typeof(e))return!1;try{p.call(e,p);try{d.call(e,d);}catch(e){return!0;}return e instanceof WeakMap;}catch(e){}return!1;}(t))return O("WeakMap");if(function(e){if(!d||!e||"object"!=_typeof(e))return!1;try{d.call(e,d);try{p.call(e,p);}catch(e){return!0;}return e instanceof WeakSet;}catch(e){}return!1;}(t))return O("WeakSet");if(function(e){return"[object Number]"===D(e);}(t))return P(b(Number(t)));if(function(e){return"[object BigInt]"===D(e);}(t))return P(b(g.call(t)));if(function(e){return"[object Boolean]"===D(e);}(t))return P(h.call(t));if(function(e){return"[object String]"===D(e);}(t))return P(b(String(t)));if(!function(e){return"[object Date]"===D(e);}(t)&&!function(e){return"[object RegExp]"===D(e);}(t)){var V=B(t,b);return 0===V.length?"{}":v?"{"+I(V,v)+"}":"{ "+V.join(", ")+" }";}return String(t);};var T=Object.prototype.hasOwnProperty||function(e){return e in this;};function N(e,t){return T.call(e,t);}function D(e){return f.call(e);}function C(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++){if(e[n]===t)return n;}return-1;}function R(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase();}function P(e){return"Object("+e+")";}function O(e){return e+" { ? }";}function L(e,t,n,r){return e+" ("+t+") {"+(r?I(n,r):n.join(", "))+"}";}function I(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+e.join(","+n)+"\n"+t.prev;}function B(e,t){var n=E(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++){r[i]=N(e,i)?t(e[i],e):"";}}for(var o in e){N(e,o)&&(n&&String(Number(o))===o&&o<e.length||(/[^\w$]/.test(o)?r.push(t(o,e)+": "+t(e[o],e)):r.push(o+": "+t(e[o],e))));}if("function"==typeof v)for(var a=v(e),s=0;s<a.length;s++){b.call(e,a[s])&&r.push("["+t(a[s])+"]: "+t(e[a[s]],e));}return r;}},function(e,t){},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(107),o=n(5);e.exports=function(e,t){var n=i(e,"next",arguments.length<2?[]:[t]);if("Object"!==o(n))throw new r("iterator next must return an object");return n;};},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(11)("Array.prototype.slice"),o=n(41),a=n(39),s=n(12);e.exports=function(e,t){if(!s(t))throw new r("P must be a Property Key");var n=i(arguments,2),u=a(e,t);return o(u,e,n);};},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(42),o=n(5);e.exports=function(e){if("Object"!==o(e))throw new r("Assertion failed: Type(iterResult) is not Object");return i(e,"value");};},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(110),o=n(111),a=n(5);e.exports=function(e,t){if("Object"!==a(t)&&"Null"!==a(t))throw new r("Assertion failed: V must be Object or Null");try{i(e,t);}catch(e){return!1;}return o(e)===t;};},function(e,t,n){"use strict";var r=n(2),i=r("%Object.setPrototypeOf%",!0),o=r("%Array.prototype%");e.exports=i||([].__proto__!==o?null:function(e,t){return e.__proto__=t,e;});},function(e,t,n){"use strict";var r=n(2)("%TypeError%"),i=n(112),o=n(5);e.exports=function(e){if("Object"!==o(e))throw new r("Assertion failed: O must be an Object");if(!i)throw new r("This environment does not support fetching prototypes.");return i(e);};},function(e,t,n){"use strict";var r=n(2),i=r("%Object.getPrototypeOf%",!0),o=r("%Array.prototype%");e.exports=i||([].__proto__===o?function(e){return e.__proto__;}:null);},function(e,t,n){"use strict";var r=n(43)("Promise.resolve",!0);e.exports=function(e,t){if(!r)throw new SyntaxError("This environment does not support Promises.");return r(e,t);};},function(e,t,n){"use strict";var r=n(9),i=n(44)("%Function%"),o=i.apply,a=i.call;e.exports=function(){return r.apply(a,arguments);},e.exports.apply=function(){return r.apply(o,arguments);};},function(e,t,n){"use strict";var r=n(116);e.exports=function(e){return"symbol"==_typeof(e)?"Symbol":r(e);};},function(e,t,n){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==_typeof(e)?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0;};},function(e,t,n){"use strict";var r=n(118),i=TypeError,o=n(125);e.exports=function(e){var t=r(e);if(!t)throw new i("non-iterable value provided");return arguments.length>1?o(t,arguments[1]):o(t);};},function(e,t,n){"use strict";(function(t){var r=n(120);if(n(10)()||n(32)()){var i=Symbol.iterator;e.exports=function(e){return null!=e&&void 0!==e[i]?e[i]():r(e)?Array.prototype[i].call(e):void 0;};}else{var o=n(121),a=n(45),s=n(20),u=s("%Map%",!0),c=s("%Set%",!0),l=n(24),p=l("Array.prototype.push"),d=l("String.prototype.charCodeAt"),h=l("String.prototype.slice"),f=function f(e){var t=0;return{next:function next(){var n,r=t>=e.length;return r||(n=e[t],t+=1),{done:r,value:n};}};},m=function m(e,t){if(o(e)||r(e))return f(e);if(a(e)){var n=0;return{next:function next(){var t=function(e,t){if(t+1>=e.length)return t+1;var n=d(e,t);if(n<55296||n>56319)return t+1;var r=d(e,t+1);return r<56320||r>57343?t+1:t+2;}(e,n),r=h(e,n,t);return n=t,{done:t>e.length,value:r};}};}return t&&void 0!==e["_es6-shim iterator_"]?e["_es6-shim iterator_"]():void 0;};if(u||c){var y=n(123),g=n(124),v=l("Map.prototype.forEach",!0),x=l("Set.prototype.forEach",!0);if(void 0===t||!t.versions||!t.versions.node)var b=l("Map.prototype.iterator",!0),w=l("Set.prototype.iterator",!0),S=function S(e){var t=!1;return{next:function next(){try{return{done:t,value:t?void 0:e.next()};}catch(e){return t=!0,{done:!0,value:void 0};}}};};var M=l("Map.prototype.@@iterator",!0)||l("Map.prototype._es6-shim iterator_",!0),_=l("Set.prototype.@@iterator",!0)||l("Set.prototype._es6-shim iterator_",!0);e.exports=function(e){return function(e){if(y(e)){if(b)return S(b(e));if(M)return M(e);if(v){var t=[];return v(e,function(e,n){p(t,[n,e]);}),f(t);}}if(g(e)){if(w)return S(w(e));if(_)return _(e);if(x){var n=[];return x(e,function(e){p(n,e);}),f(n);}}}(e)||m(e);};}else e.exports=function(e){if(null!=e)return m(e,!0);};}}).call(this,n(119));},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined");}function a(){throw new Error("clearTimeout has not been defined");}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0);}catch(t){try{return n.call(null,e,0);}catch(t){return n.call(this,e,0);}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o;}catch(e){n=o;}try{r="function"==typeof clearTimeout?clearTimeout:a;}catch(e){r=a;}}();var u,c=[],l=!1,p=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&h());}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;){u&&u[p].run();}p=-1,t=c.length;}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e);}catch(t){try{return r.call(null,e);}catch(t){return r.call(this,e);}}}(e);}}function f(e,t){this.fun=e,this.array=t;}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n];}c.push(new f(e,t)),1!==c.length||l||s(h);},f.prototype.run=function(){this.fun.apply(null,this.array);},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[];},i.binding=function(e){throw new Error("process.binding is not supported");},i.cwd=function(){return"/";},i.chdir=function(e){throw new Error("process.chdir is not supported");},i.umask=function(){return 0;};},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.toStringTag),i=Object.prototype.toString,o=function o(e){return!(r&&e&&"object"==_typeof(e)&&Symbol.toStringTag in e)&&"[object Arguments]"===i.call(e);},a=function a(e){return!!o(e)||null!==e&&"object"==_typeof(e)&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i.call(e)&&"[object Function]"===i.call(e.callee);},s=function(){return o(arguments);}();o.isLegacyArguments=a,e.exports=s?o:a;},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e);};},function(e,t,n){"use strict";var r=n(9),i=n(20),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),u=i("%Object.defineProperty%",!0);if(u)try{u({},"a",{value:1});}catch(e){u=null;}e.exports=function(){return s(r,a,arguments);};var c=function c(){return s(r,o,arguments);};u?u(e.exports,"apply",{value:c}):e.exports.apply=c;},function(e,t,n){"use strict";var r,i="function"==typeof Map&&Map.prototype?Map:null,o="function"==typeof Set&&Set.prototype?Set:null;i||(r=function r(e){return!1;});var a=i?Map.prototype.has:null,s=o?Set.prototype.has:null;r||a||(r=function r(e){return!1;}),e.exports=r||function(e){if(!e||"object"!=_typeof(e))return!1;try{if(a.call(e),s)try{s.call(e);}catch(e){return!0;}return e instanceof i;}catch(e){}return!1;};},function(e,t,n){"use strict";var r,i="function"==typeof Map&&Map.prototype?Map:null,o="function"==typeof Set&&Set.prototype?Set:null;o||(r=function r(e){return!1;});var a=i?Map.prototype.has:null,s=o?Set.prototype.has:null;r||s||(r=function r(e){return!1;}),e.exports=r||function(e){if(!e||"object"!=_typeof(e))return!1;try{if(s.call(e),a)try{a.call(e);}catch(e){return!0;}return e instanceof o;}catch(e){}return!1;};},function(e,t,n){"use strict";var r=TypeError;e.exports=function(e){if(!e||"function"!=typeof e.next)throw new r("iterator must be an object with a `next` method");if(arguments.length>1){var t=arguments[1];if("function"!=typeof t)throw new r("`callback`, if provided, must be a function");}for(var n,i=t||[];(n=e.next())&&!n.done;){t?t(n.value):i.push(n.value);}if(!t)return i;};},function(e,t,n){"use strict";var r=n(17),i=n(46),o=n(24),a=n(47),s=n(60),u=s(),c=n(162),l=o("Array.prototype.slice"),p=function p(e,t){return i(e),u.apply(e,l(arguments,1));};r(p,{getPolyfill:s,implementation:a,shim:c}),e.exports=p;},function(e,t,n){"use strict";var r=n(3)("%TypeError%");e.exports=function(e,t){if(null==e)throw new r(t||"Cannot call method on "+e);return e;};},function(e,t,n){"use strict";var r=n(3),i=r("%Array%"),o=r("%Symbol.species%",!0),a=r("%TypeError%"),s=n(48),u=n(49),c=n(132),l=n(137),p=n(8);e.exports=function(e,t){if(!l(t)||t<0)throw new a("Assertion failed: length must be an integer >= 0");var n,r=0===t?0:t;if(u(e)&&(n=s(e,"constructor"),o&&"Object"===p(n)&&null===(n=s(n,o))&&(n=void 0)),void 0===n)return i(r);if(!c(n))throw new a("C must be a constructor");return new n(r);};},function(e,t,n){var r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"==typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"==typeof u.get?u.get:null,l=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h=Boolean.prototype.valueOf,f=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,g="function"==typeof BigInt?BigInt.prototype.valueOf:null,v=Object.getOwnPropertySymbols,x="function"==typeof Symbol?Symbol.prototype.toString:null,b=Object.prototype.propertyIsEnumerable,w=n(130).custom,S=w&&A(w)?w:null;function M(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r;}function _(e){return String(e).replace(/"/g,"&quot;");}function E(e){return"[object Array]"===D(e);}function A(e){return"[object Symbol]"===D(e);}e.exports=function e(t,n,r,i){var s=n||{};if(N(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(N(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!N(s,"customInspect")||s.customInspect;if("boolean"!=typeof u)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(N(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return e(t.slice(0,n.maxStringLength),n)+i;}return M(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,R),"single",n);}(t,s);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var f=void 0===s.depth?5:s.depth;if(void 0===r&&(r=0),r>=f&&f>0&&"object"==_typeof(t))return E(t)?"[Array]":"[Object]";var v=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=Array(e.indent+1).join(" ");}return{base:n,prev:Array(t+1).join(n)};}(s,r);if(void 0===i)i=[];else if(C(i,t)>=0)return"[Circular]";function b(t,n,o){if(n&&(i=i.slice()).push(n),o){var a={depth:s.depth};return N(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,r+1,i);}return e(t,s,r+1,i);}if("function"==typeof t){var w=function(e){if(e.name)return e.name;var t=y.call(m.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null;}(t),T=B(t,b);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(T.length>0?" { "+T.join(", ")+" }":"");}if(A(t)){var F=x.call(t);return"object"==_typeof(t)?P(F):F;}if(function(e){if(!e||"object"!=_typeof(e))return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute;}(t)){for(var z="<"+String(t.nodeName).toLowerCase(),k=t.attributes||[],U=0;U<k.length;U++){z+=" "+k[U].name+"="+M(_(k[U].value),"double",s);}return z+=">",t.childNodes&&t.childNodes.length&&(z+="..."),z+="</"+String(t.nodeName).toLowerCase()+">";}if(E(t)){if(0===t.length)return"[]";var j=B(t,b);return v&&!function(e){for(var t=0;t<e.length;t++){if(C(e[t],"\n")>=0)return!1;}return!0;}(j)?"["+I(j,v)+"]":"[ "+j.join(", ")+" ]";}if(function(e){return"[object Error]"===D(e);}(t)){var H=B(t,b);return 0===H.length?"["+String(t)+"]":"{ ["+String(t)+"] "+H.join(", ")+" }";}if("object"==_typeof(t)&&u){if(S&&"function"==typeof t[S])return t[S]();if("function"==typeof t.inspect)return t.inspect();}if(function(e){if(!o||!e||"object"!=_typeof(e))return!1;try{o.call(e);try{c.call(e);}catch(e){return!0;}return e instanceof Map;}catch(e){}return!1;}(t)){var q=[];return a.call(t,function(e,n){q.push(b(n,t,!0)+" => "+b(e,t));}),L("Map",o.call(t),q,v);}if(function(e){if(!c||!e||"object"!=_typeof(e))return!1;try{c.call(e);try{o.call(e);}catch(e){return!0;}return e instanceof Set;}catch(e){}return!1;}(t)){var G=[];return l.call(t,function(e){G.push(b(e,t));}),L("Set",c.call(t),G,v);}if(function(e){if(!p||!e||"object"!=_typeof(e))return!1;try{p.call(e,p);try{d.call(e,d);}catch(e){return!0;}return e instanceof WeakMap;}catch(e){}return!1;}(t))return O("WeakMap");if(function(e){if(!d||!e||"object"!=_typeof(e))return!1;try{d.call(e,d);try{p.call(e,p);}catch(e){return!0;}return e instanceof WeakSet;}catch(e){}return!1;}(t))return O("WeakSet");if(function(e){return"[object Number]"===D(e);}(t))return P(b(Number(t)));if(function(e){return"[object BigInt]"===D(e);}(t))return P(b(g.call(t)));if(function(e){return"[object Boolean]"===D(e);}(t))return P(h.call(t));if(function(e){return"[object String]"===D(e);}(t))return P(b(String(t)));if(!function(e){return"[object Date]"===D(e);}(t)&&!function(e){return"[object RegExp]"===D(e);}(t)){var V=B(t,b);return 0===V.length?"{}":v?"{"+I(V,v)+"}":"{ "+V.join(", ")+" }";}return String(t);};var T=Object.prototype.hasOwnProperty||function(e){return e in this;};function N(e,t){return T.call(e,t);}function D(e){return f.call(e);}function C(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++){if(e[n]===t)return n;}return-1;}function R(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase();}function P(e){return"Object("+e+")";}function O(e){return e+" { ? }";}function L(e,t,n,r){return e+" ("+t+") {"+(r?I(n,r):n.join(", "))+"}";}function I(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+e.join(","+n)+"\n"+t.prev;}function B(e,t){var n=E(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++){r[i]=N(e,i)?t(e[i],e):"";}}for(var o in e){N(e,o)&&(n&&String(Number(o))===o&&o<e.length||(/[^\w$]/.test(o)?r.push(t(o,e)+": "+t(e[o],e)):r.push(o+": "+t(e[o],e))));}if("function"==typeof v)for(var a=v(e),s=0;s<a.length;s++){b.call(e,a[s])&&r.push("["+t(a[s])+"]: "+t(e[a[s]],e));}return r;}},function(e,t){},function(e,t,n){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==_typeof(e)?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0;};},function(e,t,n){"use strict";var r=n(3)("%Reflect.construct%",!0),i=n(133);try{i({},"",{"[[Get]]":function Get(){}});}catch(e){i=null;}if(i&&r){var o={},a={};i(a,"length",{"[[Get]]":function Get(){throw o;},"[[Enumerable]]":!0}),e.exports=function(e){try{r(e,a);}catch(e){return e===o;}};}else e.exports=function(e){return"function"==typeof e&&!!e.prototype;};},function(e,t,n){"use strict";var r=n(3)("%TypeError%"),i=n(134),o=n(51),a=n(52),s=n(135),u=n(53),c=n(16),l=n(54),p=n(56),d=n(8);e.exports=function(e,t,n){if("Object"!==d(e))throw new r("Assertion failed: Type(O) is not Object");if(!c(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var h=i({Type:d,IsDataDescriptor:u,IsAccessorDescriptor:s},n)?n:p(n);if(!i({Type:d,IsDataDescriptor:u,IsAccessorDescriptor:s},h))throw new r("Assertion failed: Desc is not a valid Property Descriptor");return o(u,l,a,e,t,h);};},function(e,t,n){"use strict";var r=n(3),i=n(7),o=r("%TypeError%");e.exports=function(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t){if(i(t,r)&&!n[r])return!1;}if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new o("Property Descriptors may not be both accessor and data descriptors");return!0;};},function(e,t,n){"use strict";var r=n(7),i=n(25),o=n(8);e.exports=function(e){return void 0!==e&&(i(o,"Property Descriptor","Desc",e),!(!r(e,"[[Get]]")&&!r(e,"[[Set]]")));};},function(e,t,n){"use strict";var r,i,o=Function.prototype.toString,a="object"==(typeof Reflect==="undefined"?"undefined":_typeof(Reflect))&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{r=Object.defineProperty({},"length",{get:function get(){throw i;}}),i={},a(function(){throw 42;},null,r);}catch(e){e!==i&&(a=null);}else a=null;var s=/^\s*class\b/,u=function u(e){try{var t=o.call(e);return s.test(t);}catch(e){return!1;}},c=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==_typeof(Symbol.toStringTag);e.exports=a?function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=_typeof(e))return!1;if("function"==typeof e&&!e.prototype)return!0;try{a(e,null,r);}catch(e){if(e!==i)return!1;}return!u(e);}:function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=_typeof(e))return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return function(e){try{return!u(e)&&(o.call(e),!0);}catch(e){return!1;}}(e);if(u(e))return!1;var t=c.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t;};},function(e,t,n){"use strict";var r=n(138),i=n(139),o=n(55),a=n(140);e.exports=function(e){if("number"!=typeof e||o(e)||!a(e))return!1;var t=r(e);return i(t)===t;};},function(e,t,n){"use strict";var r=n(3)("%Math.abs%");e.exports=function(e){return r(e);};},function(e,t,n){"use strict";var r=Math.floor;e.exports=function(e){return r(e);};},function(e,t,n){"use strict";var r=Number.isNaN||function(e){return e!=e;};e.exports=Number.isFinite||function(e){return"number"==typeof e&&!r(e)&&e!==1/0&&e!==-1/0;};},function(e,t,n){"use strict";var r=n(3),i=n(18),o=r("%Reflect.apply%",!0)||i("%Function.prototype.apply%");e.exports=function(e,t){var n=arguments.length>2?arguments[2]:[];return o(e,t,n);};},function(e,t,n){"use strict";var r=n(3)("%TypeError%"),i=n(143),o=n(16),a=n(8);e.exports=function(e,t,n){if("Object"!==a(e))throw new r("Assertion failed: Type(O) is not Object");if(!o(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var s=i(e,t,n);if(!s)throw new r("unable to create data property");return s;};},function(e,t,n){"use strict";var r=n(3)("%TypeError%"),i=n(51),o=n(52),a=n(144),s=n(53),u=n(148),c=n(16),l=n(54),p=n(8);e.exports=function(e,t,n){if("Object"!==p(e))throw new r("Assertion failed: Type(O) is not Object");if(!c(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var d=a(e,t),h=!d||u(e);return!(d&&(!d["[[Writable]]"]||!d["[[Configurable]]"])||!h)&&i(s,l,o,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0});};},function(e,t,n){"use strict";var r=n(3),i=n(145),o=r("%TypeError%"),a=n(18)("Object.prototype.propertyIsEnumerable"),s=n(7),u=n(49),c=n(16),l=n(146),p=n(56),d=n(8);e.exports=function(e,t){if("Object"!==d(e))throw new o("Assertion failed: O must be an Object");if(!c(t))throw new o("Assertion failed: P must be a Property Key");if(s(e,t)){if(!i){var n=u(e)&&"length"===t,r=l(e)&&"lastIndex"===t;return{"[[Configurable]]":!(n||r),"[[Enumerable]]":a(e,t),"[[Value]]":e[t],"[[Writable]]":!0};}return p(i(e,t));}};},function(e,t,n){"use strict";var r=n(3)("%Object.getOwnPropertyDescriptor%");if(r)try{r([],"length");}catch(e){r=null;}e.exports=r;},function(e,t,n){"use strict";var r=n(3)("%Symbol.match%",!0),i=n(147),o=n(57);e.exports=function(e){if(!e||"object"!=_typeof(e))return!1;if(r){var t=e[r];if(void 0!==t)return o(t);}return i(e);};},function(e,t,n){"use strict";var r,i,o,a,s=n(10)()&&"symbol"==_typeof(Symbol.toStringTag);if(s){r=Function.call.bind(Object.prototype.hasOwnProperty),i=Function.call.bind(RegExp.prototype.exec),o={};var u=function u(){throw o;};a={toString:u,valueOf:u},"symbol"==_typeof(Symbol.toPrimitive)&&(a[Symbol.toPrimitive]=u);}var c=Object.prototype.toString,l=Object.getOwnPropertyDescriptor;e.exports=s?function(e){if(!e||"object"!=_typeof(e))return!1;var t=l(e,"lastIndex");if(!(t&&r(t,"value")))return!1;try{i(e,a);}catch(e){return e===o;}}:function(e){return!(!e||"object"!=_typeof(e)&&"function"!=typeof e)&&"[object RegExp]"===c.call(e);};},function(e,t,n){"use strict";var r=n(3)("%Object%"),i=n(59),o=r.preventExtensions,a=r.isExtensible;e.exports=o?function(e){return!i(e)&&a(e);}:function(e){return!i(e);};},function(e,t,n){"use strict";var r=n(3)("%TypeError%"),i=n(16),o=n(8);e.exports=function(e,t){if("Object"!==o(e))throw new r("Assertion failed: `O` must be an Object");if(!i(t))throw new r("Assertion failed: `P` must be a Property Key");return t in e;};},function(e,t,n){"use strict";var r=n(151);e.exports=function(e){return r(e)>>>0;};},function(e,t,n){"use strict";var r=n(3),i=r("%TypeError%"),o=r("%Number%"),a=r("%RegExp%"),s=r("%parseInt%"),u=n(18),c=n(152),l=n(59),p=u("String.prototype.slice"),d=c(/^0b[01]+$/i),h=c(/^0o[0-7]+$/i),f=c(/^[-+]0x[0-9a-f]+$/i),m=c(new a("["+["","",""].join("")+"]","g")),y=["\t\n\v\f\r ","\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),g=new RegExp("(^["+y+"]+)|(["+y+"]+$)","g"),v=u("String.prototype.replace"),x=n(153);e.exports=function e(t){var n=l(t)?t:x(t,o);if("symbol"==_typeof(n))throw new i("Cannot convert a Symbol value to a number");if("string"==typeof n){if(d(n))return e(s(p(n,2),2));if(h(n))return e(s(p(n,2),8));if(m(n)||f(n))return NaN;var r=function(e){return v(e,g,"");}(n);if(r!==n)return e(r);}return o(n);};},function(e,t,n){"use strict";var r=n(3)("RegExp.prototype.test"),i=n(50);e.exports=function(e){return i(r,e);};},function(e,t,n){"use strict";var r=n(154);e.exports=function(e){return arguments.length>1?r(e,arguments[1]):r(e);};},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator),i=n(155),o=n(156),a=n(157),s=n(158),u=function u(e,t){if(null==e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');var n,r,a,s="string"===t?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<s.length;++a){if(n=e[s[a]],o(n)&&(r=n.call(e),i(r)))return r;}throw new TypeError("No default value");},c=function c(e,t){var n=e[t];if(null!=n){if(!o(n))throw new TypeError(n+" returned for property "+t+" of object "+e+" is not a function");return n;}};e.exports=function(e){if(i(e))return e;var t,n="default";if(arguments.length>1&&(arguments[1]===String?n="string":arguments[1]===Number&&(n="number")),r&&(Symbol.toPrimitive?t=c(e,Symbol.toPrimitive):s(e)&&(t=Symbol.prototype.valueOf)),void 0!==t){var o=t.call(e,n);if(i(o))return o;throw new TypeError("unable to convert exotic object to primitive");}return"default"===n&&(a(e)||s(e))&&(n="string"),u(e,"default"===n?"number":n);};},function(e,t,n){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=_typeof(e);};},function(e,t,n){"use strict";var r=Function.prototype.toString,i=/^\s*class\b/,o=function o(e){try{var t=r.call(e);return i.test(t);}catch(e){return!1;}},a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==_typeof(Symbol.toStringTag);e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=_typeof(e))return!1;if("function"==typeof e&&!e.prototype)return!0;if(s)return function(e){try{return!o(e)&&(r.call(e),!0);}catch(e){return!1;}}(e);if(o(e))return!1;var t=a.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t;};},function(e,t,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==_typeof(Symbol.toStringTag);e.exports=function(e){return"object"==_typeof(e)&&null!==e&&(o?function(e){try{return r.call(e),!0;}catch(e){return!1;}}(e):"[object Date]"===i.call(e));};},function(e,t,n){"use strict";var r=Object.prototype.toString;if(n(10)()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;e.exports=function(e){if("symbol"==_typeof(e))return!0;if("[object Symbol]"!==r.call(e))return!1;try{return function(e){return"symbol"==_typeof(e.valueOf())&&o.test(i.call(e));}(e);}catch(e){return!1;}};}else e.exports=function(e){return!1;};},function(e,t,n){"use strict";var r=n(3)("%Object%"),i=n(46);e.exports=function(e){return i(e),r(e);};},function(e,t,n){"use strict";var r=n(3),i=r("%String%"),o=r("%TypeError%");e.exports=function(e){if("symbol"==_typeof(e))throw new o("Cannot convert a Symbol value to a string");return i(e);};},function(e,t){e.exports=function(e){var t=!0,n=!0,r=!1;if("function"==typeof e){try{e.call("f",function(e,n,r){"object"!=_typeof(r)&&(t=!1);}),e.call([null],function(){"use strict";n="string"==typeof this;},"x");}catch(e){r=!0;}return!r&&t&&n;}return!1;};},function(e,t,n){"use strict";var r=n(17),i=n(60);e.exports=function(){var e=i();return r(Array.prototype,{map:e},{map:function map(){return Array.prototype.map!==e;}}),e;};},function(e,t,n){"use strict";var r=n(19),i=n(61),o=n(17);e.exports=function(){r();var e=i();return o(Promise,{any:e},{any:function any(){return Promise.any!==e;}}),e;};},function(e,t,n){var r=n(165);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(170)(r,i);r.locals&&(e.exports=r.locals);},function(e,t,n){t=e.exports=n(166)(!1);var r=n(167),i=r(n(168)),o=r(n(169));t.push([e.i,"@font-face {\n  font-family: 'Archivo Black';\n  font-style: normal;\n  font-weight: 400;\n  src: url("+i+") format('truetype');\n}\n\n@font-face {\n  font-family: 'Archivo';\n  font-style: normal;\n  font-weight: 400;\n  src: url("+o+") format('truetype');\n}\n\nhtml {\n  height: 100%;\n  overflow: hidden;\n\n  -moz-user-select: -moz-none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-touch-callout:none;\n\n  font-family: 'Archivo', sans-serif;\n}\n\nhtml, body {\n  background-color: black;\n}\n\n#ui-area {\n  left: 0px;\n  right: 0px;\n  left: max(env(safe-area-inset-left), env(safe-area-inset-right));\n  right: max(env(safe-area-inset-left), env(safe-area-inset-right));\n}\n\n\nbody {\n  padding: 0;\n  margin: 0;\n  height: 100%;\n  overflow: hidden;\n}\n\n.xr-button {\n  outline: 'none';\n  background: rgba(0,0,0,0.3);\n  color: white;\n  border-radius: 4px;\n  border: 1px solid white;\n  font-size: large;\n\n  font-family: 'Archivo', sans-serif;\n}\n\n.play-course-button {\n  outline: 'none';\n  background: rgba(0,0,0,0.3);\n  color: white;\n  border-radius: 4px;\n  border: 1px solid white;\n  font-size: large;\n\n  font-family: 'Archivo Black', sans-serif;\n  -webkit-text-stroke: 0.05em black;\n\n  width: 100%;\n}\n\n.course-title {\n  font-family: 'Archivo Black', sans-serif;\n  -webkit-text-stroke: 0.05em black;\n\n  font-size: 150%;\n}\n\n.menu-button{\n  outline: 'none';\n  background: rgba(0,0,0,0.6);\n  color: white;\n  border-radius: 4px;\n  border: 1px solid white;\n\n  font-family: 'Archivo Black', sans-serif;\n\n  font-size: 6vmin;\n  -webkit-text-stroke: 0.05em black;\n\n  margin: 10px;\n}\n\nbutton.selected {\n  background-color: #34cfff;\n  -webkit-text-stroke: 0.05em black;\n}\n\n::-webkit-scrollbar {\n  display: none;\n}\n\nhtml {\n  -ms-overflow-style: none;  /* IE and Edge */\n  scrollbar-width: none;  /* Firefox */\n}\n",""]);},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */";});return[n].concat(o).concat([i]).join("\n");}var a;return[n].join("\n");}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n;}).join("");},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0);}for(i=0;i<e.length;i++){var a=e[i];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a));}},t;};},function(e,t,n){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e);};},function(e,t,n){e.exports=n.p+"524a4cbdf53cdb9bb2742d2aa7a25c36.ttf";},function(e,t,n){e.exports=n.p+"4b36aaa8578d7858fd166b60b5b3c885.ttf";},function(e,t,n){var r,i,o={},a=(r=function r(){return window&&document&&document.all&&!window.atob;},function(){return void 0===i&&(i=r.apply(this,arguments)),i;}),s=function s(e,t){return t?t.querySelector(e):document.querySelector(e);},u=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head;}catch(e){r=null;}t[e]=r;}return t[e];};}(),c=null,l=0,p=[],d=n(171);function h(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++){i.parts[a](r.parts[a]);}for(;a<r.parts.length;a++){i.parts.push(x(r.parts[a],t));}}else{var s=[];for(a=0;a<r.parts.length;a++){s.push(x(r.parts[a],t));}o[r.id]={id:r.id,refs:1,parts:s};}}}function f(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]});}return n;}function m(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=p[p.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=_typeof(e.insertAt)||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(e.insertAt.before,n);n.insertBefore(t,i);}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1);}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc;}();r&&(e.attrs.nonce=r);}return v(t,e.attrs),m(e,t),t;}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n]);});}function x(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform["default"](e.css)))return function(){};e.css=o;}if(t.singleton){var a=l++;n=c||(c=g(t)),r=S.bind(null,n,a,!1),i=S.bind(null,n,a,!0);}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),m(e,t),t;}(t),r=_.bind(null,n,t),i=function i(){y(n),n.href&&URL.revokeObjectURL(n.href);}):(n=g(t),r=M.bind(null,n),i=function i(){y(n);});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t);}else i();};}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=(typeof document==="undefined"?"undefined":_typeof(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==_typeof(t.attrs)?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return h(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s);}e&&h(f(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++){s.parts[u]();}delete o[s.id];}}};};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n");});function S(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o);}}function M(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;){e.removeChild(e.firstChild);}e.appendChild(document.createTextNode(n));}}function _(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=d(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s);}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t;}).replace(/^'(.*)'$/,function(e,t){return t;});return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")");});};},function(e,t,n){e.exports=n.p+"73f529834348b95c5a93b6c75936684b.mp3";},function(e,t,n){e.exports=n.p+"c2839b228a2ea76d3399d8eff4923195.mp3";},function(e,t,n){e.exports=n.p+"308dc9f4e96295f2abfe68e4ed1f7e5c.mp3";},function(e,t,n){e.exports=n.p+"c205725ff528902bec977acfc9818b5e.mp3";},function(e,t,n){e.exports=n.p+"0d4f9a349dfee04933073cd2881923f9.mp3";},function(e,t,n){e.exports=n.p+"5369d3d1d51a7125ce48da9bd04572e5.mp3";},function(e,t,n){e.exports=n.p+"7ca106bd8a7a965d6c9ade86a2e0b30b.svg";},function(e,t,n){e.exports=n.p+"8d2a4e06473267462da2d8b59a9a7791.svg";},function(e,t){THREE.CannonDebugRenderer=function(e,t,n){n=n||{},this.scene=e,this.world=t,this._meshes=[],this._material=new THREE.MeshBasicMaterial({color:65280,wireframe:!0}),this._sphereGeometry=new THREE.SphereGeometry(1),this._boxGeometry=new THREE.BoxGeometry(1,1,1),this._planeGeometry=new THREE.PlaneGeometry(10,10,10,10),this._cylinderGeometry=new THREE.CylinderGeometry(1,1,10,10);},THREE.CannonDebugRenderer.prototype={tmpVec0:new CANNON.Vec3(),tmpVec1:new CANNON.Vec3(),tmpVec2:new CANNON.Vec3(),tmpQuat0:new CANNON.Vec3(),update:function update(){for(var e=this.world.bodies,t=this._meshes,n=this.tmpVec0,r=this.tmpQuat0,i=0,o=0;o!==e.length;o++){for(var a=e[o],s=0;s!==a.shapes.length;s++){var u=a.shapes[s];this._updateMesh(i,a,u),(c=t[i])&&(a.quaternion.vmult(a.shapeOffsets[s],n),a.position.vadd(n,n),a.quaternion.mult(a.shapeOrientations[s],r),c.position.copy(n),c.quaternion.copy(r)),i++;}}for(o=i;o<t.length;o++){var c;(c=t[o])&&this.scene.remove(c);}t.length=i;},_updateMesh:function _updateMesh(e,t,n){var r=this._meshes[e];this._typeMatch(r,n)||(r&&this.scene.remove(r),r=this._meshes[e]=this._createMesh(n)),this._scaleMesh(r,n);},_typeMatch:function _typeMatch(e,t){if(!e)return!1;var n=e.geometry;return n instanceof THREE.SphereGeometry&&t instanceof CANNON.Sphere||n instanceof THREE.BoxGeometry&&t instanceof CANNON.Box||n instanceof THREE.PlaneGeometry&&t instanceof CANNON.Plane||n.id===t.geometryId&&t instanceof CANNON.ConvexPolyhedron||n.id===t.geometryId&&t instanceof CANNON.Trimesh||n.id===t.geometryId&&t instanceof CANNON.Heightfield;},_createMesh:function _createMesh(e){var t,n=this._material;switch(e.type){case CANNON.Shape.types.SPHERE:t=new THREE.Mesh(this._sphereGeometry,n);break;case CANNON.Shape.types.BOX:t=new THREE.Mesh(this._boxGeometry,n);break;case CANNON.Shape.types.PLANE:t=new THREE.Mesh(this._planeGeometry,n);break;case CANNON.Shape.types.CONVEXPOLYHEDRON:for(var r=new THREE.Geometry(),i=0;i<e.vertices.length;i++){var o=e.vertices[i];r.vertices.push(new THREE.Vector3(o.x,o.y,o.z));}for(i=0;i<e.faces.length;i++){for(var a=e.faces[i],s=a[0],u=1;u<a.length-1;u++){var c=a[u],l=a[u+1];r.faces.push(new THREE.Face3(s,c,l));}}r.computeBoundingSphere(),r.computeFaceNormals(),t=new THREE.Mesh(r,n),e.geometryId=r.id;break;case CANNON.Shape.types.TRIMESH:var p=new THREE.Geometry(),d=this.tmpVec0,h=this.tmpVec1,f=this.tmpVec2;for(i=0;i<e.indices.length/3;i++){e.getTriangleVertices(i,d,h,f),p.vertices.push(new THREE.Vector3(d.x,d.y,d.z),new THREE.Vector3(h.x,h.y,h.z),new THREE.Vector3(f.x,f.y,f.z));u=p.vertices.length-3;p.faces.push(new THREE.Face3(u,u+1,u+2));}p.computeBoundingSphere(),p.computeFaceNormals(),t=new THREE.Mesh(p,n),e.geometryId=p.id;break;case CANNON.Shape.types.HEIGHTFIELD:p=new THREE.Geometry(),d=this.tmpVec0,h=this.tmpVec1,f=this.tmpVec2;for(var m=0;m<e.data.length-1;m++){for(var y=0;y<e.data[m].length-1;y++){for(var g=0;g<2;g++){e.getConvexTrianglePillar(m,y,0===g),d.copy(e.pillarConvex.vertices[0]),h.copy(e.pillarConvex.vertices[1]),f.copy(e.pillarConvex.vertices[2]),d.vadd(e.pillarOffset,d),h.vadd(e.pillarOffset,h),f.vadd(e.pillarOffset,f),p.vertices.push(new THREE.Vector3(d.x,d.y,d.z),new THREE.Vector3(h.x,h.y,h.z),new THREE.Vector3(f.x,f.y,f.z));i=p.vertices.length-3;p.faces.push(new THREE.Face3(i,i+1,i+2));}}}p.computeBoundingSphere(),p.computeFaceNormals(),t=new THREE.Mesh(p,n),e.geometryId=p.id;}return t&&this.scene.add(t),t;},_scaleMesh:function _scaleMesh(e,t){switch(t.type){case CANNON.Shape.types.SPHERE:var n=t.radius;e.scale.set(n,n,n);break;case CANNON.Shape.types.BOX:e.scale.copy(t.halfExtents),e.scale.multiplyScalar(2);break;case CANNON.Shape.types.CONVEXPOLYHEDRON:e.scale.set(1,1,1);break;case CANNON.Shape.types.TRIMESH:e.scale.copy(t.scale);break;case CANNON.Shape.types.HEIGHTFIELD:e.scale.set(1,1,1);}}};},function(e,t,n){e.exports=n.p+"f29e4d9b08900d189c4627947e82d204.svg";},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1;}function s(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e;}function u(e,t){0==--e._eventsCount?e._events=new o():delete e._events[t];}function c(){this._events=new o(),this._eventsCount=0;}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events){r.call(e,t)&&n.push(i?t.slice(1):t);}return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n;},c.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++){a[r]=n[r].fn;}return a;},c.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0;},c.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,o),!0;case 6:return l.fn.call(l.context,t,n,r,o,a),!0;}for(c=1,u=new Array(p-1);c<p;c++){u[c-1]=arguments[c];}l.fn.apply(l.context,u);}else{var d,h=l.length;for(c=0;c<h;c++){switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!u)for(d=1,u=new Array(p-1);d<p;d++){u[d-1]=arguments[d];}l[c].fn.apply(l[c].context,u);}}}return!0;},c.prototype.on=function(e,t,n){return s(this,e,t,n,!1);},c.prototype.once=function(e,t,n){return s(this,e,t,n,!0);},c.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,c=[],l=a.length;s<l;s++){(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);}c.length?this._events[o]=1===c.length?c[0]:c:u(this,o);}return this;},c.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new o(),this._eventsCount=0),this;},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c;},function(e,t,n){e.exports=n.p+"29b5ace61ee465ba6a10606c102fc482.glb";},function(e,t,n){e.exports=n.p+"b8153bbfa0a48d491e5e67e3f6282d45.glb";},function(e,t,n){e.exports=n.p+"9d25a2f82ccde736c4196af26238b682.glb";},function(e,t,n){e.exports=n.p+"5fe6ab249f3420610709833630b1d53a.png";},function(e,t,n){e.exports=n.p+"be56bfe87120e14a04daa159efd06693.svg";},function(e,t,n){e.exports=n.p+"4f7183bc12b9039c26d5a097ca8c87b2.svg";},function(e,t,n){e.exports=n.p+"750f64dfcb4fe3fc4fe225557f002cfa.svg";},function(e,t,n){e.exports=n.p+"e95af9a3e5fbbc69931e6cd97a1bdcc0.glb";},function(e,t,n){e.exports=n.p+"f2efc8b96abc75c51e268a4751891a56.svg";},function(e,t,n){e.exports=n.p+"a65986a8954e855a39f61c9e7c6cf275.glb";},function(e,t,n){e.exports=n.p+"fde6a24f298d825f33921de9dba44052.glb";},function(e,t,n){e.exports=n.p+"a0fbd351fa4343cb49c5c94bf8048bb4.glb";},function(e,t,n){e.exports=n.p+"f6173f9605878a995ce84d7301bbc71e.glb";},function(e,t,n){e.exports=n.p+"c885317cd5938a6e9619daae170dea27.glb";},function(e,t,n){e.exports=n.p+"dce2ff74564db1026e80fde9930f7362.glb";},function(e,t,n){e.exports=n.p+"b03705849b7614d6627c6113100d987d.glb";},function(e,t,n){e.exports=n.p+"7304e0793b47fdc3ce4202015fe0e515.glb";},function(e,t,n){e.exports=n.p+"7ed434096d1cc37ab90c88ed5c2b7044.glb";},function(e,t,n){e.exports=n.p+"83291130d52176d8280bee9e73066c2a.glb";},function(e,t,n){e.exports=n.p+"cf8716bab671dc8ceefe51d06ecb2f70.glb";},function(e,t,n){e.exports=n.p+"bd07c9671a5149b00c03af45cc8081dc.glb";},function(e,t,n){var _r2;e.exports=((_r2=function r(){function e(e){return i.appendChild(e.dom),e;}function t(e){for(var t=0;t<i.children.length;t++){i.children[t].style.display=t===e?"block":"none";}n=e;}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),t(++n%i.children.length);},!1);var o=(performance||Date).now(),a=o,s=0,u=e(new _r2.Panel("FPS","#0ff","#002")),c=e(new _r2.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=e(new _r2.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:i,addPanel:e,showPanel:t,begin:function begin(){o=(performance||Date).now();},end:function end(){s++;var e=(performance||Date).now();if(c.update(e-o,200),e>a+1e3&&(u.update(1e3*s/(e-a),100),a=e,s=0,l)){var t=performance.memory;l.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576);}return e;},update:function update(){o=this.end();},domElement:i,setMode:t};}).Panel=function(e,t,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,u=48*a,c=3*a,l=2*a,p=3*a,d=15*a,h=74*a,f=30*a,m=document.createElement("canvas");m.width=s,m.height=u,m.style.cssText="width:80px;height:48px";var y=m.getContext("2d");return y.font="bold "+9*a+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,s,u),y.fillStyle=t,y.fillText(e,c,l),y.fillRect(p,d,h,f),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(p,d,h,f),{dom:m,update:function update(u,g){r=Math.min(r,u),i=Math.max(i,u),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,s,d),y.fillStyle=t,y.fillText(o(u)+" "+e+" ("+o(r)+"-"+o(i)+")",c,l),y.drawImage(m,p+a,d,h-a,f,p,d,h-a,f),y.fillRect(p+h-a,d,a,f),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(p+h-a,d,a,o((1-u/g)*f));}};},_r2);},function(e,t,n){e.exports=n.p+"17b439329428c705aeaa170e31ca5272.glb";},function(e,t,n){"use strict";n.r(t),n.d(t,"config",function(){return oe;}),n.d(t,"ResultSet",function(){return Gc;}),n.d(t,"Complex",function(){return Vc;}),n.d(t,"Range",function(){return Wc;}),n.d(t,"_false",function(){return Xc;}),n.d(t,"_null",function(){return Yc;}),n.d(t,"_true",function(){return Zc;}),n.d(t,"BigNumber",function(){return $c;}),n.d(t,"Matrix",function(){return Jc;}),n.d(t,"replacer",function(){return Qc;}),n.d(t,"i",function(){return Kc;}),n.d(t,"LN10",function(){return el;}),n.d(t,"LOG10E",function(){return tl;}),n.d(t,"_NaN",function(){return nl;}),n.d(t,"pi",function(){return rl;}),n.d(t,"SQRT1_2",function(){return il;}),n.d(t,"tau",function(){return ol;}),n.d(t,"efimovFactor",function(){return al;}),n.d(t,"fineStructure",function(){return sl;}),n.d(t,"sackurTetrode",function(){return ul;}),n.d(t,"weakMixingAngle",function(){return cl;}),n.d(t,"Fraction",function(){return ll;}),n.d(t,"e",function(){return pl;}),n.d(t,"_Infinity",function(){return dl;}),n.d(t,"LOG2E",function(){return hl;}),n.d(t,"version",function(){return fl;}),n.d(t,"DenseMatrix",function(){return ml;}),n.d(t,"phi",function(){return yl;}),n.d(t,"typed",function(){return gl;}),n.d(t,"isInteger",function(){return vl;}),n.d(t,"isNumeric",function(){return xl;}),n.d(t,"isPositive",function(){return bl;}),n.d(t,"isNaN",function(){return wl;}),n.d(t,"equalScalar",function(){return Sl;}),n.d(t,"number",function(){return Ml;}),n.d(t,"boolean",function(){return _l;}),n.d(t,"complex",function(){return El;}),n.d(t,"splitUnit",function(){return Al;}),n.d(t,"unaryPlus",function(){return Tl;}),n.d(t,"apply",function(){return Nl;}),n.d(t,"cube",function(){return Dl;}),n.d(t,"expm1",function(){return Cl;}),n.d(t,"log10",function(){return Rl;}),n.d(t,"multiplyScalar",function(){return Pl;}),n.d(t,"sign",function(){return Ol;}),n.d(t,"square",function(){return Ll;}),n.d(t,"bitNot",function(){return Il;}),n.d(t,"arg",function(){return Bl;}),n.d(t,"im",function(){return Fl;}),n.d(t,"not",function(){return zl;}),n.d(t,"filter",function(){return kl;}),n.d(t,"forEach",function(){return Ul;}),n.d(t,"map",function(){return jl;}),n.d(t,"erf",function(){return Hl;}),n.d(t,"format",function(){return ql;}),n.d(t,"isPrime",function(){return Gl;}),n.d(t,"acos",function(){return Vl;}),n.d(t,"acot",function(){return Wl;}),n.d(t,"acsc",function(){return Xl;}),n.d(t,"asec",function(){return Yl;}),n.d(t,"asin",function(){return Zl;}),n.d(t,"atan",function(){return $l;}),n.d(t,"atanh",function(){return Jl;}),n.d(t,"cosh",function(){return Ql;}),n.d(t,"coth",function(){return Kl;}),n.d(t,"csch",function(){return ep;}),n.d(t,"sech",function(){return tp;}),n.d(t,"sinh",function(){return np;}),n.d(t,"tanh",function(){return rp;}),n.d(t,"combinations",function(){return ip;}),n.d(t,"pickRandom",function(){return op;}),n.d(t,"randomInt",function(){return ap;}),n.d(t,"LN2",function(){return sp;}),n.d(t,"clone",function(){return up;}),n.d(t,"hasNumericValue",function(){return cp;}),n.d(t,"typeOf",function(){return lp;}),n.d(t,"string",function(){return pp;}),n.d(t,"fraction",function(){return dp;}),n.d(t,"unaryMinus",function(){return hp;}),n.d(t,"addScalar",function(){return fp;}),n.d(t,"exp",function(){return mp;}),n.d(t,"log2",function(){return yp;}),n.d(t,"sqrt",function(){return gp;}),n.d(t,"conj",function(){return vp;}),n.d(t,"getMatrixDataType",function(){return xp;}),n.d(t,"mode",function(){return bp;}),n.d(t,"print",function(){return wp;}),n.d(t,"acosh",function(){return Sp;}),n.d(t,"acsch",function(){return Mp;}),n.d(t,"asinh",function(){return _p;}),n.d(t,"cos",function(){return Ep;}),n.d(t,"csc",function(){return Ap;}),n.d(t,"sin",function(){return Tp;}),n.d(t,"combinationsWithRep",function(){return Np;}),n.d(t,"random",function(){return Dp;}),n.d(t,"SQRT2",function(){return Cp;}),n.d(t,"isNegative",function(){return Rp;}),n.d(t,"SparseMatrix",function(){return Pp;}),n.d(t,"matrix",function(){return Op;}),n.d(t,"cbrt",function(){return Lp;}),n.d(t,"gcd",function(){return Ip;}),n.d(t,"mod",function(){return Bp;}),n.d(t,"nthRoot",function(){return Fp;}),n.d(t,"xgcd",function(){return zp;}),n.d(t,"bitAnd",function(){return kp;}),n.d(t,"bitXor",function(){return Up;}),n.d(t,"or",function(){return jp;}),n.d(t,"concat",function(){return Hp;}),n.d(t,"diag",function(){return qp;}),n.d(t,"identity",function(){return Gp;}),n.d(t,"ones",function(){return Vp;}),n.d(t,"reshape",function(){return Wp;}),n.d(t,"size",function(){return Xp;}),n.d(t,"subset",function(){return Yp;}),n.d(t,"zeros",function(){return Zp;}),n.d(t,"to",function(){return $p;}),n.d(t,"round",function(){return Jp;}),n.d(t,"leftShift",function(){return Qp;}),n.d(t,"rightLogShift",function(){return Kp;}),n.d(t,"compare",function(){return ed;}),n.d(t,"compareText",function(){return td;}),n.d(t,"smaller",function(){return nd;}),n.d(t,"larger",function(){return rd;}),n.d(t,"unequal",function(){return id;}),n.d(t,"ImmutableDenseMatrix",function(){return od;}),n.d(t,"FibonacciHeap",function(){return ad;}),n.d(t,"sparse",function(){return sd;}),n.d(t,"acoth",function(){return ud;}),n.d(t,"atan2",function(){return cd;}),n.d(t,"sec",function(){return ld;}),n.d(t,"add",function(){return pd;}),n.d(t,"dot",function(){return dd;}),n.d(t,"composition",function(){return hd;}),n.d(t,"isZero",function(){return fd;}),n.d(t,"abs",function(){return md;}),n.d(t,"floor",function(){return yd;}),n.d(t,"multiply",function(){return gd;}),n.d(t,"dotMultiply",function(){return vd;}),n.d(t,"re",function(){return xd;}),n.d(t,"flatten",function(){return bd;}),n.d(t,"resize",function(){return wd;}),n.d(t,"squeeze",function(){return Sd;}),n.d(t,"pow",function(){return Md;}),n.d(t,"dotPow",function(){return _d;}),n.d(t,"rightArithShift",function(){return Ed;}),n.d(t,"compareNatural",function(){return Ad;}),n.d(t,"equalText",function(){return Td;}),n.d(t,"largerEq",function(){return Nd;}),n.d(t,"partitionSelect",function(){return Dd;}),n.d(t,"Index",function(){return Cd;}),n.d(t,"asech",function(){return Rd;}),n.d(t,"tan",function(){return Pd;}),n.d(t,"setDifference",function(){return Od;}),n.d(t,"setIntersect",function(){return Ld;}),n.d(t,"setMultiplicity",function(){return Id;}),n.d(t,"setSize",function(){return Bd;}),n.d(t,"trace",function(){return Fd;}),n.d(t,"quantileSeq",function(){return zd;}),n.d(t,"gamma",function(){return kd;}),n.d(t,"bignumber",function(){return Ud;}),n.d(t,"lcm",function(){return jd;}),n.d(t,"bitOr",function(){return Hd;}),n.d(t,"kron",function(){return qd;}),n.d(t,"transpose",function(){return Gd;}),n.d(t,"numeric",function(){return Vd;}),n.d(t,"and",function(){return Wd;}),n.d(t,"smallerEq",function(){return Xd;}),n.d(t,"sort",function(){return Yd;}),n.d(t,"min",function(){return Zd;}),n.d(t,"cot",function(){return $d;}),n.d(t,"setDistinct",function(){return Jd;}),n.d(t,"setPowerset",function(){return Qd;}),n.d(t,"index",function(){return Kd;}),n.d(t,"sum",function(){return eh;}),n.d(t,"factorial",function(){return th;}),n.d(t,"permutations",function(){return nh;}),n.d(t,"ceil",function(){return rh;}),n.d(t,"subtract",function(){return ih;}),n.d(t,"cross",function(){return oh;}),n.d(t,"range",function(){return ah;}),n.d(t,"ctranspose",function(){return sh;}),n.d(t,"divideScalar",function(){return uh;}),n.d(t,"nthRoots",function(){return ch;}),n.d(t,"lsolve",function(){return lh;}),n.d(t,"equal",function(){return ph;}),n.d(t,"max",function(){return dh;}),n.d(t,"setCartesian",function(){return hh;}),n.d(t,"setSymDifference",function(){return fh;}),n.d(t,"hypot",function(){return mh;}),n.d(t,"qr",function(){return yh;}),n.d(t,"distance",function(){return gh;}),n.d(t,"stirlingS2",function(){return vh;}),n.d(t,"catalan",function(){return xh;}),n.d(t,"fix",function(){return bh;}),n.d(t,"column",function(){return wh;}),n.d(t,"row",function(){return Sh;}),n.d(t,"log",function(){return Mh;}),n.d(t,"dotDivide",function(){return _h;}),n.d(t,"deepEqual",function(){return Eh;}),n.d(t,"Unit",function(){return Ah;}),n.d(t,"createUnit",function(){return Th;}),n.d(t,"setUnion",function(){return Nh;}),n.d(t,"slu",function(){return Dh;}),n.d(t,"intersect",function(){return Ch;}),n.d(t,"bellNumbers",function(){return Rh;}),n.d(t,"atomicMass",function(){return Ph;}),n.d(t,"bohrMagneton",function(){return Oh;}),n.d(t,"boltzmann",function(){return Lh;}),n.d(t,"conductanceQuantum",function(){return Ih;}),n.d(t,"deuteronMass",function(){return Bh;}),n.d(t,"electronMass",function(){return Fh;}),n.d(t,"faraday",function(){return zh;}),n.d(t,"firstRadiation",function(){return kh;}),n.d(t,"gravitationConstant",function(){return Uh;}),n.d(t,"hartreeEnergy",function(){return jh;}),n.d(t,"klitzing",function(){return Hh;}),n.d(t,"magneticConstant",function(){return qh;}),n.d(t,"molarMass",function(){return Gh;}),n.d(t,"molarPlanckConstant",function(){return Vh;}),n.d(t,"neutronMass",function(){return Wh;}),n.d(t,"planckCharge",function(){return Xh;}),n.d(t,"planckLength",function(){return Yh;}),n.d(t,"planckTemperature",function(){return Zh;}),n.d(t,"protonMass",function(){return $h;}),n.d(t,"reducedPlanckConstant",function(){return Jh;}),n.d(t,"secondRadiation",function(){return Qh;}),n.d(t,"stefanBoltzmann",function(){return Kh;}),n.d(t,"vacuumImpedance",function(){return ef;}),n.d(t,"xor",function(){return tf;}),n.d(t,"prod",function(){return nf;}),n.d(t,"usolve",function(){return rf;}),n.d(t,"unit",function(){return of;}),n.d(t,"avogadro",function(){return af;}),n.d(t,"classicalElectronRadius",function(){return sf;}),n.d(t,"electricConstant",function(){return uf;}),n.d(t,"fermiCoupling",function(){return cf;}),n.d(t,"gravity",function(){return lf;}),n.d(t,"loschmidt",function(){return pf;}),n.d(t,"molarMassC12",function(){return df;}),n.d(t,"nuclearMagneton",function(){return hf;}),n.d(t,"planckMass",function(){return ff;}),n.d(t,"quantumOfCirculation",function(){return mf;}),n.d(t,"speedOfLight",function(){return yf;}),n.d(t,"wienDisplacement",function(){return gf;}),n.d(t,"diff",function(){return vf;}),n.d(t,"Spa",function(){return xf;}),n.d(t,"lup",function(){return bf;}),n.d(t,"det",function(){return wf;}),n.d(t,"bohrRadius",function(){return Sf;}),n.d(t,"elementaryCharge",function(){return Mf;}),n.d(t,"inverseConductanceQuantum",function(){return _f;}),n.d(t,"molarVolume",function(){return Ef;}),n.d(t,"planckTime",function(){return Af;}),n.d(t,"thomsonCrossSection",function(){return Tf;}),n.d(t,"log1p",function(){return Nf;}),n.d(t,"lusolve",function(){return Df;}),n.d(t,"inv",function(){return Cf;}),n.d(t,"expm",function(){return Rf;}),n.d(t,"divide",function(){return Pf;}),n.d(t,"median",function(){return Of;}),n.d(t,"variance",function(){return Lf;}),n.d(t,"kldivergence",function(){return If;}),n.d(t,"gasConstant",function(){return Bf;}),n.d(t,"planckConstant",function(){return Ff;}),n.d(t,"setIsSubset",function(){return zf;}),n.d(t,"sqrtm",function(){return kf;}),n.d(t,"mad",function(){return Uf;}),n.d(t,"multinomial",function(){return jf;}),n.d(t,"coulomb",function(){return Hf;}),n.d(t,"rydberg",function(){return qf;}),n.d(t,"mean",function(){return Gf;}),n.d(t,"eigs",function(){return Vf;}),n.d(t,"magneticFluxQuantum",function(){return Wf;}),n.d(t,"norm",function(){return Xf;}),n.d(t,"std",function(){return Yf;}),n.d(t,"Node",function(){return Dy;}),n.d(t,"ArrayNode",function(){return Cy;}),n.d(t,"BlockNode",function(){return Ry;}),n.d(t,"ConstantNode",function(){return Py;}),n.d(t,"ObjectNode",function(){return Oy;}),n.d(t,"ParenthesisNode",function(){return Ly;}),n.d(t,"RelationalNode",function(){return Iy;}),n.d(t,"Chain",function(){return By;}),n.d(t,"reviver",function(){return Fy;}),n.d(t,"ConditionalNode",function(){return zy;}),n.d(t,"OperatorNode",function(){return ky;}),n.d(t,"RangeNode",function(){return Uy;}),n.d(t,"FunctionAssignmentNode",function(){return jy;}),n.d(t,"chain",function(){return Hy;}),n.d(t,"AccessorNode",function(){return qy;}),n.d(t,"IndexNode",function(){return Gy;}),n.d(t,"AssignmentNode",function(){return Vy;}),n.d(t,"SymbolNode",function(){return Wy;}),n.d(t,"FunctionNode",function(){return Xy;}),n.d(t,"parse",function(){return Yy;}),n.d(t,"evaluate",function(){return Zy;}),n.d(t,"Help",function(){return $y;}),n.d(t,"compile",function(){return Jy;}),n.d(t,"simplify",function(){return Qy;}),n.d(t,"rationalize",function(){return Ky;}),n.d(t,"Parser",function(){return eg;}),n.d(t,"help",function(){return tg;}),n.d(t,"parser",function(){return ng;}),n.d(t,"derivative",function(){return rg;}),n.d(t,"docs",function(){return ty;}),n.d(t,"isAccessorNode",function(){return N;}),n.d(t,"isArray",function(){return d;}),n.d(t,"isArrayNode",function(){return D;}),n.d(t,"isAssignmentNode",function(){return C;}),n.d(t,"isBigNumber",function(){return s;}),n.d(t,"isBlockNode",function(){return R;}),n.d(t,"isBoolean",function(){return x;}),n.d(t,"isChain",function(){return q;}),n.d(t,"isCollection",function(){return f;}),n.d(t,"isComplex",function(){return u;}),n.d(t,"isConditionalNode",function(){return P;}),n.d(t,"isConstantNode",function(){return O;}),n.d(t,"isDate",function(){return M;}),n.d(t,"isDenseMatrix",function(){return m;}),n.d(t,"isFraction",function(){return c;}),n.d(t,"isFunction",function(){return S;}),n.d(t,"isFunctionAssignmentNode",function(){return L;}),n.d(t,"isFunctionNode",function(){return I;}),n.d(t,"isHelp",function(){return w;}),n.d(t,"isIndex",function(){return v;}),n.d(t,"isIndexNode",function(){return B;}),n.d(t,"isMatrix",function(){return h;}),n.d(t,"isNode",function(){return F;}),n.d(t,"isNull",function(){return A;}),n.d(t,"isNumber",function(){return a;}),n.d(t,"isString",function(){return p;}),n.d(t,"isUndefined",function(){return T;}),n.d(t,"isObject",function(){return E;}),n.d(t,"isObjectNode",function(){return z;}),n.d(t,"isOperatorNode",function(){return k;}),n.d(t,"isParenthesisNode",function(){return U;}),n.d(t,"isRange",function(){return g;}),n.d(t,"isRangeNode",function(){return j;}),n.d(t,"isRegExp",function(){return _;}),n.d(t,"isResultSet",function(){return b;}),n.d(t,"isSparseMatrix",function(){return y;}),n.d(t,"isSymbolNode",function(){return H;}),n.d(t,"isUnit",function(){return l;}),n.d(t,"IndexError",function(){return Be;}),n.d(t,"DimensionError",function(){return Ie;}),n.d(t,"ArgumentsError",function(){return xs;}),n.d(t,"typedDependencies",function(){return cg;}),n.d(t,"ResultSetDependencies",function(){return lg;}),n.d(t,"BigNumberDependencies",function(){return ig;}),n.d(t,"ComplexDependencies",function(){return og;}),n.d(t,"FractionDependencies",function(){return ug;}),n.d(t,"RangeDependencies",function(){return pg;}),n.d(t,"MatrixDependencies",function(){return ag;}),n.d(t,"DenseMatrixDependencies",function(){return sg;}),n.d(t,"cloneDependencies",function(){return dg;}),n.d(t,"isIntegerDependencies",function(){return hg;}),n.d(t,"isNegativeDependencies",function(){return fg;}),n.d(t,"isNumericDependencies",function(){return mg;}),n.d(t,"hasNumericValueDependencies",function(){return yg;}),n.d(t,"isPositiveDependencies",function(){return gg;}),n.d(t,"isZeroDependencies",function(){return vg;}),n.d(t,"isNaNDependencies",function(){return xg;}),n.d(t,"typeOfDependencies",function(){return bg;}),n.d(t,"equalScalarDependencies",function(){return wg;}),n.d(t,"SparseMatrixDependencies",function(){return Sg;}),n.d(t,"numberDependencies",function(){return Mg;}),n.d(t,"stringDependencies",function(){return _g;}),n.d(t,"booleanDependencies",function(){return Eg;}),n.d(t,"bignumberDependencies",function(){return Ag;}),n.d(t,"complexDependencies",function(){return Tg;}),n.d(t,"fractionDependencies",function(){return Ng;}),n.d(t,"matrixDependencies",function(){return Dg;}),n.d(t,"splitUnitDependencies",function(){return Cg;}),n.d(t,"unaryMinusDependencies",function(){return Rg;}),n.d(t,"unaryPlusDependencies",function(){return Pg;}),n.d(t,"absDependencies",function(){return Og;}),n.d(t,"applyDependencies",function(){return Lg;}),n.d(t,"addScalarDependencies",function(){return Ig;}),n.d(t,"cbrtDependencies",function(){return Bg;}),n.d(t,"ceilDependencies",function(){return kg;}),n.d(t,"cubeDependencies",function(){return Ug;}),n.d(t,"expDependencies",function(){return jg;}),n.d(t,"expm1Dependencies",function(){return Hg;}),n.d(t,"fixDependencies",function(){return Gg;}),n.d(t,"floorDependencies",function(){return qg;}),n.d(t,"gcdDependencies",function(){return Vg;}),n.d(t,"lcmDependencies",function(){return Wg;}),n.d(t,"log10Dependencies",function(){return Xg;}),n.d(t,"log2Dependencies",function(){return Yg;}),n.d(t,"modDependencies",function(){return Zg;}),n.d(t,"multiplyScalarDependencies",function(){return $g;}),n.d(t,"multiplyDependencies",function(){return ev;}),n.d(t,"nthRootDependencies",function(){return tv;}),n.d(t,"signDependencies",function(){return nv;}),n.d(t,"sqrtDependencies",function(){return rv;}),n.d(t,"squareDependencies",function(){return iv;}),n.d(t,"subtractDependencies",function(){return ov;}),n.d(t,"xgcdDependencies",function(){return av;}),n.d(t,"dotMultiplyDependencies",function(){return sv;}),n.d(t,"bitAndDependencies",function(){return uv;}),n.d(t,"bitNotDependencies",function(){return cv;}),n.d(t,"bitOrDependencies",function(){return lv;}),n.d(t,"bitXorDependencies",function(){return pv;}),n.d(t,"argDependencies",function(){return dv;}),n.d(t,"conjDependencies",function(){return Jg;}),n.d(t,"imDependencies",function(){return hv;}),n.d(t,"reDependencies",function(){return fv;}),n.d(t,"notDependencies",function(){return mv;}),n.d(t,"orDependencies",function(){return yv;}),n.d(t,"xorDependencies",function(){return gv;}),n.d(t,"concatDependencies",function(){return vv;}),n.d(t,"columnDependencies",function(){return Av;}),n.d(t,"crossDependencies",function(){return Tv;}),n.d(t,"diagDependencies",function(){return Nv;}),n.d(t,"filterDependencies",function(){return Dv;}),n.d(t,"flattenDependencies",function(){return Cv;}),n.d(t,"forEachDependencies",function(){return Rv;}),n.d(t,"getMatrixDataTypeDependencies",function(){return Pv;}),n.d(t,"identityDependencies",function(){return Ov;}),n.d(t,"kronDependencies",function(){return Lv;}),n.d(t,"mapDependencies",function(){return Iv;}),n.d(t,"diffDependencies",function(){return Bv;}),n.d(t,"onesDependencies",function(){return Fv;}),n.d(t,"rangeDependencies",function(){return Ev;}),n.d(t,"reshapeDependencies",function(){return zv;}),n.d(t,"resizeDependencies",function(){return kv;}),n.d(t,"rowDependencies",function(){return Uv;}),n.d(t,"sizeDependencies",function(){return Qg;}),n.d(t,"squeezeDependencies",function(){return jv;}),n.d(t,"subsetDependencies",function(){return Hv;}),n.d(t,"transposeDependencies",function(){return qv;}),n.d(t,"ctransposeDependencies",function(){return Gv;}),n.d(t,"zerosDependencies",function(){return Fg;}),n.d(t,"erfDependencies",function(){return Vv;}),n.d(t,"modeDependencies",function(){return Wv;}),n.d(t,"prodDependencies",function(){return Yv;}),n.d(t,"formatDependencies",function(){return Zv;}),n.d(t,"printDependencies",function(){return $v;}),n.d(t,"toDependencies",function(){return Jv;}),n.d(t,"isPrimeDependencies",function(){return Qv;}),n.d(t,"numericDependencies",function(){return Xv;}),n.d(t,"divideScalarDependencies",function(){return Kv;}),n.d(t,"powDependencies",function(){return ex;}),n.d(t,"roundDependencies",function(){return zg;}),n.d(t,"logDependencies",function(){return tx;}),n.d(t,"log1pDependencies",function(){return nx;}),n.d(t,"nthRootsDependencies",function(){return rx;}),n.d(t,"dotPowDependencies",function(){return ix;}),n.d(t,"dotDivideDependencies",function(){return ox;}),n.d(t,"lsolveDependencies",function(){return ax;}),n.d(t,"usolveDependencies",function(){return sx;}),n.d(t,"leftShiftDependencies",function(){return ux;}),n.d(t,"rightArithShiftDependencies",function(){return cx;}),n.d(t,"rightLogShiftDependencies",function(){return lx;}),n.d(t,"andDependencies",function(){return px;}),n.d(t,"compareDependencies",function(){return dx;}),n.d(t,"compareNaturalDependencies",function(){return hx;}),n.d(t,"compareTextDependencies",function(){return fx;}),n.d(t,"equalDependencies",function(){return mx;}),n.d(t,"equalTextDependencies",function(){return yx;}),n.d(t,"smallerDependencies",function(){return xv;}),n.d(t,"smallerEqDependencies",function(){return _v;}),n.d(t,"largerDependencies",function(){return Sv;}),n.d(t,"largerEqDependencies",function(){return Mv;}),n.d(t,"deepEqualDependencies",function(){return gx;}),n.d(t,"unequalDependencies",function(){return vx;}),n.d(t,"partitionSelectDependencies",function(){return xx;}),n.d(t,"sortDependencies",function(){return bx;}),n.d(t,"maxDependencies",function(){return wx;}),n.d(t,"minDependencies",function(){return Sx;}),n.d(t,"ImmutableDenseMatrixDependencies",function(){return bv;}),n.d(t,"IndexDependencies",function(){return wv;}),n.d(t,"FibonacciHeapDependencies",function(){return Mx;}),n.d(t,"SpaDependencies",function(){return _x;}),n.d(t,"UnitDependencies",function(){return Ex;}),n.d(t,"unitDependencies",function(){return Ax;}),n.d(t,"sparseDependencies",function(){return Tx;}),n.d(t,"createUnitDependencies",function(){return Nx;}),n.d(t,"acosDependencies",function(){return Dx;}),n.d(t,"acoshDependencies",function(){return Cx;}),n.d(t,"acotDependencies",function(){return Rx;}),n.d(t,"acothDependencies",function(){return Px;}),n.d(t,"acscDependencies",function(){return Ox;}),n.d(t,"acschDependencies",function(){return Lx;}),n.d(t,"asecDependencies",function(){return Ix;}),n.d(t,"asechDependencies",function(){return Bx;}),n.d(t,"asinDependencies",function(){return Fx;}),n.d(t,"asinhDependencies",function(){return zx;}),n.d(t,"atanDependencies",function(){return kx;}),n.d(t,"atan2Dependencies",function(){return Ux;}),n.d(t,"atanhDependencies",function(){return jx;}),n.d(t,"cosDependencies",function(){return Hx;}),n.d(t,"coshDependencies",function(){return qx;}),n.d(t,"cotDependencies",function(){return Gx;}),n.d(t,"cothDependencies",function(){return Vx;}),n.d(t,"cscDependencies",function(){return Wx;}),n.d(t,"cschDependencies",function(){return Xx;}),n.d(t,"secDependencies",function(){return Yx;}),n.d(t,"sechDependencies",function(){return Zx;}),n.d(t,"sinDependencies",function(){return $x;}),n.d(t,"sinhDependencies",function(){return Jx;}),n.d(t,"tanDependencies",function(){return Qx;}),n.d(t,"tanhDependencies",function(){return Kx;}),n.d(t,"setCartesianDependencies",function(){return eb;}),n.d(t,"setDifferenceDependencies",function(){return tb;}),n.d(t,"setDistinctDependencies",function(){return nb;}),n.d(t,"setIntersectDependencies",function(){return rb;}),n.d(t,"setIsSubsetDependencies",function(){return ib;}),n.d(t,"setMultiplicityDependencies",function(){return ob;}),n.d(t,"setPowersetDependencies",function(){return ab;}),n.d(t,"setSizeDependencies",function(){return sb;}),n.d(t,"setSymDifferenceDependencies",function(){return ub;}),n.d(t,"setUnionDependencies",function(){return cb;}),n.d(t,"addDependencies",function(){return lb;}),n.d(t,"hypotDependencies",function(){return pb;}),n.d(t,"normDependencies",function(){return yb;}),n.d(t,"dotDependencies",function(){return Kg;}),n.d(t,"traceDependencies",function(){return gb;}),n.d(t,"indexDependencies",function(){return vb;}),n.d(t,"NodeDependencies",function(){return xb;}),n.d(t,"AccessorNodeDependencies",function(){return bb;}),n.d(t,"ArrayNodeDependencies",function(){return wb;}),n.d(t,"AssignmentNodeDependencies",function(){return Sb;}),n.d(t,"BlockNodeDependencies",function(){return Mb;}),n.d(t,"ConditionalNodeDependencies",function(){return _b;}),n.d(t,"ConstantNodeDependencies",function(){return Eb;}),n.d(t,"FunctionAssignmentNodeDependencies",function(){return Ab;}),n.d(t,"IndexNodeDependencies",function(){return Tb;}),n.d(t,"ObjectNodeDependencies",function(){return Nb;}),n.d(t,"OperatorNodeDependencies",function(){return Db;}),n.d(t,"ParenthesisNodeDependencies",function(){return Cb;}),n.d(t,"RangeNodeDependencies",function(){return Rb;}),n.d(t,"RelationalNodeDependencies",function(){return Pb;}),n.d(t,"SymbolNodeDependencies",function(){return Ob;}),n.d(t,"FunctionNodeDependencies",function(){return Lb;}),n.d(t,"parseDependencies",function(){return Ib;}),n.d(t,"compileDependencies",function(){return Bb;}),n.d(t,"evaluateDependencies",function(){return Fb;}),n.d(t,"ParserDependencies",function(){return zb;}),n.d(t,"parserDependencies",function(){return kb;}),n.d(t,"lupDependencies",function(){return db;}),n.d(t,"qrDependencies",function(){return Ub;}),n.d(t,"sluDependencies",function(){return jb;}),n.d(t,"lusolveDependencies",function(){return Hb;}),n.d(t,"HelpDependencies",function(){return qb;}),n.d(t,"ChainDependencies",function(){return Gb;}),n.d(t,"helpDependencies",function(){return Vb;}),n.d(t,"chainDependencies",function(){return Wb;}),n.d(t,"detDependencies",function(){return hb;}),n.d(t,"invDependencies",function(){return fb;}),n.d(t,"eigsDependencies",function(){return mb;}),n.d(t,"expmDependencies",function(){return Xb;}),n.d(t,"sqrtmDependencies",function(){return Yb;}),n.d(t,"divideDependencies",function(){return Zb;}),n.d(t,"distanceDependencies",function(){return $b;}),n.d(t,"intersectDependencies",function(){return Jb;}),n.d(t,"sumDependencies",function(){return Qb;}),n.d(t,"meanDependencies",function(){return Kb;}),n.d(t,"medianDependencies",function(){return ew;}),n.d(t,"madDependencies",function(){return tw;}),n.d(t,"varianceDependencies",function(){return nw;}),n.d(t,"quantileSeqDependencies",function(){return rw;}),n.d(t,"stdDependencies",function(){return iw;}),n.d(t,"combinationsDependencies",function(){return ow;}),n.d(t,"combinationsWithRepDependencies",function(){return aw;}),n.d(t,"gammaDependencies",function(){return sw;}),n.d(t,"factorialDependencies",function(){return uw;}),n.d(t,"kldivergenceDependencies",function(){return cw;}),n.d(t,"multinomialDependencies",function(){return lw;}),n.d(t,"permutationsDependencies",function(){return pw;}),n.d(t,"pickRandomDependencies",function(){return dw;}),n.d(t,"randomDependencies",function(){return hw;}),n.d(t,"randomIntDependencies",function(){return fw;}),n.d(t,"stirlingS2Dependencies",function(){return mw;}),n.d(t,"bellNumbersDependencies",function(){return yw;}),n.d(t,"catalanDependencies",function(){return gw;}),n.d(t,"compositionDependencies",function(){return vw;}),n.d(t,"simplifyDependencies",function(){return xw;}),n.d(t,"derivativeDependencies",function(){return bw;}),n.d(t,"rationalizeDependencies",function(){return ww;}),n.d(t,"reviverDependencies",function(){return Sw;}),n.d(t,"replacerDependencies",function(){return Mw;}),n.d(t,"eDependencies",function(){return _w;}),n.d(t,"EDependencies",function(){return Ew;}),n.d(t,"falseDependencies",function(){return Aw;}),n.d(t,"iDependencies",function(){return Tw;}),n.d(t,"InfinityDependencies",function(){return Nw;}),n.d(t,"LN10Dependencies",function(){return Dw;}),n.d(t,"LN2Dependencies",function(){return Cw;}),n.d(t,"LOG10EDependencies",function(){return Rw;}),n.d(t,"LOG2EDependencies",function(){return Pw;}),n.d(t,"NaNDependencies",function(){return Ow;}),n.d(t,"nullDependencies",function(){return Lw;}),n.d(t,"phiDependencies",function(){return Iw;}),n.d(t,"piDependencies",function(){return Bw;}),n.d(t,"PIDependencies",function(){return Fw;}),n.d(t,"SQRT1_2Dependencies",function(){return zw;}),n.d(t,"SQRT2Dependencies",function(){return kw;}),n.d(t,"tauDependencies",function(){return Uw;}),n.d(t,"trueDependencies",function(){return jw;}),n.d(t,"versionDependencies",function(){return Hw;}),n.d(t,"atomicMassDependencies",function(){return qw;}),n.d(t,"avogadroDependencies",function(){return Gw;}),n.d(t,"bohrMagnetonDependencies",function(){return Vw;}),n.d(t,"bohrRadiusDependencies",function(){return Ww;}),n.d(t,"boltzmannDependencies",function(){return Xw;}),n.d(t,"classicalElectronRadiusDependencies",function(){return Yw;}),n.d(t,"conductanceQuantumDependencies",function(){return Zw;}),n.d(t,"coulombDependencies",function(){return $w;}),n.d(t,"deuteronMassDependencies",function(){return Jw;}),n.d(t,"efimovFactorDependencies",function(){return Qw;}),n.d(t,"electricConstantDependencies",function(){return Kw;}),n.d(t,"electronMassDependencies",function(){return eS;}),n.d(t,"elementaryChargeDependencies",function(){return tS;}),n.d(t,"faradayDependencies",function(){return nS;}),n.d(t,"fermiCouplingDependencies",function(){return rS;}),n.d(t,"fineStructureDependencies",function(){return iS;}),n.d(t,"firstRadiationDependencies",function(){return oS;}),n.d(t,"gasConstantDependencies",function(){return aS;}),n.d(t,"gravitationConstantDependencies",function(){return sS;}),n.d(t,"gravityDependencies",function(){return uS;}),n.d(t,"hartreeEnergyDependencies",function(){return cS;}),n.d(t,"inverseConductanceQuantumDependencies",function(){return lS;}),n.d(t,"klitzingDependencies",function(){return pS;}),n.d(t,"loschmidtDependencies",function(){return dS;}),n.d(t,"magneticConstantDependencies",function(){return hS;}),n.d(t,"magneticFluxQuantumDependencies",function(){return fS;}),n.d(t,"molarMassDependencies",function(){return mS;}),n.d(t,"molarMassC12Dependencies",function(){return yS;}),n.d(t,"molarPlanckConstantDependencies",function(){return gS;}),n.d(t,"molarVolumeDependencies",function(){return vS;}),n.d(t,"neutronMassDependencies",function(){return xS;}),n.d(t,"nuclearMagnetonDependencies",function(){return bS;}),n.d(t,"planckChargeDependencies",function(){return wS;}),n.d(t,"planckConstantDependencies",function(){return SS;}),n.d(t,"planckLengthDependencies",function(){return MS;}),n.d(t,"planckMassDependencies",function(){return _S;}),n.d(t,"planckTemperatureDependencies",function(){return ES;}),n.d(t,"planckTimeDependencies",function(){return AS;}),n.d(t,"protonMassDependencies",function(){return TS;}),n.d(t,"quantumOfCirculationDependencies",function(){return NS;}),n.d(t,"reducedPlanckConstantDependencies",function(){return DS;}),n.d(t,"rydbergDependencies",function(){return CS;}),n.d(t,"sackurTetrodeDependencies",function(){return RS;}),n.d(t,"secondRadiationDependencies",function(){return PS;}),n.d(t,"speedOfLightDependencies",function(){return OS;}),n.d(t,"stefanBoltzmannDependencies",function(){return LS;}),n.d(t,"thomsonCrossSectionDependencies",function(){return IS;}),n.d(t,"vacuumImpedanceDependencies",function(){return BS;}),n.d(t,"weakMixingAngleDependencies",function(){return FS;}),n.d(t,"wienDisplacementDependencies",function(){return zS;}),n.d(t,"applyTransformDependencies",function(){return kS;}),n.d(t,"columnTransformDependencies",function(){return US;}),n.d(t,"filterTransformDependencies",function(){return jS;}),n.d(t,"forEachTransformDependencies",function(){return HS;}),n.d(t,"indexTransformDependencies",function(){return qS;}),n.d(t,"mapTransformDependencies",function(){return GS;}),n.d(t,"maxTransformDependencies",function(){return VS;}),n.d(t,"meanTransformDependencies",function(){return WS;}),n.d(t,"minTransformDependencies",function(){return XS;}),n.d(t,"rangeTransformDependencies",function(){return YS;}),n.d(t,"rowTransformDependencies",function(){return ZS;}),n.d(t,"subsetTransformDependencies",function(){return $S;}),n.d(t,"concatTransformDependencies",function(){return JS;}),n.d(t,"diffTransformDependencies",function(){return QS;}),n.d(t,"stdTransformDependencies",function(){return KS;}),n.d(t,"sumTransformDependencies",function(){return eM;}),n.d(t,"varianceTransformDependencies",function(){return tM;}),n.d(t,"all",function(){return nM;}),n.d(t,"createTyped",function(){return Jn;}),n.d(t,"createResultSet",function(){return rt;}),n.d(t,"createBigNumberClass",function(){return Ht;}),n.d(t,"createComplexClass",function(){return st;}),n.d(t,"createFractionClass",function(){return Wn;}),n.d(t,"createRangeClass",function(){return ut;}),n.d(t,"createMatrixClass",function(){return qt;}),n.d(t,"createDenseMatrixClass",function(){return Xn;}),n.d(t,"createClone",function(){return _o;}),n.d(t,"createIsInteger",function(){return sr;}),n.d(t,"createIsNegative",function(){return Yo;}),n.d(t,"createIsNumeric",function(){return ur;}),n.d(t,"createHasNumericValue",function(){return Eo;}),n.d(t,"createIsPositive",function(){return hr;}),n.d(t,"createIsZero",function(){return ds;}),n.d(t,"createIsNaN",function(){return fr;}),n.d(t,"createTypeOf",function(){return Ao;}),n.d(t,"createEqualScalar",function(){return yr;}),n.d(t,"createSparseMatrixClass",function(){return Zo;}),n.d(t,"createNumber",function(){return gr;}),n.d(t,"createString",function(){return To;}),n.d(t,"createBoolean",function(){return vr;}),n.d(t,"createBignumber",function(){return Gs;}),n.d(t,"createComplex",function(){return xr;}),n.d(t,"createFraction",function(){return No;}),n.d(t,"createMatrix",function(){return $o;}),n.d(t,"createSplitUnit",function(){return br;}),n.d(t,"createUnaryMinus",function(){return Do;}),n.d(t,"createUnaryPlus",function(){return Gr;}),n.d(t,"createAbs",function(){return hs;}),n.d(t,"createApply",function(){return Vr;}),n.d(t,"createAddScalar",function(){return Co;}),n.d(t,"createCbrt",function(){return Jo;}),n.d(t,"createCeil",function(){return cu;}),n.d(t,"createCube",function(){return Xr;}),n.d(t,"createExp",function(){return Ro;}),n.d(t,"createExpm1",function(){return Yr;}),n.d(t,"createFix",function(){return Du;}),n.d(t,"createFloor",function(){return fs;}),n.d(t,"createGcd",function(){return ra;}),n.d(t,"createLcm",function(){return Vs;}),n.d(t,"createLog10",function(){return Zr;}),n.d(t,"createLog2",function(){return Po;}),n.d(t,"createMod",function(){return ca;}),n.d(t,"createMultiplyScalar",function(){return $r;}),n.d(t,"createMultiply",function(){return ms;}),n.d(t,"createNthRoot",function(){return pa;}),n.d(t,"createSign",function(){return Jr;}),n.d(t,"createSqrt",function(){return Oo;}),n.d(t,"createSquare",function(){return Qr;}),n.d(t,"createSubtract",function(){return lu;}),n.d(t,"createXgcd",function(){return da;}),n.d(t,"createDotMultiply",function(){return ys;}),n.d(t,"createBitAnd",function(){return ha;}),n.d(t,"createBitNot",function(){return mi;}),n.d(t,"createBitOr",function(){return Ws;}),n.d(t,"createBitXor",function(){return ma;}),n.d(t,"createArg",function(){return yi;}),n.d(t,"createConj",function(){return Lo;}),n.d(t,"createIm",function(){return gi;}),n.d(t,"createRe",function(){return gs;}),n.d(t,"createNot",function(){return Si;}),n.d(t,"createOr",function(){return ya;}),n.d(t,"createXor",function(){return ic;}),n.d(t,"createConcat",function(){return ga;}),n.d(t,"createColumn",function(){return Cu;}),n.d(t,"createCross",function(){return du;}),n.d(t,"createDiag",function(){return xa;}),n.d(t,"createFilter",function(){return Mi;}),n.d(t,"createFlatten",function(){return vs;}),n.d(t,"createForEach",function(){return Ei;}),n.d(t,"createGetMatrixDataType",function(){return Io;}),n.d(t,"createIdentity",function(){return ba;}),n.d(t,"createKron",function(){return Xs;}),n.d(t,"createMap",function(){return Ti;}),n.d(t,"createDiff",function(){return uc;}),n.d(t,"createOnes",function(){return wa;}),n.d(t,"createRange",function(){return hu;}),n.d(t,"createReshape",function(){return Sa;}),n.d(t,"createResize",function(){return bs;}),n.d(t,"createRow",function(){return Ru;}),n.d(t,"createSize",function(){return Aa;}),n.d(t,"createSqueeze",function(){return ws;}),n.d(t,"createSubset",function(){return Ia;}),n.d(t,"createTranspose",function(){return Ys;}),n.d(t,"createCtranspose",function(){return fu;}),n.d(t,"createZeros",function(){return Ua;}),n.d(t,"createErf",function(){return Di;}),n.d(t,"createMode",function(){return Bo;}),n.d(t,"createProd",function(){return oc;}),n.d(t,"createFormat",function(){return Ii;}),n.d(t,"createPrint",function(){return Fo;}),n.d(t,"createTo",function(){return ja;}),n.d(t,"createIsPrime",function(){return Bi;}),n.d(t,"createNumeric",function(){return Zs;}),n.d(t,"createDivideScalar",function(){return mu;}),n.d(t,"createPow",function(){return Ss;}),n.d(t,"createRound",function(){return Wa;}),n.d(t,"createLog",function(){return Pu;}),n.d(t,"createLog1p",function(){return dc;}),n.d(t,"createNthRoots",function(){return yu;}),n.d(t,"createDotPow",function(){return Ms;}),n.d(t,"createDotDivide",function(){return Ou;}),n.d(t,"createLsolve",function(){return vu;}),n.d(t,"createUsolve",function(){return ac;}),n.d(t,"createLeftShift",function(){return Za;}),n.d(t,"createRightArithShift",function(){return _s;}),n.d(t,"createRightLogShift",function(){return $a;}),n.d(t,"createAnd",function(){return $s;}),n.d(t,"createCompare",function(){return Ja;}),n.d(t,"createCompareNatural",function(){return Ts;}),n.d(t,"createCompareText",function(){return Qa;}),n.d(t,"createEqual",function(){return xu;}),n.d(t,"createEqualText",function(){return Ns;}),n.d(t,"createSmaller",function(){return Ka;}),n.d(t,"createSmallerEq",function(){return Js;}),n.d(t,"createLarger",function(){return es;}),n.d(t,"createLargerEq",function(){return Ds;}),n.d(t,"createDeepEqual",function(){return Lu;}),n.d(t,"createUnequal",function(){return ts;}),n.d(t,"createPartitionSelect",function(){return Cs;}),n.d(t,"createSort",function(){return Qs;}),n.d(t,"createMax",function(){return bu;}),n.d(t,"createMin",function(){return eu;}),n.d(t,"createImmutableDenseMatrixClass",function(){return ns;}),n.d(t,"createIndexClass",function(){return Rs;}),n.d(t,"createFibonacciHeapClass",function(){return rs;}),n.d(t,"createSpaClass",function(){return cc;}),n.d(t,"createUnitClass",function(){return Uu;}),n.d(t,"createUnitFunction",function(){return sc;});n.d(t,"createSparse",function(){return is;}),n.d(t,"createCreateUnit",function(){return ju;}),n.d(t,"createAcos",function(){return Fi;}),n.d(t,"createAcosh",function(){return ko;}),n.d(t,"createAcot",function(){return eo;}),n.d(t,"createAcoth",function(){return os;}),n.d(t,"createAcsc",function(){return to;}),n.d(t,"createAcsch",function(){return Uo;}),n.d(t,"createAsec",function(){return no;}),n.d(t,"createAsech",function(){return Ps;}),n.d(t,"createAsin",function(){return ro;}),n.d(t,"createAsinh",function(){return jo;}),n.d(t,"createAtan",function(){return io;}),n.d(t,"createAtan2",function(){return ss;}),n.d(t,"createAtanh",function(){return oo;}),n.d(t,"createCos",function(){return Ho;}),n.d(t,"createCosh",function(){return ao;}),n.d(t,"createCot",function(){return tu;}),n.d(t,"createCoth",function(){return so;}),n.d(t,"createCsc",function(){return qo;}),n.d(t,"createCsch",function(){return uo;}),n.d(t,"createSec",function(){return us;}),n.d(t,"createSech",function(){return co;}),n.d(t,"createSin",function(){return Go;}),n.d(t,"createSinh",function(){return lo;}),n.d(t,"createTan",function(){return Os;}),n.d(t,"createTanh",function(){return po;}),n.d(t,"createSetCartesian",function(){return wu;}),n.d(t,"createSetDifference",function(){return Ls;}),n.d(t,"createSetDistinct",function(){return nu;}),n.d(t,"createSetIntersect",function(){return Is;}),n.d(t,"createSetIsSubset",function(){return Dc;}),n.d(t,"createSetMultiplicity",function(){return Bs;}),n.d(t,"createSetPowerset",function(){return ru;}),n.d(t,"createSetSize",function(){return Fs;}),n.d(t,"createSetSymDifference",function(){return Su;}),n.d(t,"createSetUnion",function(){return Hu;}),n.d(t,"createAdd",function(){return cs;}),n.d(t,"createHypot",function(){return Mu;}),n.d(t,"createNorm",function(){return jc;}),n.d(t,"createDot",function(){return ls;}),n.d(t,"createTrace",function(){return zs;}),n.d(t,"createIndex",function(){return iu;}),n.d(t,"createNode",function(){return Jf;}),n.d(t,"createAccessorNode",function(){return Tm;}),n.d(t,"createArrayNode",function(){return Qf;}),n.d(t,"createAssignmentNode",function(){return Pm;}),n.d(t,"createBlockNode",function(){return Kf;}),n.d(t,"createConditionalNode",function(){return xm;}),n.d(t,"createConstantNode",function(){return um;}),n.d(t,"createFunctionAssignmentNode",function(){return Sm;}),n.d(t,"createIndexNode",function(){return Cm;}),n.d(t,"createObjectNode",function(){return lm;}),n.d(t,"createOperatorNode",function(){return bm;}),n.d(t,"createParenthesisNode",function(){return pm;}),n.d(t,"createRangeNode",function(){return wm;}),n.d(t,"createRelationalNode",function(){return ym;}),n.d(t,"createSymbolNode",function(){return Om;}),n.d(t,"createFunctionNode",function(){return Bm;}),n.d(t,"createParse",function(){return zm;}),n.d(t,"createCompile",function(){return jm;}),n.d(t,"createEvaluate",function(){return km;}),n.d(t,"createParserClass",function(){return Qm;}),n.d(t,"createParser",function(){return ry;}),n.d(t,"createLup",function(){return lc;}),n.d(t,"createQr",function(){return Eu;}),n.d(t,"createSlu",function(){return tc;}),n.d(t,"createLusolve",function(){return mc;}),n.d(t,"createHelpClass",function(){return Um;}),n.d(t,"createChainClass",function(){return gm;}),n.d(t,"createHelp",function(){return ny;}),n.d(t,"createChain",function(){return Mm;}),n.d(t,"createDet",function(){return pc;}),n.d(t,"createInv",function(){return gc;}),n.d(t,"createEigs",function(){return kc;}),n.d(t,"createExpm",function(){return xc;}),n.d(t,"createSqrtm",function(){return Rc;}),n.d(t,"createDivide",function(){return wc;}),n.d(t,"createDistance",function(){return Au;}),n.d(t,"createIntersect",function(){return nc;}),n.d(t,"createSum",function(){return ou;}),n.d(t,"createMean",function(){return Fc;}),n.d(t,"createMedian",function(){return Mc;}),n.d(t,"createMad",function(){return Oc;}),n.d(t,"createVariance",function(){return Ec;}),n.d(t,"createQuantileSeq",function(){return ks;}),n.d(t,"createStd",function(){return qc;}),n.d(t,"createCombinations",function(){return mo;}),n.d(t,"createCombinationsWithRep",function(){return Vo;}),n.d(t,"createGamma",function(){return qs;}),n.d(t,"createFactorial",function(){return au;}),n.d(t,"createKldivergence",function(){return Tc;}),n.d(t,"createMultinomial",function(){return Ic;}),n.d(t,"createPermutations",function(){return su;}),n.d(t,"createPickRandom",function(){return wo;}),n.d(t,"createRandom",function(){return Xo;}),n.d(t,"createRandomInt",function(){return Mo;}),n.d(t,"createStirlingS2",function(){return Tu;}),n.d(t,"createBellNumbers",function(){return rc;}),n.d(t,"createCatalan",function(){return Nu;}),n.d(t,"createComposition",function(){return ps;}),n.d(t,"createSimplify",function(){return Ym;}),n.d(t,"createDerivative",function(){return iy;}),n.d(t,"createRationalize",function(){return $m;}),n.d(t,"createReviver",function(){return vm;}),n.d(t,"createReplacer",function(){return Gt;}),n.d(t,"createE",function(){return Tt;}),n.d(t,"createUppercaseE",function(){return Ft;}),n.d(t,"createFalse",function(){return wt;}),n.d(t,"createI",function(){return It;}),n.d(t,"createInfinity",function(){return Mt;}),n.d(t,"createLN10",function(){return Ct;}),n.d(t,"createLN2",function(){return Dt;}),n.d(t,"createLOG10E",function(){return Pt;}),n.d(t,"createLOG2E",function(){return Rt;}),n.d(t,"createNaN",function(){return _t;}),n.d(t,"createNull",function(){return St;}),n.d(t,"createPhi",function(){return Nt;}),n.d(t,"createPi",function(){return Et;}),n.d(t,"createUppercasePi",function(){return Bt;}),n.d(t,"createSQRT1_2",function(){return Ot;}),n.d(t,"createSQRT2",function(){return Lt;}),n.d(t,"createTau",function(){return At;}),n.d(t,"createTrue",function(){return bt;}),n.d(t,"createVersion",function(){return zt;}),n.d(t,"createAtomicMass",function(){return wn;}),n.d(t,"createAvogadro",function(){return Sn;}),n.d(t,"createBohrMagneton",function(){return en;}),n.d(t,"createBohrRadius",function(){return sn;}),n.d(t,"createBoltzmann",function(){return Mn;}),n.d(t,"createClassicalElectronRadius",function(){return un;}),n.d(t,"createConductanceQuantum",function(){return tn;}),n.d(t,"createCoulomb",function(){return Qt;}),n.d(t,"createDeuteronMass",function(){return fn;}),n.d(t,"createEfimovFactor",function(){return bn;}),n.d(t,"createElectricConstant",function(){return $t;}),n.d(t,"createElectronMass",function(){return cn;}),n.d(t,"createElementaryCharge",function(){return Kt;}),n.d(t,"createFaraday",function(){return _n;}),n.d(t,"createFermiCoupling",function(){return ln;}),n.d(t,"createFineStructure",function(){return pn;}),n.d(t,"createFirstRadiation",function(){return En;}),n.d(t,"createGasConstant",function(){return Tn;}),n.d(t,"createGravitationConstant",function(){return Wt;}),n.d(t,"createGravity",function(){return Bn;}),n.d(t,"createHartreeEnergy",function(){return dn;}),n.d(t,"createInverseConductanceQuantum",function(){return nn;}),n.d(t,"createKlitzing",function(){return an;}),n.d(t,"createLoschmidt",function(){return An;}),n.d(t,"createMagneticConstant",function(){return Zt;}),n.d(t,"createMagneticFluxQuantum",function(){return rn;}),n.d(t,"createMolarMass",function(){return Ln;}),n.d(t,"createMolarMassC12",function(){return In;}),n.d(t,"createMolarPlanckConstant",function(){return Nn;}),n.d(t,"createMolarVolume",function(){return Dn;}),n.d(t,"createNeutronMass",function(){return mn;}),n.d(t,"createNuclearMagneton",function(){return on;}),n.d(t,"createPlanckCharge",function(){return Un;}),n.d(t,"createPlanckConstant",function(){return Xt;}),n.d(t,"createPlanckLength",function(){return Fn;}),n.d(t,"createPlanckMass",function(){return zn;}),n.d(t,"createPlanckTemperature",function(){return jn;}),n.d(t,"createPlanckTime",function(){return kn;}),n.d(t,"createProtonMass",function(){return hn;}),n.d(t,"createQuantumOfCirculation",function(){return yn;}),n.d(t,"createReducedPlanckConstant",function(){return Yt;}),n.d(t,"createRydberg",function(){return gn;}),n.d(t,"createSackurTetrode",function(){return Cn;}),n.d(t,"createSecondRadiation",function(){return Rn;}),n.d(t,"createSpeedOfLight",function(){return Vt;}),n.d(t,"createStefanBoltzmann",function(){return Pn;}),n.d(t,"createThomsonCrossSection",function(){return vn;}),n.d(t,"createVacuumImpedance",function(){return Jt;}),n.d(t,"createWeakMixingAngle",function(){return xn;}),n.d(t,"createWienDisplacement",function(){return On;}),n.d(t,"createApplyTransform",function(){return oy;}),n.d(t,"createColumnTransform",function(){return vy;}),n.d(t,"createFilterTransform",function(){return sy;}),n.d(t,"createForEachTransform",function(){return py;}),n.d(t,"createIndexTransform",function(){return hy;}),n.d(t,"createMapTransform",function(){return cy;}),n.d(t,"createMaxTransform",function(){return my;}),n.d(t,"createMeanTransform",function(){return Sy;}),n.d(t,"createMinTransform",function(){return yy;}),n.d(t,"createRangeTransform",function(){return xy;}),n.d(t,"createRowTransform",function(){return wy;}),n.d(t,"createSubsetTransform",function(){return dy;}),n.d(t,"createConcatTransform",function(){return fy;}),n.d(t,"createDiffTransform",function(){return by;}),n.d(t,"createStdTransform",function(){return _y;}),n.d(t,"createSumTransform",function(){return gy;}),n.d(t,"createVarianceTransform",function(){return My;}),n.d(t,"create",function(){return uM;}),n.d(t,"factory",function(){return et;});var r={};n.r(r),n.d(r,"createTyped",function(){return Jn;}),n.d(r,"createResultSet",function(){return rt;}),n.d(r,"createBigNumberClass",function(){return Ht;}),n.d(r,"createComplexClass",function(){return st;}),n.d(r,"createFractionClass",function(){return Wn;}),n.d(r,"createRangeClass",function(){return ut;}),n.d(r,"createMatrixClass",function(){return qt;}),n.d(r,"createDenseMatrixClass",function(){return Xn;}),n.d(r,"createClone",function(){return _o;}),n.d(r,"createIsInteger",function(){return sr;}),n.d(r,"createIsNegative",function(){return Yo;}),n.d(r,"createIsNumeric",function(){return ur;}),n.d(r,"createHasNumericValue",function(){return Eo;}),n.d(r,"createIsPositive",function(){return hr;}),n.d(r,"createIsZero",function(){return ds;}),n.d(r,"createIsNaN",function(){return fr;}),n.d(r,"createTypeOf",function(){return Ao;}),n.d(r,"createEqualScalar",function(){return yr;}),n.d(r,"createSparseMatrixClass",function(){return Zo;}),n.d(r,"createNumber",function(){return gr;}),n.d(r,"createString",function(){return To;}),n.d(r,"createBoolean",function(){return vr;}),n.d(r,"createBignumber",function(){return Gs;}),n.d(r,"createComplex",function(){return xr;}),n.d(r,"createFraction",function(){return No;}),n.d(r,"createMatrix",function(){return $o;}),n.d(r,"createSplitUnit",function(){return br;}),n.d(r,"createUnaryMinus",function(){return Do;}),n.d(r,"createUnaryPlus",function(){return Gr;}),n.d(r,"createAbs",function(){return hs;}),n.d(r,"createApply",function(){return Vr;}),n.d(r,"createAddScalar",function(){return Co;}),n.d(r,"createCbrt",function(){return Jo;}),n.d(r,"createCeil",function(){return cu;}),n.d(r,"createCube",function(){return Xr;}),n.d(r,"createExp",function(){return Ro;}),n.d(r,"createExpm1",function(){return Yr;}),n.d(r,"createFix",function(){return Du;}),n.d(r,"createFloor",function(){return fs;}),n.d(r,"createGcd",function(){return ra;}),n.d(r,"createLcm",function(){return Vs;}),n.d(r,"createLog10",function(){return Zr;}),n.d(r,"createLog2",function(){return Po;}),n.d(r,"createMod",function(){return ca;}),n.d(r,"createMultiplyScalar",function(){return $r;}),n.d(r,"createMultiply",function(){return ms;}),n.d(r,"createNthRoot",function(){return pa;}),n.d(r,"createSign",function(){return Jr;}),n.d(r,"createSqrt",function(){return Oo;}),n.d(r,"createSquare",function(){return Qr;}),n.d(r,"createSubtract",function(){return lu;}),n.d(r,"createXgcd",function(){return da;}),n.d(r,"createDotMultiply",function(){return ys;}),n.d(r,"createBitAnd",function(){return ha;}),n.d(r,"createBitNot",function(){return mi;}),n.d(r,"createBitOr",function(){return Ws;}),n.d(r,"createBitXor",function(){return ma;}),n.d(r,"createArg",function(){return yi;}),n.d(r,"createConj",function(){return Lo;}),n.d(r,"createIm",function(){return gi;}),n.d(r,"createRe",function(){return gs;}),n.d(r,"createNot",function(){return Si;}),n.d(r,"createOr",function(){return ya;}),n.d(r,"createXor",function(){return ic;}),n.d(r,"createConcat",function(){return ga;}),n.d(r,"createColumn",function(){return Cu;}),n.d(r,"createCross",function(){return du;}),n.d(r,"createDiag",function(){return xa;}),n.d(r,"createFilter",function(){return Mi;}),n.d(r,"createFlatten",function(){return vs;}),n.d(r,"createForEach",function(){return Ei;}),n.d(r,"createGetMatrixDataType",function(){return Io;}),n.d(r,"createIdentity",function(){return ba;}),n.d(r,"createKron",function(){return Xs;}),n.d(r,"createMap",function(){return Ti;}),n.d(r,"createDiff",function(){return uc;}),n.d(r,"createOnes",function(){return wa;}),n.d(r,"createRange",function(){return hu;}),n.d(r,"createReshape",function(){return Sa;}),n.d(r,"createResize",function(){return bs;}),n.d(r,"createRow",function(){return Ru;}),n.d(r,"createSize",function(){return Aa;}),n.d(r,"createSqueeze",function(){return ws;}),n.d(r,"createSubset",function(){return Ia;}),n.d(r,"createTranspose",function(){return Ys;}),n.d(r,"createCtranspose",function(){return fu;}),n.d(r,"createZeros",function(){return Ua;}),n.d(r,"createErf",function(){return Di;}),n.d(r,"createMode",function(){return Bo;}),n.d(r,"createProd",function(){return oc;}),n.d(r,"createFormat",function(){return Ii;}),n.d(r,"createPrint",function(){return Fo;}),n.d(r,"createTo",function(){return ja;}),n.d(r,"createIsPrime",function(){return Bi;}),n.d(r,"createNumeric",function(){return Zs;}),n.d(r,"createDivideScalar",function(){return mu;}),n.d(r,"createPow",function(){return Ss;}),n.d(r,"createRound",function(){return Wa;}),n.d(r,"createLog",function(){return Pu;}),n.d(r,"createLog1p",function(){return dc;}),n.d(r,"createNthRoots",function(){return yu;}),n.d(r,"createDotPow",function(){return Ms;}),n.d(r,"createDotDivide",function(){return Ou;}),n.d(r,"createLsolve",function(){return vu;}),n.d(r,"createUsolve",function(){return ac;}),n.d(r,"createLeftShift",function(){return Za;}),n.d(r,"createRightArithShift",function(){return _s;}),n.d(r,"createRightLogShift",function(){return $a;}),n.d(r,"createAnd",function(){return $s;}),n.d(r,"createCompare",function(){return Ja;}),n.d(r,"createCompareNatural",function(){return Ts;}),n.d(r,"createCompareText",function(){return Qa;}),n.d(r,"createEqual",function(){return xu;}),n.d(r,"createEqualText",function(){return Ns;}),n.d(r,"createSmaller",function(){return Ka;}),n.d(r,"createSmallerEq",function(){return Js;}),n.d(r,"createLarger",function(){return es;}),n.d(r,"createLargerEq",function(){return Ds;}),n.d(r,"createDeepEqual",function(){return Lu;}),n.d(r,"createUnequal",function(){return ts;}),n.d(r,"createPartitionSelect",function(){return Cs;}),n.d(r,"createSort",function(){return Qs;}),n.d(r,"createMax",function(){return bu;}),n.d(r,"createMin",function(){return eu;}),n.d(r,"createImmutableDenseMatrixClass",function(){return ns;}),n.d(r,"createIndexClass",function(){return Rs;}),n.d(r,"createFibonacciHeapClass",function(){return rs;}),n.d(r,"createSpaClass",function(){return cc;}),n.d(r,"createUnitClass",function(){return Uu;}),n.d(r,"createUnitFunction",function(){return sc;}),n.d(r,"createSparse",function(){return is;}),n.d(r,"createCreateUnit",function(){return ju;}),n.d(r,"createAcos",function(){return Fi;}),n.d(r,"createAcosh",function(){return ko;}),n.d(r,"createAcot",function(){return eo;}),n.d(r,"createAcoth",function(){return os;}),n.d(r,"createAcsc",function(){return to;}),n.d(r,"createAcsch",function(){return Uo;}),n.d(r,"createAsec",function(){return no;}),n.d(r,"createAsech",function(){return Ps;}),n.d(r,"createAsin",function(){return ro;}),n.d(r,"createAsinh",function(){return jo;}),n.d(r,"createAtan",function(){return io;}),n.d(r,"createAtan2",function(){return ss;}),n.d(r,"createAtanh",function(){return oo;}),n.d(r,"createCos",function(){return Ho;}),n.d(r,"createCosh",function(){return ao;}),n.d(r,"createCot",function(){return tu;}),n.d(r,"createCoth",function(){return so;}),n.d(r,"createCsc",function(){return qo;}),n.d(r,"createCsch",function(){return uo;}),n.d(r,"createSec",function(){return us;}),n.d(r,"createSech",function(){return co;}),n.d(r,"createSin",function(){return Go;}),n.d(r,"createSinh",function(){return lo;}),n.d(r,"createTan",function(){return Os;}),n.d(r,"createTanh",function(){return po;}),n.d(r,"createSetCartesian",function(){return wu;}),n.d(r,"createSetDifference",function(){return Ls;}),n.d(r,"createSetDistinct",function(){return nu;}),n.d(r,"createSetIntersect",function(){return Is;}),n.d(r,"createSetIsSubset",function(){return Dc;}),n.d(r,"createSetMultiplicity",function(){return Bs;}),n.d(r,"createSetPowerset",function(){return ru;}),n.d(r,"createSetSize",function(){return Fs;}),n.d(r,"createSetSymDifference",function(){return Su;}),n.d(r,"createSetUnion",function(){return Hu;}),n.d(r,"createAdd",function(){return cs;}),n.d(r,"createHypot",function(){return Mu;}),n.d(r,"createNorm",function(){return jc;}),n.d(r,"createDot",function(){return ls;}),n.d(r,"createTrace",function(){return zs;}),n.d(r,"createIndex",function(){return iu;}),n.d(r,"createNode",function(){return Jf;}),n.d(r,"createAccessorNode",function(){return Tm;}),n.d(r,"createArrayNode",function(){return Qf;}),n.d(r,"createAssignmentNode",function(){return Pm;}),n.d(r,"createBlockNode",function(){return Kf;}),n.d(r,"createConditionalNode",function(){return xm;}),n.d(r,"createConstantNode",function(){return um;}),n.d(r,"createFunctionAssignmentNode",function(){return Sm;}),n.d(r,"createIndexNode",function(){return Cm;}),n.d(r,"createObjectNode",function(){return lm;}),n.d(r,"createOperatorNode",function(){return bm;}),n.d(r,"createParenthesisNode",function(){return pm;}),n.d(r,"createRangeNode",function(){return wm;}),n.d(r,"createRelationalNode",function(){return ym;}),n.d(r,"createSymbolNode",function(){return Om;}),n.d(r,"createFunctionNode",function(){return Bm;}),n.d(r,"createParse",function(){return zm;}),n.d(r,"createCompile",function(){return jm;}),n.d(r,"createEvaluate",function(){return km;}),n.d(r,"createParserClass",function(){return Qm;}),n.d(r,"createParser",function(){return ry;}),n.d(r,"createLup",function(){return lc;}),n.d(r,"createQr",function(){return Eu;}),n.d(r,"createSlu",function(){return tc;}),n.d(r,"createLusolve",function(){return mc;}),n.d(r,"createHelpClass",function(){return Um;}),n.d(r,"createChainClass",function(){return gm;}),n.d(r,"createHelp",function(){return ny;}),n.d(r,"createChain",function(){return Mm;}),n.d(r,"createDet",function(){return pc;}),n.d(r,"createInv",function(){return gc;}),n.d(r,"createEigs",function(){return kc;}),n.d(r,"createExpm",function(){return xc;}),n.d(r,"createSqrtm",function(){return Rc;}),n.d(r,"createDivide",function(){return wc;}),n.d(r,"createDistance",function(){return Au;}),n.d(r,"createIntersect",function(){return nc;}),n.d(r,"createSum",function(){return ou;}),n.d(r,"createMean",function(){return Fc;}),n.d(r,"createMedian",function(){return Mc;}),n.d(r,"createMad",function(){return Oc;}),n.d(r,"createVariance",function(){return Ec;}),n.d(r,"createQuantileSeq",function(){return ks;}),n.d(r,"createStd",function(){return qc;}),n.d(r,"createCombinations",function(){return mo;}),n.d(r,"createCombinationsWithRep",function(){return Vo;}),n.d(r,"createGamma",function(){return qs;}),n.d(r,"createFactorial",function(){return au;}),n.d(r,"createKldivergence",function(){return Tc;}),n.d(r,"createMultinomial",function(){return Ic;}),n.d(r,"createPermutations",function(){return su;}),n.d(r,"createPickRandom",function(){return wo;}),n.d(r,"createRandom",function(){return Xo;}),n.d(r,"createRandomInt",function(){return Mo;}),n.d(r,"createStirlingS2",function(){return Tu;}),n.d(r,"createBellNumbers",function(){return rc;}),n.d(r,"createCatalan",function(){return Nu;}),n.d(r,"createComposition",function(){return ps;}),n.d(r,"createSimplify",function(){return Ym;}),n.d(r,"createDerivative",function(){return iy;}),n.d(r,"createRationalize",function(){return $m;}),n.d(r,"createReviver",function(){return vm;}),n.d(r,"createReplacer",function(){return Gt;}),n.d(r,"createE",function(){return Tt;}),n.d(r,"createUppercaseE",function(){return Ft;}),n.d(r,"createFalse",function(){return wt;}),n.d(r,"createI",function(){return It;}),n.d(r,"createInfinity",function(){return Mt;}),n.d(r,"createLN10",function(){return Ct;}),n.d(r,"createLN2",function(){return Dt;}),n.d(r,"createLOG10E",function(){return Pt;}),n.d(r,"createLOG2E",function(){return Rt;}),n.d(r,"createNaN",function(){return _t;}),n.d(r,"createNull",function(){return St;}),n.d(r,"createPhi",function(){return Nt;}),n.d(r,"createPi",function(){return Et;}),n.d(r,"createUppercasePi",function(){return Bt;}),n.d(r,"createSQRT1_2",function(){return Ot;}),n.d(r,"createSQRT2",function(){return Lt;}),n.d(r,"createTau",function(){return At;}),n.d(r,"createTrue",function(){return bt;}),n.d(r,"createVersion",function(){return zt;}),n.d(r,"createAtomicMass",function(){return wn;}),n.d(r,"createAvogadro",function(){return Sn;}),n.d(r,"createBohrMagneton",function(){return en;}),n.d(r,"createBohrRadius",function(){return sn;}),n.d(r,"createBoltzmann",function(){return Mn;}),n.d(r,"createClassicalElectronRadius",function(){return un;}),n.d(r,"createConductanceQuantum",function(){return tn;}),n.d(r,"createCoulomb",function(){return Qt;}),n.d(r,"createDeuteronMass",function(){return fn;}),n.d(r,"createEfimovFactor",function(){return bn;}),n.d(r,"createElectricConstant",function(){return $t;}),n.d(r,"createElectronMass",function(){return cn;}),n.d(r,"createElementaryCharge",function(){return Kt;}),n.d(r,"createFaraday",function(){return _n;}),n.d(r,"createFermiCoupling",function(){return ln;}),n.d(r,"createFineStructure",function(){return pn;}),n.d(r,"createFirstRadiation",function(){return En;}),n.d(r,"createGasConstant",function(){return Tn;}),n.d(r,"createGravitationConstant",function(){return Wt;}),n.d(r,"createGravity",function(){return Bn;}),n.d(r,"createHartreeEnergy",function(){return dn;}),n.d(r,"createInverseConductanceQuantum",function(){return nn;}),n.d(r,"createKlitzing",function(){return an;}),n.d(r,"createLoschmidt",function(){return An;}),n.d(r,"createMagneticConstant",function(){return Zt;}),n.d(r,"createMagneticFluxQuantum",function(){return rn;}),n.d(r,"createMolarMass",function(){return Ln;}),n.d(r,"createMolarMassC12",function(){return In;}),n.d(r,"createMolarPlanckConstant",function(){return Nn;}),n.d(r,"createMolarVolume",function(){return Dn;}),n.d(r,"createNeutronMass",function(){return mn;}),n.d(r,"createNuclearMagneton",function(){return on;}),n.d(r,"createPlanckCharge",function(){return Un;}),n.d(r,"createPlanckConstant",function(){return Xt;}),n.d(r,"createPlanckLength",function(){return Fn;}),n.d(r,"createPlanckMass",function(){return zn;}),n.d(r,"createPlanckTemperature",function(){return jn;}),n.d(r,"createPlanckTime",function(){return kn;}),n.d(r,"createProtonMass",function(){return hn;}),n.d(r,"createQuantumOfCirculation",function(){return yn;}),n.d(r,"createReducedPlanckConstant",function(){return Yt;}),n.d(r,"createRydberg",function(){return gn;}),n.d(r,"createSackurTetrode",function(){return Cn;}),n.d(r,"createSecondRadiation",function(){return Rn;}),n.d(r,"createSpeedOfLight",function(){return Vt;}),n.d(r,"createStefanBoltzmann",function(){return Pn;}),n.d(r,"createThomsonCrossSection",function(){return vn;}),n.d(r,"createVacuumImpedance",function(){return Jt;}),n.d(r,"createWeakMixingAngle",function(){return xn;}),n.d(r,"createWienDisplacement",function(){return On;}),n.d(r,"createApplyTransform",function(){return oy;}),n.d(r,"createColumnTransform",function(){return vy;}),n.d(r,"createFilterTransform",function(){return sy;}),n.d(r,"createForEachTransform",function(){return py;}),n.d(r,"createIndexTransform",function(){return hy;}),n.d(r,"createMapTransform",function(){return cy;}),n.d(r,"createMaxTransform",function(){return my;}),n.d(r,"createMeanTransform",function(){return Sy;}),n.d(r,"createMinTransform",function(){return yy;}),n.d(r,"createRangeTransform",function(){return xy;}),n.d(r,"createRowTransform",function(){return wy;}),n.d(r,"createSubsetTransform",function(){return dy;}),n.d(r,"createConcatTransform",function(){return fy;}),n.d(r,"createDiffTransform",function(){return by;}),n.d(r,"createStdTransform",function(){return _y;}),n.d(r,"createSumTransform",function(){return gy;}),n.d(r,"createVarianceTransform",function(){return My;});var i={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function o(e){return(o="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function a(e){return"number"==typeof e;}function s(e){return e&&!0===e.constructor.prototype.isBigNumber||!1;}function u(e){return e&&"object"===o(e)&&!0===Object.getPrototypeOf(e).isComplex||!1;}function c(e){return e&&"object"===o(e)&&!0===Object.getPrototypeOf(e).isFraction||!1;}function l(e){return e&&!0===e.constructor.prototype.isUnit||!1;}function p(e){return"string"==typeof e;}var d=Array.isArray;function h(e){return e&&!0===e.constructor.prototype.isMatrix||!1;}function f(e){return Array.isArray(e)||h(e);}function m(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1;}function y(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1;}function g(e){return e&&!0===e.constructor.prototype.isRange||!1;}function v(e){return e&&!0===e.constructor.prototype.isIndex||!1;}function x(e){return"boolean"==typeof e;}function b(e){return e&&!0===e.constructor.prototype.isResultSet||!1;}function w(e){return e&&!0===e.constructor.prototype.isHelp||!1;}function S(e){return"function"==typeof e;}function M(e){return e instanceof Date;}function _(e){return e instanceof RegExp;}function E(e){return!(!e||"object"!==o(e)||e.constructor!==Object||u(e)||c(e));}function A(e){return null===e;}function T(e){return void 0===e;}function N(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1;}function D(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1;}function C(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1;}function R(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1;}function P(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1;}function O(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1;}function L(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1;}function I(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1;}function B(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1;}function F(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1;}function z(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1;}function k(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1;}function U(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1;}function j(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1;}function H(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1;}function q(e){return e&&!0===e.constructor.prototype.isChain||!1;}function G(e){var t=o(e);return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":s(e)?"BigNumber":u(e)?"Complex":c(e)?"Fraction":h(e)?"Matrix":l(e)?"Unit":v(e)?"Index":g(e)?"Range":b(e)?"ResultSet":F(e)?e.type:q(e)?"Chain":w(e)?"Help":"Object":"function"===t?"Function":t;}function V(e){return(V="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function W(e){var t=V(e);if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map(function(e){return W(e);});if(e instanceof Date)return new Date(e.valueOf());if(s(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return X(e,W);}function X(e,t){var n={};for(var r in e){Q(e,r)&&(n[r]=t(e[r]));}return n;}function Y(e,t){for(var n in t){Q(t,n)&&(e[n]=t[n]);}return e;}function Z(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++){if(!Z(e[r],t[r]))return!1;}return!0;}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e){if(!(n in t)||!Z(e[n],t[n]))return!1;}for(n in t){if(!(n in e)||!Z(e[n],t[n]))return!1;}return!0;}return e===t;}function $(e){var t={};return function e(t,n){for(var r in t){if(Q(t,r)){var i=t[r];"object"===V(i)&&null!==i?e(i,n):n[r]=i;}}}(e,t),t;}function J(e,t,n){var r,i=!0;Object.defineProperty(e,t,{get:function get(){return i&&(r=n(),i=!1),r;},set:function set(e){r=e,i=!1;},configurable:!0,enumerable:!0});}function Q(e,t){return e&&Object.hasOwnProperty.call(e,t);}function K(e){return Object.keys(e).map(function(t){return e[t];});}var ee=["Matrix","Array"],te=["number","BigNumber","Fraction"];function ne(e,t){function n(n){if(n){var r=X(e,W);re(n,"matrix",ee),re(n,"number",te),function e(t,n){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n){if(Q(n,r))if(n[r]&&n[r].constructor===Object)void 0===t[r]&&(t[r]={}),t[r]&&t[r].constructor===Object?e(t[r],n[r]):t[r]=n[r];else{if(Array.isArray(n[r]))throw new TypeError("Arrays are not supported by deepExtend");t[r]=n[r];}}return t;}(e,n);var i=X(e,W),o=X(n,W);return t("config",i,r,o),i;}return X(e,W);}return n.MATRIX_OPTIONS=ee,n.NUMBER_OPTIONS=te,Object.keys(i).forEach(function(t){Object.defineProperty(n,t,{get:function get(){return e[t];},enumerable:!0,configurable:!0});}),n;}function re(e,t,n){var r,i;void 0!==e[t]&&(r=n,i=e[t],-1===r.indexOf(i))&&console.warn('Warning: Unknown value "'+e[t]+'" for configuration option "'+t+'". Available options: '+n.map(function(e){return JSON.stringify(e);}).join(", ")+".");}function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}}return e;}).apply(this,arguments);}var oe=function oe(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(i);};function ae(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e);}ie(oe,i,{MATRIX_OPTIONS:ee,NUMBER_OPTIONS:te});var se=Math.sign||function(e){return e>0?1:e<0?-1:0;},ue=Math.log2||function(e){return Math.log(e)/Math.LN2;},ce=Math.log10||function(e){return Math.log(e)/Math.LN10;},le=Math.log1p||function(e){return Math.log(e+1);},pe=Math.cbrt||function(e){if(0===e)return e;var t,n=e<0;return n&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,n?-t:t;},de=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6;};function he(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var n,r="auto";switch(t&&(t.notation&&(r=t.notation),a(t)?n=t:a(t.precision)&&(n=t.precision)),r){case"fixed":return me(e,n);case"exponential":return ye(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=ge(fe(e),t),r=n.exponent,i=n.coefficients,o=r%3==0?r:r<0?r-3-r%3:r-r%3;if(a(t))for(;t>i.length||r-o+1>i.length;){i.push(0);}else for(var s=Math.abs(r-o)-(i.length-1),u=0;u<s;u++){i.push(0);}var c=Math.abs(r-o),l=1;for(;c>0;){l++,c--;}var p=i.slice(l).join(""),d=a(t)&&p.length||p.match(/[1-9]/)?"."+p:"",h=i.slice(0,l).join("")+d+"e"+(r>=0?"+":"")+o.toString();return n.sign+h;}(e,n);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=n&&void 0!==n.lowerExp?n.lowerExp:-3,i=n&&void 0!==n.upperExp?n.upperExp:5,o=fe(e),a=t?ge(o,t):o;if(a.exponent<r||a.exponent>=i)return ye(e,t);var s=a.coefficients,u=a.exponent;s.length<t&&(s=s.concat(ve(t-s.length))),s=s.concat(ve(u-s.length+1+(s.length<t?t-s.length:0))),s=ve(-u).concat(s);var c=u>0?u:0;return c<s.length-1&&s.splice(c+1,0,"."),a.sign+s.join("");}(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t;});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".');}}function fe(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var a=r.replace(".","").replace(/^0*/,function(e){return i-=e.length,"";}).replace(/0*$/,"").split("").map(function(e){return parseInt(e);});return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i};}function me(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=fe(e),r="number"==typeof t?ge(n,n.exponent+1+t):n,i=r.coefficients,o=r.exponent+1,a=o+(t||0);return i.length<a&&(i=i.concat(ve(a-i.length))),o<0&&(i=ve(1-o).concat(i),o=1),o<i.length&&i.splice(o,0,0===o?"0.":"."),r.sign+i.join("");}function ye(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=fe(e),r=t?ge(n,t):n,i=r.coefficients,o=r.exponent;i.length<t&&(i=i.concat(ve(t-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o;}function ge(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;){r.unshift(0),n.exponent++,t++;}if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];){r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++;}}return n;}function ve(e){for(var t=[],n=0;n<e;n++){t.push(0);}return t;}var xe=Number.EPSILON||2220446049250313e-31;function be(e,t,n){if(null==n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var r=Math.abs(e-t);return r<xe||r<=Math.max(Math.abs(e),Math.abs(t))*n;}return!1;}var we=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e);},Se=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e);},Me=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2;},_e=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2;},Ee=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2;},Ae=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1);};function Te(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n,r="auto";switch(void 0!==t&&(t.notation&&(r=t.notation),"number"==typeof t?n=t:t.precision&&(n=t.precision)),r){case"fixed":return function(e,t){return e.toFixed(t);}(e,n);case"exponential":return Ne(e,n);case"engineering":return function(e,t){var n=e.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),o=i.toPrecision(t);-1!==o.indexOf("e")&&(o=i.toString());return o+"e"+(n>=0?"+":"")+r.toString();}(e,n);case"auto":var i=t&&void 0!==t.lowerExp?t.lowerExp:-3,o=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var a=e.toSignificantDigits(n),s=a.e;return(s>=i&&s<o?a.toFixed():Ne(e,n)).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t;});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".');}}function Ne(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential();}function De(e){return(De="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function Ce(e,t){var n=e.length-t.length,r=e.length;return e.substring(n,r)===t;}function Re(e,t){return"number"==typeof e?he(e,t):s(e)?Te(e,t):function(e){return e&&"object"===De(e)&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1;}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?function e(t,n){if(Array.isArray(t)){for(var r="[",i=t.length,o=0;o<i;o++){0!==o&&(r+=", "),r+=e(t[o],n);}return r+="]";}return Re(t,n);}(e,t):p(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"===De(e)?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map(function(n){return'"'+n+'": '+Re(e[n],t);}).join(", ")+"}":String(e);}function Pe(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);"\\"===i?(n+=i,r++,""!==(i=t.charAt(r))&&-1!=='"\\/bfnrtu'.indexOf(i)||(n+="\\"),n+=i):n+='"'===i?'\\"':i,r++;}return'"'+n+'"';}function Oe(e){var t=String(e);return t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}function Le(e,t){if(!p(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+G(e)+", index: 0)");if(!p(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+G(t)+", index: 1)");return e===t?0:e>t?1:-1;}function Ie(e,t,n){if(!(this instanceof Ie))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack;}function Be(e,t,n){if(!(this instanceof Be))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack;}function Fe(e){for(var t=[];Array.isArray(e);){t.push(e.length),e=e[0];}return t;}function ze(e,t){if(0===t.length){if(Array.isArray(e))throw new Ie(e.length,0);}else!function e(t,n,r){var i,o=t.length;if(o!==n[r])throw new Ie(o,n[r]);if(r<n.length-1){var a=r+1;for(i=0;i<o;i++){var s=t[i];if(!Array.isArray(s))throw new Ie(n.length-1,n.length,"<");e(t[i],n,a);}}else for(i=0;i<o;i++){if(Array.isArray(t[i]))throw new Ie(n.length+1,n.length,">");}}(e,t,0);}function ke(e,t){if(!a(e)||!ae(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new Be(e,t);}function Ue(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach(function(e){if(!a(e)||!ae(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Re(t)+")");}),function e(t,n,r,i){var o,a,s=t.length,u=n[r],c=Math.min(s,u);if(t.length=u,r<n.length-1){var l=r+1;for(o=0;o<c;o++){a=t[o],Array.isArray(a)||(a=[a],t[o]=a),e(a,n,l,i);}for(o=c;o<u;o++){a=[],t[o]=a,e(a,n,l,i);}}else{for(o=0;o<c;o++){for(;Array.isArray(t[o]);){t[o]=t[o][0];}}for(o=c;o<u;o++){t[o]=i;}}}(e,t,0,void 0!==n?n:0),e;}function je(e,t){var n,r=Ge(e);function i(e){return e.reduce(function(e,t){return e*t;});}if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Ie(0,i(Fe(e)),"!=");for(var o=1,a=0;a<t.length;a++){o*=t[a];}if(r.length!==o)throw new Ie(i(t),i(Fe(e)),"!=");try{n=function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var o=t[i];n=[];for(var a=r.length/o,s=0;s<a;s++){n.push(r.slice(s*o,(s+1)*o));}r=n;}return r;}(r,t);}catch(n){if(n instanceof Ie)throw new Ie(i(t),i(Fe(e)),"!=");throw n;}return n;}function He(e,t){for(var n=t||Fe(e);Array.isArray(e)&&1===e.length;){e=e[0],n.shift();}for(var r=n.length;1===n[r-1];){r--;}return r<n.length&&(e=function e(t,n,r){var i,o;if(r<n){var a=r+1;for(i=0,o=t.length;i<o;i++){t[i]=e(t[i],n,a);}}else for(;Array.isArray(t);){t=t[0];}return t;}(e,r,0),n.length=r),e;}function qe(e,t,n,r){var i=r||Fe(e);if(n)for(var o=0;o<n;o++){e=[e],i.unshift(1);}for(e=function e(t,n,r){var i,o;if(Array.isArray(t)){var a=r+1;for(i=0,o=t.length;i<o;i++){t[i]=e(t[i],n,a);}}else for(var s=r;s<n;s++){t=[t];}return t;}(e,t,0);i.length<t;){i.push(1);}return e;}function Ge(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function e(n){Array.isArray(n)?n.forEach(e):t.push(n);}),t;}function Ve(e,t){return Array.prototype.map.call(e,t);}function We(e,t){Array.prototype.forEach.call(e,t);}function Xe(e,t){if(1!==Fe(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t);}function Ye(e,t){if(1!==Fe(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,function(e){return t.test(e);});}function Ze(e,t){return Array.prototype.join.call(e,t);}function $e(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;var t=[],n=0;t[0]={value:e[0],identifier:0};for(var r=1;r<e.length;r++){e[r]===e[r-1]?n++:n=0,t.push({value:e[r],identifier:n});}return t;}function Je(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;for(var t=[],n=0;n<e.length;n++){t.push(e[n].value);}return t;}function Qe(e,t){for(var n,r=0,i=0;i<e.length;i++){var o=e[i],a=Array.isArray(o);if(0===i&&a&&(r=o.length),a&&o.length!==r)return;var s=a?Qe(o,t):t(o);if(void 0===n)n=s;else if(n!==s)return"mixed";}return n;}function Ke(e,t){return-1!==e.indexOf(t);}function et(e,t,n,r){function i(r){var i=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],o=e[i];void 0!==o&&(n[i]=o);}return n;}(r,t.map(nt));return function(e,t,n){if(!t.filter(function(e){return!function(e){return e&&"?"===e[0];}(e);}).every(function(e){return void 0!==n[e];})){var r=t.filter(function(e){return void 0===n[e];});throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(r.map(function(e){return'"'.concat(e,'"');}).join(", "),"."));}}(e,t,r),n(i);}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i;}function tt(e){return"function"==typeof e&&"string"==typeof e.fn&&Array.isArray(e.dependencies);}function nt(e){return e&&"?"===e[0]?e.slice(1):e;}Ie.prototype=new RangeError(),Ie.prototype.constructor=RangeError,Ie.prototype.name="DimensionError",Ie.prototype.isDimensionError=!0,Be.prototype=new RangeError(),Be.prototype.constructor=RangeError,Be.prototype.name="IndexError",Be.prototype.isIndexError=!0;var rt=et("ResultSet",[],function(){function e(t){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[];}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries;},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]";},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries};},e.fromJSON=function(t){return new e(t.entries);},e;},{isClass:!0}),it=n(6),ot=n.n(it);function at(e){return(at="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}var st=et("Complex",[],function(){return ot.a.prototype.type="Complex",ot.a.prototype.isComplex=!0,ot.a.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im};},ot.a.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()};},ot.a.prototype.format=function(e){var t=this.im,n=this.re,r=he(this.re,e),i=he(this.im,e),o=a(e)?e:e?e.precision:null;if(null!==o){var s=Math.pow(10,-o);Math.abs(n/t)<s&&(n=0),Math.abs(t/n)<s&&(t=0);}return 0===t?r:0===n?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?r+" - i":r+" - "+i.substring(1)+"i":1===t?r+" + i":r+" + "+i+"i";},ot.a.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"===at(t))return ot()(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(a(n)){if(l(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),a(r))return new ot.a({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.");}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar");}},ot.a.prototype.valueOf=ot.a.prototype.toString,ot.a.fromJSON=function(e){return new ot.a(e);},ot.a.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0;},ot.a;},{isClass:!0}),ut=et("Range",[],function(){function e(t,n,r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");var i=null!=t,o=null!=n,a=null!=r;if(i)if(s(t))t=t.toNumber();else if("number"!=typeof t)throw new TypeError("Parameter start must be a number");if(o)if(s(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(a)if(s(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=i?parseFloat(t):0,this.end=o?parseFloat(n):0,this.step=a?parseFloat(r):1;}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if("string"!=typeof t)return null;var n=t.split(":").map(function(e){return parseFloat(e);});if(n.some(function(e){return isNaN(e);}))return null;switch(n.length){case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[2],n[1]);default:return null;}},e.prototype.clone=function(){return new e(this.start,this.end,this.step);},e.prototype.size=function(){var e=0,t=this.start,n=this.step,r=this.end-t;return se(n)===se(r)?e=Math.ceil(r/n):0===r&&(e=0),isNaN(e)&&(e=0),[e];},e.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0;},e.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0;},e.prototype.forEach=function(e){var t=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;t<r;){e(t,[i],this),t+=n,i++;}else if(n<0)for(;t>r;){e(t,[i],this),t+=n,i++;}},e.prototype.map=function(e){var t=[];return this.forEach(function(n,r,i){t[r[0]]=e(n,r,i);}),t;},e.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t;}),e;},e.prototype.valueOf=function(){return this.toArray();},e.prototype.format=function(e){var t=he(this.start,e);return 1!==this.step&&(t+=":"+he(this.step,e)),t+=":"+he(this.end,e);},e.prototype.toString=function(){return this.format();},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step};},e.fromJSON=function(t){return new e(t.start,t.end,t.step);},e;},{isClass:!0});function ct(e){return(ct="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function lt(e,t){return function n(){"object"!==ct(n.cache)&&(n.cache={});for(var r=[],i=0;i<arguments.length;i++){r[i]=arguments[i];}var o=t?t(r):JSON.stringify(r);return o in n.cache||(n.cache[o]=e.apply(e,r)),n.cache[o];};}function pt(e){return Object.keys(e.signatures||{}).reduce(function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n);},-1);}var dt=lt(function(e){return new e(1).exp();},yt),ht=lt(function(e){return new e(1).plus(new e(5).sqrt()).div(2);},yt),ft=lt(function(e){return e.acos(-1);},yt),mt=lt(function(e){return ft(e).times(2);},yt);function yt(e){return e[0].precision;}var gt=Math.PI,vt=2*Math.PI,xt=Math.E,bt=et("true",[],function(){return!0;}),wt=et("false",[],function(){return!1;}),St=et("null",[],function(){return null;}),Mt=kt("Infinity",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?new n(1/0):1/0;}),_t=kt("NaN",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?new n(NaN):NaN;}),Et=kt("pi",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?ft(n):gt;}),At=kt("tau",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?mt(n):vt;}),Tt=kt("e",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?dt(n):xt;}),Nt=kt("phi",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?ht(n):1.618033988749895;}),Dt=kt("LN2",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?new n(2).ln():Math.LN2;}),Ct=kt("LN10",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?new n(10).ln():Math.LN10;}),Rt=kt("LOG2E",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?new n(1).div(new n(2).ln()):Math.LOG2E;}),Pt=kt("LOG10E",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?new n(1).div(new n(10).ln()):Math.LOG10E;}),Ot=kt("SQRT1_2",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?new n("0.5").sqrt():Math.SQRT1_2;}),Lt=kt("SQRT2",["config","?BigNumber"],function(e){var t=e.config,n=e.BigNumber;return"BigNumber"===t.number?new n(2).sqrt():Math.SQRT2;}),It=kt("i",["Complex"],function(e){return e.Complex.I;}),Bt=et("PI",["pi"],function(e){return e.pi;}),Ft=et("E",["e"],function(e){return e.e;}),zt=et("version",[],function(){return"7.2.0";});function kt(e,t,n){return et(e,t,n,{recreateOnConfigChange:!0});}var Ut=n(65),jt=n.n(Ut),Ht=et("BigNumber",["?on","config"],function(e){var t=e.on,n=e.config,r=jt.a.clone({precision:n.precision});return r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()};},r.fromJSON=function(e){return new r(e.value);},t&&t("config",function(e,t){e.precision!==t.precision&&r.config({precision:e.precision});}),r;},{isClass:!0}),qt=et("Matrix",[],function(){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface");},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface");},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface");},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface");},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface");},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface");},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface");},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface");},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface");},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface");},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface");},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface");},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface");},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface");},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface");},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface");},e;},{isClass:!0}),Gt=et("replacer",[],function(){return function(e,t){return"number"!=typeof t||isFinite(t)&&!isNaN(t)?t:{mathjs:"number",value:String(t)};};}),Vt=Hn("speedOfLight","299792458","m s^-1"),Wt=Hn("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Xt=Hn("planckConstant","6.62607015e-34","J s"),Yt=Hn("reducedPlanckConstant","1.0545718176461565e-34","J s"),Zt=Hn("magneticConstant","1.25663706212e-6","N A^-2"),$t=Hn("electricConstant","8.8541878128e-12","F m^-1"),Jt=Hn("vacuumImpedance","376.730313667","ohm"),Qt=Hn("coulomb","8.987551792261171e9","N m^2 C^-2"),Kt=Hn("elementaryCharge","1.602176634e-19","C"),en=Hn("bohrMagneton","9.2740100783e-24","J T^-1"),tn=Hn("conductanceQuantum","7.748091729863649e-5","S"),nn=Hn("inverseConductanceQuantum","12906.403729652257","ohm"),rn=Hn("magneticFluxQuantum","2.0678338484619295e-15","Wb"),on=Hn("nuclearMagneton","5.0507837461e-27","J T^-1"),an=Hn("klitzing","25812.807459304513","ohm"),sn=Hn("bohrRadius","5.29177210903e-11","m"),un=Hn("classicalElectronRadius","2.8179403262e-15","m"),cn=Hn("electronMass","9.1093837015e-31","kg"),ln=Hn("fermiCoupling","1.1663787e-5","GeV^-2"),pn=qn("fineStructure",.0072973525693),dn=Hn("hartreeEnergy","4.3597447222071e-18","J"),hn=Hn("protonMass","1.67262192369e-27","kg"),fn=Hn("deuteronMass","3.3435830926e-27","kg"),mn=Hn("neutronMass","1.6749271613e-27","kg"),yn=Hn("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),gn=Hn("rydberg","10973731.568160","m^-1"),vn=Hn("thomsonCrossSection","6.6524587321e-29","m^2"),xn=qn("weakMixingAngle",.2229),bn=qn("efimovFactor",22.7),wn=Hn("atomicMass","1.66053906660e-27","kg"),Sn=Hn("avogadro","6.02214076e23","mol^-1"),Mn=Hn("boltzmann","1.380649e-23","J K^-1"),_n=Hn("faraday","96485.33212331001","C mol^-1"),En=Hn("firstRadiation","3.7417718521927573e-16","W m^2"),An=Hn("loschmidt","2.686780111798444e25","m^-3"),Tn=Hn("gasConstant","8.31446261815324","J K^-1 mol^-1"),Nn=Hn("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Dn=Hn("molarVolume","0.022413969545014137","m^3 mol^-1"),Cn=qn("sackurTetrode",-1.16487052358),Rn=Hn("secondRadiation","0.014387768775039337","m K"),Pn=Hn("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),On=Hn("wienDisplacement","2.897771955e-3","m K"),Ln=Hn("molarMass","0.99999999965e-3","kg mol^-1"),In=Hn("molarMassC12","11.9999999958e-3","kg mol^-1"),Bn=Hn("gravity","9.80665","m s^-2"),Fn=Hn("planckLength","1.616255e-35","m"),zn=Hn("planckMass","2.176435e-8","kg"),kn=Hn("planckTime","5.391245e-44","s"),Un=Hn("planckCharge","1.87554603778e-18","C"),jn=Hn("planckTemperature","1.416785e+32","K");function Hn(e,t,n){return et(e,["config","Unit","BigNumber"],function(e){var r=e.config,i=e.Unit,o=e.BigNumber,a=new i("BigNumber"===r.number?new o(t):parseFloat(t),n);return a.fixPrefix=!0,a;});}function qn(e,t){return et(e,["config","BigNumber"],function(e){var n=e.config,r=e.BigNumber;return"BigNumber"===n.number?new r(t):t;});}var Gn=n(14),Vn=n.n(Gn),Wn=et("Fraction",[],function(){return Vn.a.prototype.type="Fraction",Vn.a.prototype.isFraction=!0,Vn.a.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d};},Vn.a.fromJSON=function(e){return new Vn.a(e);},Vn.a;},{isClass:!0}),Xn=et("DenseMatrix",["Matrix"],function(e){var t=e.Matrix;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!p(t))throw new Error("Invalid datatype: "+t);if(h(e))"DenseMatrix"===e.type?(this._data=W(e._data),this._size=W(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&d(e.data)&&d(e.size))this._data=e.data,this._size=e.size,ze(this._data,this._size),this._datatype=t||e.datatype;else if(d(e))this._data=function e(t){for(var n=0,r=t.length;n<r;n++){var i=t[n];d(i)?t[n]=e(i):i&&!0===i.isMatrix&&(t[n]=e(i.valueOf()));}return t;}(e),this._size=Fe(this._data),ze(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+G(e)+")");this._data=[],this._size=[0],this._datatype=t;}}function r(e,t){if(!v(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r=t.size();if(r.length!==e._size.length)throw new Ie(r.length,e._size.length);for(var i=t.min(),o=t.max(),a=0,s=e._size.length;a<s;a++){ke(i[a],e._size[a]),ke(o[a],e._size[a]);}return new n(function e(t,n,r,i){var o=i===r-1,a=n.dimension(i);return o?a.map(function(e){return ke(e,t.length),t[e];}).valueOf():a.map(function(o){ke(o,t.length);var a=t[o];return e(a,n,r,i+1);}).valueOf();}(e._data,t,r.length,0),e._datatype);}function i(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,o=t.size(),a=t.isScalar();if(h(n)?(i=n.size(),n=n.valueOf()):i=Fe(n),a){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r);}else{if(o.length<e._size.length)throw new Ie(o.length,e._size.length,"<");if(i.length<o.length){for(var s=0,c=0;1===o[s]&&1===i[s];){s++;}for(;1===o[s];){c++,s++;}n=qe(n,o.length,c,i);}if(!Z(o,i))throw new Ie(o,i,">");u(e,t.max().map(function(e){return e+1;}),r);var l=o.length;!function e(t,n,r,i,o){var a=o===i-1,s=n.dimension(o);a?s.forEach(function(e,n){ke(e),t[e]=r[n[0]];}):s.forEach(function(a,s){ke(a),e(t[a],n,r[s[0]],i,o+1);});}(e._data,t,n,l,0);}return e;}function o(e,t,n){if(0===t.length){for(var r=e._data;d(r);){r=r[0];}return r;}return e._size=t.slice(0),e._data=Ue(e._data,e._size,n),e;}function u(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;){r.push(0),i=!0;}for(var a=0,s=t.length;a<s;a++){t[a]>r[a]&&(r[a]=t[a],i=!0);}i&&o(e,r,n);}return n.prototype=new t(),n.prototype.createDenseMatrix=function(e,t){return new n(e,t);},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Qe(this._data,G);},n.prototype.storage=function(){return"dense";},n.prototype.datatype=function(){return this._datatype;},n.prototype.create=function(e,t){return new n(e,t);},n.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return r(this,e);case 2:case 3:return i(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments");}},n.prototype.get=function(e){if(!d(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ie(e.length,this._size.length);for(var t=0;t<e.length;t++){ke(e[t],this._size[t]);}for(var n=this._data,r=0,i=e.length;r<i;r++){var o=e[r];ke(o,n.length),n=n[o];}return n;},n.prototype.set=function(e,t,n){if(!d(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new Ie(e.length,this._size.length,"<");var r,i,o;u(this,e.map(function(e){return e+1;}),n);var a=this._data;for(r=0,i=e.length-1;r<i;r++){ke(o=e[r],a.length),a=a[o];}return ke(o=e[e.length-1],a.length),a[o]=t,this;},n.prototype.resize=function(e,t,n){if(!f(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map(function(e){return Array.isArray(e)&&1===e.length?e[0]:e;});return o(n?this.clone():this,r,t);},n.prototype.reshape=function(e,t){var n=t?this.clone():this;return n._data=je(n._data,e),n._size=e.slice(0),n;},n.prototype.clone=function(){return new n({data:W(this._data),size:W(this._size),datatype:this._datatype});},n.prototype.size=function(){return this._size.slice(0);},n.prototype.map=function(e){var t=this,r=function n(r,i){return d(r)?r.map(function(e,t){return n(e,i.concat(t));}):e(r,i,t);}(this._data,[]);return new n(r,void 0!==this._datatype?Qe(r,G):void 0);},n.prototype.forEach=function(e){var t=this;!function n(r,i){d(r)?r.forEach(function(e,t){n(e,i.concat(t));}):e(r,i,t);}(this._data,[]);},n.prototype.toArray=function(){return W(this._data);},n.prototype.valueOf=function(){return this._data;},n.prototype.format=function(e){return Re(this._data,e);},n.prototype.toString=function(){return Re(this._data);},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype};},n.prototype.diagonal=function(e){if(e){if(s(e)&&(e=e.toNumber()),!a(e)||!ae(e))throw new TypeError("The parameter k must be an integer number");}else e=0;for(var t=e>0?e:0,r=e<0?-e:0,i=this._size[0],o=this._size[1],u=Math.min(i-r,o-t),c=[],l=0;l<u;l++){c[l]=this._data[l+r][l+t];}return new n({data:c,size:[u],datatype:this._datatype});},n.diagonal=function(e,t,r,i){if(!d(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(s(e)&&(e=e.toNumber()),!a(e)||!ae(e)||e<1)throw new Error("Size values must be positive integers");return e;}),r){if(s(r)&&(r=r.toNumber()),!a(r)||!ae(r))throw new TypeError("The parameter k must be an integer number");}else r=0;var o,u=r>0?r:0,c=r<0?-r:0,l=e[0],p=e[1],f=Math.min(l-c,p-u);if(d(t)){if(t.length!==f)throw new Error("Invalid value array length");o=function o(e){return t[e];};}else if(h(t)){var m=t.size();if(1!==m.length||m[0]!==f)throw new Error("Invalid matrix length");o=function o(e){return t.get([e]);};}else o=function o(){return t;};i||(i=s(o(0))?o(0).mul(0):0);var y=[];if(e.length>0){y=Ue(y,e,i);for(var g=0;g<f;g++){y[g+c][g+u]=o(g);}}return new n({data:y,size:[l,p]});},n.fromJSON=function(e){return new n(e);},n.prototype.swapRows=function(e,t){if(!(a(e)&&ae(e)&&a(t)&&ae(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return ke(e,this._size[0]),ke(t,this._size[0]),n._swapRows(e,t,this._data),this;},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r;},n;},{isClass:!0}),Yn=n(27),Zn=n.n(Yn),_$n=function $n(){return _$n=Zn.a.create,Zn.a;},Jn=et("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(e){var t=e.BigNumber,n=e.Complex,r=e.DenseMatrix,i=e.Fraction,o=_$n();return o.types=[{name:"number",test:a},{name:"Complex",test:u},{name:"BigNumber",test:s},{name:"Fraction",test:c},{name:"Unit",test:l},{name:"string",test:p},{name:"Chain",test:q},{name:"Array",test:d},{name:"Matrix",test:h},{name:"DenseMatrix",test:m},{name:"SparseMatrix",test:y},{name:"Range",test:g},{name:"Index",test:v},{name:"boolean",test:x},{name:"ResultSet",test:b},{name:"Help",test:w},{name:"function",test:S},{name:"Date",test:M},{name:"RegExp",test:_},{name:"null",test:A},{name:"undefined",test:T},{name:"AccessorNode",test:N},{name:"ArrayNode",test:D},{name:"AssignmentNode",test:C},{name:"BlockNode",test:R},{name:"ConditionalNode",test:P},{name:"ConstantNode",test:O},{name:"FunctionNode",test:I},{name:"FunctionAssignmentNode",test:L},{name:"IndexNode",test:B},{name:"Node",test:F},{name:"ObjectNode",test:z},{name:"OperatorNode",test:k},{name:"ParenthesisNode",test:U},{name:"RangeNode",test:j},{name:"SymbolNode",test:H},{name:"Object",test:E}],o.conversions=[{from:"number",to:"BigNumber",convert:function convert(e){if(t||Qn(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e);}},{from:"number",to:"Complex",convert:function convert(e){return n||Kn(e),new n(e,0);}},{from:"number",to:"string",convert:function convert(e){return e+"";}},{from:"BigNumber",to:"Complex",convert:function convert(e){return n||Kn(e),new n(e.toNumber(),0);}},{from:"Fraction",to:"BigNumber",convert:function convert(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.");}},{from:"Fraction",to:"Complex",convert:function convert(e){return n||Kn(e),new n(e.valueOf(),0);}},{from:"number",to:"Fraction",convert:function convert(e){i||er(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t;}},{from:"string",to:"number",convert:function convert(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t;}},{from:"string",to:"BigNumber",convert:function convert(e){t||Qn(e);try{return new t(e);}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber');}}},{from:"string",to:"Fraction",convert:function convert(e){i||er(e);try{return new i(e);}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction');}}},{from:"string",to:"Complex",convert:function convert(e){n||Kn(e);try{return new n(e);}catch(t){throw new Error('Cannot convert "'+e+'" to Complex');}}},{from:"boolean",to:"number",convert:function convert(e){return+e;}},{from:"boolean",to:"BigNumber",convert:function convert(e){return t||Qn(e),new t(+e);}},{from:"boolean",to:"Fraction",convert:function convert(e){return i||er(e),new i(+e);}},{from:"boolean",to:"string",convert:function convert(e){return String(e);}},{from:"Array",to:"Matrix",convert:function convert(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided");}(),new r(e);}},{from:"Matrix",to:"Array",convert:function convert(e){return e.valueOf();}}],o;});function Qn(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"));}function Kn(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"));}function er(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."));}function tr(e){for(var t=0;t<e.length;t++){if(f(e[t]))return!0;}return!1;}function nr(e,t){h(e)&&(e=e.valueOf());for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?nr(i,t):t(i);}}function rr(e,t,n){return e&&"function"==typeof e.map?e.map(function(e){return rr(e,t,n);}):t(e);}function ir(e,t,n){var r=Array.isArray(e)?Fe(e):e.size();if(t<0||t>=r.length)throw new Be(t,r.length);return h(e)?e.create(or(e.valueOf(),t,n)):or(e,t,n);}function or(e,t,n){var r,i,o,a;if(t<=0){if(Array.isArray(e[0])){for(a=function(e){var t,n,r=e.length,i=e[0].length,o=[];for(n=0;n<i;n++){var a=[];for(t=0;t<r;t++){a.push(e[t][n]);}o.push(a);}return o;}(e),i=[],r=0;r<a.length;r++){i[r]=or(a[r],t-1,n);}return i;}for(o=e[0],r=1;r<e.length;r++){o=n(o,e[r]);}return o;}for(i=[],r=0;r<e.length;r++){i[r]=or(e[r],t-1,n);}return i;}function ar(e,t,n,r,i,o,a,s,u,c,l){var p,d,h,f,m=e._values,y=e._index,g=e._ptr;if(r)for(d=g[t],h=g[t+1],p=d;p<h;p++){n[f=y[p]]!==o?(n[f]=o,a.push(f),c?(r[f]=u?s(m[p],l):s(l,m[p]),i[f]=o):r[f]=m[p]):(r[f]=u?s(m[p],r[f]):s(r[f],m[p]),i[f]=o);}else for(d=g[t],h=g[t+1],p=d;p<h;p++){n[f=y[p]]!==o?(n[f]=o,a.push(f)):i[f]=o;}}var sr=et("isInteger",["typed"],function(e){return(0,e.typed)("isInteger",{number:ae,BigNumber:function BigNumber(e){return e.isInt();},Fraction:function Fraction(e){return 1===e.d&&isFinite(e.n);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),ur=et("isNumeric",["typed"],function(e){return(0,e.typed)("isNumeric",{"number | BigNumber | Fraction | boolean":function numberBigNumberFractionBoolean(){return!0;},"Complex | Unit | string | null | undefined | Node":function ComplexUnitStringNullUndefinedNode(){return!1;},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});});function cr(e){return e<0;}function lr(e){return e>0;}function pr(e){return 0===e;}function dr(e){return Number.isNaN(e);}cr.signature="number",lr.signature="number",pr.signature="number",dr.signature="number";var hr=et("isPositive",["typed"],function(e){return(0,e.typed)("isPositive",{number:lr,BigNumber:function BigNumber(e){return!e.isNeg()&&!e.isZero()&&!e.isNaN();},Fraction:function Fraction(e){return e.s>0&&e.n>0;},Unit:function Unit(e){return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),fr=et("isNaN",["typed"],function(e){return(0,e.typed)("isNaN",{number:dr,BigNumber:function BigNumber(e){return e.isNaN();},Fraction:function Fraction(e){return!1;},Complex:function Complex(e){return e.isNaN();},Unit:function Unit(e){return Number.isNaN(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,Number.isNaN);}});});function mr(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return r.lte(i.times(n));}return!1;}var yr=et("equalScalar",["typed","config"],function(e){var t=e.typed,n=e.config;return t("equalScalar",{"boolean, boolean":function booleanBoolean(e,t){return e===t;},"number, number":function numberNumber(e,t){return be(e,t,n.epsilon);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.eq(t)||mr(e,t,n.epsilon);},"Fraction, Fraction":function FractionFraction(e,t){return e.equals(t);},"Complex, Complex":function ComplexComplex(e,t){return function(e,t,n){return be(e.re,t.re,n)&&be(e.im,t.im,n);}(e,t,n.epsilon);},"Unit, Unit":function UnitUnit(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value);}});}),gr=(et("equalScalar",["typed","config"],function(e){var t=e.typed,n=e.config;return t("equalScalar",{"number, number":function numberNumber(e,t){return be(e,t,n.epsilon);}});}),et("number",["typed"],function(e){var t=(0,e.typed)("number",{"":function _(){return 0;},number:function number(e){return e;},string:function string(e){if("NaN"===e)return NaN;var t=Number(e);if(isNaN(t))throw new SyntaxError('String "'+e+'" is no valid number');return t;},BigNumber:function BigNumber(e){return e.toNumber();},Fraction:function Fraction(e){return e.valueOf();},Unit:function Unit(e){throw new Error("Second argument with valueless unit expected");},"null":function _null(e){return 0;},"Unit, string | Unit":function UnitStringUnit(e,t){return e.toNumber(t);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});return t.fromJSON=function(e){return parseFloat(e.value);},t;})),vr=et("boolean",["typed"],function(e){return(0,e.typed)("boolean",{"":function _(){return!1;},"boolean":function boolean(e){return e;},number:function number(e){return!!e;},"null":function _null(e){return!1;},BigNumber:function BigNumber(e){return!e.isZero();},string:function string(e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;var n=Number(e);if(""!==e&&!isNaN(n))return!!n;throw new Error('Cannot convert "'+e+'" to a boolean');},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),xr=et("complex",["typed","Complex"],function(e){var t=e.typed,n=e.Complex;return t("complex",{"":function _(){return n.ZERO;},number:function number(e){return new n(e,0);},"number, number":function numberNumber(e,t){return new n(e,t);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return new n(e.toNumber(),t.toNumber());},Fraction:function Fraction(e){return new n(e.valueOf(),0);},Complex:function Complex(e){return e.clone();},string:function string(e){return n(e);},"null":function _null(e){return n(0);},Object:function Object(e){if("re"in e&&"im"in e)return new n(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new n(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)");},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),br=et("splitUnit",["typed"],function(e){return(0,e.typed)("splitUnit",{"Unit, Array":function UnitArray(e,t){return e.splitUnit(t);}});}),wr="number, number";function Sr(e){return Math.abs(e);}function Mr(e,t){return e+t;}function _r(e,t){return e*t;}function Er(e){return-e;}function Ar(e){return e;}function Tr(e){return pe(e);}function Nr(e){return Math.ceil(e);}function Dr(e){return e*e*e;}function Cr(e){return Math.exp(e);}function Rr(e){return de(e);}function Pr(e,t){if(!ae(e)||!ae(t))throw new Error("Parameters in function gcd must be integer numbers");for(var n;0!==t;){n=e%t,e=t,t=n;}return e<0?-e:e;}function Or(e,t){if(!ae(e)||!ae(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var n,r=e*t;0!==t;){t=e%(n=t),e=n;}return Math.abs(r/e);}function Lr(e){return Math.log(e);}function Ir(e){return ce(e);}function Br(e){return ue(e);}function Fr(e,t){if(t>0)return e-t*Math.floor(e/t);if(0===t)return e;throw new Error("Cannot calculate mod for a negative divisor");}function zr(e,t){var n=t<0;if(n&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===e)return n?1/0:0;if(!isFinite(e))return n?0:e;var r=Math.pow(Math.abs(e),1/t);return r=e<0?-r:r,n?1/r:r;}function kr(e){return se(e);}function Ur(e){return e*e;}function jr(e,t){var n,r,i,o=0,a=1,s=1,u=0;if(!ae(e)||!ae(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;){i=e-(r=Math.floor(e/t))*t,n=o,o=a-r*o,a=n,n=s,s=u-r*s,u=n,e=t,t=i;}return e<0?[-e,-a,-u]:[e,e?a:0,u];}function Hr(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t);}function qr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(me(e,t));}Sr.signature="number",Mr.signature=wr,_r.signature=wr,Er.signature="number",Ar.signature="number",Tr.signature="number",Nr.signature="number",Dr.signature="number",Cr.signature="number",Rr.signature="number",Pr.signature=wr,Or.signature=wr,Lr.signature="number",Ir.signature="number",Br.signature="number",Fr.signature=wr,zr.signature=wr,kr.signature="number",Ur.signature="number",jr.signature=wr,Hr.signature=wr,qr.signature=wr;var Gr=et("unaryPlus",["typed","config","BigNumber"],function(e){var t=e.typed,n=e.config,r=e.BigNumber;return t("unaryPlus",{number:Ar,Complex:function Complex(e){return e;},BigNumber:function BigNumber(e){return e;},Fraction:function Fraction(e){return e;},Unit:function Unit(e){return e.clone();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);},"boolean | string":function booleanString(e){return"BigNumber"===n.number?new r(+e):+e;}});}),Vr=et("apply",["typed","isInteger"],function(e){var t=e.typed,n=e.isInteger;return t("apply",{"Array | Matrix, number | BigNumber, function":function ArrayMatrixNumberBigNumberFunction(e,t,r){if(!n(t))throw new TypeError("Integer number expected for dimension");var i=Array.isArray(e)?Fe(e):e.size();if(t<0||t>=i.length)throw new Be(t,i.length);return h(e)?e.create(Wr(e.valueOf(),t,r)):Wr(e,t,r);}});});function Wr(e,t,n){var r,i,o;if(t<=0){if(Array.isArray(e[0])){for(o=function(e){var t,n,r=e.length,i=e[0].length,o=[];for(n=0;n<i;n++){var a=[];for(t=0;t<r;t++){a.push(e[t][n]);}o.push(a);}return o;}(e),i=[],r=0;r<o.length;r++){i[r]=Wr(o[r],t-1,n);}return i;}return n(e);}for(i=[],r=0;r<e.length;r++){i[r]=Wr(e[r],t-1,n);}return i;}var Xr=et("cube",["typed"],function(e){return(0,e.typed)("cube",{number:Dr,Complex:function Complex(e){return e.mul(e).mul(e);},BigNumber:function BigNumber(e){return e.times(e).times(e);},Fraction:function Fraction(e){return e.pow(3);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);},Unit:function Unit(e){return e.pow(3);}});}),Yr=et("expm1",["typed","Complex"],function(e){var t=e.typed,n=e.Complex;return t("expm1",{number:Rr,Complex:function Complex(e){var t=Math.exp(e.re);return new n(t*Math.cos(e.im)-1,t*Math.sin(e.im));},BigNumber:function BigNumber(e){return e.exp().minus(1);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Zr=et("log10",["typed","config","Complex"],function(e){var t=e.typed,n=e.config,r=e.Complex;return t("log10",{number:function number(e){return e>=0||n.predictable?Ir(e):new r(e,0).log().div(Math.LN10);},Complex:function Complex(e){return new r(e).log().div(Math.LN10);},BigNumber:function BigNumber(e){return!e.isNegative()||n.predictable?e.log():new r(e.toNumber(),0).log().div(Math.LN10);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),$r=et("multiplyScalar",["typed"],function(e){return(0,e.typed)("multiplyScalar",{"number, number":_r,"Complex, Complex":function ComplexComplex(e,t){return e.mul(t);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.times(t);},"Fraction, Fraction":function FractionFraction(e,t){return e.mul(t);},"number | Fraction | BigNumber | Complex, Unit":function numberFractionBigNumberComplexUnit(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):this(n.value,e),n;},"Unit, number | Fraction | BigNumber | Complex":function UnitNumberFractionBigNumberComplex(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):this(n.value,t),n;},"Unit, Unit":function UnitUnit(e,t){return e.multiply(t);}});}),Jr=et("sign",["typed","BigNumber","Fraction","complex"],function(e){var t=e.typed,n=e.BigNumber,r=e.complex,i=e.Fraction;return t("sign",{number:kr,Complex:function Complex(e){return 0===e.im?r(kr(e.re)):e.sign();},BigNumber:function BigNumber(e){return new n(e.cmp(0));},Fraction:function Fraction(e){return new i(e.s,1);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);},Unit:function Unit(e){return this(e.value);}});}),Qr=et("square",["typed"],function(e){return(0,e.typed)("square",{number:Ur,Complex:function Complex(e){return e.mul(e);},BigNumber:function BigNumber(e){return e.times(e);},Fraction:function Fraction(e){return e.mul(e);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);},Unit:function Unit(e){return e.pow(2);}});});function Kr(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitAnd");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new n(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;}return ni(e,t,function(e,t){return e&t;});}function ei(e){if(e.isFinite()&&!e.isInteger())throw new Error("Integer expected in function bitNot");var t=e.constructor,n=t.precision;t.config({precision:1e9});var r=e.plus(new t(1));return r.s=-r.s||null,t.config({precision:n}),r;}function ti(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitOr");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);var r=new n(-1);return e.isZero()||t.eq(r)||e.eq(t)?t:t.isZero()||e.eq(r)?e:e.isFinite()&&t.isFinite()?ni(e,t,function(e,t){return e|t;}):!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?r:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e;}function ni(e,t,n){var r,i,o,a,s,u=e.constructor,c=+(e.s<0),l=+(t.s<0);if(c){r=ri(ei(e));for(var p=0;p<r.length;++p){r[p]^=1;}}else r=ri(e);if(l){i=ri(ei(t));for(var d=0;d<i.length;++d){i[d]^=1;}}else i=ri(t);r.length<=i.length?(o=r,a=i,s=c):(o=i,a=r,s=l);var h=o.length,f=a.length,m=1^n(c,l),y=new u(1^m),g=new u(1),v=new u(2),x=u.precision;for(u.config({precision:1e9});h>0;){n(o[--h],a[--f])===m&&(y=y.plus(g)),g=g.times(v);}for(;f>0;){n(s,a[--f])===m&&(y=y.plus(g)),g=g.times(v);}return u.config({precision:x}),0===m&&(y.s=-y.s),y;}function ri(e){for(var t=e.d,n=t[0]+"",r=1;r<t.length;++r){for(var i=t[r]+"",o=7-i.length;o--;){i="0"+i;}n+=i;}for(var a=n.length;"0"===n.charAt(a);){a--;}var s=e.e,u=n.slice(0,a+1||1),c=u.length;if(s>0)if(++s>c)for(s-=c;s--;){u+="0";}else s<c&&(u=u.slice(0,s)+"."+u.slice(s));for(var l=[0],p=0;p<u.length;){for(var d=l.length;d--;){l[d]*=10;}l[0]+=parseInt(u.charAt(p++));for(var h=0;h<l.length;++h){l[h]>1&&(null!==l[h+1]&&void 0!==l[h+1]||(l[h+1]=0),l[h+1]+=l[h]>>1,l[h]&=1);}}return l.reverse();}function ii(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitXor");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new n(0);var r=new n(-1);return e.eq(r)?ei(t):t.eq(r)?ei(e):e.isFinite()&&t.isFinite()?ni(e,t,function(e,t){return e^t;}):e.isFinite()||t.isFinite()?new n(e.isNegative()===t.isNegative()?1/0:-1/0):r;}function oi(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function leftShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new n(2).pow(t)):new n(NaN);}function ai(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function rightArithShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new n(2).pow(t)).floor():e.isNegative()?new n(-1):e.isFinite()?new n(0):new n(NaN);}var si="number, number";function ui(e,t){if(!ae(e)||!ae(t))throw new Error("Integers expected in function bitAnd");return e&t;}function ci(e){if(!ae(e))throw new Error("Integer expected in function bitNot");return~e;}function li(e,t){if(!ae(e)||!ae(t))throw new Error("Integers expected in function bitOr");return e|t;}function pi(e,t){if(!ae(e)||!ae(t))throw new Error("Integers expected in function bitXor");return e^t;}function di(e,t){if(!ae(e)||!ae(t))throw new Error("Integers expected in function leftShift");return e<<t;}function hi(e,t){if(!ae(e)||!ae(t))throw new Error("Integers expected in function rightArithShift");return e>>t;}function fi(e,t){if(!ae(e)||!ae(t))throw new Error("Integers expected in function rightLogShift");return e>>>t;}ui.signature=si,ci.signature="number",li.signature=si,pi.signature=si,di.signature=si,hi.signature=si,fi.signature=si;var mi=et("bitNot",["typed"],function(e){return(0,e.typed)("bitNot",{number:ci,BigNumber:ei,"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),yi=et("arg",["typed"],function(e){return(0,e.typed)("arg",{number:function number(e){return Math.atan2(0,e);},BigNumber:function BigNumber(e){return e.constructor.atan2(0,e);},Complex:function Complex(e){return e.arg();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),gi=et("im",["typed"],function(e){return(0,e.typed)("im",{number:function number(e){return 0;},BigNumber:function BigNumber(e){return e.mul(0);},Complex:function Complex(e){return e.im;},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});});function vi(e){return!e;}function xi(e,t){return!(!e&&!t);}function bi(e,t){return!!e!=!!t;}function wi(e,t){return!(!e||!t);}vi.signature="number",xi.signature="number, number",bi.signature="number, number",wi.signature="number, number";var Si=et("not",["typed"],function(e){return(0,e.typed)("not",{number:vi,Complex:function Complex(e){return 0===e.re&&0===e.im;},BigNumber:function BigNumber(e){return e.isZero()||e.isNaN();},Unit:function Unit(e){return null===e.value||this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Mi=et("filter",["typed"],function(e){return(0,e.typed)("filter",{"Array, function":_i,"Matrix, function":function MatrixFunction(e,t){return e.create(_i(e.toArray(),t));},"Array, RegExp":Ye,"Matrix, RegExp":function MatrixRegExp(e,t){return e.create(Ye(e.toArray(),t));}});});function _i(e,t){var n=pt(t);return Xe(e,function(e,r,i){return 1===n?t(e):2===n?t(e,[r]):t(e,[r],i);});}var Ei=et("forEach",["typed"],function(e){return(0,e.typed)("forEach",{"Array, function":Ai,"Matrix, function":function MatrixFunction(e,t){return e.forEach(t);}});});function Ai(e,t){var n=pt(t);!function r(i,o){Array.isArray(i)?We(i,function(e,t){r(e,o.concat(t));}):1===n?t(i):2===n?t(i,o):t(i,o,e);}(e,[]);}var Ti=et("map",["typed"],function(e){return(0,e.typed)("map",{"Array, function":Ni,"Matrix, function":function MatrixFunction(e,t){return e.map(t);}});});function Ni(e,t){var n=pt(t);return function r(i,o){return Array.isArray(i)?i.map(function(e,t){return r(e,o.concat(t));}):1===n?t(i):2===n?t(i,o):t(i,o,e);}(e,[]);}var Di=et("erf",["typed"],function(e){return(0,e.typed)("name",{number:function number(e){var t=Math.abs(e);return t>=Li?se(e):t<=Ci?se(e)*function(e){var t,n=e*e,r=Pi[0][4]*n,i=n;for(t=0;t<3;t+=1){r=(r+Pi[0][t])*n,i=(i+Oi[0][t])*n;}return e*(r+Pi[0][3])/(i+Oi[0][3]);}(t):t<=4?se(e)*(1-function(e){var t,n=Pi[1][8]*e,r=e;for(t=0;t<7;t+=1){n=(n+Pi[1][t])*e,r=(r+Oi[1][t])*e;}var i=(n+Pi[1][7])/(r+Oi[1][7]),o=parseInt(16*e)/16,a=(e-o)*(e+o);return Math.exp(-o*o)*Math.exp(-a)*i;}(t)):se(e)*(1-function(e){var t,n=1/(e*e),r=Pi[2][5]*n,i=n;for(t=0;t<4;t+=1){r=(r+Pi[2][t])*n,i=(i+Oi[2][t])*n;}var o=n*(r+Pi[2][4])/(i+Oi[2][4]);o=(Ri-o)/e,n=parseInt(16*e)/16;var a=(e-n)*(e+n);return Math.exp(-n*n)*Math.exp(-a)*o;}(t));},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Ci=.46875,Ri=.5641895835477563,Pi=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Oi=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Li=Math.pow(2,53),Ii=et("format",["typed"],function(e){return(0,e.typed)("format",{any:Re,"any, Object | function | number":Re});}),Bi=et("isPrime",["typed"],function(e){return(0,e.typed)("isPrime",{number:function number(e){if(0*e!=0)return!1;if(e<=3)return e>1;if(e%2==0||e%3==0)return!1;for(var t=5;t*t<=e;t+=6){if(e%t==0||e%(t+2)==0)return!1;}return!0;},BigNumber:function BigNumber(e){if(0*e.toNumber()!=0)return!1;if(e.lte(3))return e.gt(1);if(e.mod(2).eq(0)||e.mod(3).eq(0))return!1;for(var t=5;e.gte(t*t);t+=6){if(e.mod(t).eq(0)||e.mod(t+2).eq(0))return!1;}return!0;},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Fi=et("acos",["typed","config","Complex"],function(e){var t=e.typed,n=e.config,r=e.Complex;return t("acos",{number:function number(e){return e>=-1&&e<=1||n.predictable?Math.acos(e):new r(e,0).acos();},Complex:function Complex(e){return e.acos();},BigNumber:function BigNumber(e){return e.acos();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});});function zi(e){return we(e);}function ki(e){return Math.atan(1/e);}function Ui(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0;}function ji(e){return Math.asin(1/e);}function Hi(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1));}function qi(e){return Math.acos(1/e);}function Gi(e){var t=1/e,n=Math.sqrt(t*t-1);return Math.log(n+t);}function Vi(e){return Se(e);}function Wi(e){return Me(e);}function Xi(e){return 1/Math.tan(e);}function Yi(e){var t=Math.exp(2*e);return(t+1)/(t-1);}function Zi(e){return 1/Math.sin(e);}function $i(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*se(e);}function Ji(e){return 1/Math.cos(e);}function Qi(e){return 2/(Math.exp(e)+Math.exp(-e));}function Ki(e){return Ee(e);}zi.signature="number",ki.signature="number",Ui.signature="number",ji.signature="number",Hi.signature="number",qi.signature="number",Gi.signature="number",Vi.signature="number",Wi.signature="number",Xi.signature="number",Yi.signature="number",Zi.signature="number",$i.signature="number",Ji.signature="number",Qi.signature="number",Ki.signature="number";var eo=et("acot",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("acot",{number:ki,Complex:function Complex(e){return e.acot();},BigNumber:function BigNumber(e){return new n(1).div(e).atan();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),to=et("acsc",["typed","config","Complex","BigNumber"],function(e){var t=e.typed,n=e.config,r=e.Complex,i=e.BigNumber;return t("acsc",{number:function number(e){return e<=-1||e>=1||n.predictable?ji(e):new r(e,0).acsc();},Complex:function Complex(e){return e.acsc();},BigNumber:function BigNumber(e){return new i(1).div(e).asin();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),no=et("asec",["typed","config","Complex","BigNumber"],function(e){var t=e.typed,n=e.config,r=e.Complex,i=e.BigNumber;return t("asec",{number:function number(e){return e<=-1||e>=1||n.predictable?qi(e):new r(e,0).asec();},Complex:function Complex(e){return e.asec();},BigNumber:function BigNumber(e){return new i(1).div(e).acos();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),ro=et("asin",["typed","config","Complex"],function(e){var t=e.typed,n=e.config,r=e.Complex;return t("asin",{number:function number(e){return e>=-1&&e<=1||n.predictable?Math.asin(e):new r(e,0).asin();},Complex:function Complex(e){return e.asin();},BigNumber:function BigNumber(e){return e.asin();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),io=et("atan",["typed"],function(e){return(0,e.typed)("atan",{number:function number(e){return Math.atan(e);},Complex:function Complex(e){return e.atan();},BigNumber:function BigNumber(e){return e.atan();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),oo=et("atanh",["typed","config","Complex"],function(e){var t=e.typed,n=e.config,r=e.Complex;return t("atanh",{number:function number(e){return e<=1&&e>=-1||n.predictable?Wi(e):new r(e,0).atanh();},Complex:function Complex(e){return e.atanh();},BigNumber:function BigNumber(e){return e.atanh();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),ao=et("cosh",["typed"],function(e){return(0,e.typed)("cosh",{number:_e,Complex:function Complex(e){return e.cosh();},BigNumber:function BigNumber(e){return e.cosh();},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),so=et("coth",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("coth",{number:Yi,Complex:function Complex(e){return e.coth();},BigNumber:function BigNumber(e){return new n(1).div(e.tanh());},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),uo=et("csch",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("csch",{number:$i,Complex:function Complex(e){return e.csch();},BigNumber:function BigNumber(e){return new n(1).div(e.sinh());},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),co=et("sech",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("sech",{number:Qi,Complex:function Complex(e){return e.sech();},BigNumber:function BigNumber(e){return new n(1).div(e.cosh());},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),lo=et("sinh",["typed"],function(e){return(0,e.typed)("sinh",{number:Ki,Complex:function Complex(e){return e.sinh();},BigNumber:function BigNumber(e){return e.sinh();},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),po=et("tanh",["typed"],function(e){return(0,e.typed)("tanh",{number:Ae,Complex:function Complex(e){return e.tanh();},BigNumber:function BigNumber(e){return e.tanh();},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});});function ho(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return ho(e,n)*ho(n+1,t);}function fo(e,t){if(!ae(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!ae(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");var n=e-t;return t<n?ho(n+1,e)/ho(1,t):ho(t+1,e)/ho(1,n);}fo.signature="number, number";var mo=et("combinations",["typed"],function(e){return(0,e.typed)("combinations",{"number, number":fo,"BigNumber, BigNumber":function BigNumberBigNumber(e,t){var n,r,i=e.constructor,o=e.minus(t),a=new i(1);if(!yo(e)||!yo(t))throw new TypeError("Positive integer value expected in function combinations");if(t.gt(e))throw new TypeError("k must be less than n in function combinations");if(n=a,t.lt(o))for(r=a;r.lte(o);r=r.plus(a)){n=n.times(t.plus(r)).dividedBy(r);}else for(r=a;r.lte(t);r=r.plus(a)){n=n.times(o.plus(r)).dividedBy(r);}return n;}});});function yo(e){return e.isInteger()&&e.gte(0);}var go=n(28),vo=n.n(go),xo=vo()();function bo(e){var t,n;return t=null===(n=e)?xo:vo()(String(n)),function(){return t();};}var wo=et("pickRandom",["typed","config","?on"],function(e){var t=e.typed,n=e.config,r=e.on,i=bo(n.randomSeed);return r&&r("config",function(e,t){e.randomSeed!==t.randomSeed&&(i=bo(e.randomSeed));}),t({"Array | Matrix":function ArrayMatrix(e){return o(e);},"Array | Matrix, number":function ArrayMatrixNumber(e,t){return o(e,t,void 0);},"Array | Matrix, Array":function ArrayMatrixArray(e,t){return o(e,void 0,t);},"Array | Matrix, Array | Matrix, number":function ArrayMatrixArrayMatrixNumber(e,t,n){return o(e,n,t);},"Array | Matrix, number, Array | Matrix":function ArrayMatrixNumberArrayMatrix(e,t,n){return o(e,t,n);}});function o(e,t,n){var r=void 0===t;if(r&&(t=1),e=e.valueOf(),n&&(n=n.valueOf()),Fe(e).length>1)throw new Error("Only one dimensional vectors supported");var o=0;if(void 0!==n){if(n.length!==e.length)throw new Error("Weights must have the same length as possibles");for(var s=0,u=n.length;s<u;s++){if(!a(n[s])||n[s]<0)throw new Error("Weights must be an array of positive numbers");o+=n[s];}}var c=e.length;if(0===c)return[];if(t>=c)return t>1?e:e[0];for(var l,p=[];p.length<t;){if(void 0===n)l=e[Math.floor(i()*c)];else for(var d=i()*o,h=0,f=e.length;h<f;h++){if((d-=n[h])<0){l=e[h];break;}}-1===p.indexOf(l)&&p.push(l);}return r?p[0]:p;}});function So(e,t){var n=[];if((e=e.slice(0)).length>1)for(var r=0,i=e.shift();r<i;r++){n.push(So(e,t));}else for(var o=0,a=e.shift();o<a;o++){n.push(t());}return n;}var Mo=et("randomInt",["typed","config","?on"],function(e){var t=e.typed,n=e.config,r=e.on,i=bo(n.randomSeed);return r&&r("config",function(e,t){e.randomSeed!==t.randomSeed&&(i=bo(e.randomSeed));}),t("randomInt",{"":function _(){return a(0,1);},number:function number(e){return a(0,e);},"number, number":function numberNumber(e,t){return a(e,t);},"Array | Matrix":function ArrayMatrix(e){return o(e,0,1);},"Array | Matrix, number":function ArrayMatrixNumber(e,t){return o(e,0,t);},"Array | Matrix, number, number":function ArrayMatrixNumberNumber(e,t,n){return o(e,t,n);}});function o(e,t,n){var r=So(e.valueOf(),function(){return a(t,n);});return h(e)?e.create(r):r;}function a(e,t){return Math.floor(e+i()*(t-e));}}),_o=et("clone",["typed"],function(e){return(0,e.typed)("clone",{any:W});}),Eo=et("hasNumericValue",["typed","isNumeric"],function(e){var t=e.typed,n=e.isNumeric;return t("hasNumericValue",{string:function string(e){return e.trim().length>0&&!isNaN(Number(e));},any:function any(e){return n(e);}});}),Ao=et("typeOf",["typed"],function(e){return(0,e.typed)("typeOf",{any:G});}),To=et("string",["typed"],function(e){return(0,e.typed)("string",{"":function _(){return"";},number:he,"null":function _null(e){return"null";},"boolean":function boolean(e){return e+"";},string:function string(e){return e;},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);},any:function any(e){return String(e);}});}),No=et("fraction",["typed","Fraction"],function(e){var t=e.typed,n=e.Fraction;return t("fraction",{number:function number(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e);},string:function string(e){return new n(e);},"number, number":function numberNumber(e,t){return new n(e,t);},"null":function _null(e){return new n(0);},BigNumber:function BigNumber(e){return new n(e.toString());},Fraction:function Fraction(e){return e;},Object:function Object(e){return new n(e);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Do=et("unaryMinus",["typed"],function(e){return(0,e.typed)("unaryMinus",{number:Er,Complex:function Complex(e){return e.neg();},BigNumber:function BigNumber(e){return e.neg();},Fraction:function Fraction(e){return e.neg();},Unit:function Unit(e){var t=e.clone();return t.value=this(e.value),t;},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),Co=et("addScalar",["typed"],function(e){return(0,e.typed)("addScalar",{"number, number":Mr,"Complex, Complex":function ComplexComplex(e,t){return e.add(t);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.plus(t);},"Fraction, Fraction":function FractionFraction(e,t){return e.add(t);},"Unit, Unit":function UnitUnit(e,t){if(null===e.value||void 0===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value||void 0===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n;}});}),Ro=et("exp",["typed"],function(e){return(0,e.typed)("exp",{number:Cr,Complex:function Complex(e){return e.exp();},BigNumber:function BigNumber(e){return e.exp();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Po=et("log2",["typed","config","Complex"],function(e){var t=e.typed,n=e.config,r=e.Complex;return t("log2",{number:function number(e){return e>=0||n.predictable?Br(e):i(new r(e,0));},Complex:i,BigNumber:function BigNumber(e){return!e.isNegative()||n.predictable?e.log(2):i(new r(e.toNumber(),0));},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});function i(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new r(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2);}}),Oo=et("sqrt",["config","typed","Complex"],function(e){var t=e.config,n=e.typed,r=e.Complex;return n("sqrt",{number:i,Complex:function Complex(e){return e.sqrt();},BigNumber:function BigNumber(e){return!e.isNegative()||t.predictable?e.sqrt():i(e.toNumber());},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);},Unit:function Unit(e){return e.pow(.5);}});function i(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new r(e,0).sqrt();}}),Lo=et("conj",["typed"],function(e){return(0,e.typed)("conj",{number:function number(e){return e;},BigNumber:function BigNumber(e){return e;},Complex:function Complex(e){return e.conjugate();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Io=et("getMatrixDataType",["typed"],function(e){return(0,e.typed)("getMatrixDataType",{Array:function Array(e){return Qe(e,G);},Matrix:function Matrix(e){return e.getDataType();}});}),Bo=et("mode",["typed","isNaN","isNumeric"],function(e){var t=e.typed,n=e.isNaN,r=e.isNumeric;return t("mode",{"Array | Matrix":i,"...":function _(e){return i(e);}});function i(e){if(0===(e=Ge(e.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var t={},i=[],o=0,a=0;a<e.length;a++){var s=e[a];if(r(s)&&n(s))throw new Error("Cannot calculate mode of an array containing NaN values");s in t||(t[s]=0),t[s]++,t[s]===o?i.push(s):t[s]>o&&(o=t[s],i=[s]);}return i;}}),Fo=et("print",["typed"],function(e){return(0,e.typed)("print",{"string, Object | Array":zo,"string, Object | Array, number | Object":zo});});function zo(e,t,n){return e.replace(/\$([\w.]+)/g,function(e,r){for(var i=r.split("."),o=t[i.shift()];i.length&&void 0!==o;){var a=i.shift();o=a?o[a]:o+".";}return void 0!==o?p(o)?o:Re(o,n):e;});}var ko=et("acosh",["typed","config","Complex"],function(e){var t=e.typed,n=e.config,r=e.Complex;return t("acosh",{number:function number(e){return e>=1||n.predictable?zi(e):e<=-1?new r(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new r(e,0).acosh();},Complex:function Complex(e){return e.acosh();},BigNumber:function BigNumber(e){return e.acosh();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Uo=et("acsch",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("acsch",{number:Hi,Complex:function Complex(e){return e.acsch();},BigNumber:function BigNumber(e){return new n(1).div(e).asinh();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),jo=et("asinh",["typed"],function(e){return(0,e.typed)("asinh",{number:Vi,Complex:function Complex(e){return e.asinh();},BigNumber:function BigNumber(e){return e.asinh();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),Ho=et("cos",["typed"],function(e){return(0,e.typed)("cos",{number:Math.cos,Complex:function Complex(e){return e.cos();},BigNumber:function BigNumber(e){return e.cos();},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),qo=et("csc",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("csc",{number:Zi,Complex:function Complex(e){return e.csc();},BigNumber:function BigNumber(e){return new n(1).div(e.sin());},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Go=et("sin",["typed"],function(e){return(0,e.typed)("sin",{number:Math.sin,Complex:function Complex(e){return e.sin();},BigNumber:function BigNumber(e){return e.sin();},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),Vo=et("combinationsWithRep",["typed"],function(e){return(0,e.typed)("combinationsWithRep",{"number, number":function numberNumber(e,t){if(!ae(e)||e<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!ae(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e<1)throw new TypeError("k must be less than or equal to n + k - 1");return t<e-1?ho(e,e+t-1)/ho(1,t):ho(t+1,e+t-1)/ho(1,e-1);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){var n,r,i=new(0,e.constructor)(1),o=e.minus(i);if(!Wo(e)||!Wo(t))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e.lt(i))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(n=i,t.lt(o))for(r=i;r.lte(o);r=r.plus(i)){n=n.times(t.plus(r)).dividedBy(r);}else for(r=i;r.lte(t);r=r.plus(i)){n=n.times(o.plus(r)).dividedBy(r);}return n;}});});function Wo(e){return e.isInteger()&&e.gte(0);}var Xo=et("random",["typed","config","?on"],function(e){var t=e.typed,n=e.config,r=e.on,i=bo(n.randomSeed);return r&&r("config",function(e,t){e.randomSeed!==t.randomSeed&&(i=bo(e.randomSeed));}),t("random",{"":function _(){return a(0,1);},number:function number(e){return a(0,e);},"number, number":function numberNumber(e,t){return a(e,t);},"Array | Matrix":function ArrayMatrix(e){return o(e,0,1);},"Array | Matrix, number":function ArrayMatrixNumber(e,t){return o(e,0,t);},"Array | Matrix, number, number":function ArrayMatrixNumberNumber(e,t,n){return o(e,t,n);}});function o(e,t,n){var r=So(e.valueOf(),function(){return a(t,n);});return h(e)?e.create(r):r;}function a(e,t){return e+i()*(t-e);}}),Yo=et("isNegative",["typed"],function(e){return(0,e.typed)("isNegative",{number:cr,BigNumber:function BigNumber(e){return e.isNeg()&&!e.isZero()&&!e.isNaN();},Fraction:function Fraction(e){return e.s<0;},Unit:function Unit(e){return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Zo=et("SparseMatrix",["typed","equalScalar","Matrix"],function(e){var t=e.typed,n=e.equalScalar,r=e.Matrix;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!p(t))throw new Error("Invalid datatype: "+t);if(h(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?W(t._values):void 0,e._index=W(t._index),e._ptr=W(t._ptr),e._size=W(t._size),e._datatype=n||t._datatype):o(e,t.valueOf(),n||t._datatype);}(this,e,t);else if(e&&d(e.index)&&d(e.ptr)&&d(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(d(e))o(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+G(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t;}}function o(e,r,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var o=r.length,a=0,s=n,u=0;if(p(i)&&(s=t.find(n,[i,i])||n,u=t.convert(0,i)),o>0){var c=0;do{e._ptr.push(e._index.length);for(var l=0;l<o;l++){var h=r[l];if(d(h)){if(0===c&&a<h.length&&(a=h.length),c<h.length){var f=h[c];s(f,u)||(e._values.push(f),e._index.push(l));}}else 0===c&&a<1&&(a=1),s(h,u)||(e._values.push(h),e._index.push(l));}c++;}while(c<a);}e._ptr.push(e._index.length),e._size=[o,a];}function u(e,t){if(!v(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,r,o,a,s=t.size();if(s.length!==e._size.length)throw new Ie(s.length,e._size.length);var u=t.min(),c=t.max();for(n=0,r=e._size.length;n<r;n++){ke(u[n],e._size[n]),ke(c[n],e._size[n]);}var l=e._values,p=e._index,d=e._ptr,h=t.dimension(0),f=t.dimension(1),m=[],y=[];h.forEach(function(e,t){y[e]=t[0],m[e]=!0;});var g=l?[]:void 0,x=[],b=[];return f.forEach(function(e){for(b.push(x.length),o=d[e],a=d[e+1];o<a;o++){n=p[o],!0===m[n]&&(x.push(y[n]),g&&g.push(l[o]));}}),b.push(x.length),new i({values:g,index:x,ptr:b,size:s,datatype:e._datatype});}function c(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,o=t.size(),a=t.isScalar();if(h(n)?(i=n.size(),n=n.toArray()):i=Fe(n),a){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r);}else{if(1!==o.length&&2!==o.length)throw new Ie(o.length,e._size.length,"<");if(i.length<o.length){for(var s=0,u=0;1===o[s]&&1===i[s];){s++;}for(;1===o[s];){u++,s++;}n=qe(n,o.length,u,i);}if(!Z(o,i))throw new Ie(o,i,">");for(var c=t.min()[0],l=t.min()[1],p=i[0],d=i[1],f=0;f<p;f++){for(var m=0;m<d;m++){var y=n[f][m];e.set([f+c,m+l],y,r);}}}return e;}function l(e,t,n,r){if(n-t==0)return n;for(var i=t;i<n;i++){if(r[i]===e)return i;}return t;}function m(e,t,n,r,i,o,a){i.splice(e,0,r),o.splice(e,0,t);for(var s=n+1;s<a.length;s++){a[s]++;}}function y(e,r,i,o){var a=o||0,s=n,u=0;p(e._datatype)&&(s=t.find(n,[e._datatype,e._datatype])||n,u=t.convert(0,e._datatype),a=t.convert(a,e._datatype));var c,l,d,h=!s(a,u),f=e._size[0],m=e._size[1];if(i>m){for(l=m;l<i;l++){if(e._ptr[l]=e._values.length,h)for(c=0;c<f;c++){e._values.push(a),e._index.push(c);}}e._ptr[i]=e._values.length;}else i<m&&(e._ptr.splice(i+1,m-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(m=i,r>f){if(h){var y=0;for(l=0;l<m;l++){e._ptr[l]=e._ptr[l]+y,d=e._ptr[l+1]+y;var g=0;for(c=f;c<r;c++,g++){e._values.splice(d+g,0,a),e._index.splice(d+g,0,c),y++;}}e._ptr[m]=e._values.length;}}else if(r<f){var v=0;for(l=0;l<m;l++){e._ptr[l]=e._ptr[l]-v;var x=e._ptr[l],b=e._ptr[l+1]-v;for(d=x;d<b;d++){(c=e._index[d])>r-1&&(e._values.splice(d,1),e._index.splice(d,1),v++);}}e._ptr[l]=e._values.length;}return e._size[0]=r,e._size[1]=i,e;}function g(e,t,n,r,i){var o,a,s=r[0],u=r[1],c=[];for(o=0;o<s;o++){for(c[o]=[],a=0;a<u;a++){c[o][a]=0;}}for(a=0;a<u;a++){for(var l=n[a],p=n[a+1],d=l;d<p;d++){c[o=t[d]][a]=e?i?W(e[d]):e[d]:1;}}return c;}return i.prototype=new r(),i.prototype.createSparseMatrix=function(e,t){return new i(e,t);},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Qe(this._values,G);},i.prototype.storage=function(){return"sparse";},i.prototype.datatype=function(){return this._datatype;},i.prototype.create=function(e,t){return new i(e,t);},i.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0;},i.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,e);case 2:case 3:return c(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments");}},i.prototype.get=function(e){if(!d(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ie(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];ke(t,this._size[0]),ke(n,this._size[1]);var r=l(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0;},i.prototype.set=function(e,r,i){if(!d(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ie(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var o=e[0],a=e[1],s=this._size[0],u=this._size[1],c=n,h=0;p(this._datatype)&&(c=t.find(n,[this._datatype,this._datatype])||n,h=t.convert(0,this._datatype)),(o>s-1||a>u-1)&&(y(this,Math.max(o+1,s),Math.max(a+1,u),i),s=this._size[0],u=this._size[1]),ke(o,s),ke(a,u);var f=l(o,this._ptr[a],this._ptr[a+1],this._index);return f<this._ptr[a+1]&&this._index[f]===o?c(r,h)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var o=t+1;o<i.length;o++){i[o]--;}}(f,a,this._values,this._index,this._ptr):this._values[f]=r:m(f,o,a,r,this._values,this._index,this._ptr),this;},i.prototype.resize=function(e,t,n){if(!f(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map(function(e){return Array.isArray(e)&&1===e.length?e[0]:e;});if(2!==r.length)throw new Error("Only two dimensions matrix are supported");return r.forEach(function(e){if(!a(e)||!ae(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Re(r)+")");}),y(n?this.clone():this,r[0],r[1],t);},i.prototype.reshape=function(e,t){if(!d(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(e.forEach(function(t){if(!a(t)||!ae(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Re(e)+")");}),this._size[0]*this._size[1]!=e[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var r=[],i=0;i<n._ptr.length;i++){for(var o=0;o<n._ptr[i+1]-n._ptr[i];o++){r.push(i);}}for(var s=n._values.slice(),u=n._index.slice(),c=0;c<n._index.length;c++){var p=u[c],h=r[c],f=p*n._size[1]+h;r[c]=f%e[1],u[c]=Math.floor(f/e[1]);}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var y=0;y<n._ptr.length;y++){n._ptr[y]=0;}for(var g=0;g<s.length;g++){var v=u[g],x=r[g],b=s[g];m(l(v,n._ptr[x],n._ptr[x+1],n._index),v,x,b,n._values,n._index,n._ptr);}return n;},i.prototype.clone=function(){return new i({values:this._values?W(this._values):void 0,index:W(this._index),ptr:W(this._ptr),size:W(this._size),datatype:this._datatype});},i.prototype.size=function(){return this._size.slice(0);},i.prototype.map=function(e,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var o=this;return function(e,r,o,a,s,u,c){var l=[],d=[],h=[],f=n,m=0;p(e._datatype)&&(f=t.find(n,[e._datatype,e._datatype])||n,m=t.convert(0,e._datatype));for(var y=function y(e,t,n){e=u(e,t,n),f(e,m)||(l.push(e),d.push(t));},g=a;g<=s;g++){h.push(l.length);var v=e._ptr[g],x=e._ptr[g+1];if(c)for(var b=v;b<x;b++){var w=e._index[b];w>=r&&w<=o&&y(e._values[b],w-r,g-a);}else{for(var S={},M=v;M<x;M++){var _=e._index[M];S[_]=e._values[M];}for(var E=r;E<=o;E++){var A=E in S?S[E]:0;y(A,E-r,g-a);}}}return h.push(l.length),new i({values:l,index:d,ptr:h,size:[o-r+1,s-a+1]});}(this,0,this._size[0]-1,0,this._size[1]-1,function(t,n,r){return e(t,[n,r],o);},r);},i.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var o=this._ptr[i],a=this._ptr[i+1];if(t)for(var s=o;s<a;s++){var u=this._index[s];e(this._values[s],[u,i],this);}else{for(var c={},l=o;l<a;l++){c[this._index[l]]=this._values[l];}for(var p=0;p<n;p++){e(p in c?c[p]:0,[p,i],this);}}}},i.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0);},i.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1);},i.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+Re(t,e)+" x "+Re(n,e)+"] density: "+Re(r,e)+"\n",o=0;o<n;o++){for(var a=this._ptr[o],s=this._ptr[o+1],u=a;u<s;u++){i+="\n    ("+Re(this._index[u],e)+", "+Re(o,e)+") ==> "+(this._values?Re(this._values[u],e):"X");}}return i;},i.prototype.toString=function(){return Re(this.toArray());},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype};},i.prototype.diagonal=function(e){if(e){if(s(e)&&(e=e.toNumber()),!a(e)||!ae(e))throw new TypeError("The parameter k must be an integer number");}else e=0;var t=e>0?e:0,n=e<0?-e:0,r=this._size[0],o=this._size[1],u=Math.min(r-n,o-t),c=[],l=[],p=[];p[0]=0;for(var d=t;d<o&&c.length<u;d++){for(var h=this._ptr[d],f=this._ptr[d+1],m=h;m<f;m++){var y=this._index[m];if(y===d-t+n){c.push(this._values[m]),l[c.length-1]=y-n;break;}}}return p.push(c.length),new i({values:c,index:l,ptr:p,size:[u,1]});},i.fromJSON=function(e){return new i(e);},i.diagonal=function(e,r,o,u,c){if(!d(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(s(e)&&(e=e.toNumber()),!a(e)||!ae(e)||e<1)throw new Error("Size values must be positive integers");return e;}),o){if(s(o)&&(o=o.toNumber()),!a(o)||!ae(o))throw new TypeError("The parameter k must be an integer number");}else o=0;var l=n,f=0;p(c)&&(l=t.find(n,[c,c])||n,f=t.convert(0,c));var m,y=o>0?o:0,g=o<0?-o:0,v=e[0],x=e[1],b=Math.min(v-g,x-y);if(d(r)){if(r.length!==b)throw new Error("Invalid value array length");m=function m(e){return r[e];};}else if(h(r)){var w=r.size();if(1!==w.length||w[0]!==b)throw new Error("Invalid matrix length");m=function m(e){return r.get([e]);};}else m=function m(){return r;};for(var S=[],M=[],_=[],E=0;E<x;E++){_.push(S.length);var A=E-y;if(A>=0&&A<b){var T=m(A);l(T,f)||(M.push(A+g),S.push(T));}}return _.push(S.length),new i({values:S,index:M,ptr:_,size:[v,x]});},i.prototype.swapRows=function(e,t){if(!(a(e)&&ae(e)&&a(t)&&ae(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return ke(e,this._size[0]),ke(t,this._size[0]),i._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this;},i._forEachRow=function(e,t,n,r,i){for(var o=r[e],a=r[e+1],s=o;s<a;s++){i(n[s],t[s]);}},i._swapRows=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=o[a],u=o[a+1],c=l(e,s,u,i),p=l(t,s,u,i);if(c<u&&p<u&&i[c]===e&&i[p]===t){if(r){var d=r[c];r[c]=r[p],r[p]=d;}}else if(c<u&&i[c]===e&&(p>=u||i[p]!==t)){var h=r?r[c]:void 0;i.splice(p,0,t),r&&r.splice(p,0,h),i.splice(p<=c?c+1:c,1),r&&r.splice(p<=c?c+1:c,1);}else if(p<u&&i[p]===t&&(c>=u||i[c]!==e)){var f=r?r[p]:void 0;i.splice(c,0,e),r&&r.splice(c,0,f),i.splice(c<=p?p+1:p,1),r&&r.splice(c<=p?p+1:p,1);}}},i;},{isClass:!0}),$o=et("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],function(e){var t=e.typed,n=(e.Matrix,e.DenseMatrix),r=e.SparseMatrix;return t("matrix",{"":function _(){return i([]);},string:function string(e){return i([],e);},"string, string":function stringString(e,t){return i([],e,t);},Array:function Array(e){return i(e);},Matrix:function Matrix(e){return i(e,e.storage());},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(e,t,i){if("dense"===t||"default"===t||void 0===t)return new n(e,i);if("sparse"===t)return new r(e,i);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".");}}),Jo=et("cbrt",["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],function(e){var t=e.config,n=e.typed,r=e.isNegative,i=e.unaryMinus,o=e.matrix,a=e.Complex,l=e.BigNumber,p=e.Fraction;return n("cbrt",{number:Tr,Complex:d,"Complex, boolean":d,BigNumber:function BigNumber(e){return e.cbrt();},Unit:function Unit(e){if(e.value&&u(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=d(e.value),t;}var n,o=r(e.value);o&&(e.value=i(e.value)),n=s(e.value)?new l(1).div(3):c(e.value)?new p(1,3):1/3;var a=e.pow(n);return o&&(a.value=i(a.value)),a;},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});function d(e,n){var r=e.arg()/3,i=e.abs(),s=new a(Tr(i),0).mul(new a(0,r).exp());if(n){var u=[s,new a(Tr(i),0).mul(new a(0,r+2*Math.PI/3).exp()),new a(Tr(i),0).mul(new a(0,r-2*Math.PI/3).exp())];return"Array"===t.matrix?u:o(u);}return s;}}),Qo=et("algorithm01",["typed"],function(e){var t=e.typed;return function(e,n,r,i){var o=e._data,a=e._size,s=e._datatype,u=n._values,c=n._index,l=n._ptr,p=n._size,d=n._datatype;if(a.length!==p.length)throw new Ie(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,f,m=a[0],y=a[1],g="string"==typeof s&&s===d?s:void 0,v=g?t.find(r,[g,g]):r,x=[];for(h=0;h<m;h++){x[h]=[];}var b=[],w=[];for(f=0;f<y;f++){for(var S=f+1,M=l[f],_=l[f+1],E=M;E<_;E++){b[h=c[E]]=i?v(u[E],o[h][f]):v(o[h][f],u[E]),w[h]=S;}for(h=0;h<m;h++){w[h]===S?x[h][f]=b[h]:x[h][f]=o[h][f];}}return e.createDenseMatrix({data:x,size:[m,y],datatype:g});};}),Ko=et("algorithm04",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var o=e._values,a=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,p=r._index,d=r._ptr,h=r._size,f=r._datatype;if(u.length!==h.length)throw new Ie(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");var m,y=u[0],g=u[1],v=n,x=0,b=i;"string"==typeof c&&c===f&&(m=c,v=t.find(n,[m,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,S,M,_,E,A=o&&l?[]:void 0,T=[],N=[],D=o&&l?[]:void 0,C=o&&l?[]:void 0,R=[],P=[];for(S=0;S<g;S++){N[S]=T.length;var O=S+1;for(_=s[S],E=s[S+1],M=_;M<E;M++){w=a[M],T.push(w),R[w]=O,D&&(D[w]=o[M]);}for(_=d[S],E=d[S+1],M=_;M<E;M++){if(R[w=p[M]]===O){if(D){var L=b(D[w],l[M]);v(L,x)?R[w]=null:D[w]=L;}}else T.push(w),P[w]=O,C&&(C[w]=l[M]);}if(D&&C)for(M=N[S];M<T.length;){R[w=T[M]]===O?(A[M]=D[w],M++):P[w]===O?(A[M]=C[w],M++):T.splice(M,1);}}return N[g]=T.length,e.createSparseMatrix({values:A,index:T,ptr:N,size:[y,g],datatype:m});};}),ea=et("algorithm10",["typed","DenseMatrix"],function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,i,o){var a=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,d=c[0],h=c[1],f=i;"string"==typeof l&&(p=l,r=t.convert(r,p),f=t.find(i,[p,p]));for(var m=[],y=[],g=[],v=0;v<h;v++){for(var x=v+1,b=u[v],w=u[v+1],S=b;S<w;S++){var M=s[S];y[M]=a[S],g[M]=x;}for(var _=0;_<d;_++){0===v&&(m[_]=[]),g[_]===x?m[_][v]=o?f(r,y[_]):f(y[_],r):m[_][v]=r;}}return new n({data:m,size:[d,h],datatype:p});};}),ta=et("algorithm13",["typed"],function(e){var t=e.typed;return function(e,n,r){var i,o=e._data,a=e._size,s=e._datatype,u=n._data,c=n._size,l=n._datatype,p=[];if(a.length!==c.length)throw new Ie(a.length,c.length);for(var d=0;d<a.length;d++){if(a[d]!==c[d])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+c+")");p[d]=a[d];}var h=r;"string"==typeof s&&s===l&&(i=s,h=t.find(r,[i,i]));var f=p.length>0?function e(t,n,r,i,o,a){var s=[];if(n===r.length-1)for(var u=0;u<i;u++){s[u]=t(o[u],a[u]);}else for(var c=0;c<i;c++){s[c]=e(t,n+1,r,r[n+1],o[c],a[c]);}return s;}(h,0,p,p[0],o,u):[];return e.createDenseMatrix({data:f,size:p,datatype:i});};}),na=et("algorithm14",["typed"],function(e){var t=e.typed;return function(e,n,r,i){var o,a=e._data,s=e._size,u=e._datatype,c=r;"string"==typeof u&&(o=u,n=t.convert(n,o),c=t.find(r,[o,o]));var l=s.length>0?function e(t,n,r,i,o,a,s){var u=[];if(n===r.length-1)for(var c=0;c<i;c++){u[c]=s?t(a,o[c]):t(o[c],a);}else for(var l=0;l<i;l++){u[l]=e(t,n+1,r,r[n+1],o[l],a,s);}return u;}(c,0,s,s[0],a,n,i):[];return e.createDenseMatrix({data:l,size:W(s),datatype:o});};}),ra=et("gcd",["typed","matrix","equalScalar","BigNumber","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.BigNumber,o=e.DenseMatrix,a=Qo({typed:t}),s=Ko({typed:t,equalScalar:r}),u=ea({typed:t,DenseMatrix:o}),c=ta({typed:t}),l=na({typed:t});return t("gcd",{"number, number":Pr,"BigNumber, BigNumber":function BigNumberBigNumber(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function gcd must be integer numbers");var n=new i(0);for(;!t.isZero();){var r=e.mod(t);e=t,t=r;}return e.lt(n)?e.neg():e;},"Fraction, Fraction":function FractionFraction(e,t){return e.gcd(t);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return s(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return a(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return a(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return c(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, number | BigNumber":function SparseMatrixNumberBigNumber(e,t){return u(e,t,this,!1);},"DenseMatrix, number | BigNumber":function DenseMatrixNumberBigNumber(e,t){return l(e,t,this,!1);},"number | BigNumber, SparseMatrix":function numberBigNumberSparseMatrix(e,t){return u(t,e,this,!0);},"number | BigNumber, DenseMatrix":function numberBigNumberDenseMatrix(e,t){return l(t,e,this,!0);},"Array, number | BigNumber":function ArrayNumberBigNumber(e,t){return l(n(e),t,this,!1).valueOf();},"number | BigNumber, Array":function numberBigNumberArray(e,t){return l(n(t),e,this,!0).valueOf();},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function ArrayMatrixNumberBigNumberArrayMatrixNumberBigNumberArrayMatrixNumberBigNumber(e,t,n){for(var r=this(e,t),i=0;i<n.length;i++){r=this(r,n[i]);}return r;}});}),ia=et("algorithm02",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i,o){var a=e._data,s=e._size,u=e._datatype,c=r._values,l=r._index,p=r._ptr,d=r._size,h=r._datatype;if(s.length!==d.length)throw new Ie(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,m=s[0],y=s[1],g=n,v=0,x=i;"string"==typeof u&&u===h&&(f=u,g=t.find(n,[f,f]),v=t.convert(0,f),x=t.find(i,[f,f]));for(var b=[],w=[],S=[],M=0;M<y;M++){S[M]=w.length;for(var _=p[M],E=p[M+1],A=_;A<E;A++){var T=l[A],N=o?x(c[A],a[T][M]):x(a[T][M],c[A]);g(N,v)||(w.push(T),b.push(N));}}return S[y]=w.length,r.createSparseMatrix({values:b,index:w,ptr:S,size:[m,y],datatype:f});};}),oa=et("algorithm03",["typed"],function(e){var t=e.typed;return function(e,n,r,i){var o=e._data,a=e._size,s=e._datatype,u=n._values,c=n._index,l=n._ptr,p=n._size,d=n._datatype;if(a.length!==p.length)throw new Ie(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,f=a[0],m=a[1],y=0,g=r;"string"==typeof s&&s===d&&(h=s,y=t.convert(0,h),g=t.find(r,[h,h]));for(var v=[],x=0;x<f;x++){v[x]=[];}for(var b=[],w=[],S=0;S<m;S++){for(var M=S+1,_=l[S],E=l[S+1],A=_;A<E;A++){var T=c[A];b[T]=i?g(u[A],o[T][S]):g(o[T][S],u[A]),w[T]=M;}for(var N=0;N<f;N++){w[N]===M?v[N][S]=b[N]:v[N][S]=i?g(y,o[N][S]):g(o[N][S],y);}}return e.createDenseMatrix({data:v,size:[f,m],datatype:h});};}),aa=et("algorithm05",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var o=e._values,a=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,p=r._index,d=r._ptr,h=r._size,f=r._datatype;if(u.length!==h.length)throw new Ie(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");var m,y=u[0],g=u[1],v=n,x=0,b=i;"string"==typeof c&&c===f&&(m=c,v=t.find(n,[m,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,S,M,_,E=o&&l?[]:void 0,A=[],T=[],N=E?[]:void 0,D=E?[]:void 0,C=[],R=[];for(S=0;S<g;S++){T[S]=A.length;var P=S+1;for(M=s[S],_=s[S+1];M<_;M++){w=a[M],A.push(w),C[w]=P,N&&(N[w]=o[M]);}for(M=d[S],_=d[S+1];M<_;M++){C[w=p[M]]!==P&&A.push(w),R[w]=P,D&&(D[w]=l[M]);}if(E)for(M=T[S];M<A.length;){var O=C[w=A[M]],L=R[w];if(O===P||L===P){var I=b(O===P?N[w]:x,L===P?D[w]:x);v(I,x)?A.splice(M,1):(E.push(I),M++);}}}return T[g]=A.length,e.createSparseMatrix({values:E,index:A,ptr:T,size:[y,g],datatype:m});};}),sa=et("algorithm11",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i,o){var a=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,d=c[0],h=c[1],f=n,m=0,y=i;"string"==typeof l&&(p=l,f=t.find(n,[p,p]),m=t.convert(0,p),r=t.convert(r,p),y=t.find(i,[p,p]));for(var g=[],v=[],x=[],b=0;b<h;b++){x[b]=v.length;for(var w=u[b],S=u[b+1],M=w;M<S;M++){var _=s[M],E=o?y(r,a[M]):y(a[M],r);f(E,m)||(v.push(_),g.push(E));}}return x[h]=v.length,e.createSparseMatrix({values:g,index:v,ptr:x,size:[d,h],datatype:p});};}),ua=et("algorithm12",["typed","DenseMatrix"],function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,i,o){var a=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,d=c[0],h=c[1],f=i;"string"==typeof l&&(p=l,r=t.convert(r,p),f=t.find(i,[p,p]));for(var m=[],y=[],g=[],v=0;v<h;v++){for(var x=v+1,b=u[v],w=u[v+1],S=b;S<w;S++){var M=s[S];y[M]=a[S],g[M]=x;}for(var _=0;_<d;_++){0===v&&(m[_]=[]),g[_]===x?m[_][v]=o?f(r,y[_]):f(y[_],r):m[_][v]=o?f(r,0):f(0,r);}}return new n({data:m,size:[d,h],datatype:p});};}),ca=et("mod",["typed","matrix","equalScalar","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,o=ia({typed:t,equalScalar:r}),a=oa({typed:t}),s=aa({typed:t,equalScalar:r}),u=sa({typed:t,equalScalar:r}),c=ua({typed:t,DenseMatrix:i}),l=ta({typed:t}),p=na({typed:t});return t("mod",{"number, number":Fr,"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return t.isZero()?e:e.mod(t);},"Fraction, Fraction":function FractionFraction(e,t){return e.mod(t);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return s(e,t,this,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return a(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return l(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return u(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return p(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return c(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return p(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return p(n(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return p(n(t),e,this,!0).valueOf();}});}),la=et("algorithm06",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var o=e._values,a=e._size,s=e._datatype,u=r._values,c=r._size,l=r._datatype;if(a.length!==c.length)throw new Ie(a.length,c.length);if(a[0]!==c[0]||a[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+c+")");var p,d=a[0],h=a[1],f=n,m=0,y=i;"string"==typeof s&&s===l&&(p=s,f=t.find(n,[p,p]),m=t.convert(0,p),y=t.find(i,[p,p]));for(var g=o&&u?[]:void 0,v=[],x=[],b=g?[]:void 0,w=[],S=[],M=0;M<h;M++){x[M]=v.length;var _=M+1;if(ar(e,M,w,b,S,_,v,y),ar(r,M,w,b,S,_,v,y),b)for(var E=x[M];E<v.length;){var A=v[E];if(S[A]===_){var T=b[A];f(T,m)?v.splice(E,1):(g.push(T),E++);}else v.splice(E,1);}else for(var N=x[M];N<v.length;){S[v[N]]!==_?v.splice(N,1):N++;}}return x[h]=v.length,e.createSparseMatrix({values:g,index:v,ptr:x,size:[d,h],datatype:p});};}),pa=et("nthRoot",["typed","matrix","equalScalar","BigNumber"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.BigNumber,o=Qo({typed:t}),a=ia({typed:t,equalScalar:r}),s=la({typed:t,equalScalar:r}),u=sa({typed:t,equalScalar:r}),c=ta({typed:t}),l=na({typed:t}),p="Complex number not supported in function nthRoot. Use nthRoots instead.";return t("nthRoot",{number:function number(e){return zr(e,2);},"number, number":zr,BigNumber:function BigNumber(e){return d(e,new i(2));},Complex:function Complex(e){throw new Error(p);},"Complex, number":function ComplexNumber(e,t){throw new Error(p);},"BigNumber, BigNumber":d,"Array | Matrix":function ArrayMatrix(e){return this(e,2);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){if(1===t.density())return s(e,t,this);throw new Error("Root must be non-zero");},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return a(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){if(1===t.density())return o(e,t,this,!1);throw new Error("Root must be non-zero");},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return c(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, number | BigNumber":function SparseMatrixNumberBigNumber(e,t){return u(e,t,this,!1);},"DenseMatrix, number | BigNumber":function DenseMatrixNumberBigNumber(e,t){return l(e,t,this,!1);},"number | BigNumber, SparseMatrix":function numberBigNumberSparseMatrix(e,t){if(1===t.density())return u(t,e,this,!0);throw new Error("Root must be non-zero");},"number | BigNumber, DenseMatrix":function numberBigNumberDenseMatrix(e,t){return l(t,e,this,!0);},"Array, number | BigNumber":function ArrayNumberBigNumber(e,t){return this(n(e),t).valueOf();},"number | BigNumber, Array":function numberBigNumberArray(e,t){return this(e,n(t)).valueOf();}});function d(e,t){var n=i.precision,r=i.clone({precision:n+2}),o=new i(0),a=new r(1),s=t.isNegative();if(s&&(t=t.neg()),t.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!t.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return s?new r(1/0):0;if(!e.isFinite())return s?o:e;var u=e.abs().pow(a.div(t));return u=e.isNeg()?u.neg():u,new i((s?a.div(u):u).toPrecision(n));}}),da=et("xgcd",["typed","config","matrix","BigNumber"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.BigNumber;return t("xgcd",{"number, number":function numberNumber(e,t){var i=jr(e,t);return"Array"===n.matrix?i:r(i);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){var o,a,s,u,c=new i(0),l=new i(1),p=c,d=l,h=l,f=c;if(!e.isInt()||!t.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!t.isZero();){a=e.div(t).floor(),s=e.mod(t),o=p,p=d.minus(a.times(p)),d=o,o=h,h=f.minus(a.times(h)),f=o,e=t,t=s;}u=e.lt(c)?[e.neg(),d.neg(),f.neg()]:[e,e.isZero()?0:d,f];return"Array"===n.matrix?u:r(u);}});}),ha=et("bitAnd",["typed","matrix","equalScalar"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=ia({typed:t,equalScalar:r}),o=la({typed:t,equalScalar:r}),a=sa({typed:t,equalScalar:r}),s=ta({typed:t}),u=na({typed:t});return t("bitAnd",{"number, number":ui,"BigNumber, BigNumber":Kr,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return o(e,t,this,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return i(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return i(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return s(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return a(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return u(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return a(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return u(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return u(n(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return u(n(t),e,this,!0).valueOf();}});}),fa=et("algorithm07",["typed","DenseMatrix"],function(e){var t=e.typed,n=e.DenseMatrix;return function(e,i,o){var a=e._size,s=e._datatype,u=i._size,c=i._datatype;if(a.length!==u.length)throw new Ie(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");var l,p,d,h=a[0],f=a[1],m=0,y=o;"string"==typeof s&&s===c&&(l=s,m=t.convert(0,l),y=t.find(o,[l,l]));var g=[];for(p=0;p<h;p++){g[p]=[];}var v=[],x=[],b=[],w=[];for(d=0;d<f;d++){var S=d+1;for(r(e,d,b,v,S),r(i,d,w,x,S),p=0;p<h;p++){var M=b[p]===S?v[p]:m,_=w[p]===S?x[p]:m;g[p][d]=y(M,_);}}return new n({data:g,size:[h,f],datatype:l});};function r(e,t,n,r,i){for(var o=e._values,a=e._index,s=e._ptr,u=s[t],c=s[t+1];u<c;u++){var l=a[u];n[l]=i,r[l]=o[u];}}}),ma=et("bitXor",["typed","matrix","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.DenseMatrix,i=oa({typed:t}),o=fa({typed:t,DenseMatrix:r}),a=ua({typed:t,DenseMatrix:r}),s=ta({typed:t}),u=na({typed:t});return t("bitXor",{"number, number":pi,"BigNumber, BigNumber":ii,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return o(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return i(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return i(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return s(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return a(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return u(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return a(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return u(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return u(n(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return u(n(t),e,this,!0).valueOf();}});}),ya=et("or",["typed","matrix","equalScalar","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,o=oa({typed:t}),a=aa({typed:t,equalScalar:r}),s=ua({typed:t,DenseMatrix:i}),u=ta({typed:t}),c=na({typed:t});return t("or",{"number, number":xi,"Complex, Complex":function ComplexComplex(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im;},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return!e.isZero()&&!e.isNaN()||!t.isZero()&&!t.isNaN();},"Unit, Unit":function UnitUnit(e,t){return this(e.value||0,t.value||0);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return c(n(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return c(n(t),e,this,!0).valueOf();}});}),ga=et("concat",["typed","matrix","isInteger"],function(e){var t=e.typed,n=e.matrix,r=e.isInteger;return t("concat",{"...Array | Matrix | number | BigNumber":function ArrayMatrixNumberBigNumber(e){var t,i,o=e.length,u=-1,c=!1,l=[];for(t=0;t<o;t++){var p=e[t];if(h(p)&&(c=!0),a(p)||s(p)){if(t!==o-1)throw new Error("Dimension must be specified as last argument");if(i=u,u=p.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||t>0&&u>i)throw new Be(u,i+1);}else{var d=W(p).valueOf(),f=Fe(d);if(l[t]=d,i=u,u=f.length-1,t>0&&u!==i)throw new Ie(i+1,u+1);}}if(0===l.length)throw new SyntaxError("At least one matrix expected");for(var m=l.shift();l.length;){m=va(m,l.shift(),u,0);}return c?n(m):m;},"...string":function string(e){return e.join("");}});});function va(e,t,n,r){if(r<n){if(e.length!==t.length)throw new Ie(e.length,t.length);for(var i=[],o=0;o<e.length;o++){i[o]=va(e[o],t[o],n,r+1);}return i;}return e.concat(t);}var xa=et("diag",["typed","matrix","DenseMatrix","SparseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.DenseMatrix,i=e.SparseMatrix;return t("diag",{Array:function Array(e){return o(e,0,Fe(e),null);},"Array, number":function ArrayNumber(e,t){return o(e,t,Fe(e),null);},"Array, BigNumber":function ArrayBigNumber(e,t){return o(e,t.toNumber(),Fe(e),null);},"Array, string":function ArrayString(e,t){return o(e,0,Fe(e),t);},"Array, number, string":function ArrayNumberString(e,t,n){return o(e,t,Fe(e),n);},"Array, BigNumber, string":function ArrayBigNumberString(e,t,n){return o(e,t.toNumber(),Fe(e),n);},Matrix:function Matrix(e){return o(e,0,e.size(),e.storage());},"Matrix, number":function MatrixNumber(e,t){return o(e,t,e.size(),e.storage());},"Matrix, BigNumber":function MatrixBigNumber(e,t){return o(e,t.toNumber(),e.size(),e.storage());},"Matrix, string":function MatrixString(e,t){return o(e,0,e.size(),t);},"Matrix, number, string":function MatrixNumberString(e,t,n){return o(e,t,e.size(),n);},"Matrix, BigNumber, string":function MatrixBigNumberString(e,t,n){return o(e,t.toNumber(),e.size(),n);}});function o(e,t,o,a){if(!ae(t))throw new TypeError("Second parameter in function diag must be an integer");var s=t>0?t:0,u=t<0?-t:0;switch(o.length){case 1:return function(e,t,n,o,a,s){var u=[o+a,o+s];if(n&&"sparse"!==n&&"dense"!==n)throw new TypeError("Unknown matrix type ".concat(n,'"'));var c="sparse"===n?i.diagonal(u,e,t):r.diagonal(u,e,t);return null!==n?c:c.valueOf();}(e,t,a,o[0],u,s);case 2:return function(e,t,r,i,o,a){if(h(e)){var s=e.diagonal(t);return null!==r?r!==s.storage()?n(s,r):s:s.valueOf();}for(var u=Math.min(i[0]-o,i[1]-a),c=[],l=0;l<u;l++){c[l]=e[l+o][l+a];}return null!==r?n(c):c;}(e,t,a,o,u,s);}throw new RangeError("Matrix for function diag must be 2 dimensional");}}),ba=et("identity",["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.BigNumber,o=e.DenseMatrix,a=e.SparseMatrix;return t("identity",{"":function _(){return"Matrix"===n.matrix?r([]):[];},string:function string(e){return r(e);},"number | BigNumber":function numberBigNumber(e){return c(e,e,"Matrix"===n.matrix?"dense":void 0);},"number | BigNumber, string":function numberBigNumberString(e,t){return c(e,e,t);},"number | BigNumber, number | BigNumber":function numberBigNumberNumberBigNumber(e,t){return c(e,t,"Matrix"===n.matrix?"dense":void 0);},"number | BigNumber, number | BigNumber, string":function numberBigNumberNumberBigNumberString(e,t,n){return c(e,t,n);},Array:function Array(e){return u(e);},"Array, string":function ArrayString(e,t){return u(e,t);},Matrix:function Matrix(e){return u(e.valueOf(),e.storage());},"Matrix, string":function MatrixString(e,t){return u(e.valueOf(),t);}});function u(e,t){switch(e.length){case 0:return t?r(t):[];case 1:return c(e[0],e[0],t);case 2:return c(e[0],e[1],t);default:throw new Error("Vector containing two values expected");}}function c(e,t,n){var r=s(e)||s(t)?i:null;if(s(e)&&(e=e.toNumber()),s(t)&&(t=t.toNumber()),!ae(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!ae(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var u=r?new i(1):1,c=r?new r(0):0,l=[e,t];if(n){if("sparse"===n)return a.diagonal(l,u,0,c);if("dense"===n)return o.diagonal(l,u,0,c);throw new TypeError('Unknown matrix type "'.concat(n,'"'));}for(var p=Ue([],l,c),d=e<t?e:t,h=0;h<d;h++){p[h][h]=u;}return p;}}),wa=et("ones",["typed","config","matrix","BigNumber"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.BigNumber;return t("ones",{"":function _(){return"Array"===n.matrix?o([]):o([],"default");},"...number | BigNumber | string":function numberBigNumberString(e){if("string"==typeof e[e.length-1]){var t=e.pop();return o(e,t);}return"Array"===n.matrix?o(e):o(e,"default");},Array:o,Matrix:function Matrix(e){var t=e.storage();return o(e.valueOf(),t);},"Array | Matrix, string":function ArrayMatrixString(e,t){return o(e.valueOf(),t);}});function o(e,t){var n=function(e){var t=!1;return e.forEach(function(e,n,r){s(e)&&(t=!0,r[n]=e.toNumber());}),t;}(e)?new i(1):1;if(function(e){e.forEach(function(e){if("number"!=typeof e||!ae(e)||e<0)throw new Error("Parameters in function ones must be positive integers");});}(e),t){var o=r(t);return e.length>0?o.resize(e,n):o;}var a=[];return e.length>0?Ue(a,e,n):a;}}),Sa=et("reshape",["typed","isInteger","matrix"],function(e){var t=e.typed,n=e.isInteger,r=e.matrix;return t("reshape",{"Matrix, Array":function MatrixArray(e,t){return e.reshape?e.reshape(t):r(je(e.valueOf(),t));},"Array, Array":function ArrayArray(e,t){return t.forEach(function(e){if(!n(e))throw new TypeError("Invalid size for dimension: "+e);}),je(e,t);}});});function Ma(){throw new Error('No "bignumber" implementation available');}function _a(){throw new Error('No "fraction" implementation available');}function Ea(){throw new Error('No "matrix" implementation available');}var Aa=et("size",["typed","config","?matrix"],function(e){var t=e.typed,n=e.config,r=e.matrix;return t("size",{Matrix:function Matrix(e){return e.create(e.size());},Array:Fe,string:function string(e){return"Array"===n.matrix?[e.length]:r([e.length]);},"number | Complex | BigNumber | Unit | boolean | null":function numberComplexBigNumberUnitBooleanNull(e){return"Array"===n.matrix?[]:r?r([]):Ea();}});});function Ta(e){return(Ta="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function Na(e,t){if(Pa(e)&&Ca(e,t))return e[t];if("function"==typeof e[t]&&Ra(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"');}function Da(e,t,n){if(Pa(e)&&Ca(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"');}function Ca(e,t){return!(!e||"object"!==Ta(e))&&(!!Q(Oa,t)||!(t in Object.prototype)&&!(t in Function.prototype));}function Ra(e,t){return null!=e&&"function"==typeof e[t]&&!(Q(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e))&&(!!Q(La,t)||!(t in Object.prototype)&&!(t in Function.prototype));}function Pa(e){return"object"===Ta(e)&&e&&e.constructor===Object;}var Oa={length:!0,name:!0},La={toString:!0,valueOf:!0,toLocaleString:!0},Ia=et("subset",["typed","matrix"],function(e){var t=e.typed,n=e.matrix;return t("subset",{"Array, Index":function ArrayIndex(e,t){var r=n(e).subset(t);return t.isScalar()?r:r.valueOf();},"Matrix, Index":function MatrixIndex(e,t){return e.subset(t);},"Object, Index":za,"string, Index":Ba,"Array, Index, any":function ArrayIndexAny(e,t,r){return n(W(e)).subset(t,r,void 0).valueOf();},"Array, Index, any, any":function ArrayIndexAnyAny(e,t,r,i){return n(W(e)).subset(t,r,i).valueOf();},"Matrix, Index, any":function MatrixIndexAny(e,t,n){return e.clone().subset(t,n);},"Matrix, Index, any, any":function MatrixIndexAnyAny(e,t,n,r){return e.clone().subset(t,n,r);},"string, Index, string":Fa,"string, Index, string, string":Fa,"Object, Index, any":ka});});function Ba(e,t){if(!v(t))throw new TypeError("Index expected");if(1!==t.size().length)throw new Ie(t.size().length,1);var n=e.length;ke(t.min()[0],n),ke(t.max()[0],n);var r=t.dimension(0),i="";return r.forEach(function(t){i+=e.charAt(t);}),i;}function Fa(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if(1!==t.size().length)throw new Ie(t.size().length,1);if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue");}else r=" ";var i=t.dimension(0);if(i.size()[0]!==n.length)throw new Ie(i.size()[0],n.length);var o=e.length;ke(t.min()[0]),ke(t.max()[0]);for(var a=[],s=0;s<o;s++){a[s]=e.charAt(s);}if(i.forEach(function(e,t){a[e]=n.charAt(t[0]);}),a.length>o)for(var u=o-1,c=a.length;u<c;u++){a[u]||(a[u]=r);}return a.join("");}function za(e,t){if(1!==t.size().length)throw new Ie(t.size(),1);var n=t.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");return Na(e,n);}function ka(e,t,n){if(1!==t.size().length)throw new Ie(t.size(),1);var r=t.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");var i=W(e);return Da(i,r,n),i;}var Ua=et("zeros",["typed","config","matrix","BigNumber"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.BigNumber;return t("zeros",{"":function _(){return"Array"===n.matrix?o([]):o([],"default");},"...number | BigNumber | string":function numberBigNumberString(e){if("string"==typeof e[e.length-1]){var t=e.pop();return o(e,t);}return"Array"===n.matrix?o(e):o(e,"default");},Array:o,Matrix:function Matrix(e){var t=e.storage();return o(e.valueOf(),t);},"Array | Matrix, string":function ArrayMatrixString(e,t){return o(e.valueOf(),t);}});function o(e,t){var n=function(e){var t=!1;return e.forEach(function(e,n,r){s(e)&&(t=!0,r[n]=e.toNumber());}),t;}(e)?new i(0):0;if(function(e){e.forEach(function(e){if("number"!=typeof e||!ae(e)||e<0)throw new Error("Parameters in function zeros must be positive integers");});}(e),t){var o=r(t);return e.length>0?o.resize(e,n):o;}var a=[];return e.length>0?Ue(a,e,n):a;}}),ja=et("to",["typed","matrix"],function(e){var t=e.typed,n=e.matrix,r=ta({typed:t}),i=na({typed:t});return t("to",{"Unit, Unit | string":function UnitUnitString(e,t){return e.to(t);},"Matrix, Matrix":function MatrixMatrix(e,t){return r(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"Matrix, any":function MatrixAny(e,t){return i(e,t,this,!1);},"any, Matrix":function anyMatrix(e,t){return i(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return i(n(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return i(n(t),e,this,!0).valueOf();}});});function Ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable;})),n.push.apply(n,r);}return n;}function qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(n),!0).forEach(function(t){Ga(e,t,n[t]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ha(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t));});}return e;}function Ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;}var Va="Number of decimals in function round must be an integer",Wa=et("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,o=e.BigNumber,a=e.DenseMatrix,s=sa({typed:t,equalScalar:r}),u=ua({typed:t,DenseMatrix:a}),c=na({typed:t});return t("round",qa(qa({},Xa),{},{Complex:function Complex(e){return e.round();},"Complex, number":function ComplexNumber(e,t){if(t%1)throw new TypeError(Va);return e.round(t);},"Complex, BigNumber":function ComplexBigNumber(e,t){if(!t.isInteger())throw new TypeError(Va);var n=t.toNumber();return e.round(n);},"number, BigNumber":function numberBigNumber(e,t){if(!t.isInteger())throw new TypeError(Va);return new o(e).toDecimalPlaces(t.toNumber());},BigNumber:function BigNumber(e){return e.toDecimalPlaces(0);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){if(!t.isInteger())throw new TypeError(Va);return e.toDecimalPlaces(t.toNumber());},Fraction:function Fraction(e){return e.round();},"Fraction, number":function FractionNumber(e,t){if(t%1)throw new TypeError(Va);return e.round(t);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);},"SparseMatrix, number | BigNumber":function SparseMatrixNumberBigNumber(e,t){return s(e,t,this,!1);},"DenseMatrix, number | BigNumber":function DenseMatrixNumberBigNumber(e,t){return c(e,t,this,!1);},"number | Complex | BigNumber, SparseMatrix":function numberComplexBigNumberSparseMatrix(e,t){return r(e,0)?i(t.size(),t.storage()):u(t,e,this,!0);},"number | Complex | BigNumber, DenseMatrix":function numberComplexBigNumberDenseMatrix(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,this,!0);},"Array, number | BigNumber":function ArrayNumberBigNumber(e,t){return c(n(e),t,this,!1).valueOf();},"number | Complex | BigNumber, Array":function numberComplexBigNumberArray(e,t){return c(n(t),e,this,!0).valueOf();}}));}),Xa={number:qr,"number, number":function numberNumber(e,t){if(!ae(t))throw new TypeError(Va);if(t<0||t>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return qr(e,t);}},Ya=et("algorithm08",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var o=e._values,a=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,p=r._index,d=r._ptr,h=r._size,f=r._datatype;if(u.length!==h.length)throw new Ie(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!o||!l)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var m,y=u[0],g=u[1],v=n,x=0,b=i;"string"==typeof c&&c===f&&(m=c,v=t.find(n,[m,m]),x=t.convert(0,m),b=t.find(i,[m,m]));for(var w,S,M,_,E=[],A=[],T=[],N=[],D=[],C=0;C<g;C++){T[C]=A.length;var R=C+1;for(S=s[C],M=s[C+1],w=S;w<M;w++){D[_=a[w]]=R,N[_]=o[w],A.push(_);}for(S=d[C],M=d[C+1],w=S;w<M;w++){D[_=p[w]]===R&&(N[_]=b(N[_],l[w]));}for(w=T[C];w<A.length;){var P=N[_=A[w]];v(P,x)?A.splice(w,1):(E.push(P),w++);}}return T[g]=A.length,e.createSparseMatrix({values:E,index:A,ptr:T,size:[y,g],datatype:m});};}),Za=et("leftShift",["typed","matrix","equalScalar","zeros","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,o=e.DenseMatrix,a=Qo({typed:t}),s=ia({typed:t,equalScalar:r}),u=Ya({typed:t,equalScalar:r}),c=ea({typed:t,DenseMatrix:o}),l=sa({typed:t,equalScalar:r}),p=ta({typed:t}),d=na({typed:t});return t("leftShift",{"number, number":di,"BigNumber, BigNumber":oi,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return u(e,t,this,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return s(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return a(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return p(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, number | BigNumber":function SparseMatrixNumberBigNumber(e,t){return r(t,0)?e.clone():l(e,t,this,!1);},"DenseMatrix, number | BigNumber":function DenseMatrixNumberBigNumber(e,t){return r(t,0)?e.clone():d(e,t,this,!1);},"number | BigNumber, SparseMatrix":function numberBigNumberSparseMatrix(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,this,!0);},"number | BigNumber, DenseMatrix":function numberBigNumberDenseMatrix(e,t){return r(e,0)?i(t.size(),t.storage()):d(t,e,this,!0);},"Array, number | BigNumber":function ArrayNumberBigNumber(e,t){return this(n(e),t).valueOf();},"number | BigNumber, Array":function numberBigNumberArray(e,t){return this(e,n(t)).valueOf();}});}),$a=et("rightLogShift",["typed","matrix","equalScalar","zeros","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,o=e.DenseMatrix,a=Qo({typed:t}),s=ia({typed:t,equalScalar:r}),u=Ya({typed:t,equalScalar:r}),c=ea({typed:t,DenseMatrix:o}),l=sa({typed:t,equalScalar:r}),p=ta({typed:t}),d=na({typed:t});return t("rightLogShift",{"number, number":fi,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return u(e,t,this,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return s(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return a(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return p(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, number | BigNumber":function SparseMatrixNumberBigNumber(e,t){return r(t,0)?e.clone():l(e,t,this,!1);},"DenseMatrix, number | BigNumber":function DenseMatrixNumberBigNumber(e,t){return r(t,0)?e.clone():d(e,t,this,!1);},"number | BigNumber, SparseMatrix":function numberBigNumberSparseMatrix(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,this,!0);},"number | BigNumber, DenseMatrix":function numberBigNumberDenseMatrix(e,t){return r(e,0)?i(t.size(),t.storage()):d(t,e,this,!0);},"Array, number | BigNumber":function ArrayNumberBigNumber(e,t){return this(n(e),t).valueOf();},"number | BigNumber, Array":function numberBigNumberArray(e,t){return this(e,n(t)).valueOf();}});}),Ja=et("compare",["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],function(e){var t=e.typed,n=e.config,r=e.equalScalar,i=e.matrix,o=e.BigNumber,a=e.Fraction,s=e.DenseMatrix,u=oa({typed:t}),c=aa({typed:t,equalScalar:r}),l=ua({typed:t,DenseMatrix:s}),p=ta({typed:t}),d=na({typed:t});return t("compare",{"boolean, boolean":function booleanBoolean(e,t){return e===t?0:e>t?1:-1;},"number, number":function numberNumber(e,t){return be(e,t,n.epsilon)?0:e>t?1:-1;},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return mr(e,t,n.epsilon)?new o(0):new o(e.cmp(t));},"Fraction, Fraction":function FractionFraction(e,t){return new a(e.compare(t));},"Complex, Complex":function ComplexComplex(){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function UnitUnit(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return c(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return u(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return u(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return p(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(i(e),i(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(i(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,i(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return l(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return d(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return l(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return d(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return d(i(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return d(i(t),e,this,!0).valueOf();}});}),Qa=et("compareText",["typed","matrix"],function(e){var t=e.typed,n=e.matrix,r=ta({typed:t}),i=na({typed:t});return t("compareText",{"any, any":Le,"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return r(e,t,Le);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"DenseMatrix, any":function DenseMatrixAny(e,t){return i(e,t,Le,!1);},"any, DenseMatrix":function anyDenseMatrix(e,t){return i(t,e,Le,!0);},"Array, any":function ArrayAny(e,t){return i(n(e),t,Le,!1).valueOf();},"any, Array":function anyArray(e,t){return i(n(t),e,Le,!0).valueOf();}});}),Ka=et("smaller",["typed","config","matrix","DenseMatrix"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,o=oa({typed:t}),a=fa({typed:t,DenseMatrix:i}),s=ua({typed:t,DenseMatrix:i}),u=ta({typed:t}),c=na({typed:t});return t("smaller",{"boolean, boolean":function booleanBoolean(e,t){return e<t;},"number, number":function numberNumber(e,t){return e<t&&!be(e,t,n.epsilon);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.lt(t)&&!mr(e,t,n.epsilon);},"Fraction, Fraction":function FractionFraction(e,t){return-1===e.compare(t);},"Complex, Complex":function ComplexComplex(e,t){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function UnitUnit(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(r(e),r(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(r(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,r(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return c(r(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return c(r(t),e,this,!0).valueOf();}});}),es=et("larger",["typed","config","matrix","DenseMatrix"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,o=oa({typed:t}),a=fa({typed:t,DenseMatrix:i}),s=ua({typed:t,DenseMatrix:i}),u=ta({typed:t}),c=na({typed:t});return t("larger",{"boolean, boolean":function booleanBoolean(e,t){return e>t;},"number, number":function numberNumber(e,t){return e>t&&!be(e,t,n.epsilon);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.gt(t)&&!mr(e,t,n.epsilon);},"Fraction, Fraction":function FractionFraction(e,t){return 1===e.compare(t);},"Complex, Complex":function ComplexComplex(){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function UnitUnit(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(r(e),r(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(r(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,r(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return c(r(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return c(r(t),e,this,!0).valueOf();}});}),ts=et("unequal",["typed","config","equalScalar","matrix","DenseMatrix"],function(e){var t=e.typed,n=(e.config,e.equalScalar),r=e.matrix,i=e.DenseMatrix,o=oa({typed:t}),a=fa({typed:t,DenseMatrix:i}),s=ua({typed:t,DenseMatrix:i}),u=ta({typed:t}),c=na({typed:t});return t("unequal",{"any, any":function anyAny(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:l(e,t);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,l);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,l,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,l,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,l);},"Array, Array":function ArrayArray(e,t){return this(r(e),r(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(r(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,r(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,l,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,l,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,l,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,l,!0);},"Array, any":function ArrayAny(e,t){return c(r(e),t,l,!1).valueOf();},"any, Array":function anyArray(e,t){return c(r(t),e,l,!0).valueOf();}});function l(e,t){return!n(e,t);}}),ns=(et("unequal",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return t("unequal",{"any, any":function anyAny(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t);}});}),et("ImmutableDenseMatrix",["smaller","DenseMatrix"],function(e){var t=e.smaller,n=e.DenseMatrix;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!p(t))throw new Error("Invalid datatype: "+t);if(h(e)||d(e)){var i=new n(e,t);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null;}else if(e&&d(e.data)&&d(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+G(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null;}}return r.prototype=new n(),r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(e){switch(arguments.length){case 1:var t=n.prototype.subset.call(this,e);return h(t)?new r({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments");}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance");},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance");},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance");},r.prototype.clone=function(){return new r({data:W(this._data),size:W(this._size),datatype:this._datatype});},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype};},r.fromJSON=function(e){return new r(e);},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance");},r.prototype.min=function(){if(null===this._min){var e=null;this.forEach(function(n){(null===e||t(n,e))&&(e=n);}),this._min=null!==e?e:void 0;}return this._min;},r.prototype.max=function(){if(null===this._max){var e=null;this.forEach(function(n){(null===e||t(e,n))&&(e=n);}),this._max=null!==e?e:void 0;}return this._max;},r;},{isClass:!0})),rs=et("FibonacciHeap",["smaller","larger"],function(e){var t=e.smaller,n=e.larger,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0;}function o(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1;}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var i=this._minimum;r.left=i,r.right=i.right,i.right=r,r.right.left=r,t(e,i.key)&&(this._minimum=r);}else r.left=r,r.right=r,this._minimum=r;return this._size++,r;},i.prototype.size=function(){return this._size;},i.prototype.clear=function(){this._minimum=null,this._size=0;},i.prototype.isEmpty=function(){return 0===this._size;},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,o=e.degree,s=e.child;o>0;){var u=s.right;s.left.right=s.right,s.right.left=s.left,s.left=i,s.right=i.right,i.right=s,s.right.left=s,s.parent=null,s=u,o--;}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var o,s=Math.floor(Math.log(i)*r)+1,u=new Array(s),c=0,l=e;if(l)for(c++,l=l.right;l!==e;){c++,l=l.right;}for(;c>0;){for(var p=l.degree,d=l.right;o=u[p];){if(n(l.key,o.key)){var h=o;o=l,l=h;}a(o,l),u[p]=null,p++;}u[p]=l,l=d,c--;}e=null;for(var f=0;f<s;f++){(o=u[f])&&(e?(o.left.right=o.right,o.right.left=o.left,o.left=e,o.right=e.right,e.right=o,o.right.left=o,t(o.key,e.key)&&(e=o)):e=o);}return e;}(i=e.right,this._size),this._size--,this._minimum=i,e;},i.prototype.remove=function(e){this._minimum=function(e,n,r){n.key=r;var i=n.parent;i&&t(n.key,i.key)&&(o(e,n,i),function e(t,n){var r=n.parent;if(!r)return;n.mark?(o(t,n,r),e(r)):n.mark=!0;}(e,i));t(n.key,e.key)&&(e=n);return e;}(this._minimum,e,-1),this.extractMinimum();};var a=function a(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1;};return i;},{isClass:!0}),is=et("sparse",["typed","SparseMatrix"],function(e){var t=e.typed,n=e.SparseMatrix;return t("sparse",{"":function _(){return new n([]);},string:function string(e){return new n([],e);},"Array | Matrix":function ArrayMatrix(e){return new n(e);},"Array | Matrix, string":function ArrayMatrixString(e,t){return new n(e,t);}});}),os=et("acoth",["typed","config","Complex","BigNumber"],function(e){var t=e.typed,n=e.config,r=e.Complex,i=e.BigNumber;return t("acoth",{number:function number(e){return e>=1||e<=-1||n.predictable?Ui(e):new r(e,0).acoth();},Complex:function Complex(e){return e.acoth();},BigNumber:function BigNumber(e){return new i(1).div(e).atanh();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),as=et("algorithm09",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var o=e._values,a=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,p=r._index,d=r._ptr,h=r._size,f=r._datatype;if(u.length!==h.length)throw new Ie(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");var m,y=u[0],g=u[1],v=n,x=0,b=i;"string"==typeof c&&c===f&&(m=c,v=t.find(n,[m,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,S,M,_,E,A=o&&l?[]:void 0,T=[],N=[],D=A?[]:void 0,C=[];for(S=0;S<g;S++){N[S]=T.length;var R=S+1;if(D)for(_=d[S],E=d[S+1],M=_;M<E;M++){C[w=p[M]]=R,D[w]=l[M];}for(_=s[S],E=s[S+1],M=_;M<E;M++){if(w=a[M],D){var P=C[w]===R?D[w]:x,O=b(o[M],P);v(O,x)||(T.push(w),A.push(O));}else T.push(w);}}return N[g]=T.length,e.createSparseMatrix({values:A,index:T,ptr:N,size:[y,g],datatype:m});};}),ss=et("atan2",["typed","matrix","equalScalar","BigNumber","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.BigNumber,o=e.DenseMatrix,a=ia({typed:t,equalScalar:r}),s=oa({typed:t}),u=as({typed:t,equalScalar:r}),c=sa({typed:t,equalScalar:r}),l=ua({typed:t,DenseMatrix:o}),p=ta({typed:t}),d=na({typed:t});return t("atan2",{"number, number":Math.atan2,"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return i.atan2(e,t);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return u(e,t,this,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return a(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return s(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return p(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, number | BigNumber":function SparseMatrixNumberBigNumber(e,t){return c(e,t,this,!1);},"DenseMatrix, number | BigNumber":function DenseMatrixNumberBigNumber(e,t){return d(e,t,this,!1);},"number | BigNumber, SparseMatrix":function numberBigNumberSparseMatrix(e,t){return l(t,e,this,!0);},"number | BigNumber, DenseMatrix":function numberBigNumberDenseMatrix(e,t){return d(t,e,this,!0);},"Array, number | BigNumber":function ArrayNumberBigNumber(e,t){return d(n(e),t,this,!1).valueOf();},"number | BigNumber, Array":function numberBigNumberArray(e,t){return d(n(t),e,this,!0).valueOf();}});}),us=et("sec",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("sec",{number:Ji,Complex:function Complex(e){return e.sec();},BigNumber:function BigNumber(e){return new n(1).div(e.cos());},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),cs=et("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.addScalar,i=e.equalScalar,o=e.DenseMatrix,a=(e.SparseMatrix,Qo({typed:t})),s=Ko({typed:t,equalScalar:i}),u=ea({typed:t,DenseMatrix:o}),c=ta({typed:t}),l=na({typed:t});return t("add",Y({"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return c(e,t,r);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return a(e,t,r,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return a(t,e,r,!0);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return s(e,t,r);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"DenseMatrix, any":function DenseMatrixAny(e,t){return l(e,t,r,!1);},"SparseMatrix, any":function SparseMatrixAny(e,t){return u(e,t,r,!1);},"any, DenseMatrix":function anyDenseMatrix(e,t){return l(t,e,r,!0);},"any, SparseMatrix":function anySparseMatrix(e,t){return u(t,e,r,!0);},"Array, any":function ArrayAny(e,t){return l(n(e),t,r,!1).valueOf();},"any, Array":function anyArray(e,t){return l(n(t),e,r,!0).valueOf();},"any, any":r,"any, any, ...any":function anyAnyAny(e,t,n){for(var r=this(e,t),i=0;i<n.length;i++){r=this(r,n[i]);}return r;}},r.signatures));}),ls=et("dot",["typed","addScalar","multiplyScalar","conj","size"],function(e){var t=e.typed,n=e.addScalar,r=e.multiplyScalar,i=e.conj,o=e.size;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function ArrayDenseMatrixArrayDenseMatrix(e,o){var u=a(e,o),c=h(e)?e._data:e,l=h(e)?e._datatype:void 0,p=h(o)?o._data:o,d=h(o)?o._datatype:void 0,f=2===s(e).length,m=2===s(o).length,y=n,g=r;if(l&&d&&l===d&&"string"==typeof l){var v=l;y=t.find(n,[v,v]),g=t.find(r,[v,v]);}if(!f&&!m){for(var x=g(i(c[0]),p[0]),b=1;b<u;b++){x=y(x,g(i(c[b]),p[b]));}return x;}if(!f&&m){for(var w=g(i(c[0]),p[0][0]),S=1;S<u;S++){w=y(w,g(i(c[S]),p[S][0]));}return w;}if(f&&!m){for(var M=g(i(c[0][0]),p[0]),_=1;_<u;_++){M=y(M,g(i(c[_][0]),p[_]));}return M;}if(f&&m){for(var E=g(i(c[0][0]),p[0][0]),A=1;A<u;A++){E=y(E,g(i(c[A][0]),p[A][0]));}return E;}},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){a(e,t);var i=e._index,o=e._values,s=t._index,u=t._values,c=0,l=n,p=r,d=0,h=0;for(;d<i.length&&h<s.length;){var f=i[d],m=s[h];f<m?d++:f>m?h++:f===m&&(c=l(c,p(o[d],u[h])),d++,h++);}return c;}});function a(e,t){var n,r,i=s(e),o=s(t);if(1===i.length)n=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");n=i[0];}if(1===o.length)r=o[0];else{if(2!==o.length||1!==o[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+o.join(", ")+")");r=o[0];}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n;}function s(e){return h(e)?e.size():o(e);}}),ps=et("composition",["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],function(e){var t=e.typed,n=e.addScalar,r=e.combinations,i=e.isPositive,o=(e.isNegative,e.isInteger),a=e.larger;return t("composition",{"number | BigNumber, number | BigNumber":function numberBigNumberNumberBigNumber(e,t){if(!(o(e)&&i(e)&&o(t)&&i(t)))throw new TypeError("Positive integer value expected in function composition");if(a(t,e))throw new TypeError("k must be less than or equal to n in function composition");return r(n(e,-1),n(t,-1));}});}),ds=et("isZero",["typed"],function(e){return(0,e.typed)("isZero",{number:pr,BigNumber:function BigNumber(e){return e.isZero();},Complex:function Complex(e){return 0===e.re&&0===e.im;},Fraction:function Fraction(e){return 1===e.d&&0===e.n;},Unit:function Unit(e){return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),hs=et("abs",["typed"],function(e){return(0,e.typed)("abs",{number:Sr,Complex:function Complex(e){return e.abs();},BigNumber:function BigNumber(e){return e.abs();},Fraction:function Fraction(e){return e.abs();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);},Unit:function Unit(e){return e.abs();}});}),fs=et("floor",["typed","config","round"],function(e){var t=e.typed,n=e.config,r=e.round;return t("floor",{number:function number(e){return be(e,r(e),n.epsilon)?r(e):Math.floor(e);},Complex:function Complex(e){return e.floor();},BigNumber:function BigNumber(e){return mr(e,r(e),n.epsilon)?r(e):e.floor();},Fraction:function Fraction(e){return e.floor();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),ms=et("multiply",["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],function(e){var t=e.typed,n=e.matrix,r=e.addScalar,i=e.multiplyScalar,o=e.equalScalar,a=e.dot,s=sa({typed:t,equalScalar:o}),u=na({typed:t});function c(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)");}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)");}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)");}}function l(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var o,a=e._data,s=e._size,u=e._datatype,c=n._data,l=n._size,p=n._datatype,d=s[0],h=l[1],f=r,m=i;u&&p&&u===p&&"string"==typeof u&&(o=u,f=t.find(r,[o,o]),m=t.find(i,[o,o]));for(var y=[],g=0;g<h;g++){for(var v=m(a[0],c[0][g]),x=1;x<d;x++){v=f(v,m(a[x],c[x][g]));}y[g]=v;}return e.createDenseMatrix({data:y,size:[h],datatype:o});}(e,n);}var p=t("_multiplyMatrixVector",{"DenseMatrix, any":function DenseMatrixAny(e,n){var o,a=e._data,s=e._size,u=e._datatype,c=n._data,l=n._datatype,p=s[0],d=s[1],h=r,f=i;u&&l&&u===l&&"string"==typeof u&&(o=u,h=t.find(r,[o,o]),f=t.find(i,[o,o]));for(var m=[],y=0;y<p;y++){for(var g=a[y],v=f(g[0],c[0]),x=1;x<d;x++){v=h(v,f(g[x],c[x]));}m[y]=v;}return e.createDenseMatrix({data:m,size:[p],datatype:o});},"SparseMatrix, any":function SparseMatrixAny(e,n){var a=e._values,s=e._index,u=e._ptr,c=e._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var l,p=n._data,d=n._datatype,h=e._size[0],f=n._size[0],m=[],y=[],g=[],v=r,x=i,b=o,w=0;c&&d&&c===d&&"string"==typeof c&&(l=c,v=t.find(r,[l,l]),x=t.find(i,[l,l]),b=t.find(o,[l,l]),w=t.convert(0,l));var S=[],M=[];g[0]=0;for(var _=0;_<f;_++){var E=p[_];if(!b(E,w))for(var A=u[_],T=u[_+1],N=A;N<T;N++){var D=s[N];M[D]?S[D]=v(S[D],x(E,a[N])):(M[D]=!0,y.push(D),S[D]=x(E,a[N]));}}for(var C=y.length,R=0;R<C;R++){var P=y[R];m[R]=S[P];}return g[1]=y.length,e.createSparseMatrix({values:m,index:y,ptr:g,size:[h,1],datatype:l});}}),d=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,n){var o,a=e._data,s=e._size,u=e._datatype,c=n._data,l=n._size,p=n._datatype,d=s[0],h=s[1],f=l[1],m=r,y=i;u&&p&&u===p&&"string"==typeof u&&(o=u,m=t.find(r,[o,o]),y=t.find(i,[o,o]));for(var g=[],v=0;v<d;v++){var x=a[v];g[v]=[];for(var b=0;b<f;b++){for(var w=y(x[0],c[0][b]),S=1;S<h;S++){w=m(w,y(x[S],c[S][b]));}g[v][b]=w;}}return e.createDenseMatrix({data:g,size:[d,f],datatype:o});},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,n){var a=e._data,s=e._size,u=e._datatype,c=n._values,l=n._index,p=n._ptr,d=n._size,h=n._datatype;if(!c)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var f,m=s[0],y=d[1],g=r,v=i,x=o,b=0;u&&h&&u===h&&"string"==typeof u&&(f=u,g=t.find(r,[f,f]),v=t.find(i,[f,f]),x=t.find(o,[f,f]),b=t.convert(0,f));for(var w=[],S=[],M=[],_=n.createSparseMatrix({values:w,index:S,ptr:M,size:[m,y],datatype:f}),E=0;E<y;E++){M[E]=S.length;var A=p[E],T=p[E+1];if(T>A)for(var N=0,D=0;D<m;D++){for(var C=D+1,R=void 0,P=A;P<T;P++){var O=l[P];N!==C?(R=v(a[D][O],c[P]),N=C):R=g(R,v(a[D][O],c[P]));}N!==C||x(R,b)||(S.push(D),w.push(R));}}return M[y]=S.length,_;},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,n){var a=e._values,s=e._index,u=e._ptr,c=e._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var l,p=n._data,d=n._datatype,h=e._size[0],f=n._size[0],m=n._size[1],y=r,g=i,v=o,x=0;c&&d&&c===d&&"string"==typeof c&&(l=c,y=t.find(r,[l,l]),g=t.find(i,[l,l]),v=t.find(o,[l,l]),x=t.convert(0,l));for(var b=[],w=[],S=[],M=e.createSparseMatrix({values:b,index:w,ptr:S,size:[h,m],datatype:l}),_=[],E=[],A=0;A<m;A++){S[A]=w.length;for(var T=A+1,N=0;N<f;N++){var D=p[N][A];if(!v(D,x))for(var C=u[N],R=u[N+1],P=C;P<R;P++){var O=s[P];E[O]!==T?(E[O]=T,w.push(O),_[O]=g(D,a[P])):_[O]=y(_[O],g(D,a[P]));}}for(var L=S[A],I=w.length,B=L;B<I;B++){var F=w[B];b[B]=_[F];}}return S[m]=w.length,M;},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,n){var o,a=e._values,s=e._index,u=e._ptr,c=e._datatype,l=n._values,p=n._index,d=n._ptr,h=n._datatype,f=e._size[0],m=n._size[1],y=a&&l,g=r,v=i;c&&h&&c===h&&"string"==typeof c&&(o=c,g=t.find(r,[o,o]),v=t.find(i,[o,o]));for(var x,b,w,S,M,_,E,A,T=y?[]:void 0,N=[],D=[],C=e.createSparseMatrix({values:T,index:N,ptr:D,size:[f,m],datatype:o}),R=y?[]:void 0,P=[],O=0;O<m;O++){D[O]=N.length;var L=O+1;for(M=d[O],_=d[O+1],S=M;S<_;S++){if(A=p[S],y)for(b=u[A],w=u[A+1],x=b;x<w;x++){E=s[x],P[E]!==L?(P[E]=L,N.push(E),R[E]=v(l[S],a[x])):R[E]=g(R[E],v(l[S],a[x]));}else for(b=u[A],w=u[A+1],x=b;x<w;x++){E=s[x],P[E]!==L&&(P[E]=L,N.push(E));}}if(y)for(var I=D[O],B=N.length,F=I;F<B;F++){var z=N[F];T[F]=R[z];}}return D[m]=N.length,C;}});return t("multiply",Y({"Array, Array":function ArrayArray(e,t){c(Fe(e),Fe(t));var r=this(n(e),n(t));return h(r)?r.valueOf():r;},"Matrix, Matrix":function MatrixMatrix(e,t){var n=e.size(),r=t.size();return c(n,r),1===n.length?1===r.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return a(e,t);}(e,t,n[0]):l(e,t):1===r.length?p(e,t):d(e,t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e,t.storage()),t);},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,i,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return u(e,t,i,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,i,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return u(t,e,i,!0);},"Array, any":function ArrayAny(e,t){return u(n(e),t,i,!1).valueOf();},"any, Array":function anyArray(e,t){return u(n(t),e,i,!0).valueOf();},"any, any":i,"any, any, ...any":function anyAnyAny(e,t,n){for(var r=this(e,t),i=0;i<n.length;i++){r=this(r,n[i]);}return r;}},i.signatures));}),ys=et("dotMultiply",["typed","matrix","equalScalar","multiplyScalar"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.multiplyScalar,o=ia({typed:t,equalScalar:r}),a=as({typed:t,equalScalar:r}),s=sa({typed:t,equalScalar:r}),u=ta({typed:t}),c=na({typed:t});return t("dotMultiply",{"any, any":i,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,i,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,i,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,i,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,i);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,i,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,i,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,i,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,i,!0);},"Array, any":function ArrayAny(e,t){return c(n(e),t,i,!1).valueOf();},"any, Array":function anyArray(e,t){return c(n(t),e,i,!0).valueOf();}});}),gs=et("re",["typed"],function(e){return(0,e.typed)("re",{number:function number(e){return e;},BigNumber:function BigNumber(e){return e;},Complex:function Complex(e){return e.re;},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),vs=et("flatten",["typed","matrix"],function(e){var t=e.typed,n=e.matrix;return t("flatten",{Array:function Array(e){return Ge(W(e));},Matrix:function Matrix(e){var t=Ge(W(e.toArray()));return n(t);}});});function xs(e,t,n,r){if(!(this instanceof xs))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=r?"-"+r:"")+" expected)",this.stack=new Error().stack;}xs.prototype=new Error(),xs.prototype.constructor=Error,xs.prototype.name="ArgumentsError",xs.prototype.isArgumentsError=!0;var bs=et("resize",["config","matrix"],function(e){var t=e.config,n=e.matrix;return function(e,i,o){if(2!==arguments.length&&3!==arguments.length)throw new xs("resize",arguments.length,2,3);if(h(i)&&(i=i.valueOf()),s(i[0])&&(i=i.map(function(e){return s(e)?e.toNumber():e;})),h(e))return e.resize(i,o,!0);if("string"==typeof e)return r(e,i,o);var a=!Array.isArray(e)&&"Array"!==t.matrix;if(0===i.length){for(;Array.isArray(e);){e=e[0];}return W(e);}Array.isArray(e)||(e=[e]);var u=Ue(e=W(e),i,o);return a?n(u):u;};function r(e,t,n){if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue");}else n=" ";if(1!==t.length)throw new Ie(t.length,1);var r=t[0];if("number"!=typeof r||!ae(r))throw new TypeError("Invalid size, must contain positive integers (size: "+Re(t)+")");if(e.length>r)return e.substring(0,r);if(e.length<r){for(var i=e,o=0,a=r-e.length;o<a;o++){i+=n;}return i;}return e;}}),ws=et("squeeze",["typed","matrix"],function(e){var t=e.typed,n=e.matrix;return t("squeeze",{Array:function Array(e){return He(W(e));},Matrix:function Matrix(e){var t=He(e.toArray());return Array.isArray(t)?n(t):t;},any:function any(e){return W(e);}});}),Ss=et("pow",["typed","config","identity","multiply","matrix","fraction","number","Complex"],function(e){var t=e.typed,n=e.config,r=e.identity,i=e.multiply,o=e.matrix,a=e.number,s=e.fraction,u=e.Complex;return t("pow",{"number, number":c,"Complex, Complex":function ComplexComplex(e,t){return e.pow(t);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return t.isInteger()||e>=0||n.predictable?e.pow(t):new u(e.toNumber(),0).pow(t.toNumber(),0);},"Fraction, Fraction":function FractionFraction(e,t){if(1!==t.d){if(n.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return c(e.valueOf(),t.valueOf());}return e.pow(t);},"Array, number":l,"Array, BigNumber":function ArrayBigNumber(e,t){return l(e,t.toNumber());},"Matrix, number":p,"Matrix, BigNumber":function MatrixBigNumber(e,t){return p(e,t.toNumber());},"Unit, number | BigNumber":function UnitNumberBigNumber(e,t){return e.pow(t);}});function c(e,t){if(n.predictable&&!ae(t)&&e<0)try{var r=s(t),i=a(r);if((t===i||Math.abs((t-i)/t)<1e-14)&&r.d%2==1)return(r.n%2==0?1:-1)*Math.pow(-e,t);}catch(e){}return n.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:ae(t)||e>=0||n.predictable?Hr(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new u(e,0).pow(t,0);}function l(e,t){if(!ae(t)||t<0)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var n=Fe(e);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var o=r(n[0]).valueOf(),a=e;t>=1;){1==(1&t)&&(o=i(a,o)),t>>=1,a=i(a,a);}return o;}function p(e,t){return o(l(e.valueOf(),t));}}),Ms=et("dotPow",["typed","equalScalar","matrix","pow","DenseMatrix"],function(e){var t=e.typed,n=e.equalScalar,r=e.matrix,i=e.pow,o=e.DenseMatrix,a=oa({typed:t}),s=fa({typed:t,DenseMatrix:o}),u=sa({typed:t,equalScalar:n}),c=ua({typed:t,DenseMatrix:o}),l=ta({typed:t}),p=na({typed:t});return t("dotPow",{"any, any":i,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return s(e,t,i,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return a(t,e,i,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return a(e,t,i,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return l(e,t,i);},"Array, Array":function ArrayArray(e,t){return this(r(e),r(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(r(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,r(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return u(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return p(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return c(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return p(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return p(r(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return p(r(t),e,this,!0).valueOf();}});}),_s=et("rightArithShift",["typed","matrix","equalScalar","zeros","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,o=e.DenseMatrix,a=Qo({typed:t}),s=ia({typed:t,equalScalar:r}),u=Ya({typed:t,equalScalar:r}),c=ea({typed:t,DenseMatrix:o}),l=sa({typed:t,equalScalar:r}),p=ta({typed:t}),d=na({typed:t});return t("rightArithShift",{"number, number":hi,"BigNumber, BigNumber":ai,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return u(e,t,this,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return s(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return a(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return p(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, number | BigNumber":function SparseMatrixNumberBigNumber(e,t){return r(t,0)?e.clone():l(e,t,this,!1);},"DenseMatrix, number | BigNumber":function DenseMatrixNumberBigNumber(e,t){return r(t,0)?e.clone():d(e,t,this,!1);},"number | BigNumber, SparseMatrix":function numberBigNumberSparseMatrix(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,this,!0);},"number | BigNumber, DenseMatrix":function numberBigNumberDenseMatrix(e,t){return r(e,0)?i(t.size(),t.storage()):d(t,e,this,!0);},"Array, number | BigNumber":function ArrayNumberBigNumber(e,t){return this(n(e),t).valueOf();},"number | BigNumber, Array":function numberBigNumberArray(e,t){return this(e,n(t)).valueOf();}});}),Es=n(15),As=n.n(Es),Ts=et("compareNatural",["typed","compare"],function(e){var t=e.typed,n=e.compare,r=n.signatures["boolean,boolean"];return t("compareNatural",{"any, any":function anyAny(e,t){var o,a=G(e),s=G(t);if(!("number"!==a&&"BigNumber"!==a&&"Fraction"!==a||"number"!==s&&"BigNumber"!==s&&"Fraction"!==s))return"0"!==(o=n(e,t)).toString()?o>0?1:-1:As()(a,s);if("Array"===a||"Matrix"===a||"Array"===s||"Matrix"===s)return 0!==(o=function e(t,n,r){if(y(n)&&y(r))return i(t,n.toJSON().values,r.toJSON().values);if(y(n))return e(t,n.toArray(),r);if(y(r))return e(t,n,r.toArray());if(m(n))return e(t,n.toJSON().data,r);if(m(r))return e(t,n,r.toJSON().data);if(!Array.isArray(n))return e(t,[n],r);if(!Array.isArray(r))return e(t,n,[r]);return i(t,n,r);}(this,e,t))?o:As()(a,s);if(a!==s)return As()(a,s);if("Complex"===a)return function(e,t){if(e.re>t.re)return 1;if(e.re<t.re)return-1;if(e.im>t.im)return 1;if(e.im<t.im)return-1;return 0;}(e,t);if("Unit"===a)return e.equalBase(t)?this(e.value,t.value):i(this,e.formatUnits(),t.formatUnits());if("boolean"===a)return r(e,t);if("string"===a)return As()(e,t);if("Object"===a)return function(e,t,n){var r=Object.keys(t),o=Object.keys(n);r.sort(As.a),o.sort(As.a);var a=i(e,r,o);if(0!==a)return a;for(var s=0;s<r.length;s++){var u=e(t[r[s]],n[o[s]]);if(0!==u)return u;}return 0;}(this,e,t);if("null"===a)return 0;if("undefined"===a)return 0;throw new TypeError('Unsupported type of value "'+a+'"');}});function i(e,t,n){for(var r=0,i=Math.min(t.length,n.length);r<i;r++){var o=e(t[r],n[r]);if(0!==o)return o;}return t.length>n.length?1:t.length<n.length?-1:0;}});var Ns=et("equalText",["typed","compareText","isZero"],function(e){var t=e.typed,n=e.compareText,r=e.isZero;return t("equalText",{"any, any":function anyAny(e,t){return r(n(e,t));}});}),Ds=et("largerEq",["typed","config","matrix","DenseMatrix"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,o=oa({typed:t}),a=fa({typed:t,DenseMatrix:i}),s=ua({typed:t,DenseMatrix:i}),u=ta({typed:t}),c=na({typed:t});return t("largerEq",{"boolean, boolean":function booleanBoolean(e,t){return e>=t;},"number, number":function numberNumber(e,t){return e>=t||be(e,t,n.epsilon);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.gte(t)||mr(e,t,n.epsilon);},"Fraction, Fraction":function FractionFraction(e,t){return-1!==e.compare(t);},"Complex, Complex":function ComplexComplex(){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function UnitUnit(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(r(e),r(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(r(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,r(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return c(r(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return c(r(t),e,this,!0).valueOf();}});}),Cs=et("partitionSelect",["typed","isNumeric","isNaN","compare"],function(e){var t=e.typed,n=e.isNumeric,r=e.isNaN,i=e.compare,o=i,a=function a(e,t){return-i(e,t);};return t("partitionSelect",{"Array | Matrix, number":function ArrayMatrixNumber(e,t){return s(e,t,o);},"Array | Matrix, number, string":function ArrayMatrixNumberString(e,t,n){if("asc"===n)return s(e,t,o);if("desc"===n)return s(e,t,a);throw new Error('Compare string must be "asc" or "desc"');},"Array | Matrix, number, function":s});function s(e,t,n){if(!ae(t)||t<0)throw new Error("k must be a non-negative integer");if(h(e)){if(e.size().length>1)throw new Error("Only one dimensional matrices supported");return u(e.valueOf(),t,n);}if(Array.isArray(e))return u(e,t,n);}function u(e,t,i){if(t>=e.length)throw new Error("k out of bounds");for(var o=0;o<e.length;o++){if(n(e[o])&&r(e[o]))return e[o];}for(var a=0,s=e.length-1;a<s;){for(var u=a,c=s,l=e[Math.floor(Math.random()*(s-a+1))+a];u<c;){if(i(e[u],l)>=0){var p=e[c];e[c]=e[u],e[u]=p,--c;}else++u;}i(e[u],l)>0&&--u,t<=u?s=u:a=u+1;}return e[t];}}),Rs=et("Index",["ImmutableDenseMatrix"],function(e){var t=e.ImmutableDenseMatrix;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var t=0,i=arguments.length;t<i;t++){var o=arguments[t];if(g(o))this._dimensions.push(o),this._isScalar=!1;else if(Array.isArray(o)||h(o)){var a=r(o.valueOf());this._dimensions.push(a);var s=a.size();1===s.length&&1===s[0]||(this._isScalar=!1);}else if("number"==typeof o)this._dimensions.push(r([o]));else{if("string"!=typeof o)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(o);}}}function r(e){for(var n=0,r=e.length;n<r;n++){if("number"!=typeof e[n]||!ae(e[n]))throw new TypeError("Index parameters must be positive integer numbers");}return new t(e);}return n.prototype.type="Index",n.prototype.isIndex=!0,n.prototype.clone=function(){var e=new n();return e._dimensions=W(this._dimensions),e._isScalar=this._isScalar,e;},n.create=function(e){var t=new n();return n.apply(t,e),t;},n.prototype.size=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?1:r.size()[0];}return e;},n.prototype.max=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.max();}return e;},n.prototype.min=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.min();}return e;},n.prototype.forEach=function(e){for(var t=0,n=this._dimensions.length;t<n;t++){e(this._dimensions[t],t,this);}},n.prototype.dimension=function(e){return this._dimensions[e]||null;},n.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0];},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null;},n.prototype.isScalar=function(){return this._isScalar;},n.prototype.toArray=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?r:r.toArray());}return e;},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];"string"==typeof r?e.push(JSON.stringify(r)):e.push(r.toString());}return"["+e.join(", ")+"]";},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions};},n.fromJSON=function(e){return n.create(e.dimensions);},n;},{isClass:!0}),Ps=et("asech",["typed","config","Complex","BigNumber"],function(e){var t=e.typed,n=e.config,r=e.Complex,i=e.BigNumber;return t("asech",{number:function number(e){if(e<=1&&e>=-1||n.predictable){var t=1/e;if(t>0||n.predictable)return Gi(e);var i=Math.sqrt(t*t-1);return new r(Math.log(i-t),Math.PI);}return new r(e,0).asech();},Complex:function Complex(e){return e.asech();},BigNumber:function BigNumber(e){return new i(1).div(e).acosh();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Os=et("tan",["typed"],function(e){return(0,e.typed)("tan",{number:Math.tan,Complex:function Complex(e){return e.tan();},BigNumber:function BigNumber(e){return e.tan();},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),Ls=et("setDifference",["typed","size","subset","compareNatural","Index","DenseMatrix"],function(e){var t=e.typed,n=e.size,r=e.subset,i=e.compareNatural,o=e.Index,a=e.DenseMatrix;return t("setDifference",{"Array | Matrix, Array | Matrix":function ArrayMatrixArrayMatrix(e,t){var s;if(0===r(n(e),new o(0)))s=[];else{if(0===r(n(t),new o(0)))return Ge(e.toArray());var u,c=$e(Ge(Array.isArray(e)?e:e.toArray()).sort(i)),l=$e(Ge(Array.isArray(t)?t:t.toArray()).sort(i));s=[];for(var p=0;p<c.length;p++){u=!1;for(var d=0;d<l.length;d++){if(0===i(c[p].value,l[d].value)&&c[p].identifier===l[d].identifier){u=!0;break;}}u||s.push(c[p]);}}return Array.isArray(e)&&Array.isArray(t)?Je(s):new a(Je(s));}});}),Is=et("setIntersect",["typed","size","subset","compareNatural","Index","DenseMatrix"],function(e){var t=e.typed,n=e.size,r=e.subset,i=e.compareNatural,o=e.Index,a=e.DenseMatrix;return t("setIntersect",{"Array | Matrix, Array | Matrix":function ArrayMatrixArrayMatrix(e,t){var s;if(0===r(n(e),new o(0))||0===r(n(t),new o(0)))s=[];else{var u=$e(Ge(Array.isArray(e)?e:e.toArray()).sort(i)),c=$e(Ge(Array.isArray(t)?t:t.toArray()).sort(i));s=[];for(var l=0;l<u.length;l++){for(var p=0;p<c.length;p++){if(0===i(u[l].value,c[p].value)&&u[l].identifier===c[p].identifier){s.push(u[l]);break;}}}}return Array.isArray(e)&&Array.isArray(t)?Je(s):new a(Je(s));}});}),Bs=et("setMultiplicity",["typed","size","subset","compareNatural","Index"],function(e){var t=e.typed,n=e.size,r=e.subset,i=e.compareNatural,o=e.Index;return t("setMultiplicity",{"number | BigNumber | Fraction | Complex, Array | Matrix":function numberBigNumberFractionComplexArrayMatrix(e,t){if(0===r(n(t),new o(0)))return 0;for(var a=Ge(Array.isArray(t)?t:t.toArray()),s=0,u=0;u<a.length;u++){0===i(a[u],e)&&s++;}return s;}});}),Fs=et("setSize",["typed","compareNatural"],function(e){var t=e.typed,n=e.compareNatural;return t("setSize",{"Array | Matrix":function ArrayMatrix(e){return Array.isArray(e)?Ge(e).length:Ge(e.toArray()).length;},"Array | Matrix, boolean":function ArrayMatrixBoolean(e,t){if(!1===t||0===e.length)return Array.isArray(e)?Ge(e).length:Ge(e.toArray()).length;for(var r=Ge(Array.isArray(e)?e:e.toArray()).sort(n),i=1,o=1;o<r.length;o++){0!==n(r[o],r[o-1])&&i++;}return i;}});}),zs=et("trace",["typed","matrix","add"],function(e){var t=e.typed,n=e.matrix,r=e.add;return t("trace",{Array:function Array(e){return i(n(e));},SparseMatrix:function SparseMatrix(e){var t=e._values,n=e._index,i=e._ptr,o=e._size,a=o[0],s=o[1];if(a===s){var u=0;if(t.length>0)for(var c=0;c<s;c++){for(var l=i[c],p=i[c+1],d=l;d<p;d++){var h=n[d];if(h===c){u=r(u,t[d]);break;}if(h>c)break;}}return u;}throw new RangeError("Matrix must be square (size: "+Re(o)+")");},DenseMatrix:i,any:W});function i(e){var t=e._size,n=e._data;switch(t.length){case 1:if(1===t[0])return W(n[0]);throw new RangeError("Matrix must be square (size: "+Re(t)+")");case 2:var i=t[0];if(i===t[1]){for(var o=0,a=0;a<i;a++){o=r(o,n[a][a]);}return o;}throw new RangeError("Matrix must be square (size: "+Re(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Re(t)+")");}}}),ks=et("quantileSeq",["typed","add","multiply","partitionSelect","compare"],function(e){var t=e.typed,n=e.add,r=e.multiply,i=e.partitionSelect,o=e.compare;function u(e,t,s){var u=Ge(e),l=u.length;if(0===l)throw new Error("Cannot calculate quantile of an empty sequence");if(a(t)){var p=t*(l-1),d=p%1;if(0===d){var h=s?u[p]:i(u,p);return c(h),h;}var f,m,y=Math.floor(p);if(s)f=u[y],m=u[y+1];else{m=i(u,y+1),f=u[y];for(var g=0;g<y;++g){o(u[g],f)>0&&(f=u[g]);}}return c(f),c(m),n(r(f,1-d),r(m,d));}var v=t.times(l-1);if(v.isInteger()){v=v.toNumber();var x=s?u[v]:i(u,v);return c(x),x;}var b,w,S=v.floor(),M=v.minus(S),_=S.toNumber();if(s)b=u[_],w=u[_+1];else{w=i(u,_+1),b=u[_];for(var E=0;E<_;++E){o(u[E],b)>0&&(b=u[E]);}}c(b),c(w);var A=new M.constructor(1);return n(r(b,A.minus(M)),r(w,M));}var c=t({"number | BigNumber | Unit":function numberBigNumberUnit(e){return e;}});return function(e,t,n){var r,i,o;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(f(e)){if("boolean"==typeof(n=n||!1)){if(i=e.valueOf(),a(t)){if(t<0)throw new Error("N/prob must be non-negative");if(t<=1)return u(i,t,n);if(t>1){if(!ae(t))throw new Error("N must be a positive integer");var c=t+1;r=new Array(t);for(var l=0;l<t;){r[l]=u(i,++l/c,n);}return r;}}if(s(t)){var p=t.constructor;if(t.isNegative())throw new Error("N/prob must be non-negative");if(o=new p(1),t.lte(o))return new p(u(i,t,n));if(t.gt(o)){if(!t.isInteger())throw new Error("N must be a positive integer");var d=t.toNumber();if(d>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var h=new p(d+1);r=new Array(d);for(var m=0;m<d;){r[m]=new p(u(i,new p(++m).div(h),n));}return r;}}if(Array.isArray(t)){r=new Array(t.length);for(var y=0;y<r.length;++y){var g=t[y];if(a(g)){if(g<0||g>1)throw new Error("Probability must be between 0 and 1, inclusive");}else{if(!s(g))throw new TypeError("Unexpected type of argument in function quantileSeq");if(o=new g.constructor(1),g.isNegative()||g.gt(o))throw new Error("Probability must be between 0 and 1, inclusive");}r[y]=u(i,g,n);}return r;}throw new TypeError("Unexpected type of argument in function quantileSeq");}throw new TypeError("Unexpected type of argument in function quantileSeq");}throw new TypeError("Unexpected type of argument in function quantileSeq");};});function Us(e){var t;if(ae(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:ho(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Us(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,o=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*o)+5246819/(75246796800*o*e));}--e,t=Hs[0];for(var a=1;a<Hs.length;++a){t+=Hs[a]/(e+a);}var s=e+js+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,e+.5)*Math.exp(-s)*t;}Us.signature="number";var js=4.7421875,Hs=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],qs=et("gamma",["typed","config","multiplyScalar","pow","BigNumber","Complex"],function(e){var t=e.typed,n=e.config,r=e.multiplyScalar,i=e.pow,o=e.BigNumber,a=e.Complex;return t("gamma",{number:Us,Complex:function Complex(e){if(0===e.im)return this(e.re);e=new a(e.re-1,e.im);for(var t=new a(Hs[0],0),n=1;n<Hs.length;++n){var o=e.re+n,s=o*o+e.im*e.im;0!==s?(t.re+=Hs[n]*o/s,t.im+=-Hs[n]*e.im/s):t.re=Hs[n]<0?-1/0:1/0;}var u=new a(e.re+js+.5,e.im),c=Math.sqrt(2*Math.PI);e.re+=.5;var l=i(u,e);0===l.im?l.re*=c:(0===l.re||(l.re*=c),l.im*=c);var p=Math.exp(-u.re);return u.re=p*Math.cos(-u.im),u.im=p*Math.sin(-u.im),r(r(l,u),t);},BigNumber:function BigNumber(e){if(e.isInteger())return e.isNegative()||e.isZero()?new o(1/0):function e(t){if(t<8)return new o([1,1,2,6,24,120,720,5040][t]);var r=n.precision+(0|Math.log(t.toNumber())),i=o.clone({precision:r});if(t%2==1)return t.times(e(new o(t-1)));var a=t,s=new i(t),u=t.toNumber();for(;a>2;){u+=a-=2,s=s.times(u);}return new o(s.toPrecision(o.precision));}(e.minus(1));if(!e.isFinite())return new o(e.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected");},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Gs=et("bignumber",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("bignumber",{"":function _(){return new n(0);},number:function number(e){return new n(e+"");},string:function string(e){return new n(e);},BigNumber:function BigNumber(e){return e;},Fraction:function Fraction(e){return new n(e.n).div(e.d).times(e.s);},"null":function _null(e){return new n(0);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),Vs=et("lcm",["typed","matrix","equalScalar"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=ia({typed:t,equalScalar:r}),o=la({typed:t,equalScalar:r}),a=sa({typed:t,equalScalar:r}),s=ta({typed:t}),u=na({typed:t});return t("lcm",{"number, number":Or,"BigNumber, BigNumber":function BigNumberBigNumber(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero())return e;if(t.isZero())return t;var n=e.times(t);for(;!t.isZero();){var r=t;t=e.mod(r),e=r;}return n.div(e).abs();},"Fraction, Fraction":function FractionFraction(e,t){return e.lcm(t);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return o(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return i(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return i(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return s(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, number | BigNumber":function SparseMatrixNumberBigNumber(e,t){return a(e,t,this,!1);},"DenseMatrix, number | BigNumber":function DenseMatrixNumberBigNumber(e,t){return u(e,t,this,!1);},"number | BigNumber, SparseMatrix":function numberBigNumberSparseMatrix(e,t){return a(t,e,this,!0);},"number | BigNumber, DenseMatrix":function numberBigNumberDenseMatrix(e,t){return u(t,e,this,!0);},"Array, number | BigNumber":function ArrayNumberBigNumber(e,t){return u(n(e),t,this,!1).valueOf();},"number | BigNumber, Array":function numberBigNumberArray(e,t){return u(n(t),e,this,!0).valueOf();},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function ArrayMatrixNumberBigNumberArrayMatrixNumberBigNumberArrayMatrixNumberBigNumber(e,t,n){for(var r=this(e,t),i=0;i<n.length;i++){r=this(r,n[i]);}return r;}});}),Ws=et("bitOr",["typed","matrix","equalScalar","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,o=Qo({typed:t}),a=Ko({typed:t,equalScalar:r}),s=ea({typed:t,DenseMatrix:i}),u=ta({typed:t}),c=na({typed:t});return t("bitOr",{"number, number":li,"BigNumber, BigNumber":ti,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return c(n(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return c(n(t),e,this,!0).valueOf();}});}),Xs=et("kron",["typed","matrix","multiplyScalar"],function(e){var t=e.typed,n=e.matrix,r=e.multiplyScalar;return t("kron",{"Matrix, Matrix":function MatrixMatrix(e,t){return n(i(e.toArray(),t.toArray()));},"Matrix, Array":function MatrixArray(e,t){return n(i(e.toArray(),t));},"Array, Matrix":function ArrayMatrix(e,t){return n(i(e,t.toArray()));},"Array, Array":i});function i(e,t){if(1===Fe(e).length&&(e=[e]),1===Fe(t).length&&(t=[t]),Fe(e).length>2||Fe(t).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(t.length)+")");var n=[],i=[];return e.map(function(e){return t.map(function(t){return i=[],n.push(i),e.map(function(e){return t.map(function(t){return i.push(r(e,t));});});});})&&n;}}),Ys=et("transpose",["typed","matrix"],function(e){var t=e.typed,n=e.matrix;return t("transpose",{Array:function Array(e){return this(n(e)).valueOf();},Matrix:function Matrix(e){var t,n=e.size();switch(n.length){case 1:t=e.clone();break;case 2:var r=n[0],i=n[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Re(n)+")");switch(e.storage()){case"dense":t=function(e,t,n){for(var r,i=e._data,o=[],a=0;a<n;a++){r=o[a]=[];for(var s=0;s<t;s++){r[s]=W(i[s][a]);}}return e.createDenseMatrix({data:o,size:[n,t],datatype:e._datatype});}(e,r,i);break;case"sparse":t=function(e,t,n){for(var r,i,o,a=e._values,s=e._index,u=e._ptr,c=a?[]:void 0,l=[],p=[],d=[],h=0;h<t;h++){d[h]=0;}for(r=0,i=s.length;r<i;r++){d[s[r]]++;}for(var f=0,m=0;m<t;m++){p.push(f),f+=d[m],d[m]=p[m];}for(p.push(f),o=0;o<n;o++){for(var y=u[o],g=u[o+1],v=y;v<g;v++){var x=d[s[v]]++;l[x]=o,a&&(c[x]=W(a[v]));}}return e.createSparseMatrix({values:c,index:l,ptr:p,size:[n,t],datatype:e._datatype});}(e,r,i);}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Re(this._size)+")");}return t;},any:function any(e){return W(e);}});}),Zs=et("numeric",["number","?bignumber","?fraction"],function(e){var t=e.number,n=e.bignumber,r=e.fraction,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:function number(e){return t(e);},BigNumber:n?function(e){return n(e);}:Ma,Fraction:r?function(e){return r(e);}:_a};return function(e,t){var n=G(e);if(!(n in i))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in o))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(o).join(", "));return t===n?e:o[t](e);};}),$s=et("and",["typed","matrix","equalScalar","zeros","not"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,o=e.not,a=ia({typed:t,equalScalar:r}),s=la({typed:t,equalScalar:r}),u=sa({typed:t,equalScalar:r}),c=ta({typed:t}),l=na({typed:t});return t("and",{"number, number":wi,"Complex, Complex":function ComplexComplex(e,t){return!(0===e.re&&0===e.im||0===t.re&&0===t.im);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return!(e.isZero()||t.isZero()||e.isNaN()||t.isNaN());},"Unit, Unit":function UnitUnit(e,t){return this(e.value||0,t.value||0);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return s(e,t,this,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return a(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return a(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return c(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return o(t)?i(e.size(),e.storage()):u(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return o(t)?i(e.size(),e.storage()):l(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return o(e)?i(e.size(),e.storage()):u(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return o(e)?i(e.size(),e.storage()):l(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return this(n(e),t).valueOf();},"any, Array":function anyArray(e,t){return this(e,n(t)).valueOf();}});}),Js=et("smallerEq",["typed","config","matrix","DenseMatrix"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,o=oa({typed:t}),a=fa({typed:t,DenseMatrix:i}),s=ua({typed:t,DenseMatrix:i}),u=ta({typed:t}),c=na({typed:t});return t("smallerEq",{"boolean, boolean":function booleanBoolean(e,t){return e<=t;},"number, number":function numberNumber(e,t){return e<=t||be(e,t,n.epsilon);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.lte(t)||mr(e,t,n.epsilon);},"Fraction, Fraction":function FractionFraction(e,t){return 1!==e.compare(t);},"Complex, Complex":function ComplexComplex(){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function UnitUnit(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(r(e),r(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(r(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,r(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return c(r(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return c(r(t),e,this,!0).valueOf();}});}),Qs=et("sort",["typed","matrix","compare","compareNatural"],function(e){var t=e.typed,n=e.matrix,r=e.compare,i=e.compareNatural,o=r,a=function a(e,t){return-r(e,t);};return t("sort",{Array:function Array(e){return u(e),e.sort(o);},Matrix:function Matrix(e){return c(e),n(e.toArray().sort(o),e.storage());},"Array, function":function ArrayFunction(e,t){return u(e),e.sort(t);},"Matrix, function":function MatrixFunction(e,t){return c(e),n(e.toArray().sort(t),e.storage());},"Array, string":function ArrayString(e,t){return u(e),e.sort(s(t));},"Matrix, string":function MatrixString(e,t){return c(e),n(e.toArray().sort(s(t)),e.storage());}});function s(e){if("asc"===e)return o;if("desc"===e)return a;if("natural"===e)return i;throw new Error('String "asc", "desc", or "natural" expected');}function u(e){if(1!==Fe(e).length)throw new Error("One dimensional array expected");}function c(e){if(1!==e.size().length)throw new Error("One dimensional matrix expected");}});function Ks(e,t,n){var r;return-1!==String(e).indexOf("Unexpected type")?(r=arguments.length>2?" (type: "+G(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):-1!==String(e).indexOf("complex numbers")?(r=arguments.length>2?" (type: "+G(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e;}var eu=et("min",["typed","config","numeric","smaller"],function(e){var t=e.typed,n=e.config,r=e.numeric,i=e.smaller;return t("min",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function ArrayMatrixNumberBigNumber(e,t){return ir(e,t.valueOf(),o);},"...":function _(e){if(tr(e))throw new TypeError("Scalar values expected in function min");return a(e);}});function o(e,t){try{return i(e,t)?e:t;}catch(e){throw Ks(e,"min",t);}}function a(e){var t;if(nr(e,function(e){try{isNaN(e)&&"number"==typeof e?t=NaN:(void 0===t||i(e,t))&&(t=e);}catch(t){throw Ks(t,"min",e);}}),void 0===t)throw new Error("Cannot calculate min of an empty array");return"string"==typeof t&&(t=r(t,n.number)),t;}}),tu=et("cot",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("cot",{number:Xi,Complex:function Complex(e){return e.cot();},BigNumber:function BigNumber(e){return new n(1).div(e.tan());},Unit:function Unit(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return this(e.value);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),nu=et("setDistinct",["typed","size","subset","compareNatural","Index","DenseMatrix"],function(e){var t=e.typed,n=e.size,r=e.subset,i=e.compareNatural,o=e.Index,a=e.DenseMatrix;return t("setDistinct",{"Array | Matrix":function ArrayMatrix(e){var t;if(0===r(n(e),new o(0)))t=[];else{var s=Ge(Array.isArray(e)?e:e.toArray()).sort(i);(t=[]).push(s[0]);for(var u=1;u<s.length;u++){0!==i(s[u],s[u-1])&&t.push(s[u]);}}return Array.isArray(e)?t:new a(t);}});}),ru=et("setPowerset",["typed","size","subset","compareNatural","Index"],function(e){var t=e.typed,n=e.size,r=e.subset,i=e.compareNatural,o=e.Index;return t("setPowerset",{"Array | Matrix":function ArrayMatrix(e){if(0===r(n(e),new o(0)))return[];for(var t=Ge(Array.isArray(e)?e:e.toArray()).sort(i),s=[],u=0;u.toString(2).length<=t.length;){s.push(a(t,u.toString(2).split("").reverse())),u++;}return function(e){for(var t=[],n=e.length-1;n>0;n--){for(var r=0;r<n;r++){e[r].length>e[r+1].length&&(t=e[r],e[r]=e[r+1],e[r+1]=t);}}return e;}(s);}});function a(e,t){for(var n=[],r=0;r<t.length;r++){"1"===t[r]&&n.push(e[r]);}return n;}}),iu=et("index",["typed","Index"],function(e){var t=e.typed,n=e.Index;return t("index",{"...number | string | BigNumber | Range | Array | Matrix":function numberStringBigNumberRangeArrayMatrix(e){var t=e.map(function(e){return s(e)?e.toNumber():Array.isArray(e)||h(e)?e.map(function(e){return s(e)?e.toNumber():e;}):e;}),r=new n();return n.apply(r,t),r;}});}),ou=et("sum",["typed","config","add","numeric"],function(e){var t=e.typed,n=e.config,r=e.add,i=e.numeric;return t("sum",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function ArrayMatrixNumberBigNumber(e,t){try{return ir(e,t,r);}catch(e){throw Ks(e,"sum");}},"...":function _(e){if(tr(e))throw new TypeError("Scalar values expected in function sum");return o(e);}});function o(e){var t;return nr(e,function(e){try{t=void 0===t?e:r(t,e);}catch(t){throw Ks(t,"sum",e);}}),void 0===t&&(t=i(0,n.number)),"string"==typeof t&&(t=i(t,n.number)),t;}}),au=et("factorial",["typed","gamma"],function(e){var t=e.typed,n=e.gamma;return t("factorial",{number:function number(e){if(e<0)throw new Error("Value must be non-negative");return n(e+1);},BigNumber:function BigNumber(e){if(e.isNegative())throw new Error("Value must be non-negative");return n(e.plus(1));},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),su=et("permutations",["typed","factorial"],function(e){return(0,e.typed)("permutations",{"number | BigNumber":e.factorial,"number, number":function numberNumber(e,t){if(!ae(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(!ae(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(t>e)throw new TypeError("second argument k must be less than or equal to first argument n");return ho(e-t+1,e);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){var n,r;if(!uu(e)||!uu(t))throw new TypeError("Positive integer value expected in function permutations");if(t.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(n=e.mul(0).add(1),r=e.minus(t).plus(1);r.lte(e);r=r.plus(1)){n=n.times(r);}return n;}});});function uu(e){return e.isInteger()&&e.gte(0);}var cu=et("ceil",["typed","config","round"],function(e){var t=e.typed,n=e.config,r=e.round;return t("ceil",{number:function number(e){return be(e,r(e),n.epsilon)?r(e):Nr(e);},Complex:function Complex(e){return e.ceil();},BigNumber:function BigNumber(e){return mr(e,r(e),n.epsilon)?r(e):e.ceil();},Fraction:function Fraction(e){return e.ceil();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),lu=et("subtract",["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.addScalar,o=e.unaryMinus,a=e.DenseMatrix,s=Qo({typed:t}),u=oa({typed:t}),c=aa({typed:t,equalScalar:r}),l=ea({typed:t,DenseMatrix:a}),p=ta({typed:t}),d=na({typed:t});return t("subtract",{"number, number":function numberNumber(e,t){return e-t;},"Complex, Complex":function ComplexComplex(e,t){return e.sub(t);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.minus(t);},"Fraction, Fraction":function FractionFraction(e,t){return e.sub(t);},"Unit, Unit":function UnitUnit(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n;},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return pu(e,t),c(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return pu(e,t),u(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return pu(e,t),s(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return pu(e,t),p(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return l(e,o(t),i);},"DenseMatrix, any":function DenseMatrixAny(e,t){return d(e,t,this);},"any, SparseMatrix":function anySparseMatrix(e,t){return l(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return d(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return d(n(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return d(n(t),e,this,!0).valueOf();}});});function pu(e,t){var n=e.size(),r=t.size();if(n.length!==r.length)throw new Ie(n.length,r.length);}var du=et("cross",["typed","matrix","subtract","multiply"],function(e){var t=e.typed,n=e.matrix,r=e.subtract,i=e.multiply;return t("cross",{"Matrix, Matrix":function MatrixMatrix(e,t){return n(o(e.toArray(),t.toArray()));},"Matrix, Array":function MatrixArray(e,t){return n(o(e.toArray(),t));},"Array, Matrix":function ArrayMatrix(e,t){return n(o(e,t.toArray()));},"Array, Array":o});function o(e,t){var n=Math.max(Fe(e).length,Fe(t).length);e=He(e),t=He(t);var o=Fe(e),a=Fe(t);if(1!==o.length||1!==a.length||3!==o[0]||3!==a[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+o.join(", ")+"], B = ["+a.join(", ")+"])");var s=[r(i(e[1],t[2]),i(e[2],t[1])),r(i(e[2],t[0]),i(e[0],t[2])),r(i(e[0],t[1]),i(e[1],t[0]))];return n>1?[s]:s;}}),hu=et("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.bignumber,o=e.smaller,a=e.smallerEq,s=e.larger,u=e.largerEq;return t("range",{string:l,"string, boolean":l,"number, number":function numberNumber(e,t){return c(p(e,t,1));},"number, number, number":function numberNumberNumber(e,t,n){return c(p(e,t,n));},"number, number, boolean":function numberNumberBoolean(e,t,n){return c(n?d(e,t,1):p(e,t,1));},"number, number, number, boolean":function numberNumberNumberBoolean(e,t,n,r){return c(r?d(e,t,n):p(e,t,n));},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return c(h(e,t,new(0,e.constructor)(1)));},"BigNumber, BigNumber, BigNumber":function BigNumberBigNumberBigNumber(e,t,n){return c(h(e,t,n));},"BigNumber, BigNumber, boolean":function BigNumberBigNumberBoolean(e,t,n){var r=e.constructor;return c(n?f(e,t,new r(1)):h(e,t,new r(1)));},"BigNumber, BigNumber, BigNumber, boolean":function BigNumberBigNumberBigNumberBoolean(e,t,n,r){return c(r?f(e,t,n):h(e,t,n));}});function c(e){return"Matrix"===n.matrix?r?r(e):Ea():e;}function l(e,t){var r=function(e){var t=e.split(":").map(function(e){return Number(e);});if(t.some(function(e){return isNaN(e);}))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null;}}(e);if(!r)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===n.number?(void 0===i&&Ma(),c((t?f:h)(i(r.start),i(r.end),i(r.step)))):c((t?d:p)(r.start,r.end,r.step));}function p(e,t,n){var r=[],i=e;if(n>0)for(;o(i,t);){r.push(i),i+=n;}else if(n<0)for(;s(i,t);){r.push(i),i+=n;}return r;}function d(e,t,n){var r=[],i=e;if(n>0)for(;a(i,t);){r.push(i),i+=n;}else if(n<0)for(;u(i,t);){r.push(i),i+=n;}return r;}function h(e,t,n){var r=i(0),a=[],u=e;if(n.gt(r))for(;o(u,t);){a.push(u),u=u.plus(n);}else if(n.lt(r))for(;s(u,t);){a.push(u),u=u.plus(n);}return a;}function f(e,t,n){var r=i(0),o=[],s=e;if(n.gt(r))for(;a(s,t);){o.push(s),s=s.plus(n);}else if(n.lt(r))for(;u(s,t);){o.push(s),s=s.plus(n);}return o;}}),fu=et("ctranspose",["typed","transpose","conj"],function(e){var t=e.typed,n=e.transpose,r=e.conj;return t("ctranspose",{any:function any(e){return r(n(e));}});}),mu=et("divideScalar",["typed","numeric"],function(e){var t=e.typed,n=e.numeric;return t("divideScalar",{"number, number":function numberNumber(e,t){return e/t;},"Complex, Complex":function ComplexComplex(e,t){return e.div(t);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return e.div(t);},"Fraction, Fraction":function FractionFraction(e,t){return e.div(t);},"Unit, number | Fraction | BigNumber":function UnitNumberFractionBigNumber(e,t){var r=e.clone(),i=n(1,G(t));return r.value=this(null===r.value?r._normalize(i):r.value,t),r;},"number | Fraction | BigNumber, Unit":function numberFractionBigNumberUnit(e,t){var r=t.clone();r=r.pow(-1);var i=n(1,G(e));return r.value=this(e,null===t.value?t._normalize(i):t.value),r;},"Unit, Unit":function UnitUnit(e,t){return e.divide(t);}});}),yu=et("nthRoots",["config","typed","divideScalar","Complex"],function(e){var t=e.typed,n=(e.config,e.divideScalar,e.Complex),r=[function(e){return new n(e,0);},function(e){return new n(0,e);},function(e){return new n(-e,0);},function(e){return new n(0,-e);}];function i(e,t){if(t<0)throw new Error("Root must be greater than zero");if(0===t)throw new Error("Root must be non-zero");if(t%1!=0)throw new Error("Root must be an integer");if(0===e||0===e.abs())return[new n(0,0)];var i,o="number"==typeof e;(o||0===e.re||0===e.im)&&(i=o?2*+(e<0):0===e.im?2*+(e.re<0):2*+(e.im<0)+1);for(var a=e.arg(),s=e.abs(),u=[],c=Math.pow(s,1/t),l=0;l<t;l++){var p=(i+4*l)/t;p!==Math.round(p)?u.push(new n({r:c,phi:(a+2*Math.PI*l)/t})):u.push(r[p%4](c));}return u;}return t("nthRoots",{Complex:function Complex(e){return i(e,2);},"Complex, number":i});});function gu(e){var t=e.DenseMatrix;return function(e,n,r){var i=e.size();if(2!==i.length)throw new RangeError("Matrix must be two dimensional (size: "+Re(i)+")");var o,a,s,u=i[0];if(u!==i[1])throw new RangeError("Matrix must be square (size: "+Re(i)+")");if(h(n)){var c=n.size();if(1===c.length){if(c[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(o=[],s=n._data,a=0;a<u;a++){o[a]=[s[a]];}return new t({data:o,size:[u,1],datatype:n._datatype});}if(2===c.length){if(c[0]!==u||1!==c[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(m(n)){if(r){for(o=[],s=n._data,a=0;a<u;a++){o[a]=[s[a][0]];}return new t({data:o,size:[u,1],datatype:n._datatype});}return n;}for(o=[],a=0;a<u;a++){o[a]=[0];}for(var l=n._values,p=n._index,f=n._ptr,y=f[1],g=f[0];g<y;g++){o[a=p[g]][0]=l[g];}return new t({data:o,size:[u,1],datatype:n._datatype});}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");}if(d(n)){var v=Fe(n);if(1===v.length){if(v[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(o=[],a=0;a<u;a++){o[a]=[n[a]];}return new t({data:o,size:[u,1]});}if(2===v.length){if(v[0]!==u||1!==v[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(o=[],a=0;a<u;a++){o[a]=[n[a][0]];}return new t({data:o,size:[u,1]});}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");}};}var vu=et("lsolve",["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,i=e.multiplyScalar,o=e.subtract,a=e.equalScalar,s=e.DenseMatrix,u=gu({DenseMatrix:s});return t("lsolve",{"SparseMatrix, Array | Matrix":function SparseMatrixArrayMatrix(e,t){return function(e,t){for(var n,c,l=(t=u(e,t,!0))._data,p=e._size[0],d=e._size[1],h=e._values,f=e._index,m=e._ptr,y=[],g=0;g<d;g++){var v=l[g][0]||0;if(a(v,0))y[g]=[0];else{var x=0,b=[],w=[],S=m[g+1];for(c=m[g];c<S;c++){(n=f[c])===g?x=h[c]:n>g&&(b.push(h[c]),w.push(n));}if(a(x,0))throw new Error("Linear system cannot be solved since matrix is singular");var M=r(v,x);for(c=0,S=w.length;c<S;c++){n=w[c],l[n]=[o(l[n][0]||0,i(M,b[c]))];}y[g]=[M];}}return new s({data:y,size:[p,1]});}(e,t);},"DenseMatrix, Array | Matrix":function DenseMatrixArrayMatrix(e,t){return c(e,t);},"Array, Array | Matrix":function ArrayArrayMatrix(e,t){return c(n(e),t).valueOf();}});function c(e,t){for(var n=(t=u(e,t,!0))._data,c=e._size[0],l=e._size[1],p=[],d=e._data,h=0;h<l;h++){var f=n[h][0]||0,m=void 0;if(a(f,0))m=0;else{var y=d[h][h];if(a(y,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(f,y);for(var g=h+1;g<c;g++){n[g]=[o(n[g][0]||0,i(m,d[g][h]))];}}p[h]=[m];}return new s({data:p,size:[c,1]});}}),xu=et("equal",["typed","matrix","equalScalar","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,o=oa({typed:t}),a=fa({typed:t,DenseMatrix:i}),s=ua({typed:t,DenseMatrix:i}),u=ta({typed:t}),c=na({typed:t});return t("equal",{"any, any":function anyAny(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return a(e,t,r);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return o(t,e,r,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return o(e,t,r,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return u(e,t,r);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,r,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return c(e,t,r,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return s(t,e,r,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return c(t,e,r,!0);},"Array, any":function ArrayAny(e,t){return c(n(e),t,r,!1).valueOf();},"any, Array":function anyArray(e,t){return c(n(t),e,r,!0).valueOf();}});}),bu=(et("equal",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return t("equal",{"any, any":function anyAny(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t);}});}),et("max",["typed","config","numeric","larger"],function(e){var t=e.typed,n=e.config,r=e.numeric,i=e.larger;return t("max",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function ArrayMatrixNumberBigNumber(e,t){return ir(e,t.valueOf(),o);},"...":function _(e){if(tr(e))throw new TypeError("Scalar values expected in function max");return a(e);}});function o(e,t){try{return i(e,t)?e:t;}catch(e){throw Ks(e,"max",t);}}function a(e){var t;if(nr(e,function(e){try{isNaN(e)&&"number"==typeof e?t=NaN:(void 0===t||i(e,t))&&(t=e);}catch(t){throw Ks(t,"max",e);}}),void 0===t)throw new Error("Cannot calculate max of an empty array");return"string"==typeof t&&(t=r(t,n.number)),t;}})),wu=et("setCartesian",["typed","size","subset","compareNatural","Index","DenseMatrix"],function(e){var t=e.typed,n=e.size,r=e.subset,i=e.compareNatural,o=e.Index,a=e.DenseMatrix;return t("setCartesian",{"Array | Matrix, Array | Matrix":function ArrayMatrixArrayMatrix(e,t){var s=[];if(0!==r(n(e),new o(0))&&0!==r(n(t),new o(0))){var u=Ge(Array.isArray(e)?e:e.toArray()).sort(i),c=Ge(Array.isArray(t)?t:t.toArray()).sort(i);s=[];for(var l=0;l<u.length;l++){for(var p=0;p<c.length;p++){s.push([u[l],c[p]]);}}}return Array.isArray(e)&&Array.isArray(t)?s:new a(s);}});}),Su=et("setSymDifference",["typed","size","concat","subset","setDifference","Index"],function(e){var t=e.typed,n=e.size,r=e.concat,i=e.subset,o=e.setDifference,a=e.Index;return t("setSymDifference",{"Array | Matrix, Array | Matrix":function ArrayMatrixArrayMatrix(e,t){if(0===i(n(e),new a(0)))return Ge(t);if(0===i(n(t),new a(0)))return Ge(e);var s=Ge(e),u=Ge(t);return r(o(s,u),o(u,s));}});}),Mu=et("hypot",["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],function(e){var t=e.typed,n=e.abs,r=e.addScalar,i=e.divideScalar,o=e.multiplyScalar,a=e.sqrt,s=e.smaller,u=e.isPositive;return t("hypot",{"... number | BigNumber":function numberBigNumber(e){for(var t=0,c=0,l=0;l<e.length;l++){var p=n(e[l]);s(c,p)?(t=o(t,o(i(c,p),i(c,p))),t=r(t,1),c=p):t=r(t,u(p)?o(i(p,c),i(p,c)):p);}return o(c,a(t));},Array:function Array(e){return this.apply(this,Ge(e));},Matrix:function Matrix(e){return this.apply(this,Ge(e.toArray()));}});});function _u(){return(_u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}}return e;}).apply(this,arguments);}var Eu=et("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],function(e){var t=e.typed,n=e.matrix,r=e.zeros,i=e.identity,o=e.isZero,a=e.equal,s=e.sign,u=e.sqrt,c=e.conj,l=e.unaryMinus,p=e.addScalar,d=e.divideScalar,h=e.multiplyScalar,f=e.subtract,m=e.complex;return _u(t("qr",{DenseMatrix:function DenseMatrix(e){return g(e);},SparseMatrix:function SparseMatrix(e){return function(e){throw new Error("qr not implemented for sparse matrices yet");}();},Array:function Array(e){var t=g(n(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()};}}),{_denseQRimpl:y});function y(e){var t,n,m,y=e._size[0],g=e._size[1],v=i([y],"dense"),x=v._data,b=e.clone(),w=b._data,S=r([y],"");for(m=0;m<Math.min(g,y);++m){var M=w[m][m],_=l(a(M,0)?1:s(M)),E=c(_),A=0;for(t=m;t<y;t++){A=p(A,h(w[t][m],c(w[t][m])));}var T=h(_,u(A));if(!o(T)){var N=f(M,T);for(S[m]=1,t=m+1;t<y;t++){S[t]=d(w[t][m],N);}var D=l(c(d(N,T))),C=void 0;for(n=m;n<g;n++){for(C=0,t=m;t<y;t++){C=p(C,h(c(S[t]),w[t][n]));}for(C=h(C,D),t=m;t<y;t++){w[t][n]=h(f(w[t][n],h(S[t],C)),E);}}for(t=0;t<y;t++){for(C=0,n=m;n<y;n++){C=p(C,h(x[t][n],S[n]));}for(C=h(C,D),n=m;n<y;++n){x[t][n]=d(f(x[t][n],h(C,c(S[n]))),E);}}}}return{Q:v,R:b,toString:function toString(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString();}};}function g(e){var t=y(e),n=t.R._data;if(e._data.length>0)for(var r="Complex"===n[0][0].type?m(0):0,i=0;i<n.length;++i){for(var o=0;o<i&&o<(n[0]||[]).length;++o){n[i][o]=r;}}return t;}}),Au=et("distance",["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],function(e){var t=e.typed,n=e.addScalar,r=e.subtract,i=e.multiplyScalar,o=e.divideScalar,a=e.unaryMinus,u=e.sqrt,c=e.abs;return t("distance",{"Array, Array, Array":function ArrayArrayArray(e,t,n){if(2===e.length&&2===t.length&&2===n.length){if(!p(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!p(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!p(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var s=o(r(n[1],n[0]),r(t[1],t[0])),u=i(i(s,s),t[0]),c=a(i(s,t[0])),l=e[1];return y(e[0],e[1],u,c,l);}throw new TypeError("Invalid Arguments: Try again");},"Object, Object, Object":function ObjectObjectObject(e,t,n){if(2===Object.keys(e).length&&2===Object.keys(t).length&&2===Object.keys(n).length){if(!p(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!p(t))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!p(n))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"lineOnePtX"in t&&"lineOnePtY"in t&&"lineTwoPtX"in n&&"lineTwoPtY"in n){var s=o(r(n.lineTwoPtY,n.lineTwoPtX),r(t.lineOnePtY,t.lineOnePtX)),u=i(i(s,s),t.lineOnePtX),c=a(i(s,t.lineOnePtX)),l=e.pointX;return y(e.pointX,e.pointY,u,c,l);}throw new TypeError("Key names do not match");}throw new TypeError("Invalid Arguments: Try again");},"Array, Array":function ArrayArray(e,t){if(2===e.length&&3===t.length){if(!p(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(e[0],e[1],t[0],t[1],t[2]);}if(3===e.length&&6===t.length){if(!d(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(t))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5]);}if(e.length===t.length&&e.length>0){if(!h(e))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!h(t))throw new TypeError("All values of an array should be numbers or BigNumbers");return v(e,t);}throw new TypeError("Invalid Arguments: Try again");},"Object, Object":function ObjectObject(e,t){if(2===Object.keys(e).length&&3===Object.keys(t).length){if(!p(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!d(t))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"xCoeffLine"in t&&"yCoeffLine"in t&&"constant"in t)return y(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw new TypeError("Key names do not match");}if(3===Object.keys(e).length&&6===Object.keys(t).length){if(!d(e))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(t))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"x0"in t&&"y0"in t&&"z0"in t&&"a"in t&&"b"in t&&"c"in t)return g(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw new TypeError("Key names do not match");}if(2===Object.keys(e).length&&2===Object.keys(t).length){if(!p(e))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!p(t))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointTwoX"in t&&"pointTwoY"in t)return v([e.pointOneX,e.pointOneY],[t.pointTwoX,t.pointTwoY]);throw new TypeError("Key names do not match");}if(3===Object.keys(e).length&&3===Object.keys(t).length){if(!d(e))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!d(t))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointOneZ"in e&&"pointTwoX"in t&&"pointTwoY"in t&&"pointTwoZ"in t)return v([e.pointOneX,e.pointOneY,e.pointOneZ],[t.pointTwoX,t.pointTwoY,t.pointTwoZ]);throw new TypeError("Key names do not match");}throw new TypeError("Invalid Arguments: Try again");},Array:function Array(e){if(!function(e){if(2===e[0].length&&l(e[0][0])&&l(e[0][1])){if(e.some(function(e){return 2!==e.length||!l(e[0])||!l(e[1]);}))return!1;}else{if(!(3===e[0].length&&l(e[0][0])&&l(e[0][1])&&l(e[0][2])))return!1;if(e.some(function(e){return 3!==e.length||!l(e[0])||!l(e[1])||!l(e[2]);}))return!1;}return!0;}(e))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(e){for(var t=[],n=[],r=[],i=0;i<e.length-1;i++){for(var o=i+1;o<e.length;o++){2===e[0].length?(n=[e[i][0],e[i][1]],r=[e[o][0],e[o][1]]):3===e[0].length&&(n=[e[i][0],e[i][1],e[i][2]],r=[e[o][0],e[o][1],e[o][2]]),t.push(v(n,r));}}return t;}(e);}});function l(e){return"number"==typeof e||s(e);}function p(e){return e.constructor!==Array&&(e=m(e)),l(e[0])&&l(e[1]);}function d(e){return e.constructor!==Array&&(e=m(e)),l(e[0])&&l(e[1])&&l(e[2]);}function h(e){return Array.isArray(e)||(e=m(e)),e.every(l);}function f(e){return e.constructor!==Array&&(e=m(e)),l(e[0])&&l(e[1])&&l(e[2])&&l(e[3])&&l(e[4])&&l(e[5]);}function m(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++){n.push(e[t[r]]);}return n;}function y(e,t,r,a,s){var l=c(n(n(i(r,e),i(a,t)),s)),p=u(n(i(r,r),i(a,a)));return o(l,p);}function g(e,t,a,s,c,l,p,d,h){var f=[r(i(r(c,t),h),i(r(l,a),d)),r(i(r(l,a),p),i(r(s,e),h)),r(i(r(s,e),d),i(r(c,t),p))];f=u(n(n(i(f[0],f[0]),i(f[1],f[1])),i(f[2],f[2])));var m=u(n(n(i(p,p),i(d,d)),i(h,h)));return o(f,m);}function v(e,t){for(var o=e.length,a=0,s=0,c=0;c<o;c++){s=r(e[c],t[c]),a=n(i(s,s),a);}return u(a);}}),Tu=et("stirlingS2",["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","larger"],function(e){var t=e.typed,n=e.addScalar,r=e.subtract,i=e.multiplyScalar,o=e.divideScalar,a=e.pow,s=e.factorial,u=e.combinations,c=e.isNegative,l=e.isInteger,p=e.larger;return t("stirlingS2",{"number | BigNumber, number | BigNumber":function numberBigNumberNumberBigNumber(e,t){if(!l(e)||c(e)||!l(t)||c(t))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(p(t,e))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var d=s(t),h=0,f=0;f<=t;f++){var m=a(-1,r(t,f)),y=u(t,f),g=a(f,e);h=n(h,i(i(y,g),m));}return o(h,d);}});}),Nu=et("catalan",["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],function(e){var t=e.typed,n=e.addScalar,r=e.divideScalar,i=e.multiplyScalar,o=e.combinations,a=e.isNegative,s=e.isInteger;return t("catalan",{"number | BigNumber":function numberBigNumber(e){if(!s(e)||a(e))throw new TypeError("Non-negative integer value expected in function catalan");return r(o(i(e,2),e),n(e,1));}});}),Du=et("fix",["typed","Complex","ceil","floor"],function(e){var t=e.typed,n=e.Complex,r=e.ceil,i=e.floor;return t("fix",{number:function number(e){return e>0?i(e):r(e);},Complex:function Complex(e){return new n(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im));},BigNumber:function BigNumber(e){return e.isNegative()?r(e):i(e);},Fraction:function Fraction(e){return e.s<0?e.ceil():e.floor();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this,!0);}});}),Cu=et("column",["typed","Index","matrix","range"],function(e){var t=e.typed,n=e.Index,r=e.matrix,i=e.range;return t("column",{"Matrix, number":o,"Array, number":function ArrayNumber(e,t){return o(r(W(e)),t).valueOf();}});function o(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");ke(t,e.size()[1]);var r=i(0,e.size()[0]),o=new n(r,t);return e.subset(o);}}),Ru=et("row",["typed","Index","matrix","range"],function(e){var t=e.typed,n=e.Index,r=e.matrix,i=e.range;return t("row",{"Matrix, number":o,"Array, number":function ArrayNumber(e,t){return o(r(W(e)),t).valueOf();}});function o(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");ke(t,e.size()[0]);var r=i(0,e.size()[1]),o=new n(t,r);return e.subset(o);}}),Pu=et("log",["config","typed","divideScalar","Complex"],function(e){var t=e.typed,n=e.config,r=e.divideScalar,i=e.Complex;return t("log",{number:function number(e){return e>=0||n.predictable?Lr(e):new i(e,0).log();},Complex:function Complex(e){return e.log();},BigNumber:function BigNumber(e){return!e.isNegative()||n.predictable?e.ln():new i(e.toNumber(),0).log();},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);},"any, any":function anyAny(e,t){return r(this(e),this(t));}});}),Ou=et("dotDivide",["typed","matrix","equalScalar","divideScalar","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.divideScalar,o=e.DenseMatrix,a=ia({typed:t,equalScalar:r}),s=oa({typed:t}),u=fa({typed:t,DenseMatrix:o}),c=sa({typed:t,equalScalar:r}),l=ua({typed:t,DenseMatrix:o}),p=ta({typed:t}),d=na({typed:t});return t("dotDivide",{"any, any":i,"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return u(e,t,i,!1);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return a(t,e,i,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return s(e,t,i,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return p(e,t,i);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return c(e,t,i,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return d(e,t,i,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return l(t,e,i,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return d(t,e,i,!0);},"Array, any":function ArrayAny(e,t){return d(n(e),t,i,!1).valueOf();},"any, Array":function anyArray(e,t){return d(n(t),e,i,!0).valueOf();}});}),Lu=et("deepEqual",["typed","equal"],function(e){var t=e.typed,n=e.equal;return t("deepEqual",{"any, any":function anyAny(e,t){return function e(t,r){if(Array.isArray(t)){if(Array.isArray(r)){var i=t.length;if(i!==r.length)return!1;for(var o=0;o<i;o++){if(!e(t[o],r[o]))return!1;}return!0;}return!1;}return!Array.isArray(r)&&n(t,r);}(e.valueOf(),t.valueOf());}});});function Iu(e){return(Iu="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function Bu(){return(Bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}}return e;}).apply(this,arguments);}function Fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable;})),n.push.apply(n,r);}return n;}function zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(n),!0).forEach(function(t){ku(e,t,n[t]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t));});}return e;}function ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;}var Uu=et("Unit",["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],function(e){var t,n,r,i=e.on,o=e.config,a=e.addScalar,s=e.subtract,c=e.multiplyScalar,p=e.divideScalar,d=e.pow,h=e.abs,f=e.fix,m=e.round,y=e.equal,g=e.isNumeric,v=e.format,x=e.number,b=e.Complex,w=e.BigNumber,S=e.Fraction,M=x;function _(e,t){if(!(this instanceof _))throw new Error("Constructor must be called with the new operator");if(null!=e&&!g(e)&&!u(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!==t&&("string"!=typeof t||""===t))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!==t){var n=_.parse(t);this.units=n.units,this.dimensions=n.dimensions;}else{this.units=[{unit:z,prefix:L.NONE,power:0}],this.dimensions=[];for(var r=0;r<I.length;r++){this.dimensions[r]=0;}}this.value=null!=e?this._normalize(e):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0;}function E(){for(;" "===r||"\t"===r;){T();}}function A(e){return e>="0"&&e<="9";}function T(){n++,r=t.charAt(n);}function N(e){n=e,r=t.charAt(n);}function D(){var e="",t=n;if("+"===r?T():"-"===r&&(e+=r,T()),!function(e){return e>="0"&&e<="9"||"."===e;}(r))return N(t),null;if("."===r){if(e+=r,T(),!A(r))return N(t),null;}else{for(;A(r);){e+=r,T();}"."===r&&(e+=r,T());}for(;A(r);){e+=r,T();}if("E"===r||"e"===r){var i="",o=n;if(i+=r,T(),"+"!==r&&"-"!==r||(i+=r,T()),!A(r))return N(o),e;for(e+=i;A(r);){e+=r,T();}}return e;}function C(){for(var e="",i=t.charCodeAt(n);i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122;){e+=r,T(),i=t.charCodeAt(n);}return((i=e.charCodeAt(0))>=65&&i<=90||i>=97&&i<=122)&&e||null;}function R(e){return r===e?(T(),e):null;}function P(e){if(Q(k,e)){var t=k[e];return{unit:t,prefix:t.prefixes[""]};}for(var n in k){if(Q(k,n)&&Ce(e,n)){var r=k[n],i=e.length-n.length,o=e.substring(0,i),a=Q(r.prefixes,o)?r.prefixes[o]:void 0;if(void 0!==a)return{unit:r,prefix:a};}}return null;}function O(e){return e.equalBase(B.NONE)&&null!==e.value&&!o.predictable?e.value:e;}_.prototype.type="Unit",_.prototype.isUnit=!0,_.parse=function(e,i){if(i=i||{},n=-1,r="","string"!=typeof(t=e))throw new TypeError("Invalid argument in Unit.parse, string expected");var a=new _();a.units=[];var s=1,u=!1;T(),E();var c=D(),l=null;if(c){if("BigNumber"===o.number)l=new w(c);else if("Fraction"===o.number)try{l=new S(c);}catch(e){l=parseFloat(c);}else l=parseFloat(c);E(),R("*")?(s=1,u=!0):R("/")&&(s=-1,u=!0);}for(var p=[],d=1;;){for(E();"("===r;){p.push(s),d*=s,s=1,T(),E();}var h=void 0;if(!r)break;var f=r;if(null===(h=C()))throw new SyntaxError('Unexpected "'+f+'" in "'+t+'" at index '+n.toString());var m=P(h);if(null===m)throw new SyntaxError('Unit "'+h+'" not found.');var y=s*d;if(E(),R("^")){E();var g=D();if(null===g)throw new SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');y*=g;}a.units.push({unit:m.unit,prefix:m.prefix,power:y});for(var v=0;v<I.length;v++){a.dimensions[v]+=(m.unit.dimensions[v]||0)*y;}for(E();")"===r;){if(0===p.length)throw new SyntaxError('Unmatched ")" in "'+t+'" at index '+n.toString());d/=p.pop(),T(),E();}if(u=!1,R("*")?(s=1,u=!0):R("/")?(s=-1,u=!0):s=1,m.unit.base){var x=m.unit.base.key;H.auto[x]={unit:m.unit,prefix:m.prefix};}}if(E(),r)throw new SyntaxError('Could not parse: "'+e+'"');if(u)throw new SyntaxError('Trailing characters: "'+e+'"');if(0!==p.length)throw new SyntaxError('Unmatched "(" in "'+t+'"');if(0===a.units.length&&!i.allowNoUnits)throw new SyntaxError('"'+e+'" contains no units');return a.value=void 0!==l?a._normalize(l):null,a;},_.prototype.clone=function(){var e=new _();e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=W(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++){for(var n in e.units[t]={},this.units[t]){Q(this.units[t],n)&&(e.units[t][n]=this.units[t][n]);}}return e;},_.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15);},_.prototype._normalize=function(e){var t,n,r,i,o;if(null==e||0===this.units.length)return e;if(this._isDerived()){var s=e;o=_._getNumberConverter(G(e));for(var u=0;u<this.units.length;u++){t=o(this.units[u].unit.value),i=o(this.units[u].prefix.value),r=o(this.units[u].power),s=c(s,d(c(t,i),r));}return s;}return t=(o=_._getNumberConverter(G(e)))(this.units[0].unit.value),n=o(this.units[0].unit.offset),i=o(this.units[0].prefix.value),c(a(e,n),c(t,i));},_.prototype._denormalize=function(e,t){var n,r,i,o,a;if(null==e||0===this.units.length)return e;if(this._isDerived()){var u=e;a=_._getNumberConverter(G(e));for(var l=0;l<this.units.length;l++){n=a(this.units[l].unit.value),o=a(this.units[l].prefix.value),i=a(this.units[l].power),u=p(u,d(c(n,o),i));}return u;}return n=(a=_._getNumberConverter(G(e)))(this.units[0].unit.value),o=a(this.units[0].prefix.value),r=a(this.units[0].unit.offset),s(p(p(e,n),null==t?o:t),r);},_.isValuelessUnit=function(e){return null!==P(e);},_.prototype.hasBase=function(e){if("string"==typeof e&&(e=B[e]),!e)return!1;for(var t=0;t<I.length;t++){if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;}return!0;},_.prototype.equalBase=function(e){for(var t=0;t<I.length;t++){if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;}return!0;},_.prototype.equals=function(e){return this.equalBase(e)&&y(this.value,e.value);},_.prototype.multiply=function(e){for(var t=this.clone(),n=0;n<I.length;n++){t.dimensions[n]=(this.dimensions[n]||0)+(e.dimensions[n]||0);}for(var r=0;r<e.units.length;r++){var i=zu({},e.units[r]);t.units.push(i);}if(null!==this.value||null!==e.value){var o=null===this.value?this._normalize(1):this.value,a=null===e.value?e._normalize(1):e.value;t.value=c(o,a);}else t.value=null;return t.skipAutomaticSimplification=!1,O(t);},_.prototype.divide=function(e){for(var t=this.clone(),n=0;n<I.length;n++){t.dimensions[n]=(this.dimensions[n]||0)-(e.dimensions[n]||0);}for(var r=0;r<e.units.length;r++){var i=zu(zu({},e.units[r]),{},{power:-e.units[r].power});t.units.push(i);}if(null!==this.value||null!==e.value){var o=null===this.value?this._normalize(1):this.value,a=null===e.value?e._normalize(1):e.value;t.value=p(o,a);}else t.value=null;return t.skipAutomaticSimplification=!1,O(t);},_.prototype.pow=function(e){for(var t=this.clone(),n=0;n<I.length;n++){t.dimensions[n]=(this.dimensions[n]||0)*e;}for(var r=0;r<t.units.length;r++){t.units[r].power*=e;}return null!==t.value?t.value=d(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,O(t);},_.prototype.abs=function(){var e=this.clone();for(var t in e.value=null!==e.value?h(e.value):null,e.units){"VA"!==e.units[t].unit.name&&"VAR"!==e.units[t].unit.name||(e.units[t].unit=k.W);}return e;},_.prototype.to=function(e){var t,n=null===this.value?this._normalize(1):this.value;if("string"==typeof e){if(t=_.parse(e),!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");return t.value=W(n),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t;}if(l(e)){if(!this.equalBase(e))throw new Error("Units do not match ('".concat(e.toString(),"' != '").concat(this.toString(),"')"));if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return(t=e.clone()).value=W(n),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t;}throw new Error("String or Unit expected as parameter");},_.prototype.toNumber=function(e){return M(this.toNumeric(e));},_.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value);},_.prototype.toString=function(){return this.format();},_.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix};},_.fromJSON=function(e){var t=new _(e.value,e.unit);return t.fixPrefix=e.fixPrefix||!1,t;},_.prototype.valueOf=_.prototype.toString,_.prototype.simplify=function(){var e,t,n=this.clone(),r=[];for(var i in q){if(Q(q,i)&&n.hasBase(B[i])){e=i;break;}}if("NONE"===e)n.units=[];else if(e&&Q(q,e)&&(t=q[e]),t)n.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var o=!1,a=0;a<I.length;a++){var s=I[a];Math.abs(n.dimensions[a]||0)>1e-12&&(Q(q,s)?r.push({unit:q[s].unit,prefix:q[s].prefix,power:n.dimensions[a]||0}):o=!0);}r.length<n.units.length&&!o&&(n.units=r);}return n;},_.prototype.toSI=function(){for(var e=this.clone(),t=[],n=0;n<I.length;n++){var r=I[n];if(Math.abs(e.dimensions[n]||0)>1e-12){if(!Q(H.si,r))throw new Error("Cannot express custom unit "+r+" in SI units");t.push({unit:H.si[r].unit,prefix:H.si[r].prefix,power:e.dimensions[n]||0});}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e;},_.prototype.formatUnits=function(){for(var e="",t="",n=0,r=0,i=0;i<this.units.length;i++){this.units[i].power>0?(n++,e+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(e+="^"+this.units[i].power)):this.units[i].power<0&&r++;}if(r>0)for(var o=0;o<this.units.length;o++){this.units[o].power<0&&(n>0?(t+=" "+this.units[o].prefix.name+this.units[o].unit.name,Math.abs(this.units[o].power+1)>1e-15&&(t+="^"+-this.units[o].power)):(t+=" "+this.units[o].prefix.name+this.units[o].unit.name,t+="^"+this.units[o].power));}e=e.substr(1),t=t.substr(1),n>1&&r>0&&(e="("+e+")"),r>1&&n>0&&(t="("+t+")");var a=e;return n>0&&r>0&&(a+=" / "),a+=t;},_.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),n=!1;for(var r in void 0!==t.value&&null!==t.value&&u(t.value)&&(n=Math.abs(t.value.re)<1e-14),t.units){Q(t.units,r)&&t.units[r].unit&&("VA"===t.units[r].unit.name&&n?t.units[r].unit=k.VAR:"VAR"!==t.units[r].unit.name||n||(t.units[r].unit=k.VA));}1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))<1e-14&&(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),o=null!==t.value?v(i,e||{}):"",a=t.formatUnits();return t.value&&u(t.value)&&(o="("+o+")"),a.length>0&&o.length>0&&(o+=" "),o+=a;},_.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?h(this.value):0,t=h(this.units[0].unit.value),n=this.units[0].prefix;if(0===e)return n;var r=this.units[0].power,i=Math.log(e/Math.pow(n.value*t,r))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return n;i=Math.abs(i);var o=this.units[0].unit.prefixes;for(var a in o){if(Q(o,a)){var s=o[a];if(s.scientific){var u=Math.abs(Math.log(e/Math.pow(s.value*t,r))/Math.LN10-1.2);(u<i||u===i&&s.name.length<n.name.length)&&(n=s,i=u);}}}return n;},_.prototype.splitUnit=function(e){for(var t=this.clone(),n=[],r=0;r<e.length&&(t=t.to(e[r]),r!==e.length-1);r++){var i=t.toNumeric(),o=m(i),u=new _(y(o,i)?o:f(t.toNumeric()),e[r].toString());n.push(u),t=s(t,u);}for(var c=0,l=0;l<n.length;l++){c=a(c,n[l].value);}return y(c,this.value)&&(t.value=0),n.push(t),n;};var L={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};L.SHORTLONG=Bu({},L.SHORT,L.LONG),L.BINARY_SHORT=Bu({},L.BINARY_SHORT_SI,L.BINARY_SHORT_IEC),L.BINARY_LONG=Bu({},L.BINARY_LONG_SI,L.BINARY_LONG_IEC);var I=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],B={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var F in B){Q(B,F)&&(B[F].key=F);}var z={name:"",base:{},value:1,offset:0,dimensions:I.map(function(e){return 0;})},k={meter:{name:"meter",base:B.LENGTH,prefixes:L.LONG,value:1,offset:0},inch:{name:"inch",base:B.LENGTH,prefixes:L.NONE,value:.0254,offset:0},foot:{name:"foot",base:B.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yard:{name:"yard",base:B.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mile:{name:"mile",base:B.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},link:{name:"link",base:B.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rod:{name:"rod",base:B.LENGTH,prefixes:L.NONE,value:5.0292,offset:0},chain:{name:"chain",base:B.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:B.LENGTH,prefixes:L.NONE,value:1e-10,offset:0},m:{name:"m",base:B.LENGTH,prefixes:L.SHORT,value:1,offset:0},"in":{name:"in",base:B.LENGTH,prefixes:L.NONE,value:.0254,offset:0},ft:{name:"ft",base:B.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yd:{name:"yd",base:B.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mi:{name:"mi",base:B.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},li:{name:"li",base:B.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rd:{name:"rd",base:B.LENGTH,prefixes:L.NONE,value:5.02921,offset:0},ch:{name:"ch",base:B.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},mil:{name:"mil",base:B.LENGTH,prefixes:L.NONE,value:254e-7,offset:0},m2:{name:"m2",base:B.SURFACE,prefixes:L.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:B.SURFACE,prefixes:L.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:B.SURFACE,prefixes:L.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:B.SURFACE,prefixes:L.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:B.SURFACE,prefixes:L.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:B.SURFACE,prefixes:L.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:B.SURFACE,prefixes:L.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:B.SURFACE,prefixes:L.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:B.SURFACE,prefixes:L.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:B.SURFACE,prefixes:L.NONE,value:1e4,offset:0},m3:{name:"m3",base:B.VOLUME,prefixes:L.CUBIC,value:1,offset:0},L:{name:"L",base:B.VOLUME,prefixes:L.SHORT,value:.001,offset:0},l:{name:"l",base:B.VOLUME,prefixes:L.SHORT,value:.001,offset:0},litre:{name:"litre",base:B.VOLUME,prefixes:L.LONG,value:.001,offset:0},cuin:{name:"cuin",base:B.VOLUME,prefixes:L.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:B.VOLUME,prefixes:L.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:B.VOLUME,prefixes:L.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:B.VOLUME,prefixes:L.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:B.VOLUME,prefixes:L.NONE,value:15e-6,offset:0},drop:{name:"drop",base:B.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:B.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},minim:{name:"minim",base:B.VOLUME,prefixes:L.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:B.VOLUME,prefixes:L.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:B.VOLUME,prefixes:L.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:B.VOLUME,prefixes:L.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:B.VOLUME,prefixes:L.NONE,value:1e-6,offset:0},cup:{name:"cup",base:B.VOLUME,prefixes:L.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:B.VOLUME,prefixes:L.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:B.VOLUME,prefixes:L.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:B.VOLUME,prefixes:L.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:B.VOLUME,prefixes:L.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:B.VOLUME,prefixes:L.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:B.VOLUME,prefixes:L.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:B.VOLUME,prefixes:L.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:B.VOLUME,prefixes:L.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:B.VOLUME,prefixes:L.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:B.VOLUME,prefixes:L.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:B.VOLUME,prefixes:L.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:B.VOLUME,prefixes:L.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:B.VOLUME,prefixes:L.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:B.VOLUME,prefixes:L.NONE,value:.1173478,offset:0},obl:{name:"obl",base:B.VOLUME,prefixes:L.NONE,value:.1589873,offset:0},g:{name:"g",base:B.MASS,prefixes:L.SHORT,value:.001,offset:0},gram:{name:"gram",base:B.MASS,prefixes:L.LONG,value:.001,offset:0},ton:{name:"ton",base:B.MASS,prefixes:L.SHORT,value:907.18474,offset:0},t:{name:"t",base:B.MASS,prefixes:L.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:B.MASS,prefixes:L.LONG,value:1e3,offset:0},grain:{name:"grain",base:B.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:B.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:B.MASS,prefixes:L.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:B.MASS,prefixes:L.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:B.MASS,prefixes:L.NONE,value:45.359237,offset:0},stick:{name:"stick",base:B.MASS,prefixes:L.NONE,value:.115,offset:0},stone:{name:"stone",base:B.MASS,prefixes:L.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:B.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:B.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:B.MASS,prefixes:L.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:B.MASS,prefixes:L.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:B.MASS,prefixes:L.NONE,value:45.359237,offset:0},s:{name:"s",base:B.TIME,prefixes:L.SHORT,value:1,offset:0},min:{name:"min",base:B.TIME,prefixes:L.NONE,value:60,offset:0},h:{name:"h",base:B.TIME,prefixes:L.NONE,value:3600,offset:0},second:{name:"second",base:B.TIME,prefixes:L.LONG,value:1,offset:0},sec:{name:"sec",base:B.TIME,prefixes:L.LONG,value:1,offset:0},minute:{name:"minute",base:B.TIME,prefixes:L.NONE,value:60,offset:0},hour:{name:"hour",base:B.TIME,prefixes:L.NONE,value:3600,offset:0},day:{name:"day",base:B.TIME,prefixes:L.NONE,value:86400,offset:0},week:{name:"week",base:B.TIME,prefixes:L.NONE,value:604800,offset:0},month:{name:"month",base:B.TIME,prefixes:L.NONE,value:2629800,offset:0},year:{name:"year",base:B.TIME,prefixes:L.NONE,value:31557600,offset:0},decade:{name:"decade",base:B.TIME,prefixes:L.NONE,value:315576e3,offset:0},century:{name:"century",base:B.TIME,prefixes:L.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:B.TIME,prefixes:L.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:B.FREQUENCY,prefixes:L.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:B.FREQUENCY,prefixes:L.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:B.ANGLE,prefixes:L.SHORT,value:1,offset:0},radian:{name:"radian",base:B.ANGLE,prefixes:L.LONG,value:1,offset:0},deg:{name:"deg",base:B.ANGLE,prefixes:L.SHORT,value:null,offset:0},degree:{name:"degree",base:B.ANGLE,prefixes:L.LONG,value:null,offset:0},grad:{name:"grad",base:B.ANGLE,prefixes:L.SHORT,value:null,offset:0},gradian:{name:"gradian",base:B.ANGLE,prefixes:L.LONG,value:null,offset:0},cycle:{name:"cycle",base:B.ANGLE,prefixes:L.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:B.ANGLE,prefixes:L.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:B.ANGLE,prefixes:L.NONE,value:null,offset:0},A:{name:"A",base:B.CURRENT,prefixes:L.SHORT,value:1,offset:0},ampere:{name:"ampere",base:B.CURRENT,prefixes:L.LONG,value:1,offset:0},K:{name:"K",base:B.TEMPERATURE,prefixes:L.NONE,value:1,offset:0},degC:{name:"degC",base:B.TEMPERATURE,prefixes:L.NONE,value:1,offset:273.15},degF:{name:"degF",base:B.TEMPERATURE,prefixes:L.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:B.TEMPERATURE,prefixes:L.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:B.TEMPERATURE,prefixes:L.NONE,value:1,offset:0},celsius:{name:"celsius",base:B.TEMPERATURE,prefixes:L.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:B.TEMPERATURE,prefixes:L.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:B.TEMPERATURE,prefixes:L.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:B.AMOUNT_OF_SUBSTANCE,prefixes:L.SHORT,value:1,offset:0},mole:{name:"mole",base:B.AMOUNT_OF_SUBSTANCE,prefixes:L.LONG,value:1,offset:0},cd:{name:"cd",base:B.LUMINOUS_INTENSITY,prefixes:L.SHORT,value:1,offset:0},candela:{name:"candela",base:B.LUMINOUS_INTENSITY,prefixes:L.LONG,value:1,offset:0},N:{name:"N",base:B.FORCE,prefixes:L.SHORT,value:1,offset:0},newton:{name:"newton",base:B.FORCE,prefixes:L.LONG,value:1,offset:0},dyn:{name:"dyn",base:B.FORCE,prefixes:L.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:B.FORCE,prefixes:L.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:B.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:B.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:B.FORCE,prefixes:L.LONG,value:4448.2216,offset:0},J:{name:"J",base:B.ENERGY,prefixes:L.SHORT,value:1,offset:0},joule:{name:"joule",base:B.ENERGY,prefixes:L.SHORT,value:1,offset:0},erg:{name:"erg",base:B.ENERGY,prefixes:L.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:B.ENERGY,prefixes:L.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:B.ENERGY,prefixes:L.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:B.ENERGY,prefixes:L.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:B.ENERGY,prefixes:L.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:B.POWER,prefixes:L.SHORT,value:1,offset:0},watt:{name:"watt",base:B.POWER,prefixes:L.LONG,value:1,offset:0},hp:{name:"hp",base:B.POWER,prefixes:L.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:B.POWER,prefixes:L.SHORT,value:b.I,offset:0},VA:{name:"VA",base:B.POWER,prefixes:L.SHORT,value:1,offset:0},Pa:{name:"Pa",base:B.PRESSURE,prefixes:L.SHORT,value:1,offset:0},psi:{name:"psi",base:B.PRESSURE,prefixes:L.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:B.PRESSURE,prefixes:L.NONE,value:101325,offset:0},bar:{name:"bar",base:B.PRESSURE,prefixes:L.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:B.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:B.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:B.PRESSURE,prefixes:L.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:B.PRESSURE,prefixes:L.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:B.ELECTRIC_CHARGE,prefixes:L.LONG,value:1,offset:0},C:{name:"C",base:B.ELECTRIC_CHARGE,prefixes:L.SHORT,value:1,offset:0},farad:{name:"farad",base:B.ELECTRIC_CAPACITANCE,prefixes:L.LONG,value:1,offset:0},F:{name:"F",base:B.ELECTRIC_CAPACITANCE,prefixes:L.SHORT,value:1,offset:0},volt:{name:"volt",base:B.ELECTRIC_POTENTIAL,prefixes:L.LONG,value:1,offset:0},V:{name:"V",base:B.ELECTRIC_POTENTIAL,prefixes:L.SHORT,value:1,offset:0},ohm:{name:"ohm",base:B.ELECTRIC_RESISTANCE,prefixes:L.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:B.ELECTRIC_INDUCTANCE,prefixes:L.LONG,value:1,offset:0},H:{name:"H",base:B.ELECTRIC_INDUCTANCE,prefixes:L.SHORT,value:1,offset:0},siemens:{name:"siemens",base:B.ELECTRIC_CONDUCTANCE,prefixes:L.LONG,value:1,offset:0},S:{name:"S",base:B.ELECTRIC_CONDUCTANCE,prefixes:L.SHORT,value:1,offset:0},weber:{name:"weber",base:B.MAGNETIC_FLUX,prefixes:L.LONG,value:1,offset:0},Wb:{name:"Wb",base:B.MAGNETIC_FLUX,prefixes:L.SHORT,value:1,offset:0},tesla:{name:"tesla",base:B.MAGNETIC_FLUX_DENSITY,prefixes:L.LONG,value:1,offset:0},T:{name:"T",base:B.MAGNETIC_FLUX_DENSITY,prefixes:L.SHORT,value:1,offset:0},b:{name:"b",base:B.BIT,prefixes:L.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:B.BIT,prefixes:L.BINARY_LONG,value:1,offset:0},B:{name:"B",base:B.BIT,prefixes:L.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:B.BIT,prefixes:L.BINARY_LONG,value:8,offset:0}},U={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits","byte":"bytes"};function j(e){if("BigNumber"===e.number){var t=ft(w);k.rad.value=new w(1),k.deg.value=t.div(180),k.grad.value=t.div(200),k.cycle.value=t.times(2),k.arcsec.value=t.div(648e3),k.arcmin.value=t.div(10800);}else k.rad.value=1,k.deg.value=Math.PI/180,k.grad.value=Math.PI/200,k.cycle.value=2*Math.PI,k.arcsec.value=Math.PI/648e3,k.arcmin.value=Math.PI/10800;k.radian.value=k.rad.value,k.degree.value=k.deg.value,k.gradian.value=k.grad.value;}j(o),i&&i("config",function(e,t){e.number!==t.number&&j(e);});var H={si:{NONE:{unit:z,prefix:L.NONE[""]},LENGTH:{unit:k.m,prefix:L.SHORT[""]},MASS:{unit:k.g,prefix:L.SHORT.k},TIME:{unit:k.s,prefix:L.SHORT[""]},CURRENT:{unit:k.A,prefix:L.SHORT[""]},TEMPERATURE:{unit:k.K,prefix:L.SHORT[""]},LUMINOUS_INTENSITY:{unit:k.cd,prefix:L.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:k.mol,prefix:L.SHORT[""]},ANGLE:{unit:k.rad,prefix:L.SHORT[""]},BIT:{unit:k.bits,prefix:L.SHORT[""]},FORCE:{unit:k.N,prefix:L.SHORT[""]},ENERGY:{unit:k.J,prefix:L.SHORT[""]},POWER:{unit:k.W,prefix:L.SHORT[""]},PRESSURE:{unit:k.Pa,prefix:L.SHORT[""]},ELECTRIC_CHARGE:{unit:k.C,prefix:L.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:k.F,prefix:L.SHORT[""]},ELECTRIC_POTENTIAL:{unit:k.V,prefix:L.SHORT[""]},ELECTRIC_RESISTANCE:{unit:k.ohm,prefix:L.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:k.H,prefix:L.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:k.S,prefix:L.SHORT[""]},MAGNETIC_FLUX:{unit:k.Wb,prefix:L.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:k.T,prefix:L.SHORT[""]},FREQUENCY:{unit:k.Hz,prefix:L.SHORT[""]}}};H.cgs=JSON.parse(JSON.stringify(H.si)),H.cgs.LENGTH={unit:k.m,prefix:L.SHORT.c},H.cgs.MASS={unit:k.g,prefix:L.SHORT[""]},H.cgs.FORCE={unit:k.dyn,prefix:L.SHORT[""]},H.cgs.ENERGY={unit:k.erg,prefix:L.NONE[""]},H.us=JSON.parse(JSON.stringify(H.si)),H.us.LENGTH={unit:k.ft,prefix:L.NONE[""]},H.us.MASS={unit:k.lbm,prefix:L.NONE[""]},H.us.TEMPERATURE={unit:k.degF,prefix:L.NONE[""]},H.us.FORCE={unit:k.lbf,prefix:L.NONE[""]},H.us.ENERGY={unit:k.BTU,prefix:L.BTU[""]},H.us.POWER={unit:k.hp,prefix:L.NONE[""]},H.us.PRESSURE={unit:k.psi,prefix:L.NONE[""]},H.auto=JSON.parse(JSON.stringify(H.si));var q=H.auto;for(var V in _.setUnitSystem=function(e){if(!Q(H,e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(H).join(", "));q=H[e];},_.getUnitSystem=function(){for(var e in H){if(Q(H,e)&&H[e]===q)return e;}},_.typeConverters={BigNumber:function BigNumber(e){return new w(e+"");},Fraction:function Fraction(e){return new S(e);},Complex:function Complex(e){return e;},number:function number(e){return e;}},_._getNumberConverter=function(e){if(!_.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return _.typeConverters[e];},k){if(Q(k,V)){var X=k[V];X.dimensions=X.base.dimensions;}}for(var Y in U){if(Q(U,Y)){var Z=k[U[Y]],$={};for(var J in Z){Q(Z,J)&&($[J]=Z[J]);}$.name=Y,k[Y]=$;}}return _.createUnit=function(e,t){if("object"!==Iu(e))throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var n in e){if(Q(e,n)&&_.deleteUnit(n),e[n].aliases)for(var r=0;r<e[n].aliases.length;r++){_.deleteUnit(e[n].aliases[r]);}}var i;for(var o in e){Q(e,o)&&(i=_.createUnitSingle(o,e[o]));}return i;},_.createUnitSingle=function(e,t,n){if(null==t&&(t={}),"string"!=typeof e)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Q(k,e))throw new Error('Cannot create unit "'+e+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),r=function r(e){return /^[a-zA-Z]$/.test(e);};if(0===t&&!r(n))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!r(n)&&!function(e){return e>="0"&&e<="9";}(n))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"');}}(e);var r,i,o,a=null,s=[],u=0;if(t&&"Unit"===t.type)a=t.clone();else if("string"==typeof t)""!==t&&(r=t);else{if("object"!==Iu(t))throw new TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');r=t.definition,i=t.prefixes,u=t.offset,o=t.baseName,t.aliases&&(s=t.aliases.valueOf());}if(s)for(var c=0;c<s.length;c++){if(Q(k,s[c]))throw new Error('Cannot create alias "'+s[c]+'": a unit with that name already exists');}if(r&&"string"==typeof r&&!a)try{a=_.parse(r,{allowNoUnits:!0});}catch(t){throw t.message='Could not create unit "'+e+'" from "'+r+'": '+t.message,t;}else r&&"Unit"===r.type&&(a=r.clone());s=s||[],u=u||0,i=i&&i.toUpperCase&&L[i.toUpperCase()]||L.NONE;var l={};if(a){l={name:e,value:a.value,dimensions:a.dimensions.slice(0),prefixes:i,offset:u};var p=!1;for(var d in B){if(Q(B,d)){for(var h=!0,f=0;f<I.length;f++){if(Math.abs((l.dimensions[f]||0)-(B[d].dimensions[f]||0))>1e-12){h=!1;break;}}if(h){p=!0,l.base=B[d];break;}}}if(!p){o=o||e+"_STUFF";var m={dimensions:a.dimensions.slice(0)};m.key=o,B[o]=m,q[o]={unit:l,prefix:L.NONE[""]},l.base=B[o];}}else{if(o=o||e+"_STUFF",I.indexOf(o)>=0)throw new Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');for(var y in I.push(o),B){Q(B,y)&&(B[y].dimensions[I.length-1]=0);}for(var g={dimensions:[]},v=0;v<I.length;v++){g.dimensions[v]=0;}g.dimensions[I.length-1]=1,g.key=o,B[o]=g,l={name:e,value:1,dimensions:B[o].dimensions.slice(0),prefixes:i,offset:u,base:B[o]},q[o]={unit:l,prefix:L.NONE[""]};}_.UNITS[e]=l;for(var x=0;x<s.length;x++){var b=s[x],w={};for(var S in l){Q(l,S)&&(w[S]=l[S]);}w.name=b,_.UNITS[b]=w;}return new _(null,e);},_.deleteUnit=function(e){delete _.UNITS[e];},_.PREFIXES=L,_.BASE_DIMENSIONS=I,_.BASE_UNITS=B,_.UNIT_SYSTEMS=H,_.UNITS=k,_;},{isClass:!0}),ju=et("createUnit",["typed","Unit"],function(e){var t=e.typed,n=e.Unit;return t("createUnit",{"Object, Object":function ObjectObject(e,t){return n.createUnit(e,t);},Object:function Object(e){return n.createUnit(e,{});},"string, Unit | string | Object, Object":function stringUnitStringObjectObject(e,t,r){var i={};return i[e]=t,n.createUnit(i,r);},"string, Unit | string | Object":function stringUnitStringObject(e,t){var r={};return r[e]=t,n.createUnit(r,{});},string:function string(e){var t={};return t[e]={},n.createUnit(t,{});}});}),Hu=et("setUnion",["typed","size","concat","subset","setIntersect","setSymDifference","Index"],function(e){var t=e.typed,n=e.size,r=e.concat,i=e.subset,o=e.setIntersect,a=e.setSymDifference,s=e.Index;return t("setUnion",{"Array | Matrix, Array | Matrix":function ArrayMatrixArrayMatrix(e,t){if(0===i(n(e),new s(0)))return Ge(t);if(0===i(n(t),new s(0)))return Ge(e);var u=Ge(e),c=Ge(t);return r(a(u,c),o(u,c));}});});function qu(e,t,n,r,i,o,a){var s=0;for(n[a]=e;s>=0;){var u=n[a+s],c=n[r+u];-1===c?(s--,o[t++]=u):(n[r+u]=n[i+c],n[a+ ++s]=c);}return t;}function Gu(e){return-e-2;}var Vu=et("csAmd",["add","multiply","transpose"],function(e){var t=e.add,n=e.multiply,r=e.transpose;return function(e,a){if(!a||e<=0||e>3)return null;var s=a._size,u=s[0],c=s[1],l=0,p=Math.max(16,10*Math.sqrt(c)),d=function(e,i,o,a,s){var u=r(i);if(1===e&&a===o)return t(i,u);if(2===e){for(var c=u._index,l=u._ptr,p=0,d=0;d<o;d++){var h=l[d];if(l[d]=p,!(l[d+1]-h>s))for(var f=l[d+1];h<f;h++){c[p++]=c[h];}}return l[o]=p,i=r(u),n(u,i);}return n(u,i);}(e,a,u,c,p=Math.min(c-2,p));!function(e,t,n){for(var r=e._values,i=e._index,o=e._ptr,a=e._size[1],s=0,u=0;u<a;u++){var c=o[u];for(o[u]=s;c<o[u+1];c++){t(i[c],u,r?r[c]:1,n)&&(i[s]=i[c],r&&(r[s]=r[c]),s++);}}o[a]=s,i.splice(s,i.length-s),r&&r.splice(s,r.length-s);}(d,o,null);for(var h,f,m,y,g,v,x,b,w,S,M,_,E,A,T,N,D=d._index,C=d._ptr,R=C[c],P=[],O=[],L=c+1,I=2*(c+1),B=3*(c+1),F=4*(c+1),z=5*(c+1),k=6*(c+1),U=7*(c+1),j=P,H=function(e,t,n,r,o,a,s,u,c,l,p,d){for(var h=0;h<e;h++){n[r+h]=t[h+1]-t[h];}n[r+e]=0;for(var f=0;f<=e;f++){n[o+f]=-1,a[f]=-1,n[s+f]=-1,n[u+f]=-1,n[c+f]=1,n[l+f]=1,n[p+f]=0,n[d+f]=n[r+f];}var m=i(0,0,n,l,e);return n[p+e]=-2,t[e]=-1,n[l+e]=0,m;}(c,C,O,0,B,j,I,U,L,k,F,z),q=function(e,t,n,r,i,o,a,s,u,c,l){for(var p=0,d=0;d<e;d++){var h=n[r+d];if(0===h)n[i+d]=-2,p++,t[d]=-1,n[o+d]=0;else if(h>a)n[s+d]=0,n[i+d]=-1,p++,t[d]=Gu(e),n[s+e]++;else{var f=n[u+h];-1!==f&&(c[f]=d),n[l+d]=n[u+h],n[u+h]=d;}}return p;}(c,C,O,z,F,k,p,L,B,j,I),G=0;q<c;){for(m=-1;G<c&&-1===(m=O[B+G]);G++){;}-1!==O[I+m]&&(j[O[I+m]]=-1),O[B+G]=O[I+m];var V=O[F+m],W=O[L+m];q+=W;var X=0;O[L+m]=-W;var Y=C[m],Z=0===V?Y:R,$=Z;for(y=1;y<=V+1;y++){for(y>V?(v=m,x=Y,b=O[0+m]-V):(x=C[v=D[Y++]],b=O[0+v]),g=1;g<=b;g++){(w=O[L+(h=D[x++])])<=0||(X+=w,O[L+h]=-w,D[$++]=h,-1!==O[I+h]&&(j[O[I+h]]=j[h]),-1!==j[h]?O[I+j[h]]=O[I+h]:O[B+O[z+h]]=O[I+h]);}v!==m&&(C[v]=Gu(m),O[k+v]=0);}for(0!==V&&(R=$),O[z+m]=X,C[m]=Z,O[0+m]=$-Z,O[F+m]=-2,H=i(H,l,O,k,c),S=Z;S<$;S++){if(!((M=O[F+(h=D[S])])<=0)){var J=H-(w=-O[L+h]);for(Y=C[h],_=C[h]+M-1;Y<=_;Y++){O[k+(v=D[Y])]>=H?O[k+v]-=w:0!==O[k+v]&&(O[k+v]=O[z+v]+J);}}}for(S=Z;S<$;S++){for(E=(_=C[h=D[S]])+O[F+h]-1,A=_,T=0,N=0,Y=_;Y<=E;Y++){if(0!==O[k+(v=D[Y])]){var Q=O[k+v]-H;Q>0?(N+=Q,D[A++]=v,T+=v):(C[v]=Gu(m),O[k+v]=0);}}O[F+h]=A-_+1;var K=A,ee=_+O[0+h];for(Y=E+1;Y<ee;Y++){var te=O[L+(f=D[Y])];te<=0||(N+=te,D[A++]=f,T+=f);}0===N?(C[h]=Gu(m),X-=w=-O[L+h],W+=w,q+=w,O[L+h]=0,O[F+h]=-1):(O[z+h]=Math.min(O[z+h],N),D[A]=D[K],D[K]=D[_],D[_]=m,O[0+h]=A-_+1,T=(T<0?-T:T)%c,O[I+h]=O[U+T],O[U+T]=h,j[h]=T);}for(O[z+m]=X,H=i(H+(l=Math.max(l,X)),l,O,k,c),S=Z;S<$;S++){if(!(O[L+(h=D[S])]>=0))for(h=O[U+(T=j[h])],O[U+T]=-1;-1!==h&&-1!==O[I+h];h=O[I+h],H++){for(b=O[0+h],M=O[F+h],Y=C[h]+1;Y<=C[h]+b-1;Y++){O[k+D[Y]]=H;}var ne=h;for(f=O[I+h];-1!==f;){var re=O[0+f]===b&&O[F+f]===M;for(Y=C[f]+1;re&&Y<=C[f]+b-1;Y++){O[k+D[Y]]!==H&&(re=0);}re?(C[f]=Gu(h),O[L+h]+=O[L+f],O[L+f]=0,O[F+f]=-1,f=O[I+f],O[I+ne]=f):(ne=f,f=O[I+f]);}}}for(Y=Z,S=Z;S<$;S++){(w=-O[L+(h=D[S])])<=0||(O[L+h]=w,N=O[z+h]+X-w,-1!==O[B+(N=Math.min(N,c-q-w))]&&(j[O[B+N]]=h),O[I+h]=O[B+N],j[h]=-1,O[B+N]=h,G=Math.min(G,N),O[z+h]=N,D[Y++]=h);}O[L+m]=W,0==(O[0+m]=Y-Z)&&(C[m]=-1,O[k+m]=0),0!==V&&(R=Y);}for(h=0;h<c;h++){C[h]=Gu(C[h]);}for(f=0;f<=c;f++){O[B+f]=-1;}for(f=c;f>=0;f--){O[L+f]>0||(O[I+f]=O[B+C[f]],O[B+C[f]]=f);}for(v=c;v>=0;v--){O[L+v]<=0||-1!==C[v]&&(O[I+v]=O[B+C[v]],O[B+C[v]]=v);}for(m=0,h=0;h<=c;h++){-1===C[h]&&(m=qu(h,m,O,B,I,P,k));}return P.splice(P.length-1,1),P;};function i(e,t,n,r,i){if(e<2||e+t<0){for(var o=0;o<i;o++){0!==n[r+o]&&(n[r+o]=1);}e=2;}return e;}function o(e,t){return e!==t;}});function Wu(e,t,n,r,i,o,a){var s,u,c,l=0;if(e<=t||n[r+t]<=n[i+e])return-1;n[i+e]=n[r+t];var p=n[o+e];if(n[o+e]=t,-1===p)l=1,c=e;else{for(l=2,c=p;c!==n[a+c];c=n[a+c]){;}for(s=p;s!==c;s=u){u=n[a+s],n[a+s]=c;}}return{jleaf:l,q:c};}var Xu=et("csCounts",["transpose"],function(e){var t=e.transpose;return function(e,n,r,i){if(!e||!n||!r)return null;var o,a,s,u,c,l,p,d=e._size,h=d[0],f=d[1],m=4*f+(i?f+h+1:0),y=[],g=f,v=2*f,x=3*f,b=4*f,w=5*f+1;for(s=0;s<m;s++){y[s]=-1;}var S=[],M=t(e),_=M._index,E=M._ptr;for(s=0;s<f;s++){for(S[a=r[s]]=-1===y[x+a]?1:0;-1!==a&&-1===y[x+a];a=n[a]){y[x+a]=s;}}if(i){for(s=0;s<f;s++){y[r[s]]=s;}for(o=0;o<h;o++){for(s=f,l=E[o],p=E[o+1],c=l;c<p;c++){s=Math.min(s,y[_[c]]);}y[w+o]=y[b+s],y[b+s]=o;}}for(o=0;o<f;o++){y[0+o]=o;}for(s=0;s<f;s++){for(-1!==n[a=r[s]]&&S[n[a]]--,u=i?y[b+s]:a;-1!==u;u=i?y[w+u]:-1){for(c=E[u];c<E[u+1];c++){var A=Wu(o=_[c],a,y,x,g,v,0);A.jleaf>=1&&S[a]++,2===A.jleaf&&S[A.q]--;}}-1!==n[a]&&(y[0+a]=n[a]);}for(a=0;a<f;a++){-1!==n[a]&&(S[n[a]]+=S[a]);}return S;};}),Yu=et("csSqr",["add","multiply","transpose"],function(e){var t=e.add,n=e.multiply,r=e.transpose,i=Vu({add:t,multiply:n,transpose:r}),o=Xu({transpose:r});return function(e,t,n){var r,a=t._ptr,s=t._size[1],u={};if(u.q=i(e,t),e&&!u.q)return null;if(n){var c=e?function(e,t,n,r){for(var i=e._values,o=e._index,a=e._ptr,s=e._size,u=e._datatype,c=s[0],l=s[1],p=r&&e._values?[]:null,d=[],h=[],f=0,m=0;m<l;m++){h[m]=f;for(var y=n?n[m]:m,g=a[y],v=a[y+1],x=g;x<v;x++){var b=t?t[o[x]]:o[x];d[f]=b,p&&(p[f]=i[x]),f++;}}return h[l]=f,e.createSparseMatrix({values:p,index:d,ptr:h,size:[c,l],datatype:u});}(t,null,u.q,0):t;u.parent=function(e,t){if(!e)return null;var n,r,i=e._index,o=e._ptr,a=e._size,s=a[0],u=a[1],c=[],l=[],p=u;if(t)for(n=0;n<s;n++){l[p+n]=-1;}for(var d=0;d<u;d++){c[d]=-1,l[0+d]=-1;for(var h=o[d],f=o[d+1],m=h;m<f;m++){var y=i[m];for(n=t?l[p+y]:y;-1!==n&&n<d;n=r){r=l[0+n],l[0+n]=d,-1===r&&(c[n]=d);}t&&(l[p+y]=d);}}return c;}(c,1);var l=function(e,t){if(!e)return null;var n,r=0,i=[],o=[],a=t,s=2*t;for(n=0;n<t;n++){o[0+n]=-1;}for(n=t-1;n>=0;n--){-1!==e[n]&&(o[a+n]=o[0+e[n]],o[0+e[n]]=n);}for(n=0;n<t;n++){-1===e[n]&&(r=qu(n,r,o,0,a,i,s));}return i;}(u.parent,s);if(u.cp=o(c,u.parent,l,1),c&&u.parent&&u.cp&&function(e,t){var n=e._ptr,r=e._index,i=e._size,o=i[0],a=i[1];t.pinv=[],t.leftmost=[];var s,u,c,l,p,d=t.parent,h=t.pinv,f=t.leftmost,m=[],y=o,g=o+a,v=o+2*a;for(u=0;u<a;u++){m[y+u]=-1,m[g+u]=-1,m[v+u]=0;}for(s=0;s<o;s++){f[s]=-1;}for(u=a-1;u>=0;u--){for(l=n[u],p=n[u+1],c=l;c<p;c++){f[r[c]]=u;}}for(s=o-1;s>=0;s--){h[s]=-1,-1!==(u=f[s])&&(0==m[v+u]++&&(m[g+u]=s),m[0+s]=m[y+u],m[y+u]=s);}for(t.lnz=0,t.m2=o,u=0;u<a;u++){if(s=m[y+u],t.lnz++,s<0&&(s=t.m2++),h[s]=u,!(--v[u]<=0)){t.lnz+=m[v+u];var x=d[u];-1!==x&&(0===m[v+x]&&(m[g+x]=m[g+u]),m[0+m[g+u]]=m[y+x],m[y+x]=m[0+s],m[v+x]+=m[v+u]);}}for(s=0;s<o;s++){h[s]<0&&(h[s]=u++);}return!0;}(c,u))for(u.unz=0,r=0;r<s;r++){u.unz+=u.cp[r];}}else u.unz=4*a[s]+s,u.lnz=u.unz;return u;};});function Zu(e,t){return e[t]<0;}function $u(e,t){e[t]=Gu(e[t]);}function Ju(e){return e<0?Gu(e):e;}function Qu(e,t,n,r,i){var o,a,s,u=t._index,c=t._ptr,l=t._size[1],p=0;for(r[0]=e;p>=0;){e=r[p];var d=i?i[e]:e;Zu(c,e)||($u(c,e),r[l+p]=d<0?0:Ju(c[d]));var h=1;for(a=r[l+p],s=d<0?0:Ju(c[d+1]);a<s;a++){if(!Zu(c,o=u[a])){r[l+p]=a,r[++p]=o,h=0;break;}}h&&(p--,r[--n]=e);}return n;}var Ku=et("csSpsolve",["divideScalar","multiply","subtract"],function(e){var t=e.divideScalar,n=e.multiply,r=e.subtract;return function(e,i,o,a,s,u,c){var l,p,d,h,f=e._values,m=e._index,y=e._ptr,g=e._size[1],v=i._values,x=i._index,b=i._ptr,w=function(e,t,n,r,i){var o,a,s,u=e._ptr,c=e._size,l=t._index,p=t._ptr,d=c[1],h=d;for(a=p[n],s=p[n+1],o=a;o<s;o++){var f=l[o];Zu(u,f)||(h=Qu(f,e,h,r,i));}for(o=h;o<d;o++){$u(u,r[o]);}return h;}(e,i,o,a,u);for(l=w;l<g;l++){s[a[l]]=0;}for(p=b[o],d=b[o+1],l=p;l<d;l++){s[x[l]]=v[l];}for(var S=w;S<g;S++){var M=a[S],_=u?u[M]:M;if(!(_<0))for(p=y[_],d=y[_+1],s[M]=t(s[M],f[c?p:d-1]),l=c?p+1:p,h=c?d:d-1;l<h;l++){var E=m[l];s[E]=r(s[E],n(f[l],s[M]));}}return w;};}),ec=et("csLu",["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],function(e){var t=e.abs,n=e.divideScalar,r=e.multiply,i=e.subtract,o=e.larger,a=e.largerEq,s=e.SparseMatrix,u=Ku({divideScalar:n,multiply:r,subtract:i});return function(e,i,c){if(!e)return null;var l,p=e._size[1],d=100,h=100;i&&(l=i.q,d=i.lnz||d,h=i.unz||h);var f,m,y=[],g=[],v=[],x=new s({values:y,index:g,ptr:v,size:[p,p]}),b=[],w=[],S=[],M=new s({values:b,index:w,ptr:S,size:[p,p]}),_=[],E=[],A=[];for(f=0;f<p;f++){E[f]=0,_[f]=-1,v[f+1]=0;}d=0,h=0;for(var T=0;T<p;T++){v[T]=d,S[T]=h;var N=l?l[T]:T,D=u(x,e,N,A,E,_,1),C=-1,R=-1;for(m=D;m<p;m++){if(_[f=A[m]]<0){var P=t(E[f]);o(P,R)&&(R=P,C=f);}else w[h]=_[f],b[h++]=E[f];}if(-1===C||R<=0)return null;_[N]<0&&a(t(E[N]),r(R,c))&&(C=N);var O=E[C];for(w[h]=T,b[h++]=O,_[C]=T,g[d]=C,y[d++]=1,m=D;m<p;m++){_[f=A[m]]<0&&(g[d]=f,y[d++]=n(E[f],O)),E[f]=0;}}for(v[p]=d,S[p]=h,m=0;m<d;m++){g[m]=_[g[m]];}return y.splice(d,y.length-d),g.splice(d,g.length-d),b.splice(h,b.length-h),w.splice(h,w.length-h),{L:x,U:M,pinv:_};};}),tc=et("slu",["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],function(e){var t=e.typed,n=e.abs,r=e.add,i=e.multiply,o=e.transpose,a=e.divideScalar,s=e.subtract,u=e.larger,c=e.largerEq,l=e.SparseMatrix,p=Yu({add:r,multiply:i,transpose:o}),d=ec({abs:n,divideScalar:a,multiply:i,subtract:s,larger:u,largerEq:c,SparseMatrix:l});return t("slu",{"SparseMatrix, number, number":function SparseMatrixNumberNumber(e,t,n){if(!ae(t)||t<0||t>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(n<0||n>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var r=p(t,e,!1),i=d(e,r,n);return{L:i.L,U:i.U,p:i.pinv,q:r.q,toString:function toString(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n";}};}});}),nc=et("intersect",["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar"],function(e){var t=e.typed,n=e.config,r=e.abs,i=e.add,o=e.addScalar,a=e.matrix,u=e.multiply,c=e.multiplyScalar,l=e.divideScalar,p=e.subtract,d=e.smaller,h=e.equalScalar;return t("intersect",{"Array, Array, Array":function ArrayArrayArray(e,t,n){if(!y(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!y(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(e){return 4===e.length&&f(e[0])&&f(e[1])&&f(e[2])&&f(e[3]);}(n))throw new TypeError("Array with 4 numbers expected as third argument");return function(e,t,n,r,i,a,s,u,d,h){var f=c(e,s),m=c(r,s),y=c(t,u),g=c(i,u),v=c(n,d),x=c(a,d),b=l(p(p(p(h,f),y),v),p(p(p(o(o(m,g),x),f),y),v)),w=o(e,c(b,p(r,e))),S=o(t,c(b,p(i,t))),M=o(n,c(b,p(a,n)));return[w,S,M];}(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3]);},"Array, Array, Array, Array":function ArrayArrayArrayArray(e,t,a,s){if(2===e.length){if(!m(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!m(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!m(a))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!m(s))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(e,t,a,s){var h=e,f=a,m=p(h,t),y=p(f,s),g=p(c(m[0],y[1]),c(y[0],m[1]));if(d(r(g),n.epsilon))return null;var v=c(y[0],h[1]),x=c(y[1],h[0]),b=c(y[0],f[1]),w=c(y[1],f[0]),S=l(o(p(p(v,x),b),w),g);return i(u(m,S),h);}(e,t,a,s);}if(3===e.length){if(!y(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!y(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!y(a))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!y(s))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return f=e[0],v=e[1],x=e[2],b=t[0],w=t[1],S=t[2],M=a[0],_=a[1],E=a[2],A=s[0],T=s[1],N=s[2],D=g(f,M,A,M,v,_,T,_,x,E,N,E),C=g(A,M,b,f,T,_,w,v,N,E,S,x),R=g(f,M,b,f,v,_,w,v,x,E,S,x),P=g(A,M,A,M,T,_,T,_,N,E,N,E),O=g(b,f,b,f,w,v,w,v,S,x,S,x),L=l(p(c(D,C),c(R,P)),p(c(O,P),c(C,C))),I=l(o(D,c(L,C)),P),B=o(f,c(L,p(b,f))),F=o(v,c(L,p(w,v))),z=o(x,c(L,p(S,x))),k=o(M,c(I,p(A,M))),U=o(_,c(I,p(T,_))),j=o(E,c(I,p(N,E))),h(B,k)&&h(F,U)&&h(z,j)?[B,F,z]:null;}throw new TypeError("Arrays with two or thee dimensional points expected");var f,v,x,b,w,S,M,_,E,A,T,N,D,C,R,P,O,L,I,B,F,z,k,U,j;},"Matrix, Matrix, Matrix":function MatrixMatrixMatrix(e,t,n){return a(this(e.valueOf(),t.valueOf(),n.valueOf()));},"Matrix, Matrix, Matrix, Matrix":function MatrixMatrixMatrixMatrix(e,t,n,r){return a(this(e.valueOf(),t.valueOf(),n.valueOf(),r.valueOf()));}});function f(e){return"number"==typeof e||s(e);}function m(e){return 2===e.length&&f(e[0])&&f(e[1]);}function y(e){return 3===e.length&&f(e[0])&&f(e[1])&&f(e[2]);}function g(e,t,n,r,i,a,s,u,l,d,h,f){var m=c(p(e,t),p(n,r)),y=c(p(i,a),p(s,u)),g=c(p(l,d),p(h,f));return o(o(m,y),g);}}),rc=et("bellNumbers",["typed","addScalar","isNegative","isInteger","stirlingS2"],function(e){var t=e.typed,n=e.addScalar,r=e.isNegative,i=e.isInteger,o=e.stirlingS2;return t("bellNumbers",{"number | BigNumber":function numberBigNumber(e){if(!i(e)||r(e))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var t=0,a=0;a<=e;a++){t=n(t,o(e,a));}return t;}});}),ic=et("xor",["typed","matrix","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.DenseMatrix,i=oa({typed:t}),o=fa({typed:t,DenseMatrix:r}),a=ua({typed:t,DenseMatrix:r}),s=ta({typed:t}),u=na({typed:t});return t("xor",{"number, number":bi,"Complex, Complex":function ComplexComplex(e,t){return(0!==e.re||0!==e.im)!=(0!==t.re||0!==t.im);},"BigNumber, BigNumber":function BigNumberBigNumber(e,t){return(!e.isZero()&&!e.isNaN())!=(!t.isZero()&&!t.isNaN());},"Unit, Unit":function UnitUnit(e,t){return this(e.value||0,t.value||0);},"SparseMatrix, SparseMatrix":function SparseMatrixSparseMatrix(e,t){return o(e,t,this);},"SparseMatrix, DenseMatrix":function SparseMatrixDenseMatrix(e,t){return i(t,e,this,!0);},"DenseMatrix, SparseMatrix":function DenseMatrixSparseMatrix(e,t){return i(e,t,this,!1);},"DenseMatrix, DenseMatrix":function DenseMatrixDenseMatrix(e,t){return s(e,t,this);},"Array, Array":function ArrayArray(e,t){return this(n(e),n(t)).valueOf();},"Array, Matrix":function ArrayMatrix(e,t){return this(n(e),t);},"Matrix, Array":function MatrixArray(e,t){return this(e,n(t));},"SparseMatrix, any":function SparseMatrixAny(e,t){return a(e,t,this,!1);},"DenseMatrix, any":function DenseMatrixAny(e,t){return u(e,t,this,!1);},"any, SparseMatrix":function anySparseMatrix(e,t){return a(t,e,this,!0);},"any, DenseMatrix":function anyDenseMatrix(e,t){return u(t,e,this,!0);},"Array, any":function ArrayAny(e,t){return u(n(e),t,this,!1).valueOf();},"any, Array":function anyArray(e,t){return u(n(t),e,this,!0).valueOf();}});}),oc=et("prod",["typed","config","multiplyScalar","numeric"],function(e){var t=e.typed,n=e.config,r=e.multiplyScalar,i=e.numeric;return t("prod",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function ArrayMatrixNumberBigNumber(e,t){throw new Error("prod(A, dim) is not yet supported");},"...":function _(e){return o(e);}});function o(e){var t;if(nr(e,function(e){try{t=void 0===t?e:r(t,e);}catch(t){throw Ks(t,"prod",e);}}),"string"==typeof t&&(t=i(t,n.number)),void 0===t)throw new Error("Cannot calculate prod of an empty array");return t;}}),ac=et("usolve",["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,i=e.multiplyScalar,o=e.subtract,a=e.equalScalar,s=e.DenseMatrix,u=gu({DenseMatrix:s});return t("usolve",{"SparseMatrix, Array | Matrix":function SparseMatrixArrayMatrix(e,t){return function(e,t){for(var n,c,l=(t=u(e,t,!0))._data,p=e._size[0],d=e._size[1],h=e._values,f=e._index,m=e._ptr,y=[],g=d-1;g>=0;g--){var v=l[g][0]||0;if(a(v,0))y[g]=[0];else{var x=0,b=[],w=[],S=m[g],M=m[g+1];for(c=M-1;c>=S;c--){(n=f[c])===g?x=h[c]:n<g&&(b.push(h[c]),w.push(n));}if(a(x,0))throw new Error("Linear system cannot be solved since matrix is singular");var _=r(v,x);for(c=0,M=w.length;c<M;c++){n=w[c],l[n]=[o(l[n][0],i(_,b[c]))];}y[g]=[_];}}return new s({data:y,size:[p,1]});}(e,t);},"DenseMatrix, Array | Matrix":function DenseMatrixArrayMatrix(e,t){return c(e,t);},"Array, Array | Matrix":function ArrayArrayMatrix(e,t){return c(n(e),t).valueOf();}});function c(e,t){for(var n=(t=u(e,t,!0))._data,c=e._size[0],l=e._size[1],p=[],d=e._data,h=l-1;h>=0;h--){var f=n[h][0]||0,m=void 0;if(a(f,0))m=0;else{var y=d[h][h];if(a(y,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(f,y);for(var g=h-1;g>=0;g--){n[g]=[o(n[g][0]||0,i(m,d[g][h]))];}}p[h]=[m];}return new s({data:p,size:[c,1]});}}),sc=et("unit",["typed","Unit"],function(e){var t=e.typed,n=e.Unit;return t("unit",{Unit:function Unit(e){return e.clone();},string:function string(e){return n.isValuelessUnit(e)?new n(null,e):n.parse(e,{allowNoUnits:!0});},"number | BigNumber | Fraction | Complex, string":function numberBigNumberFractionComplexString(e,t){return new n(e,t);},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);}});}),uc=et("diff",["typed","matrix","subtract","number"],function(e){var t=e.typed,n=e.matrix,r=e.subtract,i=e.number;return t("diff",{"Array | Matrix":function ArrayMatrix(e){return h(e)?n(a(e.toArray())):a(e);},"Array | Matrix, number":function ArrayMatrixNumber(e,t){if(!ae(t))throw new RangeError("Dimension must be a whole number");return h(e)?n(o(e.toArray(),t)):o(e,t);},"Array | Matrix, BigNumber":function ArrayMatrixBigNumber(e,t){return this(e,i(t));}});function o(e,t){if(h(e)&&(e=e.toArray()),!Array.isArray(e))throw RangeError("Array/Matrix does not have that many dimensions");if(t>0){var n=[];return e.forEach(function(e){n.push(o(e,t-1));}),n;}if(0===t)return a(e);throw RangeError("Cannot have negative dimension");}function a(e){var t=[],n=e.length;if(n<2)return e;for(var r=1;r<n;r++){t.push(s(e[r-1],e[r]));}return t;}function s(e,t){h(e)&&(e=e.toArray()),h(t)&&(t=t.toArray());var n=Array.isArray(e),i=Array.isArray(t);if(n&&i)return function(e,t){if(e.length!==t.length)throw RangeError("Not all sub-arrays have the same length");for(var n=[],r=e.length,i=0;i<r;i++){n.push(s(e[i],t[i]));}return n;}(e,t);if(!n&&!i)return r(t,e);throw TypeError("Cannot calculate difference between 1 array and 1 non-array");}}),cc=et("Spa",["addScalar","equalScalar","FibonacciHeap"],function(e){var t=e.addScalar,n=e.equalScalar,r=e.FibonacciHeap;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r();}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n;}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0;},i.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r);},i.prototype.forEach=function(e,t,r){var i=this._heap,o=this._values,a=[],s=i.extractMinimum();for(s&&a.push(s);s&&s.key<=t;){s.key>=e&&(n(s.value,0)||r(s.key,s.value,this)),(s=i.extractMinimum())&&a.push(s);}for(var u=0;u<a.length;u++){var c=a[u];o[(s=i.insert(c.key,c.value)).key]=s;}},i.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i;}},i;},{isClass:!0}),lc=et("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],function(e){var t=e.typed,n=e.matrix,r=e.abs,i=e.addScalar,o=e.divideScalar,a=e.multiplyScalar,s=e.subtract,u=e.larger,c=e.equalScalar,l=e.unaryMinus,p=e.DenseMatrix,d=e.SparseMatrix,h=e.Spa;return t("lup",{DenseMatrix:function DenseMatrix(e){return f(e);},SparseMatrix:function SparseMatrix(e){return m(e);},Array:function Array(e){var t=f(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p};}});function f(e){var t,n,l,d=e._size[0],h=e._size[1],f=Math.min(d,h),m=W(e._data),y=[],g=[d,f],v=[],x=[f,h],b=[];for(t=0;t<d;t++){b[t]=t;}for(n=0;n<h;n++){if(n>0)for(t=0;t<d;t++){var w=Math.min(t,n),S=0;for(l=0;l<w;l++){S=i(S,a(m[t][l],m[l][n]));}m[t][n]=s(m[t][n],S);}var M=n,_=0,E=0;for(t=n;t<d;t++){var A=m[t][n],T=r(A);u(T,_)&&(M=t,_=T,E=A);}if(n!==M&&(b[n]=[b[M],b[M]=b[n]][0],p._swapRows(n,M,m)),n<d)for(t=n+1;t<d;t++){var N=m[t][n];c(N,0)||(m[t][n]=o(m[t][n],E));}}for(n=0;n<h;n++){for(t=0;t<d;t++){0===n&&(t<h&&(v[t]=[]),y[t]=[]),t<n?(t<h&&(v[t][n]=m[t][n]),n<d&&(y[t][n]=0)):t!==n?(t<h&&(v[t][n]=0),n<d&&(y[t][n]=m[t][n])):(t<h&&(v[t][n]=m[t][n]),n<d&&(y[t][n]=1));}}var D=new p({data:y,size:g}),C=new p({data:v,size:x}),R=[];for(t=0,f=b.length;t<f;t++){R[b[t]]=t;}return{L:D,U:C,p:R,toString:function toString(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p;}};}function m(e){var t,n,i,s=e._size[0],p=e._size[1],f=Math.min(s,p),m=e._values,y=e._index,g=e._ptr,v=[],x=[],b=[],w=[s,f],S=[],M=[],_=[],E=[f,p],A=[],T=[];for(t=0;t<s;t++){A[t]=t,T[t]=t;}var N=function N(){var e=new h();n<s&&(b.push(v.length),v.push(1),x.push(n)),_.push(S.length);var p=g[n],f=g[n+1];for(i=p;i<f;i++){t=y[i],e.set(A[t],m[i]);}n>0&&e.forEach(0,n-1,function(t,n){d._forEachRow(t,v,x,b,function(r,i){r>t&&e.accumulate(r,l(a(i,n)));});});var N,D,C,R,P=n,O=e.get(n),L=r(O);e.forEach(n+1,s-1,function(e,t){var n=r(t);u(n,L)&&(P=e,L=n,O=t);}),n!==P&&(d._swapRows(n,P,w[1],v,x,b),d._swapRows(n,P,E[1],S,M,_),e.swap(n,P),D=P,C=T[N=n],R=T[D],A[C]=D,A[R]=N,T[N]=R,T[D]=C),e.forEach(0,s-1,function(e,t){e<=n?(S.push(t),M.push(e)):(t=o(t,O),c(t,0)||(v.push(t),x.push(e)));});};for(n=0;n<p;n++){N();}return _.push(S.length),b.push(v.length),{L:new d({values:v,index:x,ptr:b,size:w}),U:new d({values:S,index:M,ptr:_,size:E}),p:A,toString:function toString(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p;}};}}),pc=et("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],function(e){var t=e.typed,n=e.matrix,r=e.subtract,i=e.multiply,o=e.unaryMinus,a=e.lup;return t("det",{any:function any(e){return W(e);},"Array | Matrix":function ArrayMatrix(e){var t;switch((t=h(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return W(e);case 1:if(1===t[0])return W(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Re(t)+")");case 2:var s=t[0],u=t[1];if(s===u)return function(e,t,n){if(1===t)return W(e[0][0]);if(2===t)return r(i(e[0][0],e[1][1]),i(e[1][0],e[0][1]));for(var s=a(e),u=s.U[0][0],c=1;c<t;c++){u=i(u,s.U[c][c]);}for(var l=0,p=0,d=[];;){for(;d[p];){p++;}if(p>=t)break;for(var h=p,f=0;!d[s.p[h]];){d[s.p[h]]=!0,h=s.p[h],f++;}f%2==0&&l++;}return l%2==0?u:o(u);}(e.clone().valueOf(),s);throw new RangeError("Matrix must be square (size: "+Re(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Re(t)+")");}}});}),dc=et("log1p",["typed","config","divideScalar","log","Complex"],function(e){var t=e.typed,n=e.config,r=e.divideScalar,i=e.log,o=e.Complex;return t("log1p",{number:function number(e){return e>=-1||n.predictable?le(e):a(new o(e,0));},Complex:a,BigNumber:function BigNumber(e){var t=e.plus(1);return!t.isNegative()||n.predictable?t.ln():a(new o(e.toNumber(),0));},"Array | Matrix":function ArrayMatrix(e){return rr(e,this);},"any, any":function anyAny(e,t){return r(this(e),i(t));}});function a(e){var t=e.re+1;return new o(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t));}});function hc(e,t){var n,r=t.length,i=[];if(e)for(n=0;n<r;n++){i[e[n]]=t[n];}else for(n=0;n<r;n++){i[n]=t[n];}return i;}var fc=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],mc=et("lusolve",fc,function(e){var t=e.typed,n=e.matrix,r=e.lup,i=e.slu,o=e.usolve,a=e.lsolve,s=gu({DenseMatrix:e.DenseMatrix});return t("lusolve",{"Array, Array | Matrix":function ArrayArrayMatrix(e,t){e=n(e);var i=r(e);return c(i.L,i.U,i.p,null,t).valueOf();},"DenseMatrix, Array | Matrix":function DenseMatrixArrayMatrix(e,t){var n=r(e);return c(n.L,n.U,n.p,null,t);},"SparseMatrix, Array | Matrix":function SparseMatrixArrayMatrix(e,t){var n=r(e);return c(n.L,n.U,n.p,null,t);},"SparseMatrix, Array | Matrix, number, number":function SparseMatrixArrayMatrixNumberNumber(e,t,n,r){var o=i(e,n,r);return c(o.L,o.U,o.p,o.q,t);},"Object, Array | Matrix":function ObjectArrayMatrix(e,t){return c(e.L,e.U,e.p,e.q,t);}});function u(e){if(h(e))return e;if(d(e))return n(e);throw new TypeError("Invalid Matrix LU decomposition");}function c(e,t,n,r,i){e=u(e),t=u(t),i=s(e,i,!1),n&&(i._data=hc(n,i._data));var c=a(e,i),l=o(t,c);return r&&(l._data=hc(r,l._data)),l;}}),yc=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],gc=et("inv",yc,function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,i=e.addScalar,o=e.multiply,a=e.unaryMinus,s=e.det,u=e.identity,c=e.abs;return t("inv",{"Array | Matrix":function ArrayMatrix(e){var t=h(e)?e.size():Fe(e);switch(t.length){case 1:if(1===t[0])return h(e)?n([r(1,e.valueOf()[0])]):[r(1,e[0])];throw new RangeError("Matrix must be square (size: "+Re(t)+")");case 2:var i=t[0],o=t[1];if(i===o)return h(e)?n(l(e.valueOf(),i,o),e.storage()):l(e,i,o);throw new RangeError("Matrix must be square (size: "+Re(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Re(t)+")");}},any:function any(e){return r(1,e);}});function l(e,t,n){var l,p,d,h,f;if(1===t){if(0===(h=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,h)]];}if(2===t){var m=s(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[r(e[1][1],m),r(a(e[0][1]),m)],[r(a(e[1][0]),m),r(e[0][0],m)]];}var y=e.concat();for(l=0;l<t;l++){y[l]=y[l].concat();}for(var g=u(t).valueOf(),v=0;v<n;v++){var x=c(y[v][v]),b=v;for(l=v+1;l<t;){c(y[l][v])>x&&(x=c(y[l][v]),b=l),l++;}if(0===x)throw Error("Cannot calculate inverse, determinant is zero");(l=b)!==v&&(f=y[v],y[v]=y[l],y[l]=f,f=g[v],g[v]=g[l],g[l]=f);var w=y[v],S=g[v];for(l=0;l<t;l++){var M=y[l],_=g[l];if(l!==v){if(0!==M[v]){for(d=r(a(M[v]),w[v]),p=v;p<n;p++){M[p]=i(M[p],o(d,w[p]));}for(p=0;p<n;p++){_[p]=i(_[p],o(d,S[p]));}}}else{for(d=w[v],p=v;p<n;p++){M[p]=r(M[p],d);}for(p=0;p<n;p++){_[p]=r(_[p],d);}}}}return g;}}),vc=["typed","abs","add","identity","inv","multiply"],xc=et("expm",vc,function(e){var t=e.typed,n=e.abs,r=e.add,i=e.identity,o=e.inv,a=e.multiply;return t("expm",{Matrix:function Matrix(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError("Matrix must be square (size: "+Re(t)+")");for(var u=t[0],c=function(e,t){for(var n=0;n<30;n++){for(var r=0;r<=n;r++){var i=n-r;if(s(e,r,i)<t)return{q:r,j:i};}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)");}(function(e){for(var t=e.size()[0],r=0,i=0;i<t;i++){for(var o=0,a=0;a<t;a++){o+=n(e.get([i,a]));}r=Math.max(o,r);}return r;}(e),1e-15),l=c.q,p=c.j,d=a(e,Math.pow(2,-p)),h=i(u),f=i(u),m=1,g=d,v=-1,x=1;x<=l;x++){x>1&&(g=a(g,d),v=-v),h=r(h,a(m=m*(l-x+1)/((2*l-x+1)*x),g)),f=r(f,a(m*v,g));}for(var b=a(o(f),h),w=0;w<p;w++){b=a(b,b);}return y(e)?e.createSparseMatrix(b):b;}});function s(e,t,n){for(var r=1,i=2;i<=t;i++){r*=i;}for(var o=r,a=t+1;a<=2*t;a++){o*=a;}var s=o*(2*t+1);return 8*Math.pow(e/Math.pow(2,n),2*t)*r*r/(o*s);}}),bc=["typed","matrix","multiply","equalScalar","divideScalar","inv"],wc=et("divide",bc,function(e){var t=e.typed,n=e.matrix,r=e.multiply,i=e.equalScalar,o=e.divideScalar,a=e.inv,s=sa({typed:t,equalScalar:i}),u=na({typed:t});return t("divide",Y({"Array | Matrix, Array | Matrix":function ArrayMatrixArrayMatrix(e,t){return r(e,a(t));},"DenseMatrix, any":function DenseMatrixAny(e,t){return u(e,t,o,!1);},"SparseMatrix, any":function SparseMatrixAny(e,t){return s(e,t,o,!1);},"Array, any":function ArrayAny(e,t){return u(n(e),t,o,!1).valueOf();},"any, Array | Matrix":function anyArrayMatrix(e,t){return r(e,a(t));}},o.signatures));}),Sc=["typed","add","divide","compare","partitionSelect"],Mc=et("median",Sc,function(e){var t=e.typed,n=e.add,r=e.divide,i=e.compare,o=e.partitionSelect;function a(e){try{var t=(e=Ge(e.valueOf())).length;if(0===t)throw new Error("Cannot calculate median of an empty array");if(t%2==0){for(var n=t/2-1,r=o(e,n+1),a=e[n],c=0;c<n;++c){i(e[c],a)>0&&(a=e[c]);}return u(a,r);}var l=o(e,(t-1)/2);return s(l);}catch(e){throw Ks(e,"median");}}var s=t({"number | BigNumber | Complex | Unit":function numberBigNumberComplexUnit(e){return e;}}),u=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function numberBigNumberComplexUnitNumberBigNumberComplexUnit(e,t){return r(n(e,t),2);}});return t("median",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function ArrayMatrixNumberBigNumber(e,t){throw new Error("median(A, dim) is not yet supported");},"...":function _(e){if(tr(e))throw new TypeError("Scalar values expected in function median");return a(e);}});}),_c=["typed","add","subtract","multiply","divide","apply","isNaN"],Ec=et("variance",_c,function(e){var t=e.typed,n=e.add,r=e.subtract,i=e.multiply,o=e.divide,a=e.apply,u=e.isNaN;return t("variance",{"Array | Matrix":function ArrayMatrix(e){return c(e,"unbiased");},"Array | Matrix, string":c,"Array | Matrix, number | BigNumber":function ArrayMatrixNumberBigNumber(e,t){return l(e,t,"unbiased");},"Array | Matrix, number | BigNumber, string":l,"...":function _(e){return c(e,"unbiased");}});function c(e,t){var a=0,c=0;if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(nr(e,function(e){try{a=n(a,e),c++;}catch(t){throw Ks(t,"variance",e);}}),0===c)throw new Error("Cannot calculate variance of an empty array");var l=o(a,c);if(a=0,nr(e,function(e){var t=r(e,l);a=n(a,i(t,t));}),u(a))return a;switch(t){case"uncorrected":return o(a,c);case"biased":return o(a,c+1);case"unbiased":var p=s(a)?a.mul(0):0;return 1===c?p:o(a,c-1);default:throw new Error('Unknown normalization "'+t+'". Choose "unbiased" (default), "uncorrected", or "biased".');}}function l(e,t,n){try{if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(e,t,function(e){return c(e,n);});}catch(e){throw Ks(e,"variance");}}}),Ac=["typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric"],Tc=et("kldivergence",Ac,function(e){var t=e.typed,n=e.matrix,r=e.divide,i=e.sum,o=e.multiply,a=e.dotDivide,s=e.log,u=e.isNumeric;return t("kldivergence",{"Array, Array":function ArrayArray(e,t){return c(n(e),n(t));},"Matrix, Array":function MatrixArray(e,t){return c(e,n(t));},"Array, Matrix":function ArrayMatrix(e,t){return c(n(e),t);},"Matrix, Matrix":function MatrixMatrix(e,t){return c(e,t);}});function c(e,t){var n=t.size().length,c=e.size().length;if(n>1)throw new Error("first object must be one dimensional");if(c>1)throw new Error("second object must be one dimensional");if(n!==c)throw new Error("Length of two vectors must be equal");if(0===i(e))throw new Error("Sum of elements in first object must be non zero");if(0===i(t))throw new Error("Sum of elements in second object must be non zero");var l=r(e,i(e)),p=r(t,i(t)),d=i(o(l,s(a(l,p))));return u(d)?d:Number.NaN;}}),Nc=["typed","size","subset","compareNatural","Index"],Dc=et("setIsSubset",Nc,function(e){var t=e.typed,n=e.size,r=e.subset,i=e.compareNatural,o=e.Index;return t("setIsSubset",{"Array | Matrix, Array | Matrix":function ArrayMatrixArrayMatrix(e,t){if(0===r(n(e),new o(0)))return!0;if(0===r(n(t),new o(0)))return!1;for(var a,s=$e(Ge(Array.isArray(e)?e:e.toArray()).sort(i)),u=$e(Ge(Array.isArray(t)?t:t.toArray()).sort(i)),c=0;c<s.length;c++){a=!1;for(var l=0;l<u.length;l++){if(0===i(s[c].value,u[l].value)&&s[c].identifier===u[l].identifier){a=!0;break;}}if(!1===a)return!1;}return!0;}});}),Cc=["typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity"],Rc=et("sqrtm",Cc,function(e){var t=e.typed,n=e.abs,r=e.add,i=e.multiply,o=e.sqrt,a=e.subtract,s=e.inv,u=e.size,c=e.max,l=e.identity;function p(e){var t,o=0,p=e,d=l(u(e));do{var h=p;if(p=i(.5,r(h,s(d))),d=i(.5,r(d,s(h))),(t=c(n(a(p,h))))>1e-6&&++o>1e3)throw new Error("computing square root of matrix: iterative method could not converge");}while(t>1e-6);return p;}return t("sqrtm",{"Array | Matrix":function ArrayMatrix(e){var t=h(e)?e.size():Fe(e);switch(t.length){case 1:if(1===t[0])return o(e);throw new RangeError("Matrix must be square (size: "+Re(t)+")");case 2:if(t[0]===t[1])return p(e);throw new RangeError("Matrix must be square (size: "+Re(t)+")");}}});}),Pc=["typed","abs","map","median","subtract"],Oc=et("mad",Pc,function(e){var t=e.typed,n=e.abs,r=e.map,i=e.median,o=e.subtract;return t("mad",{"Array | Matrix":a,"...":function _(e){return a(e);}});function a(e){if(0===(e=Ge(e.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var t=i(e);return i(r(e,function(e){return n(o(e,t));}));}catch(e){throw e instanceof TypeError&&-1!==e.message.indexOf("median")?new TypeError(e.message.replace("median","mad")):Ks(e,"mad");}}}),Lc=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Ic=et("multinomial",Lc,function(e){var t=e.typed,n=e.add,r=e.divide,i=e.multiply,o=e.factorial,a=e.isInteger,s=e.isPositive;return t("multinomial",{"Array | Matrix":function ArrayMatrix(e){var t=0,u=1;return nr(e,function(e){if(!a(e)||!s(e))throw new TypeError("Positive integer value expected in function multinomial");t=n(t,e),u=i(u,o(e));}),r(o(t),u);}});}),Bc=["typed","add","divide"],Fc=et("mean",Bc,function(e){var t=e.typed,n=e.add,r=e.divide;return t("mean",{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function ArrayMatrixNumberBigNumber(e,t){try{var i=ir(e,t,n),o=Array.isArray(e)?Fe(e):e.size();return r(i,o[t]);}catch(e){throw Ks(e,"mean");}},"...":function _(e){if(tr(e))throw new TypeError("Scalar values expected in function mean");return i(e);}});function i(e){var t,i=0;if(nr(e,function(e){try{t=void 0===t?e:n(t,e),i++;}catch(t){throw Ks(t,"mean",e);}}),0===i)throw new Error("Cannot calculate the mean of an empty array");return r(t,i);}}),zc=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","inv","bignumber","multiply","add"],kc=et("eigs",zc,function(e){var t=e.config,n=e.typed,r=e.matrix,i=e.addScalar,o=e.subtract,a=e.equal,s=e.abs,u=e.atan,c=e.cos,l=e.sin,p=e.multiplyScalar,d=e.inv,h=e.bignumber,f=e.multiply,m=e.add;return n("eigs",{Array:function Array(e){var t=r(e),n=t.size();if(2!==n.length||n[0]!==n[1])throw new RangeError("Matrix must be square (size: "+Re(n)+")");var i=y(t,n[0]);return{values:i[0],vectors:i[1]};},Matrix:function Matrix(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError("Matrix must be square (size: "+Re(t)+")");var n=y(e,t[0]);return{values:r(n[0]),vectors:r(n[1])};}});function y(e,n){var r=e.datatype();if(void 0===r&&(r=e.getDataType()),"number"!==r&&"BigNumber"!==r&&"Fraction"!==r)throw"mixed"===r?new TypeError("Mixed matrix element type is not supported"):new TypeError("Matrix element type not supported ("+r+")");if(function(e,t){for(var n=0;n<t;n++){for(var r=n;r<t;r++){if(!a(e[n][r],e[r][n]))throw new TypeError("Input matrix is not symmetric");}}}(e.toArray(),n),"number"===r)return g(e.toArray());if("Fraction"===r){for(var i=e.toArray(),o=0;o<n;o++){for(var u=o;u<n;u++){i[o][u]=i[o][u].valueOf(),i[u][o]=i[o][u];}}return g(e.toArray());}return"BigNumber"===r?function(e){for(var n,r=e.length,i=s(t.epsilon/r),o=new Array(r),a=0;a<r;a++){o[a]=T(r,0),o[a][a]=1;}var u=E(e);for(;s(u[1])>=s(i);){var c=u[0][0],l=u[0][1];n=x(e[c][c],e[l][l],e[c][l]),e=S(e,n,c,l),o=w(o,n,c,l),u=E(e);}for(var p=T(r,0),d=0;d<r;d++){p[d]=e[d][d];}return A(W(p),W(o));}(e.toArray()):void 0;}function g(e){for(var n,r=e.length,i=Math.abs(t.epsilon/r),o=new Array(r),a=0;a<r;a++){o[a]=T(r,0),o[a][a]=1;}for(var s=_(e);Math.abs(s[1])>=Math.abs(i);){var u=s[0][0],c=s[0][1];e=M(e,n=v(e[u][u],e[c][c],e[u][c]),u,c),o=b(o,n,u,c),s=_(e);}for(var l=T(r,0),p=0;p<r;p++){l[p]=e[p][p];}return A(W(l),W(o));}function v(e,n,r){var i=n-e;return Math.abs(i)<=t.epsilon?Math.PI/4:.5*Math.atan(2*r/(n-e));}function x(e,n,r){var i=o(n,e);return s(i)<=t.epsilon?h(-1).acos().div(4):p(.5,u(f(2,r,d(i))));}function b(e,t,n,r){for(var i=e.length,o=Math.cos(t),a=Math.sin(t),s=T(i,0),u=T(i,0),c=0;c<i;c++){s[c]=o*e[c][n]-a*e[c][r],u[c]=a*e[c][n]+o*e[c][r];}for(var l=0;l<i;l++){e[l][n]=s[l],e[l][r]=u[l];}return e;}function w(e,t,n,r){for(var a=e.length,s=c(t),u=l(t),d=T(a,h(0)),f=T(a,h(0)),m=0;m<a;m++){d[m]=o(p(s,e[m][n]),p(u,e[m][r])),f[m]=i(p(u,e[m][n]),p(s,e[m][r]));}for(var y=0;y<a;y++){e[y][n]=d[y],e[y][r]=f[y];}return e;}function S(e,t,n,r){for(var a=e.length,s=h(c(t)),u=h(l(t)),d=p(s,s),y=p(u,u),g=T(a,h(0)),v=T(a,h(0)),x=f(h(2),s,u,e[n][r]),b=i(o(p(d,e[n][n]),x),p(y,e[r][r])),w=m(p(y,e[n][n]),x,p(d,e[r][r])),S=0;S<a;S++){g[S]=o(p(s,e[n][S]),p(u,e[r][S])),v[S]=i(p(u,e[n][S]),p(s,e[r][S]));}e[n][n]=b,e[r][r]=w,e[n][r]=h(0),e[r][n]=h(0);for(var M=0;M<a;M++){M!==n&&M!==r&&(e[n][M]=g[M],e[M][n]=g[M],e[r][M]=v[M],e[M][r]=v[M]);}return e;}function M(e,t,n,r){for(var i=e.length,o=Math.cos(t),a=Math.sin(t),s=o*o,u=a*a,c=T(i,0),l=T(i,0),p=s*e[n][n]-2*o*a*e[n][r]+u*e[r][r],d=u*e[n][n]+2*o*a*e[n][r]+s*e[r][r],h=0;h<i;h++){c[h]=o*e[n][h]-a*e[r][h],l[h]=a*e[n][h]+o*e[r][h];}e[n][n]=p,e[r][r]=d,e[n][r]=0,e[r][n]=0;for(var f=0;f<i;f++){f!==n&&f!==r&&(e[n][f]=c[f],e[f][n]=c[f],e[r][f]=l[f],e[f][r]=l[f]);}return e;}function _(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++){for(var o=i+1;o<t;o++){Math.abs(n)<Math.abs(e[i][o])&&(n=Math.abs(e[i][o]),r=[i,o]);}}return[r,n];}function E(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++){for(var o=i+1;o<t;o++){s(n)<s(e[i][o])&&(n=s(e[i][o]),r=[i,o]);}}return[r,n];}function A(e,t){for(var n=e.length,r=Array(n),i=Array(n),o=0;o<n;o++){i[o]=Array(n);}for(var a=0;a<n;a++){for(var s=0,u=e[0],c=0;c<e.length;c++){e[c]<u&&(u=e[s=c]);}r[a]=e.splice(s,1)[0];for(var l=0;l<n;l++){i[l][a]=t[l][s],t[l].splice(s,1);}}return[W(r),W(i)];}function T(e,t){for(var n=new Array(e),r=0;r<e;r++){n[r]=t;}return n;}}),Uc=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],jc=et("norm",Uc,function(e){var t=e.typed,n=e.abs,r=e.add,i=e.pow,o=e.conj,a=e.sqrt,s=e.multiply,u=e.equalScalar,c=e.larger,l=e.smaller,p=e.matrix,d=e.ctranspose,h=e.eigs;return t("norm",{number:Math.abs,Complex:function Complex(e){return e.abs();},BigNumber:function BigNumber(e){return e.abs();},"boolean":function boolean(e){return Math.abs(e);},Array:function Array(e){return y(p(e),2);},Matrix:function Matrix(e){return y(e,2);},"number | Complex | BigNumber | boolean, number | BigNumber | string":function numberComplexBigNumberBooleanNumberBigNumberString(e){return this(e);},"Array, number | BigNumber | string":function ArrayNumberBigNumberString(e,t){return y(p(e),t);},"Matrix, number | BigNumber | string":function MatrixNumberBigNumberString(e,t){return y(e,t);}});function f(e,t){if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=0;return e.forEach(function(e){var r=n(e);c(r,t)&&(t=r);},!0),t;}(e);if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return function(e){var t;return e.forEach(function(e){var r=n(e);t&&!l(r,t)||(t=r);},!0),t||0;}(e);if("fro"===t)return y(e,2);if("number"==typeof t&&!isNaN(t)){if(!u(t,0)){var o=0;return e.forEach(function(e){o=r(i(n(e),t),o);},!0),i(o,1/t);}return Number.POSITIVE_INFINITY;}throw new Error("Unsupported parameter value");}function m(e,t){if(1===t)return function(e){var t=[],i=0;return e.forEach(function(e,o){var a=o[1],s=r(t[a]||0,n(e));c(s,i)&&(i=s),t[a]=s;},!0),i;}(e);if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=[],i=0;return e.forEach(function(e,o){var a=o[0],s=r(t[a]||0,n(e));c(s,i)&&(i=s),t[a]=s;},!0),i;}(e);if("fro"===t)return function(e){var t=0;return e.forEach(function(e,n){t=r(t,s(e,o(e)));}),n(a(t));}(e);if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw new RangeError("Invalid matrix dimensions");var r=d(e),i=s(r,e),o=h(i).values,u=o.get([o.size()[0]-1]);return n(a(u));}(e);throw new Error("Unsupported parameter value "+t);}function y(e,t){var n=e.size();if(1===n.length)return f(e,t);if(2===n.length){if(n[0]&&n[1])return m(e,t);throw new RangeError("Invalid matrix dimensions");}}}),Hc=["typed","sqrt","variance"],qc=et("std",Hc,function(e){var t=e.typed,n=e.sqrt,r=e.variance;return t("std",{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function _(e){return i(e);}});function i(e,t){if(0===e.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return n(r.apply(null,arguments));}catch(e){throw e instanceof TypeError&&-1!==e.message.indexOf(" variance")?new TypeError(e.message.replace(" variance"," std")):e;}}}),Gc=rt({}),Vc=st({}),Wc=ut({}),Xc=wt({}),Yc=St({}),Zc=bt({}),$c=Ht({config:oe}),Jc=qt({}),Qc=Gt({}),Kc=It({Complex:Vc}),el=Ct({BigNumber:$c,config:oe}),tl=Pt({BigNumber:$c,config:oe}),nl=_t({BigNumber:$c,config:oe}),rl=Et({BigNumber:$c,config:oe}),il=Ot({BigNumber:$c,config:oe}),ol=At({BigNumber:$c,config:oe}),al=bn({BigNumber:$c,config:oe}),sl=pn({BigNumber:$c,config:oe}),ul=Cn({BigNumber:$c,config:oe}),cl=xn({BigNumber:$c,config:oe}),ll=Wn({}),pl=Tt({BigNumber:$c,config:oe}),dl=Mt({BigNumber:$c,config:oe}),hl=Rt({BigNumber:$c,config:oe}),fl=zt({}),ml=Xn({Matrix:Jc}),yl=Nt({BigNumber:$c,config:oe}),gl=Jn({BigNumber:$c,Complex:Vc,DenseMatrix:ml,Fraction:ll}),vl=sr({typed:gl}),xl=ur({typed:gl}),bl=hr({typed:gl}),wl=fr({typed:gl}),Sl=yr({config:oe,typed:gl}),Ml=gr({typed:gl}),_l=vr({typed:gl}),El=xr({Complex:Vc,typed:gl}),Al=br({typed:gl}),Tl=Gr({BigNumber:$c,config:oe,typed:gl}),Nl=Vr({isInteger:vl,typed:gl}),Dl=Xr({typed:gl}),Cl=Yr({Complex:Vc,typed:gl}),Rl=Zr({Complex:Vc,config:oe,typed:gl}),Pl=$r({typed:gl}),Ol=Jr({BigNumber:$c,Fraction:ll,complex:El,typed:gl}),Ll=Qr({typed:gl}),Il=mi({typed:gl}),Bl=yi({typed:gl}),Fl=gi({typed:gl}),zl=Si({typed:gl}),kl=Mi({typed:gl}),Ul=Ei({typed:gl}),jl=Ti({typed:gl}),Hl=Di({typed:gl}),ql=Ii({typed:gl}),Gl=Bi({typed:gl}),Vl=Fi({Complex:Vc,config:oe,typed:gl}),Wl=eo({BigNumber:$c,typed:gl}),Xl=to({BigNumber:$c,Complex:Vc,config:oe,typed:gl}),Yl=no({BigNumber:$c,Complex:Vc,config:oe,typed:gl}),Zl=ro({Complex:Vc,config:oe,typed:gl}),$l=io({typed:gl}),Jl=oo({Complex:Vc,config:oe,typed:gl}),Ql=ao({typed:gl}),Kl=so({BigNumber:$c,typed:gl}),ep=uo({BigNumber:$c,typed:gl}),tp=co({BigNumber:$c,typed:gl}),np=lo({typed:gl}),rp=po({typed:gl}),ip=mo({typed:gl}),op=wo({config:oe,typed:gl}),ap=Mo({config:oe,typed:gl}),sp=Dt({BigNumber:$c,config:oe}),up=_o({typed:gl}),cp=Eo({isNumeric:xl,typed:gl}),lp=Ao({typed:gl}),pp=To({typed:gl}),dp=No({Fraction:ll,typed:gl}),hp=Do({typed:gl}),fp=Co({typed:gl}),mp=Ro({typed:gl}),yp=Po({Complex:Vc,config:oe,typed:gl}),gp=Oo({Complex:Vc,config:oe,typed:gl}),vp=Lo({typed:gl}),xp=Io({typed:gl}),bp=Bo({isNaN:wl,isNumeric:xl,typed:gl}),wp=Fo({typed:gl}),Sp=ko({Complex:Vc,config:oe,typed:gl}),Mp=Uo({BigNumber:$c,typed:gl}),_p=jo({typed:gl}),Ep=Ho({typed:gl}),Ap=qo({BigNumber:$c,typed:gl}),Tp=Go({typed:gl}),Np=Vo({typed:gl}),Dp=Xo({config:oe,typed:gl}),Cp=Lt({BigNumber:$c,config:oe}),Rp=Yo({typed:gl}),Pp=Zo({Matrix:Jc,equalScalar:Sl,typed:gl}),Op=$o({DenseMatrix:ml,Matrix:Jc,SparseMatrix:Pp,typed:gl}),Lp=Jo({BigNumber:$c,Complex:Vc,Fraction:ll,config:oe,isNegative:Rp,matrix:Op,typed:gl,unaryMinus:hp}),Ip=ra({BigNumber:$c,DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl}),Bp=ca({DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl}),Fp=pa({BigNumber:$c,equalScalar:Sl,matrix:Op,typed:gl}),zp=da({BigNumber:$c,config:oe,matrix:Op,typed:gl}),kp=ha({equalScalar:Sl,matrix:Op,typed:gl}),Up=ma({DenseMatrix:ml,matrix:Op,typed:gl}),jp=ya({DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl}),Hp=ga({isInteger:vl,matrix:Op,typed:gl}),qp=xa({DenseMatrix:ml,SparseMatrix:Pp,matrix:Op,typed:gl}),Gp=ba({BigNumber:$c,DenseMatrix:ml,SparseMatrix:Pp,config:oe,matrix:Op,typed:gl}),Vp=wa({BigNumber:$c,config:oe,matrix:Op,typed:gl}),Wp=Sa({isInteger:vl,matrix:Op,typed:gl}),Xp=Aa({matrix:Op,config:oe,typed:gl}),Yp=Ia({matrix:Op,typed:gl}),Zp=Ua({BigNumber:$c,config:oe,matrix:Op,typed:gl}),$p=ja({matrix:Op,typed:gl}),Jp=Wa({BigNumber:$c,DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl,zeros:Zp}),Qp=Za({DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl,zeros:Zp}),Kp=$a({DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl,zeros:Zp}),ed=Ja({BigNumber:$c,DenseMatrix:ml,Fraction:ll,config:oe,equalScalar:Sl,matrix:Op,typed:gl}),td=Qa({matrix:Op,typed:gl}),nd=Ka({DenseMatrix:ml,config:oe,matrix:Op,typed:gl}),rd=es({DenseMatrix:ml,config:oe,matrix:Op,typed:gl}),id=ts({DenseMatrix:ml,config:oe,equalScalar:Sl,matrix:Op,typed:gl}),od=ns({DenseMatrix:ml,smaller:nd}),ad=rs({larger:rd,smaller:nd}),sd=is({SparseMatrix:Pp,typed:gl}),ud=os({BigNumber:$c,Complex:Vc,config:oe,typed:gl}),cd=ss({BigNumber:$c,DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl}),ld=us({BigNumber:$c,typed:gl}),pd=cs({DenseMatrix:ml,SparseMatrix:Pp,addScalar:fp,equalScalar:Sl,matrix:Op,typed:gl}),dd=ls({addScalar:fp,conj:vp,multiplyScalar:Pl,size:Xp,typed:gl}),hd=ps({addScalar:fp,combinations:ip,isInteger:vl,isNegative:Rp,isPositive:bl,larger:rd,typed:gl}),fd=ds({typed:gl}),md=hs({typed:gl}),yd=fs({config:oe,round:Jp,typed:gl}),gd=ms({addScalar:fp,dot:dd,equalScalar:Sl,matrix:Op,multiplyScalar:Pl,typed:gl}),vd=ys({equalScalar:Sl,matrix:Op,multiplyScalar:Pl,typed:gl}),xd=gs({typed:gl}),bd=vs({matrix:Op,typed:gl}),wd=bs({config:oe,matrix:Op}),Sd=ws({matrix:Op,typed:gl}),Md=Ss({Complex:Vc,config:oe,fraction:dp,identity:Gp,matrix:Op,multiply:gd,number:Ml,typed:gl}),_d=Ms({DenseMatrix:ml,equalScalar:Sl,matrix:Op,pow:Md,typed:gl}),Ed=_s({DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl,zeros:Zp}),Ad=Ts({compare:ed,typed:gl}),Td=Ns({compareText:td,isZero:fd,typed:gl}),Nd=Ds({DenseMatrix:ml,config:oe,matrix:Op,typed:gl}),Dd=Cs({compare:ed,isNaN:wl,isNumeric:xl,typed:gl}),Cd=Rs({ImmutableDenseMatrix:od}),Rd=Ps({BigNumber:$c,Complex:Vc,config:oe,typed:gl}),Pd=Os({typed:gl}),Od=Ls({DenseMatrix:ml,Index:Cd,compareNatural:Ad,size:Xp,subset:Yp,typed:gl}),Ld=Is({DenseMatrix:ml,Index:Cd,compareNatural:Ad,size:Xp,subset:Yp,typed:gl}),Id=Bs({Index:Cd,compareNatural:Ad,size:Xp,subset:Yp,typed:gl}),Bd=Fs({compareNatural:Ad,typed:gl}),Fd=zs({add:pd,matrix:Op,typed:gl}),zd=ks({add:pd,compare:ed,multiply:gd,partitionSelect:Dd,typed:gl}),kd=qs({BigNumber:$c,Complex:Vc,config:oe,multiplyScalar:Pl,pow:Md,typed:gl}),Ud=Gs({BigNumber:$c,typed:gl}),jd=Vs({equalScalar:Sl,matrix:Op,typed:gl}),Hd=Ws({DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl}),qd=Xs({matrix:Op,multiplyScalar:Pl,typed:gl}),Gd=Ys({matrix:Op,typed:gl}),Vd=Zs({bignumber:Ud,fraction:dp,number:Ml}),Wd=$s({equalScalar:Sl,matrix:Op,not:zl,typed:gl,zeros:Zp}),Xd=Js({DenseMatrix:ml,config:oe,matrix:Op,typed:gl}),Yd=Qs({compare:ed,compareNatural:Ad,matrix:Op,typed:gl}),Zd=eu({config:oe,numeric:Vd,smaller:nd,typed:gl}),$d=tu({BigNumber:$c,typed:gl}),Jd=nu({DenseMatrix:ml,Index:Cd,compareNatural:Ad,size:Xp,subset:Yp,typed:gl}),Qd=ru({Index:Cd,compareNatural:Ad,size:Xp,subset:Yp,typed:gl}),Kd=iu({Index:Cd,typed:gl}),eh=ou({add:pd,config:oe,numeric:Vd,typed:gl}),th=au({gamma:kd,typed:gl}),nh=su({factorial:th,typed:gl}),rh=cu({config:oe,round:Jp,typed:gl}),ih=lu({DenseMatrix:ml,addScalar:fp,equalScalar:Sl,matrix:Op,typed:gl,unaryMinus:hp}),oh=du({matrix:Op,multiply:gd,subtract:ih,typed:gl}),ah=hu({bignumber:Ud,matrix:Op,config:oe,larger:rd,largerEq:Nd,smaller:nd,smallerEq:Xd,typed:gl}),sh=fu({conj:vp,transpose:Gd,typed:gl}),uh=mu({numeric:Vd,typed:gl}),ch=yu({Complex:Vc,config:oe,divideScalar:uh,typed:gl}),lh=vu({DenseMatrix:ml,divideScalar:uh,equalScalar:Sl,matrix:Op,multiplyScalar:Pl,subtract:ih,typed:gl}),ph=xu({DenseMatrix:ml,equalScalar:Sl,matrix:Op,typed:gl}),dh=bu({config:oe,larger:rd,numeric:Vd,typed:gl}),hh=wu({DenseMatrix:ml,Index:Cd,compareNatural:Ad,size:Xp,subset:Yp,typed:gl}),fh=Su({Index:Cd,concat:Hp,setDifference:Od,size:Xp,subset:Yp,typed:gl}),mh=Mu({abs:md,addScalar:fp,divideScalar:uh,isPositive:bl,multiplyScalar:Pl,smaller:nd,sqrt:gp,typed:gl}),yh=Eu({addScalar:fp,complex:El,conj:vp,divideScalar:uh,equal:ph,identity:Gp,isZero:fd,matrix:Op,multiplyScalar:Pl,sign:Ol,sqrt:gp,subtract:ih,typed:gl,unaryMinus:hp,zeros:Zp}),gh=Au({abs:md,addScalar:fp,divideScalar:uh,multiplyScalar:Pl,sqrt:gp,subtract:ih,typed:gl,unaryMinus:hp}),vh=Tu({addScalar:fp,combinations:ip,divideScalar:uh,factorial:th,isInteger:vl,isNegative:Rp,larger:rd,multiplyScalar:Pl,pow:Md,subtract:ih,typed:gl}),xh=Nu({addScalar:fp,combinations:ip,divideScalar:uh,isInteger:vl,isNegative:Rp,multiplyScalar:Pl,typed:gl}),bh=Du({Complex:Vc,ceil:rh,floor:yd,typed:gl}),wh=Cu({Index:Cd,matrix:Op,range:ah,typed:gl}),Sh=Ru({Index:Cd,matrix:Op,range:ah,typed:gl}),Mh=Pu({Complex:Vc,config:oe,divideScalar:uh,typed:gl}),_h=Ou({DenseMatrix:ml,divideScalar:uh,equalScalar:Sl,matrix:Op,typed:gl}),Eh=Lu({equal:ph,typed:gl}),Ah=Uu({BigNumber:$c,Complex:Vc,Fraction:ll,abs:md,addScalar:fp,config:oe,divideScalar:uh,equal:ph,fix:bh,format:ql,isNumeric:xl,multiplyScalar:Pl,number:Ml,pow:Md,round:Jp,subtract:ih}),Th=ju({Unit:Ah,typed:gl}),Nh=Hu({Index:Cd,concat:Hp,setIntersect:Ld,setSymDifference:fh,size:Xp,subset:Yp,typed:gl}),Dh=tc({SparseMatrix:Pp,abs:md,add:pd,divideScalar:uh,larger:rd,largerEq:Nd,multiply:gd,subtract:ih,transpose:Gd,typed:gl}),Ch=nc({abs:md,add:pd,addScalar:fp,config:oe,divideScalar:uh,equalScalar:Sl,matrix:Op,multiply:gd,multiplyScalar:Pl,smaller:nd,subtract:ih,typed:gl}),Rh=rc({addScalar:fp,isInteger:vl,isNegative:Rp,stirlingS2:vh,typed:gl}),Ph=wn({BigNumber:$c,Unit:Ah,config:oe}),Oh=en({BigNumber:$c,Unit:Ah,config:oe}),Lh=Mn({BigNumber:$c,Unit:Ah,config:oe}),Ih=tn({BigNumber:$c,Unit:Ah,config:oe}),Bh=fn({BigNumber:$c,Unit:Ah,config:oe}),Fh=cn({BigNumber:$c,Unit:Ah,config:oe}),zh=_n({BigNumber:$c,Unit:Ah,config:oe}),kh=En({BigNumber:$c,Unit:Ah,config:oe}),Uh=Wt({BigNumber:$c,Unit:Ah,config:oe}),jh=dn({BigNumber:$c,Unit:Ah,config:oe}),Hh=an({BigNumber:$c,Unit:Ah,config:oe}),qh=Zt({BigNumber:$c,Unit:Ah,config:oe}),Gh=Ln({BigNumber:$c,Unit:Ah,config:oe}),Vh=Nn({BigNumber:$c,Unit:Ah,config:oe}),Wh=mn({BigNumber:$c,Unit:Ah,config:oe}),Xh=Un({BigNumber:$c,Unit:Ah,config:oe}),Yh=Fn({BigNumber:$c,Unit:Ah,config:oe}),Zh=jn({BigNumber:$c,Unit:Ah,config:oe}),$h=hn({BigNumber:$c,Unit:Ah,config:oe}),Jh=Yt({BigNumber:$c,Unit:Ah,config:oe}),Qh=Rn({BigNumber:$c,Unit:Ah,config:oe}),Kh=Pn({BigNumber:$c,Unit:Ah,config:oe}),ef=Jt({BigNumber:$c,Unit:Ah,config:oe}),tf=ic({DenseMatrix:ml,matrix:Op,typed:gl}),nf=oc({config:oe,multiplyScalar:Pl,numeric:Vd,typed:gl}),rf=ac({DenseMatrix:ml,divideScalar:uh,equalScalar:Sl,matrix:Op,multiplyScalar:Pl,subtract:ih,typed:gl}),of=sc({Unit:Ah,typed:gl}),af=Sn({BigNumber:$c,Unit:Ah,config:oe}),sf=un({BigNumber:$c,Unit:Ah,config:oe}),uf=$t({BigNumber:$c,Unit:Ah,config:oe}),cf=ln({BigNumber:$c,Unit:Ah,config:oe}),lf=Bn({BigNumber:$c,Unit:Ah,config:oe}),pf=An({BigNumber:$c,Unit:Ah,config:oe}),df=In({BigNumber:$c,Unit:Ah,config:oe}),hf=on({BigNumber:$c,Unit:Ah,config:oe}),ff=zn({BigNumber:$c,Unit:Ah,config:oe}),mf=yn({BigNumber:$c,Unit:Ah,config:oe}),yf=Vt({BigNumber:$c,Unit:Ah,config:oe}),gf=On({BigNumber:$c,Unit:Ah,config:oe}),vf=uc({matrix:Op,number:Ml,subtract:ih,typed:gl}),xf=cc({FibonacciHeap:ad,addScalar:fp,equalScalar:Sl}),bf=lc({DenseMatrix:ml,Spa:xf,SparseMatrix:Pp,abs:md,addScalar:fp,divideScalar:uh,equalScalar:Sl,larger:rd,matrix:Op,multiplyScalar:Pl,subtract:ih,typed:gl,unaryMinus:hp}),wf=pc({lup:bf,matrix:Op,multiply:gd,subtract:ih,typed:gl,unaryMinus:hp}),Sf=sn({BigNumber:$c,Unit:Ah,config:oe}),Mf=Kt({BigNumber:$c,Unit:Ah,config:oe}),_f=nn({BigNumber:$c,Unit:Ah,config:oe}),Ef=Dn({BigNumber:$c,Unit:Ah,config:oe}),Af=kn({BigNumber:$c,Unit:Ah,config:oe}),Tf=vn({BigNumber:$c,Unit:Ah,config:oe}),Nf=dc({Complex:Vc,config:oe,divideScalar:uh,log:Mh,typed:gl}),Df=mc({DenseMatrix:ml,lsolve:lh,lup:bf,matrix:Op,slu:Dh,typed:gl,usolve:rf}),Cf=gc({abs:md,addScalar:fp,det:wf,divideScalar:uh,identity:Gp,matrix:Op,multiply:gd,typed:gl,unaryMinus:hp}),Rf=xc({abs:md,add:pd,identity:Gp,inv:Cf,multiply:gd,typed:gl}),Pf=wc({divideScalar:uh,equalScalar:Sl,inv:Cf,matrix:Op,multiply:gd,typed:gl}),Of=Mc({add:pd,compare:ed,divide:Pf,partitionSelect:Dd,typed:gl}),Lf=Ec({add:pd,apply:Nl,divide:Pf,isNaN:wl,multiply:gd,subtract:ih,typed:gl}),If=Tc({divide:Pf,dotDivide:_h,isNumeric:xl,log:Mh,matrix:Op,multiply:gd,sum:eh,typed:gl}),Bf=Tn({BigNumber:$c,Unit:Ah,config:oe}),Ff=Xt({BigNumber:$c,Unit:Ah,config:oe}),zf=Dc({Index:Cd,compareNatural:Ad,size:Xp,subset:Yp,typed:gl}),kf=Rc({abs:md,add:pd,identity:Gp,inv:Cf,max:dh,multiply:gd,size:Xp,sqrt:gp,subtract:ih,typed:gl}),Uf=Oc({abs:md,map:jl,median:Of,subtract:ih,typed:gl}),jf=Ic({add:pd,divide:Pf,factorial:th,isInteger:vl,isPositive:bl,multiply:gd,typed:gl}),Hf=Qt({BigNumber:$c,Unit:Ah,config:oe}),qf=gn({BigNumber:$c,Unit:Ah,config:oe}),Gf=Fc({add:pd,divide:Pf,typed:gl}),Vf=kc({abs:md,add:pd,addScalar:fp,atan:$l,bignumber:Ud,config:oe,cos:Ep,equal:ph,inv:Cf,matrix:Op,multiply:gd,multiplyScalar:Pl,sin:Tp,subtract:ih,typed:gl}),Wf=rn({BigNumber:$c,Unit:Ah,config:oe}),Xf=jc({abs:md,add:pd,conj:vp,ctranspose:sh,eigs:Vf,equalScalar:Sl,larger:rd,matrix:Op,multiply:gd,pow:Md,smaller:nd,sqrt:gp,typed:gl}),Yf=qc({sqrt:gp,typed:gl,variance:Lf}),Zf={end:!0};function $f(e){return($f="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}var Jf=et("Node",["mathWithTransform"],function(e){var t=e.mathWithTransform;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");}return n.prototype.evaluate=function(e){return this.compile().evaluate(e);},n.prototype.type="Node",n.prototype.isNode=!0,n.prototype.comment="",n.prototype.compile=function(){var e=this._compile(t,{}),n={};return{evaluate:function evaluate(t){var r=t||{};return function(e){for(var t in e){if(Q(e,t)&&t in Zf)throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword');}}(r),e(r,n,null);}};},n.prototype._compile=function(e,t){throw new Error("Method _compile should be implemented by type "+this.type);},n.prototype.forEach=function(e){throw new Error("Cannot run forEach on a Node interface");},n.prototype.map=function(e){throw new Error("Cannot run map on a Node interface");},n.prototype._ifNode=function(e){if(!F(e))throw new TypeError("Callback function must return a Node");return e;},n.prototype.traverse=function(e){e(this,null,null),function e(t,n){t.forEach(function(t,r,i){n(t,r,i),e(t,n);});}(this,e);},n.prototype.transform=function(e){return function t(n,r,i){var o=e(n,r,i);return o!==n?o:n.map(t);}(this,null,null);},n.prototype.filter=function(e){var t=[];return this.traverse(function(n,r,i){e(n,r,i)&&t.push(n);}),t;},n.prototype.clone=function(){throw new Error("Cannot clone a Node interface");},n.prototype.cloneDeep=function(){return this.map(function(e){return e.cloneDeep();});},n.prototype.equals=function(e){return!!e&&Z(this,e);},n.prototype.toString=function(e){var t;if(e&&"object"===$f(e))switch($f(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback");}return void 0!==t?t:this._toString(e);},n.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type);},n.prototype.toHTML=function(e){var t;if(e&&"object"===$f(e))switch($f(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback");}return void 0!==t?t:this.toHTML(e);},n.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type);},n.prototype.toTex=function(e){var t;if(e&&"object"===$f(e))switch($f(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback");}return void 0!==t?t:this._toTex(e);},n.prototype._toTex=function(e){throw new Error("_toTex not implemented for "+this.type);},n.prototype.getIdentifier=function(){return this.type;},n.prototype.getContent=function(){return this;},n;},{isClass:!0,isNode:!0}),Qf=et("ArrayNode",["Node"],function(e){var t=e.Node;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=e||[],!Array.isArray(this.items)||!this.items.every(F))throw new TypeError("Array containing Nodes expected");}return n.prototype=new t(),n.prototype.type="ArrayNode",n.prototype.isArrayNode=!0,n.prototype._compile=function(e,t){var n=Ve(this.items,function(n){return n._compile(e,t);});if("Array"!==e.config.matrix){var r=e.matrix;return function(e,t,i){return r(Ve(n,function(n){return n(e,t,i);}));};}return function(e,t,r){return Ve(n,function(n){return n(e,t,r);});};},n.prototype.forEach=function(e){for(var t=0;t<this.items.length;t++){e(this.items[t],"items["+t+"]",this);}},n.prototype.map=function(e){for(var t=[],r=0;r<this.items.length;r++){t[r]=this._ifNode(e(this.items[r],"items["+r+"]",this));}return new n(t);},n.prototype.clone=function(){return new n(this.items.slice(0));},n.prototype._toString=function(e){return"["+this.items.map(function(t){return t.toString(e);}).join(", ")+"]";},n.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items};},n.fromJSON=function(e){return new n(e.items);},n.prototype.toHTML=function(e){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map(function(t){return t.toHTML(e);}).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>';},n.prototype._toTex=function(e){var t="\\begin{bmatrix}";return this.items.forEach(function(n){n.items?t+=n.items.map(function(t){return t.toTex(e);}).join("&"):t+=n.toTex(e),t+="\\\\";}),t+="\\end{bmatrix}";},n;},{isClass:!0,isNode:!0}),Kf=et("BlockNode",["ResultSet","Node"],function(e){var t=e.ResultSet,n=e.Node;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map(function(e){var t=e&&e.node,n=!e||void 0===e.visible||e.visible;if(!F(t))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof n)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:n};});}return r.prototype=new n(),r.prototype.type="BlockNode",r.prototype.isBlockNode=!0,r.prototype._compile=function(e,n){var r=Ve(this.blocks,function(t){return{evaluate:t.node._compile(e,n),visible:t.visible};});return function(e,n,i){var o=[];return We(r,function(t){var r=t.evaluate(e,n,i);t.visible&&o.push(r);}),new t(o);};},r.prototype.forEach=function(e){for(var t=0;t<this.blocks.length;t++){e(this.blocks[t].node,"blocks["+t+"].node",this);}},r.prototype.map=function(e){for(var t=[],n=0;n<this.blocks.length;n++){var i=this.blocks[n],o=this._ifNode(e(i.node,"blocks["+n+"].node",this));t[n]={node:o,visible:i.visible};}return new r(t);},r.prototype.clone=function(){return new r(this.blocks.map(function(e){return{node:e.node,visible:e.visible};}));},r.prototype._toString=function(e){return this.blocks.map(function(t){return t.node.toString(e)+(t.visible?"":";");}).join("\n");},r.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks};},r.fromJSON=function(e){return new r(e.blocks);},r.prototype.toHTML=function(e){return this.blocks.map(function(t){return t.node.toHTML(e)+(t.visible?"":'<span class="math-separator">;</span>');}).join('<span class="math-separator"><br /></span>');},r.prototype._toTex=function(e){return this.blocks.map(function(t){return t.node.toTex(e)+(t.visible?"":";");}).join("\\;\\;\n");},r;},{isClass:!0,isNode:!0}),em=n(66),tm=n.n(em),nm={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega","true":"\\mathrm{True}","false":"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},rm={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},im={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(rm.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(rm.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(rm.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(rm.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(rm.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(rm.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(rm.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(rm.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(rm.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(rm.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(rm.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(rm.bitAnd,"${args[1]}\\right)")},bitNot:{1:rm.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(rm.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(rm.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(rm.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(rm.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(rm.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(rm.and,"${args[1]}\\right)")},not:{1:rm.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(rm.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(rm.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(rm.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(rm.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(rm.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(rm.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(rm.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(rm.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(rm.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(rm.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(rm.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(rm.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(rm.to,"${args[1]}\\right)")},numeric:function numeric(e,t){return e.args[0].toTex();},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(nm.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},om={deg:"^\\circ"};function am(e){return tm()(e,{preserveFormatting:!0});}function sm(e,t){return(t=void 0!==t&&t)?Q(om,e)?om[e]:"\\mathrm{"+am(e)+"}":Q(nm,e)?nm[e]:am(e);}var um=et("ConstantNode",["Node"],function(e){var t=e.Node;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.value=e;}return n.prototype=new t(),n.prototype.type="ConstantNode",n.prototype.isConstantNode=!0,n.prototype._compile=function(e,t){var n=this.value;return function(){return n;};},n.prototype.forEach=function(e){},n.prototype.map=function(e){return this.clone();},n.prototype.clone=function(){return new n(this.value);},n.prototype._toString=function(e){return Re(this.value,e);},n.prototype.toHTML=function(e){var t=this._toString(e);switch(G(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>";}},n.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value};},n.fromJSON=function(e){return new n(e.value);},n.prototype._toTex=function(e){var t=this._toString(e);switch(G(this.value)){case"string":return"\\mathtt{"+am(t)+"}";case"number":case"BigNumber":if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var n=t.toLowerCase().indexOf("e");return-1!==n?t.substring(0,n)+"\\cdot10^{"+t.substring(n+1)+"}":t;case"Fraction":return this.value.toLatex();default:return t;}},n;},{isClass:!0,isNode:!0});function cm(e){return(cm="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}var lm=et("ObjectNode",["Node"],function(e){var t=e.Node;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=e||{},e&&("object"!==cm(e)||!Object.keys(e).every(function(t){return F(e[t]);})))throw new TypeError("Object containing Nodes expected");}return n.prototype=new t(),n.prototype.type="ObjectNode",n.prototype.isObjectNode=!0,n.prototype._compile=function(e,t){var n={};for(var r in this.properties){if(Q(this.properties,r)){var i=Pe(r),o=JSON.parse(i);if(!Ca(this.properties,o))throw new Error('No access to property "'+o+'"');n[o]=this.properties[r]._compile(e,t);}}return function(e,t,r){var i={};for(var o in n){Q(n,o)&&(i[o]=n[o](e,t,r));}return i;};},n.prototype.forEach=function(e){for(var t in this.properties){Q(this.properties,t)&&e(this.properties[t],"properties["+Pe(t)+"]",this);}},n.prototype.map=function(e){var t={};for(var r in this.properties){Q(this.properties,r)&&(t[r]=this._ifNode(e(this.properties[r],"properties["+Pe(r)+"]",this)));}return new n(t);},n.prototype.clone=function(){var e={};for(var t in this.properties){Q(this.properties,t)&&(e[t]=this.properties[t]);}return new n(e);},n.prototype._toString=function(e){var t=[];for(var n in this.properties){Q(this.properties,n)&&t.push(Pe(n)+": "+this.properties[n].toString(e));}return"{"+t.join(", ")+"}";},n.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties};},n.fromJSON=function(e){return new n(e.properties);},n.prototype.toHTML=function(e){var t=[];for(var n in this.properties){Q(this.properties,n)&&t.push('<span class="math-symbol math-property">'+Oe(n)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[n].toHTML(e));}return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>';},n.prototype._toTex=function(e){var t=[];for(var n in this.properties){Q(this.properties,n)&&t.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(e)+"\\\\");}return"\\left\\{\\begin{array}{ll}".concat(t.join("\n"),"\\end{array}\\right\\}");},n;},{isClass:!0,isNode:!0}),pm=et("ParenthesisNode",["Node"],function(e){var t=e.Node;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!F(e))throw new TypeError('Node expected for parameter "content"');this.content=e;}return n.prototype=new t(),n.prototype.type="ParenthesisNode",n.prototype.isParenthesisNode=!0,n.prototype._compile=function(e,t){return this.content._compile(e,t);},n.prototype.getContent=function(){return this.content.getContent();},n.prototype.forEach=function(e){e(this.content,"content",this);},n.prototype.map=function(e){return new n(e(this.content,"content",this));},n.prototype.clone=function(){return new n(this.content);},n.prototype._toString=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e);},n.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content};},n.fromJSON=function(e){return new n(e.content);},n.prototype.toHTML=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e);},n.prototype._toTex=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e);},n;},{isClass:!0,isNode:!0}),dm=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function hm(e,t){var n=e;"keep"!==t&&(n=e.getContent());for(var r=n.getIdentifier(),i=0;i<dm.length;i++){if(r in dm[i])return i;}return null;}function fm(e,t){var n=e;"keep"!==t&&(n=e.getContent());var r=n.getIdentifier(),i=hm(n,t);if(null===i)return null;var o=dm[i][r];if(Q(o,"associativity")){if("left"===o.associativity)return"left";if("right"===o.associativity)return"right";throw Error("'"+r+"' has the invalid associativity '"+o.associativity+"'.");}return null;}function mm(e,t,n){var r="keep"!==n?e.getContent():e,i="keep"!==n?e.getContent():t,o=r.getIdentifier(),a=i.getIdentifier(),s=hm(r,n);if(null===s)return null;var u=dm[s][o];if(Q(u,"associativeWith")&&u.associativeWith instanceof Array){for(var c=0;c<u.associativeWith.length;c++){if(u.associativeWith[c]===a)return!0;}return!1;}return null;}var ym=et("RelationalNode",["Node"],function(e){var t=e.Node;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(t))throw new TypeError("Parameter params must be an array");if(e.length!==t.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=t;}return n.prototype=new t(),n.prototype.type="RelationalNode",n.prototype.isRelationalNode=!0,n.prototype._compile=function(e,t){var n=this,r=this.params.map(function(n){return n._compile(e,t);});return function(t,i,o){for(var a,s=r[0](t,i,o),u=0;u<n.conditionals.length;u++){if(a=s,s=r[u+1](t,i,o),!Na(e,n.conditionals[u])(a,s))return!1;}return!0;};},n.prototype.forEach=function(e){var t=this;this.params.forEach(function(n,r){return e(n,"params["+r+"]",t);},this);},n.prototype.map=function(e){var t=this;return new n(this.conditionals.slice(),this.params.map(function(n,r){return t._ifNode(e(n,"params["+r+"]",t));},this));},n.prototype.clone=function(){return new n(this.conditionals,this.params);},n.prototype._toString=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=hm(this,t),r=this.params.map(function(r,i){var o=hm(r,t);return"all"===t||null!==o&&o<=n?"("+r.toString(e)+")":r.toString(e);}),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},o=r[0],a=0;a<this.conditionals.length;a++){o+=" "+i[this.conditionals[a]]+" "+r[a+1];}return o;},n.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params};},n.fromJSON=function(e){return new n(e.conditionals,e.params);},n.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=hm(this,t),r=this.params.map(function(r,i){var o=hm(r,t);return"all"===t||null!==o&&o<=n?'<span class="math-parenthesis math-round-parenthesis">(</span>'+r.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':r.toHTML(e);}),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},o=r[0],a=0;a<this.conditionals.length;a++){o+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Oe(i[this.conditionals[a]])+"</span>"+r[a+1];}return o;},n.prototype._toTex=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=hm(this,t),r=this.params.map(function(r,i){var o=hm(r,t);return"all"===t||null!==o&&o<=n?"\\left("+r.toTex(e)+"\right)":r.toTex(e);}),i=r[0],o=0;o<this.conditionals.length;o++){i+=rm[this.conditionals[o]]+r[o+1];}return i;},n;},{isClass:!0,isNode:!0}),gm=et("Chain",["?on","math"],function(e){var t=e.on,n=e.math;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");q(e)?this.value=e.value:this.value=e;}function i(e,t){J(r.prototype,e,function(){var e=t();if("function"==typeof e)return o(e);});}function o(e){return function(){for(var t=[this.value],n=0;n<arguments.length;n++){t[n+1]=arguments[n];}return new r(e.apply(e,t));};}r.prototype.type="Chain",r.prototype.isChain=!0,r.prototype.done=function(){return this.value;},r.prototype.valueOf=function(){return this.value;},r.prototype.toString=function(){return Re(this.value);},r.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value};},r.fromJSON=function(e){return new r(e.value);},r.createProxy=function(e,t){if("string"==typeof e)u=e,"function"==typeof(c=t)&&(r.prototype[u]=o(c));else{var n=function n(t){Q(e,t)&&void 0===a[t]&&i(t,function(){return e[t];});};for(var s in e){n(s);}}var u,c;};var a={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return r.createProxy(n),t&&t("import",function(e,t,n){n||i(e,t);}),r;},{isClass:!0}),vm=et("reviver",["classes"],function(e){var t=e.classes;return function(e,n){var r=t[n&&n.mathjs];return r&&"function"==typeof r.fromJSON?r.fromJSON(n):n;};}),xm=et("ConditionalNode",["Node"],function(e){var t=e.Node;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!F(e))throw new TypeError("Parameter condition must be a Node");if(!F(t))throw new TypeError("Parameter trueExpr must be a Node");if(!F(r))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=r;}return n.prototype=new t(),n.prototype.type="ConditionalNode",n.prototype.isConditionalNode=!0,n.prototype._compile=function(e,t){var n=this.condition._compile(e,t),r=this.trueExpr._compile(e,t),i=this.falseExpr._compile(e,t);return function(e,t,o){return function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if(s(e))return!e.isZero();if(u(e))return!(!e.re&&!e.im);if(l(e))return!!e.value;}if(null==e)return!1;throw new TypeError('Unsupported type of condition "'+G(e)+'"');}(n(e,t,o))?r(e,t,o):i(e,t,o);};},n.prototype.forEach=function(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this);},n.prototype.map=function(e){return new n(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)));},n.prototype.clone=function(){return new n(this.condition,this.trueExpr,this.falseExpr);},n.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=hm(this,t),r=this.condition.toString(e),i=hm(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r="("+r+")");var o=this.trueExpr.toString(e),a=hm(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==a&&a<=n)&&(o="("+o+")");var s=this.falseExpr.toString(e),u=hm(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=n)&&(s="("+s+")"),r+" ? "+o+" : "+s;},n.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr};},n.fromJSON=function(e){return new n(e.condition,e.trueExpr,e.falseExpr);},n.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=hm(this,t),r=this.condition.toHTML(e),i=hm(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r='<span class="math-parenthesis math-round-parenthesis">(</span>'+r+'<span class="math-parenthesis math-round-parenthesis">)</span>');var o=this.trueExpr.toHTML(e),a=hm(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==a&&a<=n)&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.falseExpr.toHTML(e),u=hm(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=n)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),r+'<span class="math-operator math-conditional-operator">?</span>'+o+'<span class="math-operator math-conditional-operator">:</span>'+s;},n.prototype._toTex=function(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}";},n;},{isClass:!0,isNode:!0}),bm=et("OperatorNode",["Node"],function(e){var t=e.Node;function n(e,t,r,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof t)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(r)||!r.every(F))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===i,this.op=e,this.fn=t,this.args=r||[];}function r(e,t,n,r,i){var o,a=hm(e,t),s=fm(e,t);if("all"===t||r.length>2&&"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier())return r.map(function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0;}});switch(r.length){case 0:o=[];break;case 1:var u=hm(r[0],t);if(i&&null!==u){var c,l;if("keep"===t?(c=r[0].getIdentifier(),l=e.getIdentifier()):(c=r[0].getContent().getIdentifier(),l=e.getContent().getIdentifier()),!1===dm[a][l].latexLeftParens){o=[!1];break;}if(!1===dm[u][c].latexParens){o=[!1];break;}}if(null===u){o=[!1];break;}if(u<=a){o=[!0];break;}o=[!1];break;case 2:var p,d,h=hm(r[0],t),f=mm(e,r[0],t);p=null!==h&&(h===a&&"right"===s&&!f||h<a);var m,y,g,v=hm(r[1],t),x=mm(e,r[1],t);if(d=null!==v&&(v===a&&"left"===s&&!x||v<a),i)"keep"===t?(m=e.getIdentifier(),y=e.args[0].getIdentifier(),g=e.args[1].getIdentifier()):(m=e.getContent().getIdentifier(),y=e.args[0].getContent().getIdentifier(),g=e.args[1].getContent().getIdentifier()),null!==h&&(!1===dm[a][m].latexLeftParens&&(p=!1),!1===dm[h][y].latexParens&&(p=!1)),null!==v&&(!1===dm[a][m].latexRightParens&&(d=!1),!1===dm[v][g].latexParens&&(d=!1));o=[p,d];break;default:"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier()||(o=r.map(function(n){var r=hm(n,t),i=mm(e,n,t),o=fm(n,t);return null!==r&&(a===r&&s===o&&!i||r<a);}));}return r.length>=2&&"OperatorNode:multiply"===e.getIdentifier()&&e.implicit&&"auto"===t&&"hide"===n&&(o=r.map(function(e,t){var n="ParenthesisNode"===e.getIdentifier();return!(!o[t]&&!n);})),o;}return n.prototype=new t(),n.prototype.type="OperatorNode",n.prototype.isOperatorNode=!0,n.prototype._compile=function(e,t){if("string"!=typeof this.fn||!Ra(e,this.fn))throw e[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var n=Na(e,this.fn),r=Ve(this.args,function(n){return n._compile(e,t);});if(1===r.length){var i=r[0];return function(e,t,r){return n(i(e,t,r));};}if(2===r.length){var o=r[0],a=r[1];return function(e,t,r){return n(o(e,t,r),a(e,t,r));};}return function(e,t,i){return n.apply(null,Ve(r,function(n){return n(e,t,i);}));};},n.prototype.forEach=function(e){for(var t=0;t<this.args.length;t++){e(this.args[t],"args["+t+"]",this);}},n.prototype.map=function(e){for(var t=[],r=0;r<this.args.length;r++){t[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));}return new n(this.op,this.fn,t,this.implicit);},n.prototype.clone=function(){return new n(this.op,this.fn,this.args.slice(0),this.implicit);},n.prototype.isUnary=function(){return 1===this.args.length;},n.prototype.isBinary=function(){return 2===this.args.length;},n.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,o=r(this,t,n,i,!1);if(1===i.length){var a=fm(this,t),s=i[0].toString(e);o[0]&&(s="("+s+")");var u=/[a-zA-Z]+/.test(this.op);return"right"===a?this.op+(u?" ":"")+s:"left"===a?s+(u?" ":"")+this.op:s+this.op;}if(2===i.length){var c=i[0].toString(e),l=i[1].toString(e);return o[0]&&(c="("+c+")"),o[1]&&(l="("+l+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?c+" "+l:c+" "+this.op+" "+l;}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var p=i.map(function(t,n){return t=t.toString(e),o[n]&&(t="("+t+")"),t;});return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?p.join(" "):p.join(" "+this.op+" ");}return this.fn+"("+this.args.join(", ")+")";},n.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit};},n.fromJSON=function(e){return new n(e.op,e.fn,e.args,e.implicit);},n.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,o=r(this,t,n,i,!1);if(1===i.length){var a=fm(this,t),s=i[0].toHTML(e);return o[0]&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===a?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Oe(this.op)+"</span>"+s:s+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Oe(this.op)+"</span>";}if(2===i.length){var u=i[0].toHTML(e),c=i[1].toHTML(e);return o[0]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),o[1]&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?u+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+c:u+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Oe(this.op)+"</span>"+c;}var l=i.map(function(t,n){return t=t.toHTML(e),o[n]&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t;});return i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?l.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):l.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Oe(this.op)+"</span>"):'<span class="math-function">'+Oe(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>';},n.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,o=r(this,t,n,i,!0),a=rm[this.fn];if(a=void 0===a?this.op:a,1===i.length){var s=fm(this,t),u=i[0].toTex(e);return o[0]&&(u="\\left(".concat(u,"\\right)")),"right"===s?a+u:u+a;}if(2===i.length){var c=i[0],l=c.toTex(e);o[0]&&(l="\\left(".concat(l,"\\right)"));var p,d=i[1].toTex(e);switch(o[1]&&(d="\\left(".concat(d,"\\right)")),p="keep"===t?c.getIdentifier():c.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return a+"{"+l+"}{"+d+"}";case"OperatorNode:pow":switch(l="{"+l+"}",d="{"+d+"}",p){case"ConditionalNode":case"OperatorNode:divide":l="\\left(".concat(l,"\\right)");}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===n)return l+"~"+d;}return l+a+d;}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var h=i.map(function(t,n){return t=t.toTex(e),o[n]&&(t="\\left(".concat(t,"\\right)")),t;});return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?h.join("~"):h.join(a);}return"\\mathrm{"+this.fn+"}\\left("+i.map(function(t){return t.toTex(e);}).join(",")+"\\right)";},n.prototype.getIdentifier=function(){return this.type+":"+this.fn;},n;},{isClass:!0,isNode:!0}),wm=et("RangeNode",["Node"],function(e){var t=e.Node;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!F(e))throw new TypeError("Node expected");if(!F(t))throw new TypeError("Node expected");if(r&&!F(r))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=t,this.step=r||null;}function r(e,t){var n=hm(e,t),r={},i=hm(e.start,t);if(r.start=null!==i&&i<=n||"all"===t,e.step){var o=hm(e.step,t);r.step=null!==o&&o<=n||"all"===t;}var a=hm(e.end,t);return r.end=null!==a&&a<=n||"all"===t,r;}return n.prototype=new t(),n.prototype.type="RangeNode",n.prototype.isRangeNode=!0,n.prototype.needsEnd=function(){return this.filter(function(e){return H(e)&&"end"===e.name;}).length>0;},n.prototype._compile=function(e,t){var n=e.range,r=this.start._compile(e,t),i=this.end._compile(e,t);if(this.step){var o=this.step._compile(e,t);return function(e,t,a){return n(r(e,t,a),i(e,t,a),o(e,t,a));};}return function(e,t,o){return n(r(e,t,o),i(e,t,o));};},n.prototype.forEach=function(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this);},n.prototype.map=function(e){return new n(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)));},n.prototype.clone=function(){return new n(this.start,this.end,this.step&&this.step);},n.prototype._toString=function(e){var t,n=r(this,e&&e.parenthesis?e.parenthesis:"keep"),i=this.start.toString(e);if(n.start&&(i="("+i+")"),t=i,this.step){var o=this.step.toString(e);n.step&&(o="("+o+")"),t+=":"+o;}var a=this.end.toString(e);return n.end&&(a="("+a+")"),t+=":"+a;},n.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step};},n.fromJSON=function(e){return new n(e.start,e.end,e.step);},n.prototype.toHTML=function(e){var t,n=r(this,e&&e.parenthesis?e.parenthesis:"keep"),i=this.start.toHTML(e);if(n.start&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=i,this.step){var o=this.step.toHTML(e);n.step&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+o;}var a=this.end.toHTML(e);return n.end&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+a;},n.prototype._toTex=function(e){var t=r(this,e&&e.parenthesis?e.parenthesis:"keep"),n=this.start.toTex(e);if(t.start&&(n="\\left(".concat(n,"\\right)")),this.step){var i=this.step.toTex(e);t.step&&(i="\\left(".concat(i,"\\right)")),n+=":"+i;}var o=this.end.toTex(e);return t.end&&(o="\\left(".concat(o,"\\right)")),n+=":"+o;},n;},{isClass:!0,isNode:!0}),Sm=et("FunctionAssignmentNode",["typed","Node"],function(e){var t=e.typed,n=e.Node;function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!F(n))throw new TypeError('Node expected for parameter "expr"');if(e in Zf)throw new Error('Illegal function name, "'+e+'" is a reserved keyword');this.name=e,this.params=t.map(function(e){return e&&e.name||e;}),this.types=t.map(function(e){return e&&e.type||"any";}),this.expr=n;}function i(e,t){var n=hm(e,t),r=hm(e.expr,t);return"all"===t||null!==r&&r<=n;}return r.prototype=new n(),r.prototype.type="FunctionAssignmentNode",r.prototype.isFunctionAssignmentNode=!0,r.prototype._compile=function(e,n){var r=Object.create(n);We(this.params,function(e){r[e]=!0;});var i=this.expr._compile(e,r),o=this.name,a=this.params,s=Ze(this.types,","),u=o+"("+Ze(this.params,", ")+")";return function(e,n,r){var c={};c[s]=function(){for(var t=Object.create(n),o=0;o<a.length;o++){t[a[o]]=arguments[o];}return i(e,t,r);};var l=t(o,c);return l.syntax=u,Da(e,o,l),l;};},r.prototype.forEach=function(e){e(this.expr,"expr",this);},r.prototype.map=function(e){var t=this._ifNode(e(this.expr,"expr",this));return new r(this.name,this.params.slice(0),t);},r.prototype.clone=function(){return new r(this.name,this.params.slice(0),this.expr);},r.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toString(e);return i(this,t)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n;},r.prototype.toJSON=function(){var e=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map(function(t,n){return{name:t,type:e[n]};}),expr:this.expr};},r.fromJSON=function(e){return new r(e.name,e.params,e.expr);},r.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=[],r=0;r<this.params.length;r++){n.push('<span class="math-symbol math-parameter">'+Oe(this.params[r])+"</span>");}var o=this.expr.toHTML(e);return i(this,t)&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Oe(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+o;},r.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toTex(e);return i(this,t)&&(n="\\left(".concat(n,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(sm).join(",")+"\\right):="+n;},r;},{isClass:!0,isNode:!0}),Mm=et("chain",["typed","Chain"],function(e){var t=e.typed,n=e.Chain;return t("chain",{"":function _(){return new n();},any:function any(e){return new n(e);}});});function _m(e){return e&&e.isIndexError?new Be(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e;}function Em(e){return(Em="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function Am(e){var t=e.subset;return function(e,n){try{if(Array.isArray(e))return t(e,n);if(e&&"function"==typeof e.subset)return e.subset(n);if("string"==typeof e)return t(e,n);if("object"===Em(e)){if(!n.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Na(e,n.getObjectProperty());}throw new TypeError("Cannot apply index: unsupported type of object");}catch(e){throw _m(e);}};}var Tm=et("AccessorNode",["subset","Node"],function(e){var t=e.subset,n=e.Node,r=Am({subset:t});function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!F(e))throw new TypeError('Node expected for parameter "object"');if(!B(t))throw new TypeError('IndexNode expected for parameter "index"');this.object=e||null,this.index=t,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||"";}.bind(this),set:function set(){throw new Error("Cannot assign a new name, name is read-only");}});}function o(e){return!(N(e)||D(e)||O(e)||I(e)||z(e)||U(e)||H(e));}return i.prototype=new n(),i.prototype.type="AccessorNode",i.prototype.isAccessorNode=!0,i.prototype._compile=function(e,t){var n=this.object._compile(e,t),i=this.index._compile(e,t);if(this.index.isObjectProperty()){var o=this.index.getObjectProperty();return function(e,t,r){return Na(n(e,t,r),o);};}return function(e,t,o){var a=n(e,t,o),s=i(e,t,a);return r(a,s);};},i.prototype.forEach=function(e){e(this.object,"object",this),e(this.index,"index",this);},i.prototype.map=function(e){return new i(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)));},i.prototype.clone=function(){return new i(this.object,this.index);},i.prototype._toString=function(e){var t=this.object.toString(e);return o(this.object)&&(t="("+t+")"),t+this.index.toString(e);},i.prototype.toHTML=function(e){var t=this.object.toHTML(e);return o(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e);},i.prototype._toTex=function(e){var t=this.object.toTex(e);return o(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e);},i.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index};},i.fromJSON=function(e){return new i(e.object,e.index);},i;},{isClass:!0,isNode:!0});function Nm(e){return function(e){if(Array.isArray(e))return Dm(e);}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e);}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Dm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dm(e,t);}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}();}function Dm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++){r[n]=e[n];}return r;}var Cm=et("IndexNode",["Range","Node","size"],function(e){var t=e.Range,n=e.Node,r=e.size;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(F))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties");}function o(e,n,r){return new t(s(e)?e.toNumber():e,s(n)?n.toNumber():n,s(r)?r.toNumber():r);}return i.prototype=new n(),i.prototype.type="IndexNode",i.prototype.isIndexNode=!0,i.prototype._compile=function(e,t){var n=Ve(this.dimensions,function(n,i){if(j(n)){if(n.needsEnd()){var a=Object.create(t);a.end=!0;var s=n.start._compile(e,a),u=n.end._compile(e,a),c=n.step?n.step._compile(e,a):function(){return 1;};return function(e,t,n){var a=r(n).valueOf(),l=Object.create(t);return l.end=a[i],o(s(e,l,n),u(e,l,n),c(e,l,n));};}var l=n.start._compile(e,t),p=n.end._compile(e,t),d=n.step?n.step._compile(e,t):function(){return 1;};return function(e,t,n){return o(l(e,t,n),p(e,t,n),d(e,t,n));};}if(H(n)&&"end"===n.name){var h=Object.create(t);h.end=!0;var f=n._compile(e,h);return function(e,t,n){var o=r(n).valueOf(),a=Object.create(t);return a.end=o[i],f(e,a,n);};}var m=n._compile(e,t);return function(e,t,n){return m(e,t,n);};}),i=Na(e,"index");return function(e,t,r){var o=Ve(n,function(n){return n(e,t,r);});return i.apply(void 0,Nm(o));};},i.prototype.forEach=function(e){for(var t=0;t<this.dimensions.length;t++){e(this.dimensions[t],"dimensions["+t+"]",this);}},i.prototype.map=function(e){for(var t=[],n=0;n<this.dimensions.length;n++){t[n]=this._ifNode(e(this.dimensions[n],"dimensions["+n+"]",this));}return new i(t,this.dotNotation);},i.prototype.clone=function(){return new i(this.dimensions.slice(0),this.dotNotation);},i.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&O(this.dimensions[0])&&"string"==typeof this.dimensions[0].value;},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null;},i.prototype._toString=function(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]";},i.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation};},i.fromJSON=function(e){return new i(e.dimensions,e.dotNotation);},i.prototype.toHTML=function(e){for(var t=[],n=0;n<this.dimensions.length;n++){t[n]=this.dimensions[n].toHTML();}return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Oe(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>';},i.prototype._toTex=function(e){var t=this.dimensions.map(function(t){return t.toTex(e);});return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}";},i;},{isClass:!0,isNode:!0});function Rm(e){return(Rm="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}var Pm=et("AssignmentNode",["subset","?matrix","Node"],function(e){var t=e.subset,n=e.matrix,r=e.Node,i=Am({subset:t}),o=function(e){var t=e.subset,n=e.matrix;return function(e,r,i){try{if(Array.isArray(e))return n(e).subset(r,i).valueOf();if(e&&"function"==typeof e.subset)return e.subset(r,i);if("string"==typeof e)return t(e,r,i);if("object"===Rm(e)){if(!r.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Da(e,r.getObjectProperty(),i),e;}throw new TypeError("Cannot apply index: unsupported type of object");}catch(e){throw _m(e);}};}({subset:t,matrix:n});function a(e,t,n){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=e,this.index=n?t:null,this.value=n||t,!H(e)&&!N(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(H(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!B(this.index))throw new TypeError('IndexNode expected as "index"');if(!F(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||"";}.bind(this),set:function set(){throw new Error("Cannot assign a new name, name is read-only");}});}function s(e,t){t||(t="keep");var n=hm(e,t),r=hm(e.value,t);return"all"===t||null!==r&&r<=n;}return a.prototype=new r(),a.prototype.type="AssignmentNode",a.prototype.isAssignmentNode=!0,a.prototype._compile=function(e,t){var n=this.object._compile(e,t),r=this.index?this.index._compile(e,t):null,a=this.value._compile(e,t),s=this.object.name;if(this.index){if(this.index.isObjectProperty()){var u=this.index.getObjectProperty();return function(e,t,r){var i=n(e,t,r),o=a(e,t,r);return Da(i,u,o);};}if(H(this.object))return function(e,t,i){var u=n(e,t,i),c=a(e,t,i),l=r(e,t,u);return Da(e,s,o(u,l,c)),c;};var c=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var l=this.object.index.getObjectProperty();return function(e,t,n){var i=c(e,t,n),s=Na(i,l),u=r(e,t,s),p=a(e,t,n);return Da(i,l,o(s,u,p)),p;};}var p=this.object.index._compile(e,t);return function(e,t,n){var s=c(e,t,n),u=p(e,t,s),l=i(s,u),d=r(e,t,l),h=a(e,t,n);return o(s,u,o(l,d,h)),h;};}if(!H(this.object))throw new TypeError("SymbolNode expected as object");return function(e,t,n){return Da(e,s,a(e,t,n));};},a.prototype.forEach=function(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this);},a.prototype.map=function(e){return new a(this._ifNode(e(this.object,"object",this)),this.index?this._ifNode(e(this.index,"index",this)):null,this._ifNode(e(this.value,"value",this)));},a.prototype.clone=function(){return new a(this.object,this.index,this.value);},a.prototype._toString=function(e){var t=this.object.toString(e),n=this.index?this.index.toString(e):"",r=this.value.toString(e);return s(this,e&&e.parenthesis)&&(r="("+r+")"),t+n+" = "+r;},a.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value};},a.fromJSON=function(e){return new a(e.object,e.index,e.value);},a.prototype.toHTML=function(e){var t=this.object.toHTML(e),n=this.index?this.index.toHTML(e):"",r=this.value.toHTML(e);return s(this,e&&e.parenthesis)&&(r='<span class="math-paranthesis math-round-parenthesis">(</span>'+r+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+n+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+r;},a.prototype._toTex=function(e){var t=this.object.toTex(e),n=this.index?this.index.toTex(e):"",r=this.value.toTex(e);return s(this,e&&e.parenthesis)&&(r="\\left(".concat(r,"\\right)")),t+n+":="+r;},a;},{isClass:!0,isNode:!0}),Om=et("SymbolNode",["math","?Unit","Node"],function(e){var t=e.math,n=e.Unit,r=e.Node;function i(e){return!!n&&n.isValuelessUnit(e);}function o(e){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');this.name=e;}return o.prototype=new r(),o.prototype.type="SymbolNode",o.prototype.isSymbolNode=!0,o.prototype._compile=function(e,t){var r=this.name;if(!0===t[r])return function(e,t,n){return t[r];};if(r in e)return function(t,n,i){return Na(r in t?t:e,r);};var o=i(r);return function(e,t,i){return r in e?Na(e,r):o?new n(null,r):function(e){throw new Error("Undefined symbol "+e);}(r);};},o.prototype.forEach=function(e){},o.prototype.map=function(e){return this.clone();},o.prototype.clone=function(){return new o(this.name);},o.prototype._toString=function(e){return this.name;},o.prototype.toHTML=function(e){var t=Oe(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>";},o.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name};},o.fromJSON=function(e){return new o(e.name);},o.prototype._toTex=function(e){var n=!1;void 0===t[this.name]&&i(this.name)&&(n=!0);var r=sm(this.name,n);return"\\"===r[0]?r:" "+r;},o;},{isClass:!0,isNode:!0});function Lm(e){return(Lm="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function Im(){return(Im=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}}return e;}).apply(this,arguments);}var Bm=et("FunctionNode",["math","Node","SymbolNode"],function(e){var t=e.math,n=e.Node,r=e.SymbolNode;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof e&&(e=new r(e)),!F(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(F))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||"";}.bind(this),set:function set(){throw new Error("Cannot assign a new name, name is read-only");}});}i.prototype=new n(),i.prototype.type="FunctionNode",i.prototype.isFunctionNode=!0,i.prototype._compile=function(e,t){if(!(this instanceof i))throw new TypeError("No valid FunctionNode");var n=Ve(this.args,function(n){return n._compile(e,t);});if(H(this.fn)){var r=this.fn.name,o=r in e?Na(e,r):void 0;if("function"==typeof o&&!0===o.rawArgs){var a=this.args;return function(t,n,i){return(r in t?Na(t,r):o)(a,e,Im({},t,n));};}if(1===n.length){var s=n[0];return function(e,t,n){return(r in e?Na(e,r):o)(s(e,t,n));};}if(2===n.length){var u=n[0],c=n[1];return function(e,t,n){return(r in e?Na(e,r):o)(u(e,t,n),c(e,t,n));};}return function(e,t,i){return(r in e?Na(e,r):o).apply(null,Ve(n,function(n){return n(e,t,i);}));};}if(N(this.fn)&&B(this.fn.index)&&this.fn.index.isObjectProperty()){var l=this.fn.object._compile(e,t),p=this.fn.index.getObjectProperty(),d=this.args;return function(t,r,i){var o=l(t,r,i);return function(e,t){if(!Ra(e,t))throw new Error('No access to method "'+t+'"');}(o,p),o[p]&&o[p].rawArgs?o[p](d,e,Im({},t,r)):o[p].apply(o,Ve(n,function(e){return e(t,r,i);}));};}var h=this.fn._compile(e,t),f=this.args;return function(t,r,i){var o=h(t,r,i);return o&&o.rawArgs?o(f,e,Im({},t,r)):o.apply(o,Ve(n,function(e){return e(t,r,i);}));};},i.prototype.forEach=function(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++){e(this.args[t],"args["+t+"]",this);}},i.prototype.map=function(e){for(var t=this._ifNode(e(this.fn,"fn",this)),n=[],r=0;r<this.args.length;r++){n[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));}return new i(t,n);},i.prototype.clone=function(){return new i(this.fn,this.args.slice(0));};var o=i.prototype.toString;function a(e,t,n){for(var r,i="",o=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),a=0;null!==(r=o.exec(e));){if(i+=e.substring(a,r.index),a=r.index,"$$"===r[0])i+="$",a++;else{a+=r[0].length;var s=t[r[1]];if(!s)throw new ReferenceError("Template: Property "+r[1]+" does not exist.");if(void 0===r[2])switch(Lm(s)){case"string":i+=s;break;case"object":if(F(s))i+=s.toTex(n);else{if(!Array.isArray(s))throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes");i+=s.map(function(e,t){if(F(e))return e.toTex(n);throw new TypeError("Template: "+r[1]+"["+t+"] is not a Node.");}).join(",");}break;default:throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes");}else{if(!F(s[r[2]]&&s[r[2]]))throw new TypeError("Template: "+r[1]+"["+r[2]+"] is not a Node.");i+=s[r[2]].toTex(n);}}}return i+=e.slice(a);}i.prototype.toString=function(e){var t,n=this.fn.toString(e);return e&&"object"===Lm(e.handler)&&Q(e.handler,n)&&(t=e.handler[n](this,e)),void 0!==t?t:o.call(this,e);},i.prototype._toString=function(e){var t=this.args.map(function(t){return t.toString(e);});return(L(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+t.join(", ")+")";},i.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args};},i.fromJSON=function(e){return new i(e.fn,e.args);},i.prototype.toHTML=function(e){var t=this.args.map(function(t){return t.toHTML(e);});return'<span class="math-function">'+Oe(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>';};var s=i.prototype.toTex;return i.prototype.toTex=function(e){var t;return e&&"object"===Lm(e.handler)&&Q(e.handler,this.name)&&(t=e.handler[this.name](this,e)),void 0!==t?t:s.call(this,e);},i.prototype._toTex=function(e){var n,r,i=this.args.map(function(t){return t.toTex(e);});switch(im[this.name]&&(n=im[this.name]),!t[this.name]||"function"!=typeof t[this.name].toTex&&"object"!==Lm(t[this.name].toTex)&&"string"!=typeof t[this.name].toTex||(n=t[this.name].toTex),Lm(n)){case"function":r=n(this,e);break;case"string":r=a(n,this,e);break;case"object":switch(Lm(n[i.length])){case"function":r=n[i.length](this,e);break;case"string":r=a(n[i.length],this,e);}}return void 0!==r?r:a("\\mathrm{${name}}\\left(${args}\\right)",this,e);},i.prototype.getIdentifier=function(){return this.type+":"+this.name;},i;},{isClass:!0,isNode:!0});function Fm(){return(Fm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}}return e;}).apply(this,arguments);}var zm=et("parse",["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],function(e){var t=e.typed,n=e.numeric,r=e.config,i=e.AccessorNode,o=e.ArrayNode,a=e.AssignmentNode,s=e.BlockNode,u=e.ConditionalNode,c=e.ConstantNode,l=e.FunctionAssignmentNode,p=e.FunctionNode,d=e.IndexNode,h=e.ObjectNode,f=e.OperatorNode,m=e.ParenthesisNode,y=e.RangeNode,g=e.RelationalNode,v=e.SymbolNode,x=t("parse",{string:function string(e){return G(e,{});},"Array | Matrix":function ArrayMatrix(e){return b(e,{});},"string, Object":function stringObject(e,t){return G(e,void 0!==t.nodes?t.nodes:{});},"Array | Matrix, Object":b});function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==t.nodes?t.nodes:{};return rr(e,function(e){if("string"!=typeof e)throw new TypeError("String expected");return G(e,n);});}var w=0,S=1,M=2,_=3,E=4,A={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},T={mod:!0,to:!0,"in":!0,and:!0,xor:!0,or:!0,not:!0},D={"true":!0,"false":!1,"null":null,undefined:void 0},C=["NaN","Infinity"];function R(e,t){return e.expression.substr(e.index,t);}function P(e){return R(e,1);}function L(e){e.index++;}function B(e){return e.expression.charAt(e.index-1);}function F(e){return e.expression.charAt(e.index+1);}function z(e){for(e.tokenType=w,e.token="",e.comment="";x.isWhitespace(P(e),e.nestingLevel);){L(e);}if("#"===P(e))for(;"\n"!==P(e)&&""!==P(e);){e.comment+=P(e),L(e);}if(""!==P(e)){if("\n"===P(e)&&!e.nestingLevel)return e.tokenType=S,e.token=P(e),void L(e);var t=P(e),n=R(e,2),r=R(e,3);if(3===r.length&&A[r])return e.tokenType=S,e.token=r,L(e),L(e),void L(e);if(2===n.length&&A[n])return e.tokenType=S,e.token=n,L(e),void L(e);if(A[t])return e.tokenType=S,e.token=t,void L(e);if(x.isDigitDot(t)){if(e.tokenType=M,"."===P(e))e.token+=P(e),L(e),x.isDigit(P(e))||(e.tokenType=S);else{for(;x.isDigit(P(e));){e.token+=P(e),L(e);}x.isDecimalMark(P(e),F(e))&&(e.token+=P(e),L(e));}for(;x.isDigit(P(e));){e.token+=P(e),L(e);}if("E"===P(e)||"e"===P(e))if(x.isDigit(F(e))||"-"===F(e)||"+"===F(e)){if(e.token+=P(e),L(e),"+"!==P(e)&&"-"!==P(e)||(e.token+=P(e),L(e)),!x.isDigit(P(e)))throw de(e,'Digit expected, got "'+P(e)+'"');for(;x.isDigit(P(e));){e.token+=P(e),L(e);}if(x.isDecimalMark(P(e),F(e)))throw de(e,'Digit expected, got "'+P(e)+'"');}else if("."===F(e))throw L(e),de(e,'Digit expected, got "'+P(e)+'"');}else{if(!x.isAlpha(P(e),B(e),F(e))){for(e.tokenType=E;""!==P(e);){e.token+=P(e),L(e);}throw de(e,'Syntax error in part "'+e.token+'"');}for(;x.isAlpha(P(e),B(e),F(e))||x.isDigit(P(e));){e.token+=P(e),L(e);}Q(T,e.token)?e.tokenType=S:e.tokenType=_;}}else e.tokenType=S;}function U(e){do{z(e);}while("\n"===e.token);}function j(e){e.nestingLevel++;}function q(e){e.nestingLevel--;}function G(e,t){var n={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w,nestingLevel:0,conditionalLevel:null};Fm(n,{expression:e,extraNodes:t}),z(n);var r=function(e){var t,n,r=[];""!==e.token&&"\n"!==e.token&&";"!==e.token&&((t=V(e)).comment=e.comment);for(;"\n"===e.token||";"===e.token;){0===r.length&&t&&(n=";"!==e.token,r.push({node:t,visible:n})),z(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&((t=V(e)).comment=e.comment,n=";"!==e.token,r.push({node:t,visible:n}));}return r.length>0?new s(r):(t||((t=new c(void 0)).comment=e.comment),t);}(n);if(""!==n.token)throw n.tokenType===S?he(n,"Unexpected operator "+n.token):de(n,'Unexpected part "'+n.token+'"');return r;}function V(e){var t,n,r,i,o=function(e){var t=function(e){var t=W(e);for(;"or"===e.token;){U(e),t=new f("or","or",[t,W(e)]);}return t;}(e);for(;"?"===e.token;){var n=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,U(e);var r=t,i=V(e);if(":"!==e.token)throw de(e,"False part of conditional expression expected");e.conditionalLevel=null,U(e);var o=V(e);t=new u(r,i,o),e.conditionalLevel=n;}return t;}(e);if("="===e.token){if(H(o))return t=o.name,U(e),r=V(e),new a(new v(t),r);if(N(o))return U(e),r=V(e),new a(o.object,o.index,r);if(I(o)&&H(o.fn)&&(i=!0,n=[],t=o.name,o.args.forEach(function(e,t){H(e)?n[t]=e.name:i=!1;}),i))return U(e),r=V(e),new l(t,n,r);throw de(e,"Invalid left hand side of assignment operator =");}return o;}function W(e){for(var t=X(e);"xor"===e.token;){U(e),t=new f("xor","xor",[t,X(e)]);}return t;}function X(e){for(var t=Y(e);"and"===e.token;){U(e),t=new f("and","and",[t,Y(e)]);}return t;}function Y(e){for(var t=Z(e);"|"===e.token;){U(e),t=new f("|","bitOr",[t,Z(e)]);}return t;}function Z(e){for(var t=$(e);"^|"===e.token;){U(e),t=new f("^|","bitXor",[t,$(e)]);}return t;}function $(e){for(var t=J(e);"&"===e.token;){U(e),t=new f("&","bitAnd",[t,J(e)]);}return t;}function J(e){for(var t=[K(e)],n=[],r={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Q(r,e.token);){var i={name:e.token,fn:r[e.token]};n.push(i),U(e),t.push(K(e));}return 1===t.length?t[0]:2===t.length?new f(n[0].name,n[0].fn,t):new g(n.map(function(e){return e.fn;}),t);}function K(e){var t,n,r,i;t=ee(e);for(var o={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Q(o,e.token);){r=o[n=e.token],U(e),i=[t,ee(e)],t=new f(n,r,i);}return t;}function ee(e){var t,n,r,i;t=te(e);for(var o={to:"to","in":"to"};Q(o,e.token);){r=o[n=e.token],U(e),"in"===n&&""===e.token?t=new f("*","multiply",[t,new v("in")],!0):(i=[t,te(e)],t=new f(n,r,i));}return t;}function te(e){var t,n=[];if(t=":"===e.token?new c(1):ne(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(n.push(t);":"===e.token&&n.length<3;){U(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?n.push(new v("end")):n.push(ne(e));}t=3===n.length?new y(n[0],n[2],n[1]):new y(n[0],n[1]);}return t;}function ne(e){var t,n,r,i;t=re(e);for(var o={"+":"add","-":"subtract"};Q(o,e.token);){r=o[n=e.token],U(e),i=[t,re(e)],t=new f(n,r,i);}return t;}function re(e){var t,n,r,i;n=t=ie(e);for(var o={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Q(o,e.token);){i=o[r=e.token],U(e),n=ie(e),t=new f(r,i,[t,n]);}return t;}function ie(e){var t,n;for(n=t=oe(e);e.tokenType===_||"in"===e.token&&O(t)||!(e.tokenType!==M||O(n)||k(n)&&"!"!==n.op)||"("===e.token;){n=oe(e),t=new f("*","multiply",[t,n],!0);}return t;}function oe(e){for(var t=ae(e),n=t,r=[];"/"===e.token&&O(n);){if(r.push(Fm({},e)),U(e),e.tokenType!==M){Fm(e,r.pop());break;}if(r.push(Fm({},e)),U(e),e.tokenType!==_&&"("!==e.token){r.pop(),Fm(e,r.pop());break;}Fm(e,r.pop()),r.pop(),n=ae(e),t=new f("/","divide",[t,n]);}return t;}function ae(e){var t,i,a,s={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Q(s,e.token)?(a=s[e.token],t=e.token,U(e),i=[ae(e)],new f(t,a,i)):function(e){var t,i,a,s;t=function(e){var t,i,a;t=function(e){var t=[];if(e.tokenType===_&&Q(e.extraNodes,e.token)){var i=e.extraNodes[e.token];if(z(e),"("===e.token){if(t=[],j(e),z(e),")"!==e.token)for(t.push(V(e));","===e.token;){z(e),t.push(V(e));}if(")"!==e.token)throw de(e,"Parenthesis ) expected");q(e),z(e);}return new i(t);}return function(e){var t,i;if(e.tokenType===_||e.tokenType===S&&e.token in T)return i=e.token,z(e),t=Q(D,i)?new c(D[i]):-1!==C.indexOf(i)?new c(n(i,"number")):new v(i),t=se(e,t);return function(e){var t,i;if('"'===e.token)return i=ue(e),t=new c(i),t=se(e,t);return function(e){var t,i;if("'"===e.token)return i=ce(e),t=new c(i),t=se(e,t);return function(e){var t,i,a,s;if("["===e.token){if(j(e),z(e),"]"!==e.token){var u=le(e);if(";"===e.token){for(a=1,i=[u];";"===e.token;){z(e),i[a]=le(e),a++;}if("]"!==e.token)throw de(e,"End of matrix ] expected");q(e),z(e),s=i[0].items.length;for(var l=1;l<a;l++){if(i[l].items.length!==s)throw he(e,"Column dimensions mismatch ("+i[l].items.length+" !== "+s+")");}t=new o(i);}else{if("]"!==e.token)throw de(e,"End of matrix ] expected");q(e),z(e),t=u;}}else q(e),z(e),t=new o([]);return se(e,t);}return function(e){if("{"===e.token){var t;j(e);var i={};do{if(z(e),"}"!==e.token){if('"'===e.token)t=ue(e);else if("'"===e.token)t=ce(e);else{if(!(e.tokenType===_||e.tokenType===S&&e.token in T))throw de(e,"Symbol or string expected as object key");t=e.token,z(e);}if(":"!==e.token)throw de(e,"Colon : expected after object key");z(e),i[t]=V(e);}}while(","===e.token);if("}"!==e.token)throw de(e,"Comma , or bracket } expected after object value");q(e),z(e);var o=new h(i);return o=se(e,o);}return function(e){var t;if(e.tokenType===M)return t=e.token,z(e),new c(n(t,r.number));return function(e){var t;if("("===e.token){if(j(e),z(e),t=V(e),")"!==e.token)throw de(e,"Parenthesis ) expected");return q(e),z(e),t=new m(t),t=se(e,t);}return function(e){throw""===e.token?de(e,"Unexpected end of expression"):de(e,"Value expected");}(e);}(e);}(e);}(e);}(e);}(e);}(e);}(e);}(e);var s={"!":"factorial","'":"ctranspose"};for(;Q(s,e.token);){i=e.token,a=s[i],z(e),t=new f(i,a,[t]),t=se(e,t);}return t;}(e),("^"===e.token||".^"===e.token)&&(i=e.token,a="^"===i?"pow":"dotPow",U(e),s=[t,ae(e)],t=new f(i,a,s));return t;}(e);}function se(e,t,n){for(var r;!("("!==e.token&&"["!==e.token&&"."!==e.token||n&&-1===n.indexOf(e.token));){if(r=[],"("===e.token){if(!H(t)&&!N(t))return t;if(j(e),z(e),")"!==e.token)for(r.push(V(e));","===e.token;){z(e),r.push(V(e));}if(")"!==e.token)throw de(e,"Parenthesis ) expected");q(e),z(e),t=new p(t,r);}else if("["===e.token){if(j(e),z(e),"]"!==e.token)for(r.push(V(e));","===e.token;){z(e),r.push(V(e));}if("]"!==e.token)throw de(e,"Parenthesis ] expected");q(e),z(e),t=new i(t,new d(r));}else{if(z(e),e.tokenType!==_)throw de(e,"Property name expected after dot");r.push(new c(e.token)),z(e);t=new i(t,new d(r,!0));}}return t;}function ue(e){for(var t="";""!==P(e)&&'"'!==P(e);){"\\"===P(e)&&(t+=P(e),L(e)),t+=P(e),L(e);}if(z(e),'"'!==e.token)throw de(e,'End of string " expected');return z(e),JSON.parse('"'+t+'"');}function ce(e){for(var t="";""!==P(e)&&"'"!==P(e);){"\\"===P(e)&&(t+=P(e),L(e)),t+=P(e),L(e);}if(z(e),"'"!==e.token)throw de(e,"End of string ' expected");return z(e),JSON.parse('"'+t+'"');}function le(e){for(var t=[V(e)],n=1;","===e.token;){z(e),t[n]=V(e),n++;}return new o(t);}function pe(e){return e.index-e.token.length+1;}function de(e,t){var n=pe(e),r=new SyntaxError(t+" (char "+n+")");return r["char"]=n,r;}function he(e,t){var n=pe(e),r=new SyntaxError(t+" (char "+n+")");return r["char"]=n,r;}return x.isAlpha=function(e,t,n){return x.isValidLatinOrGreek(e)||x.isValidMathSymbol(e,n)||x.isValidMathSymbol(t,e);},x.isValidLatinOrGreek=function(e){return /^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e);},x.isValidMathSymbol=function(e,t){return /^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t);},x.isWhitespace=function(e,t){return" "===e||"\t"===e||"\n"===e&&t>0;},x.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t;},x.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e;},x.isDigit=function(e){return e>="0"&&e<="9";},x;}),km=et("evaluate",["typed","parse"],function(e){var t=e.typed,n=e.parse;return t("evaluate",{string:function string(e){return n(e).compile().evaluate({});},"string, Object":function stringObject(e,t){return n(e).compile().evaluate(t);},"Array | Matrix":function ArrayMatrix(e){var t={};return rr(e,function(e){return n(e).compile().evaluate(t);});},"Array | Matrix, Object":function ArrayMatrixObject(e,t){return rr(e,function(e){return n(e).compile().evaluate(t);});}});}),Um=et("Help",["parse"],function(e){var t=e.parse;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error('Argument "doc" missing');this.doc=e;}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var e=this.doc||{},n="\n";if(e.name&&(n+="Name: "+e.name+"\n\n"),e.category&&(n+="Category: "+e.category+"\n\n"),e.description&&(n+="Description:\n    "+e.description+"\n\n"),e.syntax&&(n+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){n+="Examples:\n";for(var r={},i=0;i<e.examples.length;i++){var o=e.examples[i];n+="    "+o+"\n";var a=void 0;try{a=t(o).compile().evaluate(r);}catch(e){a=e;}void 0===a||w(a)||(n+="        "+Re(a,{precision:14})+"\n");}n+="\n";}return e.seealso&&e.seealso.length&&(n+="See also: "+e.seealso.join(", ")+"\n"),n;},n.prototype.toJSON=function(){var e=W(this.doc);return e.mathjs="Help",e;},n.fromJSON=function(e){var t={};return Object.keys(e).filter(function(e){return"mathjs"!==e;}).forEach(function(n){t[n]=e[n];}),new n(t);},n.prototype.valueOf=n.prototype.toString,n;},{isClass:!0}),jm=et("compile",["typed","parse"],function(e){var t=e.typed,n=e.parse;return t("compile",{string:function string(e){return n(e).compile();},"Array | Matrix":function ArrayMatrix(e){return rr(e,function(e){return n(e).compile();});}});}),Hm=et("simplifyUtil",["FunctionNode","OperatorNode","SymbolNode"],function(e){var t=e.FunctionNode,n=e.OperatorNode,r=e.SymbolNode,i={add:!0,multiply:!0},o={add:!0,multiply:!0};function a(e,t){if(!k(e))return!1;var n=e.fn.toString();return t&&Q(t,n)&&Q(t[n],"associative")?t[n].associative:o[n]||!1;}function s(e){var t,n=[];return a(e)?(t=e.op,function e(r){for(var i=0;i<r.args.length;i++){var o=r.args[i];k(o)&&t===o.op?e(o):n.push(o);}}(e),n):e.args;}function u(e){return k(e)?function(t){try{return new n(e.op,e.fn,t,e.implicit);}catch(e){return console.error(e),[];}}:function(n){return new t(new r(e.name),n);};}return{createMakeNodeFunction:u,isCommutative:function isCommutative(e,t){if(!k(e))return!0;var n=e.fn.toString();return t&&Q(t,n)&&Q(t[n],"commutative")?t[n].commutative:i[n]||!1;},isAssociative:a,flatten:function e(t){if(!t.args||0===t.args.length)return t;t.args=s(t);for(var n=0;n<t.args.length;n++){e(t.args[n]);}},allChildren:s,unflattenr:function e(t){if(t.args&&0!==t.args.length){for(var n=u(t),r=t.args.length,i=0;i<r;i++){e(t.args[i]);}if(r>2&&a(t)){for(var o=t.args.pop();t.args.length>0;){o=n([t.args.pop(),o]);}t.args=o.args;}}},unflattenl:function e(t){if(t.args&&0!==t.args.length){for(var n=u(t),r=t.args.length,i=0;i<r;i++){e(t.args[i]);}if(r>2&&a(t)){for(var o=t.args.shift();t.args.length>0;){o=n([o,t.args.shift()]);}t.args=o.args;}}}};}),qm=et("simplifyCore",["equal","isZero","add","subtract","multiply","divide","pow","ConstantNode","OperatorNode","FunctionNode","ParenthesisNode"],function(e){var t=e.equal,n=e.isZero,r=e.add,i=e.subtract,o=e.multiply,a=e.divide,s=e.pow,u=e.ConstantNode,c=e.OperatorNode,l=e.FunctionNode,p=e.ParenthesisNode,d=new u(0),h=new u(1);return function e(f){if(k(f)&&f.isUnary()){var m=e(f.args[0]);if("+"===f.op)return m;if("-"===f.op){if(k(m)){if(m.isUnary()&&"-"===m.op)return m.args[0];if(m.isBinary()&&"subtract"===m.fn)return new c("-","subtract",[m.args[1],m.args[0]]);}return new c(f.op,f.fn,[m]);}}else if(k(f)&&f.isBinary()){var y=e(f.args[0]),g=e(f.args[1]);if("+"===f.op){if(O(y)){if(n(y.value))return g;if(O(g))return new u(r(y.value,g.value));}return O(g)&&n(g.value)?y:k(g)&&g.isUnary()&&"-"===g.op?new c("-","subtract",[y,g.args[0]]):new c(f.op,f.fn,g?[y,g]:[y]);}if("-"===f.op){if(O(y)&&g){if(O(g))return new u(i(y.value,g.value));if(n(y.value))return new c("-","unaryMinus",[g]);}if("subtract"===f.fn)return O(g)&&n(g.value)?y:k(g)&&g.isUnary()&&"-"===g.op?e(new c("+","add",[y,g.args[0]])):new c(f.op,f.fn,[y,g]);}else{if("*"===f.op){if(O(y)){if(n(y.value))return d;if(t(y.value,1))return g;if(O(g))return new u(o(y.value,g.value));}if(O(g)){if(n(g.value))return d;if(t(g.value,1))return y;if(k(y)&&y.isBinary()&&y.op===f.op){var v=y.args[0];if(O(v)){var x=new u(o(v.value,g.value));return new c(f.op,f.fn,[x,y.args[1]],f.implicit);}}return new c(f.op,f.fn,[g,y],f.implicit);}return new c(f.op,f.fn,[y,g],f.implicit);}if("/"===f.op){if(O(y)){if(n(y.value))return d;if(O(g)&&(t(g.value,1)||t(g.value,2)||t(g.value,4)))return new u(a(y.value,g.value));}return new c(f.op,f.fn,[y,g]);}if("^"===f.op){if(O(g)){if(n(g.value))return h;if(t(g.value,1))return y;if(O(y))return new u(s(y.value,g.value));if(k(y)&&y.isBinary()&&"^"===y.op){var b=y.args[1];if(O(b))return new c(f.op,f.fn,[y.args[0],new u(o(b.value,g.value))]);}}return new c(f.op,f.fn,[y,g]);}}}else{if(U(f)){var w=e(f.content);return U(w)||H(w)||O(w)?w:new p(w);}if(I(f)){var S=f.args.map(e).map(function(e){return U(e)?e.content:e;});return new l(e(f.fn),S);}}return f;};}),Gm=et("simplifyConstant",["typed","config","mathWithTransform","?fraction","?bignumber","ConstantNode","OperatorNode","FunctionNode","SymbolNode"],function(e){var t=e.typed,n=e.config,r=e.mathWithTransform,i=e.fraction,o=e.bignumber,a=e.ConstantNode,s=e.OperatorNode,u=e.FunctionNode,l=e.SymbolNode,p=Hm({FunctionNode:u,OperatorNode:s,SymbolNode:l}),d=p.isCommutative,h=p.isAssociative,f=p.allChildren,m=p.createMakeNodeFunction;function y(e,t,n){try{return x(r[e].apply(null,t),n);}catch(i){return t=t.map(function(e){return c(e)?e.valueOf():e;}),x(r[e].apply(null,t),n);}}var g=t({Fraction:function Fraction(e){var t,n=e.s*e.n;t=n<0?new s("-","unaryMinus",[new a(-n)]):new a(n);if(1===e.d)return t;return new s("/","divide",[t,new a(e.d)]);},number:function number(e){return e<0?b(new a(-e)):new a(e);},BigNumber:function BigNumber(e){return e<0?b(new a(-e)):new a(e);},Complex:function Complex(e){throw new Error("Cannot convert Complex number to Node");}});function v(e,t){if(t&&!1!==t.exactFractions&&isFinite(e)&&i){var n=i(e);if(n.valueOf()===e)return n;}return e;}var x=t({"string, Object":function stringObject(e,t){return"BigNumber"===n.number?(void 0===o&&Ma(),o(e)):"Fraction"===n.number?(void 0===i&&_a(),i(e)):v(parseFloat(e),t);},"Fraction, Object":function FractionObject(e,t){return e;},"BigNumber, Object":function BigNumberObject(e,t){return e;},"number, Object":function numberObject(e,t){return v(e,t);},"Complex, Object":function ComplexObject(e,t){return 0!==e.im?e:v(e.re,t);}});function b(e){return new s("-","unaryMinus",[e]);}function w(e,t,n,r){return t.reduce(function(t,i){if(F(t)||F(i))F(t)?F(i)||(i=g(i)):t=g(t);else{try{return y(e,[t,i],r);}catch(e){}t=g(t),i=g(i);}return n([t,i]);});}return function(e,t){var n=function e(t,n){switch(t.type){case"SymbolNode":return t;case"ConstantNode":return"number"!=typeof t.value&&isNaN(t.value)?t:x(t.value,n);case"FunctionNode":if(r[t.name]&&r[t.name].rawArgs)return t;if(-1===["add","multiply"].indexOf(t.name)){var i=t.args.map(function(t){return e(t,n);});if(!i.some(F))try{return y(t.name,i,n);}catch(e){}return i=i.map(function(e){return F(e)?e:g(e);}),new u(t.name,i);}case"OperatorNode":var o,a,s=t.fn.toString(),c=m(t);if(k(t)&&t.isUnary())o=[e(t.args[0],n)],a=F(o[0])?c(o):y(s,o,n);else if(h(t)){if(o=(o=f(t)).map(function(t){return e(t,n);}),d(s)){for(var l=[],p=[],v=0;v<o.length;v++){F(o[v])?p.push(o[v]):l.push(o[v]);}l.length>1?(a=w(s,l,c,n),p.unshift(a),a=w(s,p,c,n)):a=w(s,o,c,n);}else a=w(s,o,c,n);}else o=t.args.map(function(t){return e(t,n);}),a=w(s,o,c,n);return a;case"ParenthesisNode":return e(t.content,n);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(t.type));}}(e,t);return F(n)?n:g(n);};}),Vm=et("resolve",["parse","FunctionNode","OperatorNode","ParenthesisNode"],function(e){var t=e.parse,n=e.FunctionNode,r=e.OperatorNode,i=e.ParenthesisNode;return function e(o,a){if(!a)return o;if(H(o)){var s=a[o.name];if(F(s))return e(s,a);if("number"==typeof s)return t(String(s));}else{if(k(o)){var u=o.args.map(function(t){return e(t,a);});return new r(o.op,o.fn,u,o.implicit);}if(U(o))return new i(e(o.content,a));if(I(o)){var c=o.args.map(function(t){return e(t,a);});return new n(o.name,c);}}return o;};});function Wm(e){return(Wm="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}var Xm=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","?fraction","?bignumber","mathWithTransform","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Ym=et("simplify",Xm,function(e){var t=e.config,n=e.typed,r=e.parse,i=e.add,o=e.subtract,a=e.multiply,s=e.divide,u=e.pow,c=e.isZero,l=e.equal,p=e.fraction,d=e.bignumber,h=e.mathWithTransform,f=e.ConstantNode,m=e.FunctionNode,y=e.OperatorNode,g=e.ParenthesisNode,v=e.SymbolNode,x=Gm({typed:n,config:t,mathWithTransform:h,fraction:p,bignumber:d,ConstantNode:f,OperatorNode:y,FunctionNode:m,SymbolNode:v}),b=qm({equal:l,isZero:c,add:i,subtract:o,multiply:a,divide:s,pow:u,ConstantNode:f,OperatorNode:y,FunctionNode:m,ParenthesisNode:g}),w=Vm({parse:r,FunctionNode:m,OperatorNode:y,ParenthesisNode:g}),S=Hm({FunctionNode:m,OperatorNode:y,SymbolNode:v}),M=S.isCommutative,_=S.isAssociative,E=S.flatten,A=S.unflattenr,T=S.unflattenl,N=S.createMakeNodeFunction,D=n("simplify",{string:function string(e){return this(r(e),this.rules,{},{});},"string, Object":function stringObject(e,t){return this(r(e),this.rules,t,{});},"string, Object, Object":function stringObjectObject(e,t,n){return this(r(e),this.rules,t,n);},"string, Array":function stringArray(e,t){return this(r(e),t,{},{});},"string, Array, Object":function stringArrayObject(e,t,n){return this(r(e),t,n,{});},"string, Array, Object, Object":function stringArrayObjectObject(e,t,n,i){return this(r(e),t,n,i);},"Node, Object":function NodeObject(e,t){return this(e,this.rules,t,{});},"Node, Object, Object":function NodeObjectObject(e,t,n){return this(e,this.rules,t,n);},Node:function Node(e){return this(e,this.rules,{},{});},"Node, Array":function NodeArray(e,t){return this(e,t,{},{});},"Node, Array, Object":function NodeArrayObject(e,t,n){return this(e,t,n,{});},"Node, Array, Object, Object":function NodeArrayObjectObject(e,t,n,i){t=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=void 0,a=Wm(i);switch(a){case"string":var s=i.split("->");if(2!==s.length)throw SyntaxError("Could not parse rule: "+i);i={l:s[0],r:s[1]};case"object":if(o={l:C(r(i.l)),r:C(r(i.r))},i.context&&(o.evaluate=i.context),i.evaluate&&(o.evaluate=r(i.evaluate)),_(o.l)){var u=N(o.l),c=new v("_p"+P++);o.expanded={},o.expanded.l=u([o.l.clone(),c]),E(o.expanded.l),A(o.expanded.l),o.expanded.r=u([o.r,c]);}break;case"function":o=i;break;default:throw TypeError("Unsupported type of rule: "+a);}t.push(o);}return t;}(t);for(var o=w(e,n),a={},s=(o=C(o)).toString({parenthesis:"all"});!a[s];){a[s]=!0,P=0;for(var u=0;u<t.length;u++){"function"==typeof t[u]?o=t[u](o,i):(E(o),o=L(o,t[u])),T(o);}s=o.toString({parenthesis:"all"});}return o;}});function C(e){return e.transform(function(e,t,n){return U(e)?C(e.content):e;});}D.simplifyCore=b,D.resolve=w;var R={"true":!0,"false":!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};D.rules=[b,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},x,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"},{l:"n1/(n2/n3)",r:"(n1*n3)/n2"}];var P=0;var L=n("applyRule",{"Node, Object":function NodeObject(e,t){var n=e;if(n instanceof y||n instanceof m){if(n.args)for(var r=0;r<n.args.length;r++){n.args[r]=L(n.args[r],t);}}else n instanceof g&&n.content&&(n.content=L(n.content,t));var i=t.r,o=F(t.l,n)[0];if(!o&&t.expanded&&(i=t.expanded.r,o=F(t.expanded.l,n)[0]),o){var a=n.implicit;n=i.clone(),a&&"implicit"in i&&(n.implicit=!0),n=n.transform(function(e){return e.isSymbolNode&&Q(o.placeholders,e.name)?o.placeholders[e.name].clone():e;});}return n;}});function I(e,t){var n={placeholders:{}};if(!e.placeholders&&!t.placeholders)return n;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var r in e.placeholders){if(Q(e.placeholders,r)&&(n.placeholders[r]=e.placeholders[r],Q(t.placeholders,r)&&!z(e.placeholders[r],t.placeholders[r])))return null;}for(var i in t.placeholders){Q(t.placeholders,i)&&(n.placeholders[i]=t.placeholders[i]);}return n;}function B(e,t){var n,r=[];if(0===e.length||0===t.length)return r;for(var i=0;i<e.length;i++){for(var o=0;o<t.length;o++){(n=I(e[i],t[o]))&&r.push(n);}}return r;}function F(e,t,n){var r=[{placeholders:{}}];if(e instanceof y&&t instanceof y||e instanceof m&&t instanceof m){if(e instanceof y){if(e.op!==t.op||e.fn!==t.fn)return[];}else if(e instanceof m&&e.name!==t.name)return[];if((1!==t.args.length||1!==e.args.length)&&_(t)&&!n){if(t.args.length>=2&&2===e.args.length){for(var i=function(e,t){var n,r,i=[],o=N(e);if(M(e,t))for(var a=0;a<e.args.length;a++){(r=e.args.slice(0)).splice(a,1),n=1===r.length?r[0]:o(r),i.push(o([e.args[a],n]));}else n=1===(r=e.args.slice(1)).length?r[0]:o(r),i.push(o([e.args[0],n]));return i;}(t,e.context),o=[],a=0;a<i.length;a++){var s=F(e,i[a],!0);o=o.concat(s);}return o;}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[];}for(var u=[],c=0;c<e.args.length;c++){var p=F(e.args[c],t.args[c]);if(0===p.length)return[];u.push(p);}r=function(e){if(0===e.length)return e;for(var t=e.reduce(B),n=[],r={},i=0;i<t.length;i++){var o=JSON.stringify(t[i]);r[o]||(r[o]=!0,n.push(t[i]));}return n;}(u);}else if(e instanceof v){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(R[e.name]){if(e.name!==t.name)return[];}else if("n"===e.name[0]||"_p"===e.name.substring(0,2))r[0].placeholders[e.name]=t;else if("v"===e.name[0]){if(O(t))return[];r[0].placeholders[e.name]=t;}else{if("c"!==e.name[0])throw new Error("Invalid symbol in rule: "+e.name);if(!(t instanceof f))return[];r[0].placeholders[e.name]=t;}}else{if(!(e instanceof f))return[];if(!l(e.value,t.value))return[];}return r;}function z(e,t){if(e instanceof f&&t instanceof f){if(!l(e.value,t.value))return!1;}else if(e instanceof v&&t instanceof v){if(e.name!==t.name)return!1;}else{if(!(e instanceof y&&t instanceof y||e instanceof m&&t instanceof m))return!1;if(e instanceof y){if(e.op!==t.op||e.fn!==t.fn)return!1;}else if(e instanceof m&&e.name!==t.name)return!1;if(e.args.length!==t.args.length)return!1;for(var n=0;n<e.args.length;n++){if(!z(e.args[n],t.args[n]))return!1;}}return!0;}return D;}),Zm=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplify","?bignumber","?fraction","mathWithTransform","ConstantNode","OperatorNode","FunctionNode","SymbolNode","ParenthesisNode"],$m=et("rationalize",Zm,function(e){var t=e.config,n=e.typed,r=e.equal,i=e.isZero,o=e.add,a=e.subtract,s=e.multiply,u=e.divide,c=e.pow,l=e.parse,p=e.simplify,d=e.fraction,h=e.bignumber,f=e.mathWithTransform,m=e.ConstantNode,y=e.OperatorNode,g=e.FunctionNode,v=e.SymbolNode,x=e.ParenthesisNode,b=Gm({typed:n,config:t,mathWithTransform:f,fraction:d,bignumber:h,ConstantNode:m,OperatorNode:y,FunctionNode:g,SymbolNode:v}),w=qm({equal:r,isZero:i,add:o,subtract:a,multiply:s,divide:u,pow:c,ConstantNode:m,OperatorNode:y,FunctionNode:g,ParenthesisNode:x});return n("rationalize",{string:function string(e){return this(l(e),{},!1);},"string, boolean":function stringBoolean(e,t){return this(l(e),{},t);},"string, Object":function stringObject(e,t){return this(l(e),t,!1);},"string, Object, boolean":function stringObjectBoolean(e,t,n){return this(l(e),t,n);},Node:function Node(e){return this(e,{},!1);},"Node, boolean":function NodeBoolean(e,t){return this(e,{},t);},"Node, Object":function NodeObject(e,t){return this(e,t,!1);},"Node, Object, boolean":function NodeObjectBoolean(e,t,n){var r=function(){var e=[w,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},b,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],t=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],n=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],r={};return r.firstRules=e.concat(t,n),r.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],r.sucDivRules=n,r.firstRulesAgain=e.concat(t),r.finalRules=[w,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},b,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],r;}(),i=function(e,t,n,r){var i=[],o=p(e,r,t,{exactFractions:!1}),a="+-*"+((n=!!n)?"/":"");!function e(t){var n=t.type;if("FunctionNode"===n)throw new Error("There is an unsolved function call");if("OperatorNode"===n){if("^"===t.op){if("ConstantNode"!==t.args[1].type||!ae(parseFloat(t.args[1].value)))throw new Error("There is a non-integer exponent");e(t.args[0]);}else{if(-1===a.indexOf(t.op))throw new Error("Operator "+t.op+" invalid in polynomial expression");for(var r=0;r<t.args.length;r++){e(t.args[r]);}}}else if("SymbolNode"===n){var o=t.name;-1===i.indexOf(o)&&i.push(o);}else if("ParenthesisNode"===n)e(t.content);else if("ConstantNode"!==n)throw new Error("type "+n+" is not allowed in polynomial expression");}(o);var s={};return s.expression=o,s.variables=i,s;}(e,t,!0,r.firstRules),o=i.variables.length;if(e=i.expression,o>=1){var a,s;e=function e(t,n,r){var i=t.type,o=arguments.length>1;if("OperatorNode"===i&&t.isBinary()){var a,s=!1;if("^"===t.op&&("ParenthesisNode"!==t.args[0].type&&"OperatorNode"!==t.args[0].type||"ConstantNode"!==t.args[1].type||(a=parseFloat(t.args[1].value),s=a>=2&&ae(a))),s){if(a>2){var u=t.args[0],c=new y("^","pow",[t.args[0].cloneDeep(),new m(a-1)]);t=new y("*","multiply",[u,c]);}else t=new y("*","multiply",[t.args[0],t.args[0].cloneDeep()]);o&&("content"===r?n.content=t:n.args[r]=t);}}if("ParenthesisNode"===i)e(t.content,t,"content");else if("ConstantNode"!==i&&"SymbolNode"!==i)for(var l=0;l<t.args.length;l++){e(t.args[l],t,l);}if(!o)return t;}(e);var u,c=!0,l=!1;for(e=p(e,r.firstRules,{},{exactFractions:!1});s=c?r.distrDivRules:r.sucDivRules,c=!c,(u=(e=p(e,s)).toString())!==a;){l=!0,a=u;}l&&(e=p(e,r.firstRulesAgain,{},{exactFractions:!1})),e=p(e,r.finalRules,{},{exactFractions:!1});}var d=[],h={};return"OperatorNode"===e.type&&e.isBinary()&&"/"===e.op?(1===o&&(e.args[0]=S(e.args[0],d),e.args[1]=S(e.args[1])),n&&(h.numerator=e.args[0],h.denominator=e.args[1])):(1===o&&(e=S(e,d)),n&&(h.numerator=e,h.denominator=null)),n?(h.coefficients=d,h.variables=i.variables,h.expression=e,h):e;}});function S(e,t){void 0===t&&(t=[]),t[0]=0;var n={cte:1,oper:"+",fire:""},r=0,i="";!function e(n,o,a){var s=n.type;if("FunctionNode"===s)throw new Error("There is an unsolved function call");if("OperatorNode"===s){if(-1==="+-*^".indexOf(n.op))throw new Error("Operator "+n.op+" invalid");if(null!==o){if(("unaryMinus"===n.fn||"pow"===n.fn)&&"add"!==o.fn&&"subtract"!==o.fn&&"multiply"!==o.fn)throw new Error("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"multiply"===n.fn)&&"add"!==o.fn&&"subtract"!==o.fn)throw new Error("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"unaryMinus"===n.fn)&&0!==a.noFil)throw new Error("Invalid "+n.op+" placing");}"^"!==n.op&&"*"!==n.op||(a.fire=n.op);for(var u=0;u<n.args.length;u++){"unaryMinus"===n.fn&&(a.oper="-"),"+"!==n.op&&"subtract"!==n.fn||(a.fire="",a.cte=1,a.oper=0===u?"+":n.op),a.noFil=u,e(n.args[u],n,a);}}else if("SymbolNode"===s){if(n.name!==i&&""!==i)throw new Error("There is more than one variable");if(i=n.name,null===o)return void(t[1]=1);if("^"===o.op&&0!==a.noFil)throw new Error("In power the variable should be the first parameter");if("*"===o.op&&1!==a.noFil)throw new Error("In multiply the variable should be the second parameter");""!==a.fire&&"*"!==a.fire||(r<1&&(t[1]=0),t[1]+=a.cte*("+"===a.oper?1:-1),r=Math.max(1,r));}else{if("ConstantNode"!==s)throw new Error("Type "+s+" is not allowed");var c=parseFloat(n.value);if(null===o)return void(t[0]=c);if("^"===o.op){if(1!==a.noFil)throw new Error("Constant cannot be powered");if(!ae(c)||c<=0)throw new Error("Non-integer exponent is not allowed");for(var l=r+1;l<c;l++){t[l]=0;}return c>r&&(t[c]=0),t[c]+=a.cte*("+"===a.oper?1:-1),void(r=Math.max(c,r));}a.cte=c,""===a.fire&&(t[0]+=a.cte*("+"===a.oper?1:-1));}}(e,null,n);for(var o,a=!0,s=r=t.length-1;s>=0;s--){if(0!==t[s]){var u=new m(a?t[s]:Math.abs(t[s])),c=t[s]<0?"-":"+";if(s>0){var l=new v(i);if(s>1){var p=new m(s);l=new y("^","pow",[l,p]);}u=-1===t[s]&&a?new y("-","unaryMinus",[l]):1===Math.abs(t[s])?l:new y("*","multiply",[u,l]);}o=a?u:"+"===c?new y("+","add",[o,u]):new y("-","subtract",[o,u]),a=!1;}}return a?new m(0):o;}}),Jm=["parse"],Qm=et("Parser",Jm,function(e){var t=e.parse;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.scope={};}return n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(e){return t(e).compile().evaluate(this.scope);},n.prototype.get=function(e){return e in this.scope?Na(this.scope,e):void 0;},n.prototype.getAll=function(){return Y({},this.scope);},n.prototype.set=function(e,t){return Da(this.scope,e,t);},n.prototype.remove=function(e){delete this.scope[e];},n.prototype.clear=function(){for(var e in this.scope){Q(this.scope,e)&&delete this.scope[e];}},n;},{isClass:!0}),Km={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},ey={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},ty={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},"boolean":{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:ey,E:ey,"false":{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},"null":{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:Km,PI:Km,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},"true":{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["derivative","parse","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},"import":{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:{name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]},help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diff:{name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["diff([1, 2, 4, 7, 0])","diff([1, 2, 4, 7, 0], 0)","diff(matrix([1, 2, 4, 7, 0]))","diff([[1, 2], [3, 4]])","diff([[1, 2], [3, 4]], 0)","diff([[1, 2], [3, 4]], 1)","diff([[1, 2], [3, 4]], bignumber(1))","diff(matrix([[1, 2], [3, 4]]), 1)","diff([[1, 2], matrix([3, 4])], 1)"],seealso:["subtract","partitionSelect"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},eigs:{name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:{name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},typeOf:{name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]}},ny=et("help",["typed","mathWithTransform","Help"],function(e){var t=e.typed,n=e.mathWithTransform,r=e.Help;return t("help",{any:function any(e){var t,i=e;if("string"!=typeof e)for(t in n){if(Q(n,t)&&e===n[t]){i=t;break;}}var o=Na(ty,i);if(!o){var a="function"==typeof i?i.name:i;throw new Error('No documentation found on "'+a+'"');}return new r(o);}});}),ry=et("parser",["typed","Parser"],function(e){var t=e.typed,n=e.Parser;return t("parser",{"":function _(){return new n();}});}),iy=et("derivative",["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],function(e){var t=e.typed,n=e.config,r=e.parse,i=e.simplify,o=e.equal,a=e.isZero,s=e.numeric,u=e.ConstantNode,c=e.FunctionNode,l=e.OperatorNode,p=e.ParenthesisNode,d=e.SymbolNode,h=t("derivative",{"Node, SymbolNode, Object":function NodeSymbolNodeObject(e,t,n){var r={};m(r,e,t.name);var o=y(e,r);return n.simplify?i(o):o;},"Node, SymbolNode":function NodeSymbolNode(e,t){return this(e,t,{simplify:!0});},"string, SymbolNode":function stringSymbolNode(e,t){return this(r(e),t);},"string, SymbolNode, Object":function stringSymbolNodeObject(e,t,n){return this(r(e),t,n);},"string, string":function stringString(e,t){return this(r(e),r(t));},"string, string, Object":function stringStringObject(e,t,n){return this(r(e),r(t),n);},"Node, string":function NodeString(e,t){return this(e,r(t));},"Node, string, Object":function NodeStringObject(e,t,n){return this(e,r(t),n);}});h._simplify=!0,h.toTex=function(e){return f.apply(null,e.args);};var f=t("_derivTex",{"Node, SymbolNode":function NodeSymbolNode(e,t){return O(e)&&"string"===G(e.value)?f(r(e.value).toString(),t.toString(),1):f(e.toString(),t.toString(),1);},"Node, ConstantNode":function NodeConstantNode(e,t){if("string"===G(t.value))return f(e,r(t.value));throw new Error("The second parameter to 'derivative' is a non-string constant");},"Node, SymbolNode, ConstantNode":function NodeSymbolNodeConstantNode(e,t,n){return f(e.toString(),t.name,n.value);},"string, string, number":function stringStringNumber(e,t,n){return(1===n?"{d\\over d"+t+"}":"{d^{"+n+"}\\over d"+t+"^{"+n+"}}")+"\\left[".concat(e,"\\right]");}}),m=t("constTag",{"Object, ConstantNode, string":function ObjectConstantNodeString(e,t){return e[t]=!0,!0;},"Object, SymbolNode, string":function ObjectSymbolNodeString(e,t,n){return t.name!==n&&(e[t]=!0,!0);},"Object, ParenthesisNode, string":function ObjectParenthesisNodeString(e,t,n){return m(e,t.content,n);},"Object, FunctionAssignmentNode, string":function ObjectFunctionAssignmentNodeString(e,t,n){return-1===t.params.indexOf(n)?(e[t]=!0,!0):m(e,t.expr,n);},"Object, FunctionNode | OperatorNode, string":function ObjectFunctionNodeOperatorNodeString(e,t,n){if(t.args.length>0){for(var r=m(e,t.args[0],n),i=1;i<t.args.length;++i){r=m(e,t.args[i],n)&&r;}if(r)return e[t]=!0,!0;}return!1;}}),y=t("_derivative",{"ConstantNode, Object":function ConstantNodeObject(e){return g(0);},"SymbolNode, Object":function SymbolNodeObject(e,t){return void 0!==t[e]?g(0):g(1);},"ParenthesisNode, Object":function ParenthesisNodeObject(e,t){return new p(y(e.content,t));},"FunctionAssignmentNode, Object":function FunctionAssignmentNodeObject(e,t){return void 0!==t[e]?g(0):y(e.expr,t);},"FunctionNode, Object":function FunctionNodeObject(e,t){if(1!==e.args.length&&function(e){if(("log"===e.name||"nthRoot"===e.name||"pow"===e.name)&&2===e.args.length)return;for(var t=0;t<e.args.length;++t){e.args[t]=g(0);}throw e.compile().evaluate(),new Error("Expected TypeError, but none found");}(e),void 0!==t[e])return g(0);var n,r,i,o,a=e.args[0],s=!1,u=!1;switch(e.name){case"cbrt":s=!0,r=new l("*","multiply",[g(3),new l("^","pow",[a,new l("/","divide",[g(2),g(3)])])]);break;case"sqrt":case"nthRoot":if(1===e.args.length)s=!0,r=new l("*","multiply",[g(2),new c("sqrt",[a])]);else if(2===e.args.length)return t[n=new l("/","divide",[g(1),e.args[1]])]=t[e.args[1]],y(new l("^","pow",[a,n]),t);break;case"log10":n=g(10);case"log":if(n||1!==e.args.length){if(1===e.args.length&&n||2===e.args.length&&void 0!==t[e.args[1]])r=new l("*","multiply",[a.clone(),new c("log",[n||e.args[1]])]),s=!0;else if(2===e.args.length)return y(new l("/","divide",[new c("log",[a]),new c("log",[e.args[1]])]),t);}else r=a.clone(),s=!0;break;case"pow":return t[n]=t[e.args[1]],y(new l("^","pow",[a,e.args[1]]),t);case"exp":r=new c("exp",[a.clone()]);break;case"sin":r=new c("cos",[a.clone()]);break;case"cos":r=new l("-","unaryMinus",[new c("sin",[a.clone()])]);break;case"tan":r=new l("^","pow",[new c("sec",[a.clone()]),g(2)]);break;case"sec":r=new l("*","multiply",[e,new c("tan",[a.clone()])]);break;case"csc":u=!0,r=new l("*","multiply",[e,new c("cot",[a.clone()])]);break;case"cot":u=!0,r=new l("^","pow",[new c("csc",[a.clone()]),g(2)]);break;case"asin":s=!0,r=new c("sqrt",[new l("-","subtract",[g(1),new l("^","pow",[a.clone(),g(2)])])]);break;case"acos":s=!0,u=!0,r=new c("sqrt",[new l("-","subtract",[g(1),new l("^","pow",[a.clone(),g(2)])])]);break;case"atan":s=!0,r=new l("+","add",[new l("^","pow",[a.clone(),g(2)]),g(1)]);break;case"asec":s=!0,r=new l("*","multiply",[new c("abs",[a.clone()]),new c("sqrt",[new l("-","subtract",[new l("^","pow",[a.clone(),g(2)]),g(1)])])]);break;case"acsc":s=!0,u=!0,r=new l("*","multiply",[new c("abs",[a.clone()]),new c("sqrt",[new l("-","subtract",[new l("^","pow",[a.clone(),g(2)]),g(1)])])]);break;case"acot":s=!0,u=!0,r=new l("+","add",[new l("^","pow",[a.clone(),g(2)]),g(1)]);break;case"sinh":r=new c("cosh",[a.clone()]);break;case"cosh":r=new c("sinh",[a.clone()]);break;case"tanh":r=new l("^","pow",[new c("sech",[a.clone()]),g(2)]);break;case"sech":u=!0,r=new l("*","multiply",[e,new c("tanh",[a.clone()])]);break;case"csch":u=!0,r=new l("*","multiply",[e,new c("coth",[a.clone()])]);break;case"coth":u=!0,r=new l("^","pow",[new c("csch",[a.clone()]),g(2)]);break;case"asinh":s=!0,r=new c("sqrt",[new l("+","add",[new l("^","pow",[a.clone(),g(2)]),g(1)])]);break;case"acosh":s=!0,r=new c("sqrt",[new l("-","subtract",[new l("^","pow",[a.clone(),g(2)]),g(1)])]);break;case"atanh":s=!0,r=new l("-","subtract",[g(1),new l("^","pow",[a.clone(),g(2)])]);break;case"asech":s=!0,u=!0,r=new l("*","multiply",[a.clone(),new c("sqrt",[new l("-","subtract",[g(1),new l("^","pow",[a.clone(),g(2)])])])]);break;case"acsch":s=!0,u=!0,r=new l("*","multiply",[new c("abs",[a.clone()]),new c("sqrt",[new l("+","add",[new l("^","pow",[a.clone(),g(2)]),g(1)])])]);break;case"acoth":s=!0,u=!0,r=new l("-","subtract",[g(1),new l("^","pow",[a.clone(),g(2)])]);break;case"abs":r=new l("/","divide",[new c(new d("abs"),[a.clone()]),a.clone()]);break;case"gamma":default:throw new Error('Function "'+e.name+'" is not supported by derivative, or a wrong number of arguments is passed');}s?(i="/",o="divide"):(i="*",o="multiply");var p=y(a,t);return u&&(p=new l("-","unaryMinus",[p])),new l(i,o,[p,r]);},"OperatorNode, Object":function OperatorNodeObject(e,t){if(void 0!==t[e])return g(0);if("+"===e.op)return new l(e.op,e.fn,e.args.map(function(e){return y(e,t);}));if("-"===e.op){if(e.isUnary())return new l(e.op,e.fn,[y(e.args[0],t)]);if(e.isBinary())return new l(e.op,e.fn,[y(e.args[0],t),y(e.args[1],t)]);}if("*"===e.op){var n=e.args.filter(function(e){return void 0!==t[e];});if(n.length>0){var r=e.args.filter(function(e){return void 0===t[e];}),i=1===r.length?r[0]:new l("*","multiply",r),s=n.concat(y(i,t));return new l("*","multiply",s);}return new l("+","add",e.args.map(function(n){return new l("*","multiply",e.args.map(function(e){return e===n?y(e,t):e.clone();}));}));}if("/"===e.op&&e.isBinary()){var u=e.args[0],p=e.args[1];return void 0!==t[p]?new l("/","divide",[y(u,t),p]):void 0!==t[u]?new l("*","multiply",[new l("-","unaryMinus",[u]),new l("/","divide",[y(p,t),new l("^","pow",[p.clone(),g(2)])])]):new l("/","divide",[new l("-","subtract",[new l("*","multiply",[y(u,t),p.clone()]),new l("*","multiply",[u.clone(),y(p,t)])]),new l("^","pow",[p.clone(),g(2)])]);}if("^"===e.op&&e.isBinary()){var d=e.args[0],h=e.args[1];if(void 0!==t[d])return O(d)&&(a(d.value)||o(d.value,1))?g(0):new l("*","multiply",[e,new l("*","multiply",[new c("log",[d.clone()]),y(h.clone(),t)])]);if(void 0!==t[h]){if(O(h)){if(a(h.value))return g(0);if(o(h.value,1))return y(d,t);}var f=new l("^","pow",[d.clone(),new l("-","subtract",[h,g(1)])]);return new l("*","multiply",[h.clone(),new l("*","multiply",[y(d,t),f])]);}return new l("*","multiply",[new l("^","pow",[d.clone(),h.clone()]),new l("+","add",[new l("*","multiply",[y(d,t),new l("/","divide",[h.clone(),d.clone()])]),new l("*","multiply",[y(h,t),new c("log",[d.clone()])])])]);}throw new Error('Operator "'+e.op+'" is not supported by derivative, or a wrong number of arguments is passed');}});function g(e,t){return new u(s(e,t||n.number));}return h;}),oy=et("apply",["typed","isInteger"],function(e){var t=e.typed,n=e.isInteger,r=Vr({typed:t,isInteger:n});return t("apply",{"...any":function any(e){var t=e[1];a(t)?e[1]=t-1:s(t)&&(e[1]=t.minus(1));try{return r.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0});function ay(e,t,n){var r=e.filter(function(e){return H(e)&&!(e.name in t)&&!(e.name in n);})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+e+'"');var i=r.name,o=Object.create(n),a=e.compile();return function(e){return o[i]=e,a.evaluate(o);};}var sy=et("filter",["typed"],function(e){var t=e.typed;function n(e,t,n){var i,o;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(o=H(e[1])||L(e[1])?e[1].compile().evaluate(n):ay(e[1],t,n)),r(i,o);}n.rawArgs=!0;var r=t("filter",{"Array, function":uy,"Matrix, function":function MatrixFunction(e,t){return e.create(uy(e.toArray(),t));},"Array, RegExp":Ye,"Matrix, RegExp":function MatrixRegExp(e,t){return e.create(Ye(e.toArray(),t));}});return n;},{isTransformFunction:!0});function uy(e,t){var n=pt(t);return Xe(e,function(e,r,i){return 1===n?t(e):2===n?t(e,[r+1]):t(e,[r+1],i);});}var cy=et("map",["typed"],function(e){var t=e.typed;function n(e,t,n){var i,o;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(o=H(e[1])||L(e[1])?e[1].compile().evaluate(n):ay(e[1],t,n)),r(i,o);}n.rawArgs=!0;var r=t("map",{"Array, function":function ArrayFunction(e,t){return ly(e,t,e);},"Matrix, function":function MatrixFunction(e,t){return e.create(ly(e.valueOf(),t,e));}});return n;},{isTransformFunction:!0});function ly(e,t,n){var r=pt(t);return function e(i,o){return Array.isArray(i)?Ve(i,function(t,n){return e(t,o.concat(n+1));}):1===r?t(i):2===r?t(i,o):t(i,o,n);}(e,[]);}var py=et("forEach",["typed"],function(e){var t=e.typed;function n(e,t,n){var i,o;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(o=H(e[1])||L(e[1])?e[1].compile().evaluate(n):ay(e[1],t,n)),r(i,o);}n.rawArgs=!0;var r=t("forEach",{"Array | Matrix, function":function ArrayMatrixFunction(e,t){var n=pt(t);!function r(i,o){Array.isArray(i)?We(i,function(e,t){r(e,o.concat(t+1));}):1===n?t(i):2===n?t(i,o):t(i,o,e);}(e.valueOf(),[]);}});return n;},{isTransformFunction:!0}),dy=et("subset",["typed","matrix"],function(e){var t=e.typed,n=e.matrix,r=Ia({typed:t,matrix:n});return t("subset",{"...any":function any(e){try{return r.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),hy=et("index",["Index"],function(e){var t=e.Index;return function(){for(var e=[],n=0,r=arguments.length;n<r;n++){var i=arguments[n];if(g(i))i.start--,i.end-=i.step>0?0:2;else if(i&&!0===i.isSet)i=i.map(function(e){return e-1;});else if(d(i)||h(i))i=i.map(function(e){return e-1;});else if(a(i))i--;else if(s(i))i=i.toNumber()-1;else if("string"!=typeof i)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[n]=i;}var o=new t();return t.apply(o,e),o;};},{isTransformFunction:!0}),fy=et("concat",["typed","matrix","isInteger"],function(e){var t=e.typed,n=e.matrix,r=e.isInteger,i=ga({typed:t,matrix:n,isInteger:r});return t("concat",{"...any":function any(e){var t=e.length-1,n=e[t];a(n)?e[t]=n-1:s(n)&&(e[t]=n.minus(1));try{return i.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),my=et("max",["typed","config","numeric","larger"],function(e){var t=e.typed,n=e.config,r=e.numeric,i=e.larger,o=bu({typed:t,config:n,numeric:r,larger:i});return t("max",{"...any":function any(e){if(2===e.length&&f(e[0])){var t=e[1];a(t)?e[1]=t-1:s(t)&&(e[1]=t.minus(1));}try{return o.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),yy=et("min",["typed","config","numeric","smaller"],function(e){var t=e.typed,n=e.config,r=e.numeric,i=e.smaller,o=eu({typed:t,config:n,numeric:r,smaller:i});return t("min",{"...any":function any(e){if(2===e.length&&f(e[0])){var t=e[1];a(t)?e[1]=t-1:s(t)&&(e[1]=t.minus(1));}try{return o.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),gy=et("sum",["typed","config","add","numeric"],function(e){var t=e.typed,n=e.config,r=e.add,i=e.numeric,o=ou({typed:t,config:n,add:r,numeric:i});return t("sum",{"...any":function any(e){if(2===e.length&&f(e[0])){var t=e[1];a(t)?e[1]=t-1:s(t)&&(e[1]=t.minus(1));}try{return o.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),vy=et("column",["typed","Index","matrix","range"],function(e){var t=e.typed,n=e.Index,r=e.matrix,i=e.range,o=Cu({typed:t,Index:n,matrix:r,range:i});return t("column",{"...any":function any(e){var t=e.length-1,n=e[t];a(n)&&(e[t]=n-1);try{return o.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),xy=et("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.bignumber,o=e.smaller,a=e.smallerEq,s=e.larger,u=e.largerEq,c=hu({typed:t,config:n,matrix:r,bignumber:i,smaller:o,smallerEq:a,larger:s,largerEq:u});return t("range",{"...any":function any(e){return"boolean"!=typeof e[e.length-1]&&e.push(!0),c.apply(null,e);}});},{isTransformFunction:!0}),by=et("diff",["typed","matrix","subtract","number","bignumber"],function(e){var t=e.typed,n=e.matrix,r=e.subtract,i=e.number,o=e.bignumber,u=uc({typed:t,matrix:n,subtract:r,number:i,bignumber:o});return t("diff",{"...any":function any(e){if(2===e.length&&f(e[0])){var t=e[1];a(t)?e[1]=t-1:s(t)&&(e[1]=t.minus(1));}try{return u.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),wy=et("row",["typed","Index","matrix","range"],function(e){var t=e.typed,n=e.Index,r=e.matrix,i=e.range,o=Ru({typed:t,Index:n,matrix:r,range:i});return t("row",{"...any":function any(e){var t=e.length-1,n=e[t];a(n)&&(e[t]=n-1);try{return o.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),Sy=et("mean",["typed","add","divide"],function(e){var t=e.typed,n=e.add,r=e.divide,i=Fc({typed:t,add:n,divide:r});return t("mean",{"...any":function any(e){if(2===e.length&&f(e[0])){var t=e[1];a(t)?e[1]=t-1:s(t)&&(e[1]=t.minus(1));}try{return i.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),My=et("variance",["typed","add","subtract","multiply","divide","apply","isNaN"],function(e){var t=e.typed,n=e.add,r=e.subtract,i=e.multiply,o=e.divide,u=e.apply,c=e.isNaN,l=Ec({typed:t,add:n,subtract:r,multiply:i,divide:o,apply:u,isNaN:c});return t("variance",{"...any":function any(e){if(e.length>=2&&f(e[0])){var t=e[1];a(t)?e[1]=t-1:s(t)&&(e[1]=t.minus(1));}try{return l.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0}),_y=et("std",["typed","sqrt","variance"],function(e){var t=e.typed,n=e.sqrt,r=e.variance,i=qc({typed:t,sqrt:n,variance:r});return t("std",{"...any":function any(e){if(e.length>=2&&f(e[0])){var t=e[1];a(t)?e[1]=t-1:s(t)&&(e[1]=t.minus(1));}try{return i.apply(null,e);}catch(e){throw _m(e);}}});},{isTransformFunction:!0});function Ey(){return(Ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}}return e;}).apply(this,arguments);}var Ay={},Ty={},Ny={},Dy=Jf({mathWithTransform:Ty}),Cy=Qf({Node:Dy}),Ry=Kf({Node:Dy,ResultSet:Gc}),Py=um({Node:Dy}),Oy=lm({Node:Dy}),Ly=pm({Node:Dy}),Iy=ym({Node:Dy}),By=gm({math:Ay}),Fy=vm({classes:Ny}),zy=xm({Node:Dy}),ky=bm({Node:Dy}),Uy=wm({Node:Dy}),jy=Sm({Node:Dy,typed:gl}),Hy=Mm({Chain:By,typed:gl}),qy=Tm({Node:Dy,subset:Yp}),Gy=Cm({Node:Dy,Range:Wc,size:Xp}),Vy=Pm({matrix:Op,Node:Dy,subset:Yp}),Wy=Om({Unit:Ah,Node:Dy,math:Ay}),Xy=Bm({Node:Dy,SymbolNode:Wy,math:Ay}),Yy=zm({AccessorNode:qy,ArrayNode:Cy,AssignmentNode:Vy,BlockNode:Ry,ConditionalNode:zy,ConstantNode:Py,FunctionAssignmentNode:jy,FunctionNode:Xy,IndexNode:Gy,ObjectNode:Oy,OperatorNode:ky,ParenthesisNode:Ly,RangeNode:Uy,RelationalNode:Iy,SymbolNode:Wy,config:oe,numeric:Vd,typed:gl}),Zy=km({parse:Yy,typed:gl}),$y=Um({parse:Yy}),Jy=jm({parse:Yy,typed:gl}),Qy=Ym({bignumber:Ud,fraction:dp,ConstantNode:Py,FunctionNode:Xy,OperatorNode:ky,ParenthesisNode:Ly,SymbolNode:Wy,add:pd,config:oe,divide:Pf,equal:ph,isZero:fd,mathWithTransform:Ty,multiply:gd,parse:Yy,pow:Md,subtract:ih,typed:gl}),Ky=$m({bignumber:Ud,fraction:dp,ConstantNode:Py,FunctionNode:Xy,OperatorNode:ky,ParenthesisNode:Ly,SymbolNode:Wy,add:pd,config:oe,divide:Pf,equal:ph,isZero:fd,mathWithTransform:Ty,multiply:gd,parse:Yy,pow:Md,simplify:Qy,subtract:ih,typed:gl}),eg=Qm({parse:Yy}),tg=ny({Help:$y,mathWithTransform:Ty,typed:gl}),ng=ry({Parser:eg,typed:gl}),rg=iy({ConstantNode:Py,FunctionNode:Xy,OperatorNode:ky,ParenthesisNode:Ly,SymbolNode:Wy,config:oe,equal:ph,isZero:fd,numeric:Vd,parse:Yy,simplify:Qy,typed:gl});Ey(Ay,{reviver:Fy,"false":Xc,"null":Yc,"true":Zc,replacer:Qc,i:Kc,LN10:el,LOG10E:tl,NaN:nl,pi:rl,SQRT1_2:il,tau:ol,efimovFactor:al,fineStructure:sl,sackurTetrode:ul,weakMixingAngle:cl,e:pl,Infinity:dl,LOG2E:hl,PI:rl,version:fl,E:pl,phi:yl,typed:gl,isInteger:vl,isNumeric:xl,isPositive:bl,isNaN:wl,equalScalar:Sl,number:Ml,"boolean":_l,complex:El,splitUnit:Al,unaryPlus:Tl,apply:Nl,cube:Dl,expm1:Cl,log10:Rl,multiplyScalar:Pl,sign:Ol,square:Ll,bitNot:Il,arg:Bl,im:Fl,not:zl,filter:kl,forEach:Ul,map:jl,erf:Hl,format:ql,isPrime:Gl,acos:Vl,acot:Wl,acsc:Xl,asec:Yl,asin:Zl,atan:$l,atanh:Jl,cosh:Ql,coth:Kl,csch:ep,sech:tp,sinh:np,tanh:rp,chain:Hy,combinations:ip,pickRandom:op,randomInt:ap,LN2:sp,clone:up,hasNumericValue:cp,typeOf:lp,string:pp,fraction:dp,unaryMinus:hp,addScalar:fp,exp:mp,log2:yp,sqrt:gp,conj:vp,getMatrixDataType:xp,mode:bp,print:wp,acosh:Sp,acsch:Mp,asinh:_p,cos:Ep,csc:Ap,sin:Tp,combinationsWithRep:Np,random:Dp,SQRT2:Cp,isNegative:Rp,matrix:Op,cbrt:Lp,gcd:Ip,mod:Bp,nthRoot:Fp,xgcd:zp,bitAnd:kp,bitXor:Up,or:jp,concat:Hp,diag:qp,identity:Gp,ones:Vp,reshape:Wp,size:Xp,subset:Yp,zeros:Zp,to:$p,round:Jp,leftShift:Qp,rightLogShift:Kp,compare:ed,compareText:td,smaller:nd,larger:rd,unequal:id,sparse:sd,acoth:ud,atan2:cd,sec:ld,add:pd,dot:dd,composition:hd,isZero:fd,abs:md,floor:yd,multiply:gd,dotMultiply:vd,re:xd,flatten:bd,resize:wd,squeeze:Sd,pow:Md,dotPow:_d,rightArithShift:Ed,compareNatural:Ad,equalText:Td,largerEq:Nd,partitionSelect:Dd,asech:Rd,tan:Pd,setDifference:Od,setIntersect:Ld,setMultiplicity:Id,setSize:Bd,trace:Fd,quantileSeq:zd,gamma:kd,bignumber:Ud,lcm:jd,bitOr:Hd,kron:qd,transpose:Gd,numeric:Vd,and:Wd,smallerEq:Xd,sort:Yd,min:Zd,cot:$d,setDistinct:Jd,setPowerset:Qd,index:Kd,sum:eh,factorial:th,permutations:nh,ceil:rh,subtract:ih,cross:oh,range:ah,ctranspose:sh,divideScalar:uh,nthRoots:ch,lsolve:lh,equal:ph,max:dh,setCartesian:hh,setSymDifference:fh,hypot:mh,qr:yh,distance:gh,stirlingS2:vh,catalan:xh,fix:bh,column:wh,row:Sh,log:Mh,dotDivide:_h,deepEqual:Eh,createUnit:Th,setUnion:Nh,slu:Dh,intersect:Ch,bellNumbers:Rh,atomicMass:Ph,bohrMagneton:Oh,boltzmann:Lh,conductanceQuantum:Ih,deuteronMass:Bh,electronMass:Fh,faraday:zh,firstRadiation:kh,gravitationConstant:Uh,hartreeEnergy:jh,klitzing:Hh,magneticConstant:qh,molarMass:Gh,molarPlanckConstant:Vh,neutronMass:Wh,planckCharge:Xh,planckLength:Yh,planckTemperature:Zh,protonMass:$h,reducedPlanckConstant:Jh,secondRadiation:Qh,stefanBoltzmann:Kh,vacuumImpedance:ef,xor:tf,prod:nf,usolve:rf,unit:of,avogadro:af,classicalElectronRadius:sf,electricConstant:uf,fermiCoupling:cf,gravity:lf,loschmidt:pf,molarMassC12:df,nuclearMagneton:hf,planckMass:ff,quantumOfCirculation:mf,speedOfLight:yf,wienDisplacement:gf,diff:vf,parse:Yy,evaluate:Zy,lup:bf,det:wf,bohrRadius:Sf,elementaryCharge:Mf,inverseConductanceQuantum:_f,molarVolume:Ef,planckTime:Af,thomsonCrossSection:Tf,log1p:Nf,compile:Jy,lusolve:Df,inv:Cf,expm:Rf,divide:Pf,median:Of,variance:Lf,kldivergence:If,simplify:Qy,rationalize:Ky,gasConstant:Bf,planckConstant:Ff,setIsSubset:zf,help:tg,sqrtm:kf,mad:Uf,multinomial:jf,coulomb:Hf,rydberg:qf,parser:ng,mean:Gf,derivative:rg,eigs:Vf,magneticFluxQuantum:Wf,norm:Xf,std:Yf,config:oe}),Ey(Ty,Ay,{apply:oy({isInteger:vl,typed:gl}),filter:sy({typed:gl}),map:cy({typed:gl}),forEach:py({typed:gl}),subset:dy({matrix:Op,typed:gl}),index:hy({Index:Cd}),concat:fy({isInteger:vl,matrix:Op,typed:gl}),max:my({config:oe,larger:rd,numeric:Vd,typed:gl}),min:yy({config:oe,numeric:Vd,smaller:nd,typed:gl}),sum:gy({add:pd,config:oe,numeric:Vd,typed:gl}),column:vy({Index:Cd,matrix:Op,range:ah,typed:gl}),range:xy({bignumber:Ud,matrix:Op,config:oe,larger:rd,largerEq:Nd,smaller:nd,smallerEq:Xd,typed:gl}),diff:by({bignumber:Ud,matrix:Op,number:Ml,subtract:ih,typed:gl}),row:wy({Index:Cd,matrix:Op,range:ah,typed:gl}),mean:Sy({add:pd,divide:Pf,typed:gl}),variance:My({add:pd,apply:Nl,divide:Pf,isNaN:wl,multiply:gd,subtract:ih,typed:gl}),std:_y({sqrt:gp,typed:gl,variance:Lf})}),Ey(Ny,{ResultSet:Gc,Complex:Vc,Range:Wc,Node:Dy,ArrayNode:Cy,BlockNode:Ry,ConstantNode:Py,ObjectNode:Oy,ParenthesisNode:Ly,RelationalNode:Iy,Chain:By,BigNumber:$c,Matrix:Jc,ConditionalNode:zy,OperatorNode:ky,Fraction:ll,RangeNode:Uy,DenseMatrix:ml,FunctionAssignmentNode:jy,SparseMatrix:Pp,ImmutableDenseMatrix:od,FibonacciHeap:ad,AccessorNode:qy,IndexNode:Gy,Index:Cd,AssignmentNode:Vy,Unit:Ah,SymbolNode:Wy,FunctionNode:Xy,Spa:xf,Help:$y,Parser:eg}),By.createProxy(Ay);var ig={createBigNumberClass:Ht},og={createComplexClass:st},ag={createMatrixClass:qt},sg={MatrixDependencies:ag,createDenseMatrixClass:Xn},ug={createFractionClass:Wn},cg={BigNumberDependencies:ig,ComplexDependencies:og,DenseMatrixDependencies:sg,FractionDependencies:ug,createTyped:Jn},lg={createResultSet:rt},pg={createRangeClass:ut},dg={typedDependencies:cg,createClone:_o},hg={typedDependencies:cg,createIsInteger:sr},fg={typedDependencies:cg,createIsNegative:Yo},mg={typedDependencies:cg,createIsNumeric:ur},yg={isNumericDependencies:mg,typedDependencies:cg,createHasNumericValue:Eo},gg={typedDependencies:cg,createIsPositive:hr},vg={typedDependencies:cg,createIsZero:ds},xg={typedDependencies:cg,createIsNaN:fr},bg={typedDependencies:cg,createTypeOf:Ao},wg={typedDependencies:cg,createEqualScalar:yr},Sg={MatrixDependencies:ag,equalScalarDependencies:wg,typedDependencies:cg,createSparseMatrixClass:Zo},Mg={typedDependencies:cg,createNumber:gr},_g={typedDependencies:cg,createString:To},Eg={typedDependencies:cg,createBoolean:vr},Ag={BigNumberDependencies:ig,typedDependencies:cg,createBignumber:Gs},Tg={ComplexDependencies:og,typedDependencies:cg,createComplex:xr},Ng={FractionDependencies:ug,typedDependencies:cg,createFraction:No},Dg={DenseMatrixDependencies:sg,MatrixDependencies:ag,SparseMatrixDependencies:Sg,typedDependencies:cg,createMatrix:$o},Cg={typedDependencies:cg,createSplitUnit:br},Rg={typedDependencies:cg,createUnaryMinus:Do},Pg={BigNumberDependencies:ig,typedDependencies:cg,createUnaryPlus:Gr},Og={typedDependencies:cg,createAbs:hs},Lg={isIntegerDependencies:hg,typedDependencies:cg,createApply:Vr},Ig={typedDependencies:cg,createAddScalar:Co},Bg={BigNumberDependencies:ig,ComplexDependencies:og,FractionDependencies:ug,isNegativeDependencies:fg,matrixDependencies:Dg,typedDependencies:cg,unaryMinusDependencies:Rg,createCbrt:Jo},Fg={BigNumberDependencies:ig,matrixDependencies:Dg,typedDependencies:cg,createZeros:Ua},zg={BigNumberDependencies:ig,DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,zerosDependencies:Fg,createRound:Wa},kg={roundDependencies:zg,typedDependencies:cg,createCeil:cu},Ug={typedDependencies:cg,createCube:Xr},jg={typedDependencies:cg,createExp:Ro},Hg={ComplexDependencies:og,typedDependencies:cg,createExpm1:Yr},qg={roundDependencies:zg,typedDependencies:cg,createFloor:fs},Gg={ComplexDependencies:og,ceilDependencies:kg,floorDependencies:qg,typedDependencies:cg,createFix:Du},Vg={BigNumberDependencies:ig,DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createGcd:ra},Wg={equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createLcm:Vs},Xg={ComplexDependencies:og,typedDependencies:cg,createLog10:Zr},Yg={ComplexDependencies:og,typedDependencies:cg,createLog2:Po},Zg={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createMod:ca},$g={typedDependencies:cg,createMultiplyScalar:$r},Jg={typedDependencies:cg,createConj:Lo},Qg={matrixDependencies:Dg,typedDependencies:cg,createSize:Aa},Kg={addScalarDependencies:Ig,conjDependencies:Jg,multiplyScalarDependencies:$g,sizeDependencies:Qg,typedDependencies:cg,createDot:ls},ev={addScalarDependencies:Ig,dotDependencies:Kg,equalScalarDependencies:wg,matrixDependencies:Dg,multiplyScalarDependencies:$g,typedDependencies:cg,createMultiply:ms},tv={BigNumberDependencies:ig,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createNthRoot:pa},nv={BigNumberDependencies:ig,FractionDependencies:ug,complexDependencies:Tg,typedDependencies:cg,createSign:Jr},rv={ComplexDependencies:og,typedDependencies:cg,createSqrt:Oo},iv={typedDependencies:cg,createSquare:Qr},ov={DenseMatrixDependencies:sg,addScalarDependencies:Ig,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,unaryMinusDependencies:Rg,createSubtract:lu},av={BigNumberDependencies:ig,matrixDependencies:Dg,typedDependencies:cg,createXgcd:da},sv={equalScalarDependencies:wg,matrixDependencies:Dg,multiplyScalarDependencies:$g,typedDependencies:cg,createDotMultiply:ys},uv={equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createBitAnd:ha},cv={typedDependencies:cg,createBitNot:mi},lv={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createBitOr:Ws},pv={DenseMatrixDependencies:sg,matrixDependencies:Dg,typedDependencies:cg,createBitXor:ma},dv={typedDependencies:cg,createArg:yi},hv={typedDependencies:cg,createIm:gi},fv={typedDependencies:cg,createRe:gs},mv={typedDependencies:cg,createNot:Si},yv={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createOr:ya},gv={DenseMatrixDependencies:sg,matrixDependencies:Dg,typedDependencies:cg,createXor:ic},vv={isIntegerDependencies:hg,matrixDependencies:Dg,typedDependencies:cg,createConcat:ga},xv={DenseMatrixDependencies:sg,matrixDependencies:Dg,typedDependencies:cg,createSmaller:Ka},bv={DenseMatrixDependencies:sg,smallerDependencies:xv,createImmutableDenseMatrixClass:ns},wv={ImmutableDenseMatrixDependencies:bv,createIndexClass:Rs},Sv={DenseMatrixDependencies:sg,matrixDependencies:Dg,typedDependencies:cg,createLarger:es},Mv={DenseMatrixDependencies:sg,matrixDependencies:Dg,typedDependencies:cg,createLargerEq:Ds},_v={DenseMatrixDependencies:sg,matrixDependencies:Dg,typedDependencies:cg,createSmallerEq:Js},Ev={bignumberDependencies:Ag,matrixDependencies:Dg,largerDependencies:Sv,largerEqDependencies:Mv,smallerDependencies:xv,smallerEqDependencies:_v,typedDependencies:cg,createRange:hu},Av={IndexDependencies:wv,matrixDependencies:Dg,rangeDependencies:Ev,typedDependencies:cg,createColumn:Cu},Tv={matrixDependencies:Dg,multiplyDependencies:ev,subtractDependencies:ov,typedDependencies:cg,createCross:du},Nv={DenseMatrixDependencies:sg,SparseMatrixDependencies:Sg,matrixDependencies:Dg,typedDependencies:cg,createDiag:xa},Dv={typedDependencies:cg,createFilter:Mi},Cv={matrixDependencies:Dg,typedDependencies:cg,createFlatten:vs},Rv={typedDependencies:cg,createForEach:Ei},Pv={typedDependencies:cg,createGetMatrixDataType:Io},Ov={BigNumberDependencies:ig,DenseMatrixDependencies:sg,SparseMatrixDependencies:Sg,matrixDependencies:Dg,typedDependencies:cg,createIdentity:ba},Lv={matrixDependencies:Dg,multiplyScalarDependencies:$g,typedDependencies:cg,createKron:Xs},Iv={typedDependencies:cg,createMap:Ti},Bv={matrixDependencies:Dg,numberDependencies:Mg,subtractDependencies:ov,typedDependencies:cg,createDiff:uc},Fv={BigNumberDependencies:ig,matrixDependencies:Dg,typedDependencies:cg,createOnes:wa},zv={isIntegerDependencies:hg,matrixDependencies:Dg,typedDependencies:cg,createReshape:Sa},kv={matrixDependencies:Dg,createResize:bs},Uv={IndexDependencies:wv,matrixDependencies:Dg,rangeDependencies:Ev,typedDependencies:cg,createRow:Ru},jv={matrixDependencies:Dg,typedDependencies:cg,createSqueeze:ws},Hv={matrixDependencies:Dg,typedDependencies:cg,createSubset:Ia},qv={matrixDependencies:Dg,typedDependencies:cg,createTranspose:Ys},Gv={conjDependencies:Jg,transposeDependencies:qv,typedDependencies:cg,createCtranspose:fu},Vv={typedDependencies:cg,createErf:Di},Wv={isNaNDependencies:xg,isNumericDependencies:mg,typedDependencies:cg,createMode:Bo},Xv={bignumberDependencies:Ag,fractionDependencies:Ng,numberDependencies:Mg,createNumeric:Zs},Yv={multiplyScalarDependencies:$g,numericDependencies:Xv,typedDependencies:cg,createProd:oc},Zv={typedDependencies:cg,createFormat:Ii},$v={typedDependencies:cg,createPrint:Fo},Jv={matrixDependencies:Dg,typedDependencies:cg,createTo:ja},Qv={typedDependencies:cg,createIsPrime:Bi},Kv={numericDependencies:Xv,typedDependencies:cg,createDivideScalar:mu},ex={ComplexDependencies:og,fractionDependencies:Ng,identityDependencies:Ov,matrixDependencies:Dg,multiplyDependencies:ev,numberDependencies:Mg,typedDependencies:cg,createPow:Ss},tx={ComplexDependencies:og,divideScalarDependencies:Kv,typedDependencies:cg,createLog:Pu},nx={ComplexDependencies:og,divideScalarDependencies:Kv,logDependencies:tx,typedDependencies:cg,createLog1p:dc},rx={ComplexDependencies:og,divideScalarDependencies:Kv,typedDependencies:cg,createNthRoots:yu},ix={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,powDependencies:ex,typedDependencies:cg,createDotPow:Ms},ox={DenseMatrixDependencies:sg,divideScalarDependencies:Kv,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createDotDivide:Ou},ax={DenseMatrixDependencies:sg,divideScalarDependencies:Kv,equalScalarDependencies:wg,matrixDependencies:Dg,multiplyScalarDependencies:$g,subtractDependencies:ov,typedDependencies:cg,createLsolve:vu},sx={DenseMatrixDependencies:sg,divideScalarDependencies:Kv,equalScalarDependencies:wg,matrixDependencies:Dg,multiplyScalarDependencies:$g,subtractDependencies:ov,typedDependencies:cg,createUsolve:ac},ux={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,zerosDependencies:Fg,createLeftShift:Za},cx={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,zerosDependencies:Fg,createRightArithShift:_s},lx={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,zerosDependencies:Fg,createRightLogShift:$a},px={equalScalarDependencies:wg,matrixDependencies:Dg,notDependencies:mv,typedDependencies:cg,zerosDependencies:Fg,createAnd:$s},dx={BigNumberDependencies:ig,DenseMatrixDependencies:sg,FractionDependencies:ug,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createCompare:Ja},hx={compareDependencies:dx,typedDependencies:cg,createCompareNatural:Ts},fx={matrixDependencies:Dg,typedDependencies:cg,createCompareText:Qa},mx={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createEqual:xu},yx={compareTextDependencies:fx,isZeroDependencies:vg,typedDependencies:cg,createEqualText:Ns},gx={equalDependencies:mx,typedDependencies:cg,createDeepEqual:Lu},vx={DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createUnequal:ts},xx={compareDependencies:dx,isNaNDependencies:xg,isNumericDependencies:mg,typedDependencies:cg,createPartitionSelect:Cs},bx={compareDependencies:dx,compareNaturalDependencies:hx,matrixDependencies:Dg,typedDependencies:cg,createSort:Qs},wx={largerDependencies:Sv,numericDependencies:Xv,typedDependencies:cg,createMax:bu},Sx={numericDependencies:Xv,smallerDependencies:xv,typedDependencies:cg,createMin:eu},Mx={largerDependencies:Sv,smallerDependencies:xv,createFibonacciHeapClass:rs},_x={FibonacciHeapDependencies:Mx,addScalarDependencies:Ig,equalScalarDependencies:wg,createSpaClass:cc},Ex={BigNumberDependencies:ig,ComplexDependencies:og,FractionDependencies:ug,absDependencies:Og,addScalarDependencies:Ig,divideScalarDependencies:Kv,equalDependencies:mx,fixDependencies:Gg,formatDependencies:Zv,isNumericDependencies:mg,multiplyScalarDependencies:$g,numberDependencies:Mg,powDependencies:ex,roundDependencies:zg,subtractDependencies:ov,createUnitClass:Uu},Ax={UnitDependencies:Ex,typedDependencies:cg,createUnitFunction:sc},Tx={SparseMatrixDependencies:Sg,typedDependencies:cg,createSparse:is},Nx={UnitDependencies:Ex,typedDependencies:cg,createCreateUnit:ju},Dx={ComplexDependencies:og,typedDependencies:cg,createAcos:Fi},Cx={ComplexDependencies:og,typedDependencies:cg,createAcosh:ko},Rx={BigNumberDependencies:ig,typedDependencies:cg,createAcot:eo},Px={BigNumberDependencies:ig,ComplexDependencies:og,typedDependencies:cg,createAcoth:os},Ox={BigNumberDependencies:ig,ComplexDependencies:og,typedDependencies:cg,createAcsc:to},Lx={BigNumberDependencies:ig,typedDependencies:cg,createAcsch:Uo},Ix={BigNumberDependencies:ig,ComplexDependencies:og,typedDependencies:cg,createAsec:no},Bx={BigNumberDependencies:ig,ComplexDependencies:og,typedDependencies:cg,createAsech:Ps},Fx={ComplexDependencies:og,typedDependencies:cg,createAsin:ro},zx={typedDependencies:cg,createAsinh:jo},kx={typedDependencies:cg,createAtan:io},Ux={BigNumberDependencies:ig,DenseMatrixDependencies:sg,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createAtan2:ss},jx={ComplexDependencies:og,typedDependencies:cg,createAtanh:oo},Hx={typedDependencies:cg,createCos:Ho},qx={typedDependencies:cg,createCosh:ao},Gx={BigNumberDependencies:ig,typedDependencies:cg,createCot:tu},Vx={BigNumberDependencies:ig,typedDependencies:cg,createCoth:so},Wx={BigNumberDependencies:ig,typedDependencies:cg,createCsc:qo},Xx={BigNumberDependencies:ig,typedDependencies:cg,createCsch:uo},Yx={BigNumberDependencies:ig,typedDependencies:cg,createSec:us},Zx={BigNumberDependencies:ig,typedDependencies:cg,createSech:co},$x={typedDependencies:cg,createSin:Go},Jx={typedDependencies:cg,createSinh:lo},Qx={typedDependencies:cg,createTan:Os},Kx={typedDependencies:cg,createTanh:po},eb={DenseMatrixDependencies:sg,IndexDependencies:wv,compareNaturalDependencies:hx,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetCartesian:wu},tb={DenseMatrixDependencies:sg,IndexDependencies:wv,compareNaturalDependencies:hx,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetDifference:Ls},nb={DenseMatrixDependencies:sg,IndexDependencies:wv,compareNaturalDependencies:hx,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetDistinct:nu},rb={DenseMatrixDependencies:sg,IndexDependencies:wv,compareNaturalDependencies:hx,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetIntersect:Is},ib={IndexDependencies:wv,compareNaturalDependencies:hx,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetIsSubset:Dc},ob={IndexDependencies:wv,compareNaturalDependencies:hx,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetMultiplicity:Bs},ab={IndexDependencies:wv,compareNaturalDependencies:hx,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetPowerset:ru},sb={compareNaturalDependencies:hx,typedDependencies:cg,createSetSize:Fs},ub={IndexDependencies:wv,concatDependencies:vv,setDifferenceDependencies:tb,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetSymDifference:Su},cb={IndexDependencies:wv,concatDependencies:vv,setIntersectDependencies:rb,setSymDifferenceDependencies:ub,sizeDependencies:Qg,subsetDependencies:Hv,typedDependencies:cg,createSetUnion:Hu},lb={DenseMatrixDependencies:sg,SparseMatrixDependencies:Sg,addScalarDependencies:Ig,equalScalarDependencies:wg,matrixDependencies:Dg,typedDependencies:cg,createAdd:cs},pb={absDependencies:Og,addScalarDependencies:Ig,divideScalarDependencies:Kv,isPositiveDependencies:gg,multiplyScalarDependencies:$g,smallerDependencies:xv,sqrtDependencies:rv,typedDependencies:cg,createHypot:Mu},db={DenseMatrixDependencies:sg,SpaDependencies:_x,SparseMatrixDependencies:Sg,absDependencies:Og,addScalarDependencies:Ig,divideScalarDependencies:Kv,equalScalarDependencies:wg,largerDependencies:Sv,matrixDependencies:Dg,multiplyScalarDependencies:$g,subtractDependencies:ov,typedDependencies:cg,unaryMinusDependencies:Rg,createLup:lc},hb={lupDependencies:db,matrixDependencies:Dg,multiplyDependencies:ev,subtractDependencies:ov,typedDependencies:cg,unaryMinusDependencies:Rg,createDet:pc},fb={absDependencies:Og,addScalarDependencies:Ig,detDependencies:hb,divideScalarDependencies:Kv,identityDependencies:Ov,matrixDependencies:Dg,multiplyDependencies:ev,typedDependencies:cg,unaryMinusDependencies:Rg,createInv:gc},mb={absDependencies:Og,addDependencies:lb,addScalarDependencies:Ig,atanDependencies:kx,bignumberDependencies:Ag,cosDependencies:Hx,equalDependencies:mx,invDependencies:fb,matrixDependencies:Dg,multiplyDependencies:ev,multiplyScalarDependencies:$g,sinDependencies:$x,subtractDependencies:ov,typedDependencies:cg,createEigs:kc},yb={absDependencies:Og,addDependencies:lb,conjDependencies:Jg,ctransposeDependencies:Gv,eigsDependencies:mb,equalScalarDependencies:wg,largerDependencies:Sv,matrixDependencies:Dg,multiplyDependencies:ev,powDependencies:ex,smallerDependencies:xv,sqrtDependencies:rv,typedDependencies:cg,createNorm:jc},gb={addDependencies:lb,matrixDependencies:Dg,typedDependencies:cg,createTrace:zs},vb={IndexDependencies:wv,typedDependencies:cg,createIndex:iu},xb={createNode:Jf},bb={NodeDependencies:xb,subsetDependencies:Hv,createAccessorNode:Tm},wb={NodeDependencies:xb,createArrayNode:Qf},Sb={matrixDependencies:Dg,NodeDependencies:xb,subsetDependencies:Hv,createAssignmentNode:Pm},Mb={NodeDependencies:xb,ResultSetDependencies:lg,createBlockNode:Kf},_b={NodeDependencies:xb,createConditionalNode:xm},Eb={NodeDependencies:xb,createConstantNode:um},Ab={NodeDependencies:xb,typedDependencies:cg,createFunctionAssignmentNode:Sm},Tb={NodeDependencies:xb,RangeDependencies:pg,sizeDependencies:Qg,createIndexNode:Cm},Nb={NodeDependencies:xb,createObjectNode:lm},Db={NodeDependencies:xb,createOperatorNode:bm},Cb={NodeDependencies:xb,createParenthesisNode:pm},Rb={NodeDependencies:xb,createRangeNode:wm},Pb={NodeDependencies:xb,createRelationalNode:ym},Ob={UnitDependencies:Ex,NodeDependencies:xb,createSymbolNode:Om},Lb={NodeDependencies:xb,SymbolNodeDependencies:Ob,createFunctionNode:Bm},Ib={AccessorNodeDependencies:bb,ArrayNodeDependencies:wb,AssignmentNodeDependencies:Sb,BlockNodeDependencies:Mb,ConditionalNodeDependencies:_b,ConstantNodeDependencies:Eb,FunctionAssignmentNodeDependencies:Ab,FunctionNodeDependencies:Lb,IndexNodeDependencies:Tb,ObjectNodeDependencies:Nb,OperatorNodeDependencies:Db,ParenthesisNodeDependencies:Cb,RangeNodeDependencies:Rb,RelationalNodeDependencies:Pb,SymbolNodeDependencies:Ob,numericDependencies:Xv,typedDependencies:cg,createParse:zm},Bb={parseDependencies:Ib,typedDependencies:cg,createCompile:jm},Fb={parseDependencies:Ib,typedDependencies:cg,createEvaluate:km},zb={parseDependencies:Ib,createParserClass:Qm},kb={ParserDependencies:zb,typedDependencies:cg,createParser:ry},Ub={addScalarDependencies:Ig,complexDependencies:Tg,conjDependencies:Jg,divideScalarDependencies:Kv,equalDependencies:mx,identityDependencies:Ov,isZeroDependencies:vg,matrixDependencies:Dg,multiplyScalarDependencies:$g,signDependencies:nv,sqrtDependencies:rv,subtractDependencies:ov,typedDependencies:cg,unaryMinusDependencies:Rg,zerosDependencies:Fg,createQr:Eu},jb={SparseMatrixDependencies:Sg,absDependencies:Og,addDependencies:lb,divideScalarDependencies:Kv,largerDependencies:Sv,largerEqDependencies:Mv,multiplyDependencies:ev,subtractDependencies:ov,transposeDependencies:qv,typedDependencies:cg,createSlu:tc},Hb={DenseMatrixDependencies:sg,lsolveDependencies:ax,lupDependencies:db,matrixDependencies:Dg,sluDependencies:jb,typedDependencies:cg,usolveDependencies:sx,createLusolve:mc},qb={parseDependencies:Ib,createHelpClass:Um},Gb={createChainClass:gm},Vb={HelpDependencies:qb,typedDependencies:cg,createHelp:ny},Wb={ChainDependencies:Gb,typedDependencies:cg,createChain:Mm},Xb={absDependencies:Og,addDependencies:lb,identityDependencies:Ov,invDependencies:fb,multiplyDependencies:ev,typedDependencies:cg,createExpm:xc},Yb={absDependencies:Og,addDependencies:lb,identityDependencies:Ov,invDependencies:fb,maxDependencies:wx,multiplyDependencies:ev,sizeDependencies:Qg,sqrtDependencies:rv,subtractDependencies:ov,typedDependencies:cg,createSqrtm:Rc},Zb={divideScalarDependencies:Kv,equalScalarDependencies:wg,invDependencies:fb,matrixDependencies:Dg,multiplyDependencies:ev,typedDependencies:cg,createDivide:wc},$b={absDependencies:Og,addScalarDependencies:Ig,divideScalarDependencies:Kv,multiplyScalarDependencies:$g,sqrtDependencies:rv,subtractDependencies:ov,typedDependencies:cg,unaryMinusDependencies:Rg,createDistance:Au},Jb={absDependencies:Og,addDependencies:lb,addScalarDependencies:Ig,divideScalarDependencies:Kv,equalScalarDependencies:wg,matrixDependencies:Dg,multiplyDependencies:ev,multiplyScalarDependencies:$g,smallerDependencies:xv,subtractDependencies:ov,typedDependencies:cg,createIntersect:nc},Qb={addDependencies:lb,numericDependencies:Xv,typedDependencies:cg,createSum:ou},Kb={addDependencies:lb,divideDependencies:Zb,typedDependencies:cg,createMean:Fc},ew={addDependencies:lb,compareDependencies:dx,divideDependencies:Zb,partitionSelectDependencies:xx,typedDependencies:cg,createMedian:Mc},tw={absDependencies:Og,mapDependencies:Iv,medianDependencies:ew,subtractDependencies:ov,typedDependencies:cg,createMad:Oc},nw={addDependencies:lb,applyDependencies:Lg,divideDependencies:Zb,isNaNDependencies:xg,multiplyDependencies:ev,subtractDependencies:ov,typedDependencies:cg,createVariance:Ec},rw={addDependencies:lb,compareDependencies:dx,multiplyDependencies:ev,partitionSelectDependencies:xx,typedDependencies:cg,createQuantileSeq:ks},iw={sqrtDependencies:rv,typedDependencies:cg,varianceDependencies:nw,createStd:qc},ow={typedDependencies:cg,createCombinations:mo},aw={typedDependencies:cg,createCombinationsWithRep:Vo},sw={BigNumberDependencies:ig,ComplexDependencies:og,multiplyScalarDependencies:$g,powDependencies:ex,typedDependencies:cg,createGamma:qs},uw={gammaDependencies:sw,typedDependencies:cg,createFactorial:au},cw={divideDependencies:Zb,dotDivideDependencies:ox,isNumericDependencies:mg,logDependencies:tx,matrixDependencies:Dg,multiplyDependencies:ev,sumDependencies:Qb,typedDependencies:cg,createKldivergence:Tc},lw={addDependencies:lb,divideDependencies:Zb,factorialDependencies:uw,isIntegerDependencies:hg,isPositiveDependencies:gg,multiplyDependencies:ev,typedDependencies:cg,createMultinomial:Ic},pw={factorialDependencies:uw,typedDependencies:cg,createPermutations:su},dw={typedDependencies:cg,createPickRandom:wo},hw={typedDependencies:cg,createRandom:Xo},fw={typedDependencies:cg,createRandomInt:Mo},mw={addScalarDependencies:Ig,combinationsDependencies:ow,divideScalarDependencies:Kv,factorialDependencies:uw,isIntegerDependencies:hg,isNegativeDependencies:fg,largerDependencies:Sv,multiplyScalarDependencies:$g,powDependencies:ex,subtractDependencies:ov,typedDependencies:cg,createStirlingS2:Tu},yw={addScalarDependencies:Ig,isIntegerDependencies:hg,isNegativeDependencies:fg,stirlingS2Dependencies:mw,typedDependencies:cg,createBellNumbers:rc},gw={addScalarDependencies:Ig,combinationsDependencies:ow,divideScalarDependencies:Kv,isIntegerDependencies:hg,isNegativeDependencies:fg,multiplyScalarDependencies:$g,typedDependencies:cg,createCatalan:Nu},vw={addScalarDependencies:Ig,combinationsDependencies:ow,isIntegerDependencies:hg,isNegativeDependencies:fg,isPositiveDependencies:gg,largerDependencies:Sv,typedDependencies:cg,createComposition:ps},xw={bignumberDependencies:Ag,fractionDependencies:Ng,ConstantNodeDependencies:Eb,FunctionNodeDependencies:Lb,OperatorNodeDependencies:Db,ParenthesisNodeDependencies:Cb,SymbolNodeDependencies:Ob,addDependencies:lb,divideDependencies:Zb,equalDependencies:mx,isZeroDependencies:vg,multiplyDependencies:ev,parseDependencies:Ib,powDependencies:ex,subtractDependencies:ov,typedDependencies:cg,createSimplify:Ym},bw={ConstantNodeDependencies:Eb,FunctionNodeDependencies:Lb,OperatorNodeDependencies:Db,ParenthesisNodeDependencies:Cb,SymbolNodeDependencies:Ob,equalDependencies:mx,isZeroDependencies:vg,numericDependencies:Xv,parseDependencies:Ib,simplifyDependencies:xw,typedDependencies:cg,createDerivative:iy},ww={bignumberDependencies:Ag,fractionDependencies:Ng,ConstantNodeDependencies:Eb,FunctionNodeDependencies:Lb,OperatorNodeDependencies:Db,ParenthesisNodeDependencies:Cb,SymbolNodeDependencies:Ob,addDependencies:lb,divideDependencies:Zb,equalDependencies:mx,isZeroDependencies:vg,multiplyDependencies:ev,parseDependencies:Ib,powDependencies:ex,simplifyDependencies:xw,subtractDependencies:ov,typedDependencies:cg,createRationalize:$m},Sw={createReviver:vm},Mw={createReplacer:Gt},_w={BigNumberDependencies:ig,createE:Tt},Ew={eDependencies:_w,createUppercaseE:Ft},Aw={createFalse:wt},Tw={ComplexDependencies:og,createI:It},Nw={BigNumberDependencies:ig,createInfinity:Mt},Dw={BigNumberDependencies:ig,createLN10:Ct},Cw={BigNumberDependencies:ig,createLN2:Dt},Rw={BigNumberDependencies:ig,createLOG10E:Pt},Pw={BigNumberDependencies:ig,createLOG2E:Rt},Ow={BigNumberDependencies:ig,createNaN:_t},Lw={createNull:St},Iw={BigNumberDependencies:ig,createPhi:Nt},Bw={BigNumberDependencies:ig,createPi:Et},Fw={piDependencies:Bw,createUppercasePi:Bt},zw={BigNumberDependencies:ig,createSQRT1_2:Ot},kw={BigNumberDependencies:ig,createSQRT2:Lt},Uw={BigNumberDependencies:ig,createTau:At},jw={createTrue:bt},Hw={createVersion:zt},qw={BigNumberDependencies:ig,UnitDependencies:Ex,createAtomicMass:wn},Gw={BigNumberDependencies:ig,UnitDependencies:Ex,createAvogadro:Sn},Vw={BigNumberDependencies:ig,UnitDependencies:Ex,createBohrMagneton:en},Ww={BigNumberDependencies:ig,UnitDependencies:Ex,createBohrRadius:sn},Xw={BigNumberDependencies:ig,UnitDependencies:Ex,createBoltzmann:Mn},Yw={BigNumberDependencies:ig,UnitDependencies:Ex,createClassicalElectronRadius:un},Zw={BigNumberDependencies:ig,UnitDependencies:Ex,createConductanceQuantum:tn},$w={BigNumberDependencies:ig,UnitDependencies:Ex,createCoulomb:Qt},Jw={BigNumberDependencies:ig,UnitDependencies:Ex,createDeuteronMass:fn},Qw={BigNumberDependencies:ig,createEfimovFactor:bn},Kw={BigNumberDependencies:ig,UnitDependencies:Ex,createElectricConstant:$t},eS={BigNumberDependencies:ig,UnitDependencies:Ex,createElectronMass:cn},tS={BigNumberDependencies:ig,UnitDependencies:Ex,createElementaryCharge:Kt},nS={BigNumberDependencies:ig,UnitDependencies:Ex,createFaraday:_n},rS={BigNumberDependencies:ig,UnitDependencies:Ex,createFermiCoupling:ln},iS={BigNumberDependencies:ig,createFineStructure:pn},oS={BigNumberDependencies:ig,UnitDependencies:Ex,createFirstRadiation:En},aS={BigNumberDependencies:ig,UnitDependencies:Ex,createGasConstant:Tn},sS={BigNumberDependencies:ig,UnitDependencies:Ex,createGravitationConstant:Wt},uS={BigNumberDependencies:ig,UnitDependencies:Ex,createGravity:Bn},cS={BigNumberDependencies:ig,UnitDependencies:Ex,createHartreeEnergy:dn},lS={BigNumberDependencies:ig,UnitDependencies:Ex,createInverseConductanceQuantum:nn},pS={BigNumberDependencies:ig,UnitDependencies:Ex,createKlitzing:an},dS={BigNumberDependencies:ig,UnitDependencies:Ex,createLoschmidt:An},hS={BigNumberDependencies:ig,UnitDependencies:Ex,createMagneticConstant:Zt},fS={BigNumberDependencies:ig,UnitDependencies:Ex,createMagneticFluxQuantum:rn},mS={BigNumberDependencies:ig,UnitDependencies:Ex,createMolarMass:Ln},yS={BigNumberDependencies:ig,UnitDependencies:Ex,createMolarMassC12:In},gS={BigNumberDependencies:ig,UnitDependencies:Ex,createMolarPlanckConstant:Nn},vS={BigNumberDependencies:ig,UnitDependencies:Ex,createMolarVolume:Dn},xS={BigNumberDependencies:ig,UnitDependencies:Ex,createNeutronMass:mn},bS={BigNumberDependencies:ig,UnitDependencies:Ex,createNuclearMagneton:on},wS={BigNumberDependencies:ig,UnitDependencies:Ex,createPlanckCharge:Un},SS={BigNumberDependencies:ig,UnitDependencies:Ex,createPlanckConstant:Xt},MS={BigNumberDependencies:ig,UnitDependencies:Ex,createPlanckLength:Fn},_S={BigNumberDependencies:ig,UnitDependencies:Ex,createPlanckMass:zn},ES={BigNumberDependencies:ig,UnitDependencies:Ex,createPlanckTemperature:jn},AS={BigNumberDependencies:ig,UnitDependencies:Ex,createPlanckTime:kn},TS={BigNumberDependencies:ig,UnitDependencies:Ex,createProtonMass:hn},NS={BigNumberDependencies:ig,UnitDependencies:Ex,createQuantumOfCirculation:yn},DS={BigNumberDependencies:ig,UnitDependencies:Ex,createReducedPlanckConstant:Yt},CS={BigNumberDependencies:ig,UnitDependencies:Ex,createRydberg:gn},RS={BigNumberDependencies:ig,createSackurTetrode:Cn},PS={BigNumberDependencies:ig,UnitDependencies:Ex,createSecondRadiation:Rn},OS={BigNumberDependencies:ig,UnitDependencies:Ex,createSpeedOfLight:Vt},LS={BigNumberDependencies:ig,UnitDependencies:Ex,createStefanBoltzmann:Pn},IS={BigNumberDependencies:ig,UnitDependencies:Ex,createThomsonCrossSection:vn},BS={BigNumberDependencies:ig,UnitDependencies:Ex,createVacuumImpedance:Jt},FS={BigNumberDependencies:ig,createWeakMixingAngle:xn},zS={BigNumberDependencies:ig,UnitDependencies:Ex,createWienDisplacement:On},kS={isIntegerDependencies:hg,typedDependencies:cg,createApplyTransform:oy},US={IndexDependencies:wv,matrixDependencies:Dg,rangeDependencies:Ev,typedDependencies:cg,createColumnTransform:vy},jS={typedDependencies:cg,createFilterTransform:sy},HS={typedDependencies:cg,createForEachTransform:py},qS={IndexDependencies:wv,createIndexTransform:hy},GS={typedDependencies:cg,createMapTransform:cy},VS={largerDependencies:Sv,numericDependencies:Xv,typedDependencies:cg,createMaxTransform:my},WS={addDependencies:lb,divideDependencies:Zb,typedDependencies:cg,createMeanTransform:Sy},XS={numericDependencies:Xv,smallerDependencies:xv,typedDependencies:cg,createMinTransform:yy},YS={bignumberDependencies:Ag,matrixDependencies:Dg,largerDependencies:Sv,largerEqDependencies:Mv,smallerDependencies:xv,smallerEqDependencies:_v,typedDependencies:cg,createRangeTransform:xy},ZS={IndexDependencies:wv,matrixDependencies:Dg,rangeDependencies:Ev,typedDependencies:cg,createRowTransform:wy},$S={matrixDependencies:Dg,typedDependencies:cg,createSubsetTransform:dy},JS={isIntegerDependencies:hg,matrixDependencies:Dg,typedDependencies:cg,createConcatTransform:fy},QS={bignumberDependencies:Ag,matrixDependencies:Dg,numberDependencies:Mg,subtractDependencies:ov,typedDependencies:cg,createDiffTransform:by},KS={sqrtDependencies:rv,typedDependencies:cg,varianceDependencies:nw,createStdTransform:_y},eM={addDependencies:lb,numericDependencies:Xv,typedDependencies:cg,createSumTransform:gy},tM={addDependencies:lb,applyDependencies:Lg,divideDependencies:Zb,isNaNDependencies:xg,multiplyDependencies:ev,subtractDependencies:ov,typedDependencies:cg,createVarianceTransform:My},nM=r,rM=n(67),iM=n.n(rM);function oM(e){return(oM="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);})(e);}function aM(e,t,n,r){function i(t,i,a){var s;if(a.wrap&&"function"==typeof i&&(i=function(e){var t=function t(){for(var t=[],r=0,i=arguments.length;r<i;r++){var o=arguments[r];t[r]=o&&o.valueOf();}return e.apply(n,t);};e.transform&&(t.transform=e.transform);return t;}(i)),"function"==typeof(s=i)&&"string"==typeof s.signature&&(i=e(t,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;}({},i.signature,i))),f(n[t])&&f(i))return i=a.override?e(t,i.signatures):e(n[t],i),n[t]=i,delete r[t],o(t,i),void n.emit("import",t,function(){return i;});if(void 0===n[t]||a.override)return n[t]=i,delete r[t],o(t,i),void n.emit("import",t,function(){return i;});if(!a.silent)throw new Error('Cannot import "'+t+'": already exists');}function o(e,t){t&&"function"==typeof t.transform?(n.expression.transform[e]=t.transform,m(e)&&(n.expression.mathWithTransform[e]=t.transform)):(delete n.expression.transform[e],m(e)&&(n.expression.mathWithTransform[e]=t));}function a(e){delete n.expression.transform[e],m(e)?n.expression.mathWithTransform[e]=n[e]:delete n.expression.mathWithTransform[e];}function p(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.fn;if(Ke(o,"."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(o));var s=g(t)?n.expression.transform:n,u=(o in n.expression.transform),c=Q(s,o)?s[o]:void 0,l=function l(){var r={};t.dependencies.map(nt).forEach(function(e){if(Ke(e,"."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(e));"math"===e?r.math=n:"mathWithTransform"===e?r.mathWithTransform=n.expression.mathWithTransform:"classes"===e?r.classes=n:r[e]=n[e];});var a=t(r);if(a&&"function"==typeof a.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(void 0===c||i.override)return a;if(f(c)&&f(a))return e(c,a);if(i.silent)return c;throw new Error('Cannot import "'+o+'": already exists');};t.meta&&!1===t.meta.lazy?(s[o]=l(),c&&u?a(o):(g(t)||y(t))&&J(n.expression.mathWithTransform,o,function(){return s[o];})):(J(s,o,l),c&&u?a(o):(g(t)||y(t))&&J(n.expression.mathWithTransform,o,function(){return s[o];})),r[o]=t,n.emit("import",o,l);}function d(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||l(e)||u(e)||s(e)||c(e)||h(e)||Array.isArray(e);}function f(e){return"function"==typeof e&&"object"===oM(e.signatures);}function m(e){return!Q(v,e);}function y(e){return!(-1!==e.fn.indexOf(".")||Q(v,e.fn)||e.meta&&e.meta.isClass);}function g(e){return void 0!==e&&void 0!==e.meta&&!0===e.meta.isTransformFunction||!1;}var v={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function(e,t){var n=arguments.length;if(1!==n&&2!==n)throw new xs("import",n,1,2);function r(e,n,i){if(Array.isArray(n))n.forEach(function(t){return r(e,t);});else if("object"===oM(n))for(var o in n){Q(n,o)&&r(e,n[o],o);}else if(tt(n)||void 0!==i){var a=tt(n)?g(n)?n.fn+".transform":n.fn:i;if(Q(e,a)&&e[a]!==n&&!t.silent)throw new Error('Cannot import "'+a+'" twice');e[a]=n;}else if(!t.silent)throw new TypeError("Factory, Object, or Array expected");}t||(t={});var o={};for(var a in r(o,e),o){if(Q(o,a)){var s=o[a];if(tt(s))p(s,t);else if(d(s))i(a,s,t);else if(!t.silent)throw new TypeError("Factory, Object, or Array expected");}}};}function sM(){return(sM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}}return e;}).apply(this,arguments);}function uM(e,t){var n=sM({},i,t);if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r,o,G=(r={isNumber:a,isComplex:u,isBigNumber:s,isFraction:c,isUnit:l,isString:p,isArray:d,isMatrix:h,isCollection:f,isDenseMatrix:m,isSparseMatrix:y,isRange:g,isIndex:v,isBoolean:x,isResultSet:b,isHelp:w,isFunction:S,isDate:M,isRegExp:_,isObject:E,isNull:A,isUndefined:T,isAccessorNode:N,isArrayNode:D,isAssignmentNode:C,isBlockNode:R,isConditionalNode:P,isConstantNode:O,isFunctionAssignmentNode:L,isFunctionNode:I,isIndexNode:B,isNode:F,isObjectNode:z,isOperatorNode:k,isParenthesisNode:U,isRangeNode:j,isSymbolNode:H,isChain:q},o=new iM.a(),r.on=o.on.bind(o),r.off=o.off.bind(o),r.once=o.once.bind(o),r.emit=o.emit.bind(o),r);G.config=ne(n,G.emit),G.expression={transform:{},mathWithTransform:{config:G.config}};var V={};var W=aM(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n];}return G.typed.apply(G.typed,t);},0,G,V);return G["import"]=W,G.on("config",function(){K(V).forEach(function(e){e&&e.meta&&e.meta.recreateOnConfigChange&&W(e,{override:!0});});}),G.create=uM.bind(null,e),G.factory=et,G["import"](K($(e))),G.ArgumentsError=xs,G.DimensionError=Ie,G.IndexError=Be,G;}},function(e,t,n){"use strict";var _Ch;n.r(t);var r={};n.r(r),n.d(r,"ACESFilmicToneMapping",function(){return re;}),n.d(r,"AddEquation",function(){return A;}),n.d(r,"AddOperation",function(){return Q;}),n.d(r,"AdditiveAnimationBlendMode",function(){return Xt;}),n.d(r,"AdditiveBlending",function(){return S;}),n.d(r,"AlphaFormat",function(){return Fe;}),n.d(r,"AlwaysDepth",function(){return q;}),n.d(r,"AlwaysStencilFunc",function(){return En;}),n.d(r,"AmbientLight",function(){return Lp;}),n.d(r,"AmbientLightProbe",function(){return nd;}),n.d(r,"AnimationClip",function(){return jl;}),n.d(r,"AnimationLoader",function(){return Zl;}),n.d(r,"AnimationMixer",function(){return Od;}),n.d(r,"AnimationObjectGroup",function(){return Rd;}),n.d(r,"AnimationUtils",function(){return Nl;}),n.d(r,"ArcCurve",function(){return rp;}),n.d(r,"ArrayCamera",function(){return Rs;}),n.d(r,"ArrowHelper",function(){return Sh;}),n.d(r,"Audio",function(){return hd;}),n.d(r,"AudioAnalyser",function(){return xd;}),n.d(r,"AudioContext",function(){return Kp;}),n.d(r,"AudioListener",function(){return dd;}),n.d(r,"AudioLoader",function(){return ed;}),n.d(r,"AxesHelper",function(){return Mh;}),n.d(r,"AxisHelper",function(){return _f;}),n.d(r,"BackSide",function(){return y;}),n.d(r,"BasicDepthPacking",function(){return an;}),n.d(r,"BasicShadowMap",function(){return p;}),n.d(r,"BinaryTextureLoader",function(){return Df;}),n.d(r,"Bone",function(){return mu;}),n.d(r,"BooleanKeyframeTrack",function(){return Ll;}),n.d(r,"BoundingBoxHelper",function(){return Ef;}),n.d(r,"Box2",function(){return qd;}),n.d(r,"Box3",function(){return tr;}),n.d(r,"Box3Helper",function(){return gh;}),n.d(r,"BoxBufferGeometry",function(){return yo;}),n.d(r,"BoxGeometry",function(){return Ju;}),n.d(r,"BoxHelper",function(){return yh;}),n.d(r,"BufferAttribute",function(){return Ai;}),n.d(r,"BufferGeometry",function(){return Yi;}),n.d(r,"BufferGeometryLoader",function(){return Hp;}),n.d(r,"ByteType",function(){return Ae;}),n.d(r,"Cache",function(){return ql;}),n.d(r,"Camera",function(){return wo;}),n.d(r,"CameraHelper",function(){return hh;}),n.d(r,"CanvasRenderer",function(){return Pf;}),n.d(r,"CanvasTexture",function(){return Gu;}),n.d(r,"CatmullRomCurve3",function(){return cp;}),n.d(r,"CineonToneMapping",function(){return ne;}),n.d(r,"CircleBufferGeometry",function(){return Qu;}),n.d(r,"CircleGeometry",function(){return Ku;}),n.d(r,"ClampToEdgeWrapping",function(){return he;}),n.d(r,"Clock",function(){return ad;}),n.d(r,"ClosedSplineCurve3",function(){return wf;}),n.d(r,"Color",function(){return xi;}),n.d(r,"ColorKeyframeTrack",function(){return Il;}),n.d(r,"CompressedTexture",function(){return qu;}),n.d(r,"CompressedTextureLoader",function(){return $l;}),n.d(r,"ConeBufferGeometry",function(){return rc;}),n.d(r,"ConeGeometry",function(){return nc;}),n.d(r,"CubeCamera",function(){return Mo;}),n.d(r,"CubeGeometry",function(){return Ju;}),n.d(r,"CubeReflectionMapping",function(){return ae;}),n.d(r,"CubeRefractionMapping",function(){return se;}),n.d(r,"CubeTexture",function(){return _o;}),n.d(r,"CubeTextureLoader",function(){return Ql;}),n.d(r,"CubeUVReflectionMapping",function(){return le;}),n.d(r,"CubeUVRefractionMapping",function(){return pe;}),n.d(r,"CubicBezierCurve",function(){return hp;}),n.d(r,"CubicBezierCurve3",function(){return fp;}),n.d(r,"CubicInterpolant",function(){return Cl;}),n.d(r,"CullFaceBack",function(){return u;}),n.d(r,"CullFaceFront",function(){return c;}),n.d(r,"CullFaceFrontBack",function(){return l;}),n.d(r,"CullFaceNone",function(){return s;}),n.d(r,"Curve",function(){return tp;}),n.d(r,"CurvePath",function(){return wp;}),n.d(r,"CustomBlending",function(){return E;}),n.d(r,"CustomToneMapping",function(){return ie;}),n.d(r,"CylinderBufferGeometry",function(){return ec;}),n.d(r,"CylinderGeometry",function(){return tc;}),n.d(r,"Cylindrical",function(){return jd;}),n.d(r,"DataTexture",function(){return Ao;}),n.d(r,"DataTexture2DArray",function(){return $o;}),n.d(r,"DataTexture3D",function(){return Jo;}),n.d(r,"DataTextureLoader",function(){return Kl;}),n.d(r,"DataUtils",function(){return Ah;}),n.d(r,"DecrementStencilOp",function(){return fn;}),n.d(r,"DecrementWrapStencilOp",function(){return yn;}),n.d(r,"DefaultLoadingManager",function(){return Vl;}),n.d(r,"DepthFormat",function(){return qe;}),n.d(r,"DepthStencilFormat",function(){return Ge;}),n.d(r,"DepthTexture",function(){return Vu;}),n.d(r,"DirectionalLight",function(){return Op;}),n.d(r,"DirectionalLightHelper",function(){return lh;}),n.d(r,"DiscreteInterpolant",function(){return Pl;}),n.d(r,"DodecahedronBufferGeometry",function(){return oc;}),n.d(r,"DodecahedronGeometry",function(){return ac;}),n.d(r,"DoubleSide",function(){return g;}),n.d(r,"DstAlphaFactor",function(){return F;}),n.d(r,"DstColorFactor",function(){return k;}),n.d(r,"DynamicBufferAttribute",function(){return pf;}),n.d(r,"DynamicCopyUsage",function(){return On;}),n.d(r,"DynamicDrawUsage",function(){return Tn;}),n.d(r,"DynamicReadUsage",function(){return Cn;}),n.d(r,"EdgesGeometry",function(){return pc;}),n.d(r,"EdgesHelper",function(){return Af;}),n.d(r,"EllipseCurve",function(){return np;}),n.d(r,"EqualDepth",function(){return W;}),n.d(r,"EqualStencilFunc",function(){return bn;}),n.d(r,"EquirectangularReflectionMapping",function(){return ue;}),n.d(r,"EquirectangularRefractionMapping",function(){return ce;}),n.d(r,"Euler",function(){return Lr;}),n.d(r,"EventDispatcher",function(){return Fn;}),n.d(r,"ExtrudeBufferGeometry",function(){return Uc;}),n.d(r,"ExtrudeGeometry",function(){return Hc;}),n.d(r,"Face3",function(){return bi;}),n.d(r,"Face4",function(){return Zh;}),n.d(r,"FaceColors",function(){return Kh;}),n.d(r,"FileLoader",function(){return Yl;}),n.d(r,"FlatShading",function(){return v;}),n.d(r,"Float16BufferAttribute",function(){return Li;}),n.d(r,"Float32Attribute",function(){return xf;}),n.d(r,"Float32BufferAttribute",function(){return Ii;}),n.d(r,"Float64Attribute",function(){return bf;}),n.d(r,"Float64BufferAttribute",function(){return Bi;}),n.d(r,"FloatType",function(){return Re;}),n.d(r,"Fog",function(){return ks;}),n.d(r,"FogExp2",function(){return zs;}),n.d(r,"Font",function(){return Zp;}),n.d(r,"FontLoader",function(){return Jp;}),n.d(r,"FrontSide",function(){return m;}),n.d(r,"Frustum",function(){return Do;}),n.d(r,"GLBufferAttribute",function(){return Bd;}),n.d(r,"GLSL1",function(){return In;}),n.d(r,"GLSL3",function(){return Bn;}),n.d(r,"GammaEncoding",function(){return Kt;}),n.d(r,"Geometry",function(){return $u;}),n.d(r,"GeometryUtils",function(){return Rf;}),n.d(r,"GreaterDepth",function(){return Y;}),n.d(r,"GreaterEqualDepth",function(){return X;}),n.d(r,"GreaterEqualStencilFunc",function(){return _n;}),n.d(r,"GreaterStencilFunc",function(){return Sn;}),n.d(r,"GridHelper",function(){return oh;}),n.d(r,"Group",function(){return Ps;}),n.d(r,"HalfFloatType",function(){return Pe;}),n.d(r,"HemisphereLight",function(){return Ep;}),n.d(r,"HemisphereLightHelper",function(){return ih;}),n.d(r,"HemisphereLightProbe",function(){return td;}),n.d(r,"IcosahedronBufferGeometry",function(){return qc;}),n.d(r,"IcosahedronGeometry",function(){return Gc;}),n.d(r,"ImageBitmapLoader",function(){return Xp;}),n.d(r,"ImageLoader",function(){return Jl;}),n.d(r,"ImageUtils",function(){return Gn;}),n.d(r,"ImmediateRenderObject",function(){return Xd;}),n.d(r,"IncrementStencilOp",function(){return hn;}),n.d(r,"IncrementWrapStencilOp",function(){return mn;}),n.d(r,"InstancedBufferAttribute",function(){return jp;}),n.d(r,"InstancedBufferGeometry",function(){return Up;}),n.d(r,"InstancedInterleavedBuffer",function(){return Id;}),n.d(r,"InstancedMesh",function(){return Mu;}),n.d(r,"Int16Attribute",function(){return mf;}),n.d(r,"Int16BufferAttribute",function(){return Ci;}),n.d(r,"Int32Attribute",function(){return gf;}),n.d(r,"Int32BufferAttribute",function(){return Pi;}),n.d(r,"Int8Attribute",function(){return df;}),n.d(r,"Int8BufferAttribute",function(){return Ti;}),n.d(r,"IntType",function(){return De;}),n.d(r,"InterleavedBuffer",function(){return js;}),n.d(r,"InterleavedBufferAttribute",function(){return qs;}),n.d(r,"Interpolant",function(){return Dl;}),n.d(r,"InterpolateDiscrete",function(){return Ut;}),n.d(r,"InterpolateLinear",function(){return jt;}),n.d(r,"InterpolateSmooth",function(){return Ht;}),n.d(r,"InvertStencilOp",function(){return gn;}),n.d(r,"JSONLoader",function(){return Of;}),n.d(r,"KeepStencilOp",function(){return pn;}),n.d(r,"KeyframeTrack",function(){return Ol;}),n.d(r,"LOD",function(){return uu;}),n.d(r,"LatheBufferGeometry",function(){return Vc;}),n.d(r,"LatheGeometry",function(){return Wc;}),n.d(r,"Layers",function(){return Fr;}),n.d(r,"LensFlare",function(){return If;}),n.d(r,"LessDepth",function(){return G;}),n.d(r,"LessEqualDepth",function(){return V;}),n.d(r,"LessEqualStencilFunc",function(){return wn;}),n.d(r,"LessStencilFunc",function(){return xn;}),n.d(r,"Light",function(){return _p;}),n.d(r,"LightProbe",function(){return Fp;}),n.d(r,"Line",function(){return Cu;}),n.d(r,"Line3",function(){return Wd;}),n.d(r,"LineBasicMaterial",function(){return _u;}),n.d(r,"LineCurve",function(){return mp;}),n.d(r,"LineCurve3",function(){return yp;}),n.d(r,"LineDashedMaterial",function(){return Al;}),n.d(r,"LineLoop",function(){return Lu;}),n.d(r,"LinePieces",function(){return Jh;}),n.d(r,"LineSegments",function(){return Ou;}),n.d(r,"LineStrip",function(){return $h;}),n.d(r,"LinearEncoding",function(){return Jt;}),n.d(r,"LinearFilter",function(){return be;}),n.d(r,"LinearInterpolant",function(){return Rl;}),n.d(r,"LinearMipMapLinearFilter",function(){return _e;}),n.d(r,"LinearMipMapNearestFilter",function(){return Se;}),n.d(r,"LinearMipmapLinearFilter",function(){return Me;}),n.d(r,"LinearMipmapNearestFilter",function(){return we;}),n.d(r,"LinearToneMapping",function(){return ee;}),n.d(r,"Loader",function(){return Wl;}),n.d(r,"LoaderUtils",function(){return kp;}),n.d(r,"LoadingManager",function(){return Gl;}),n.d(r,"LogLuvEncoding",function(){return tn;}),n.d(r,"LoopOnce",function(){return Ft;}),n.d(r,"LoopPingPong",function(){return kt;}),n.d(r,"LoopRepeat",function(){return zt;}),n.d(r,"LuminanceAlphaFormat",function(){return je;}),n.d(r,"LuminanceFormat",function(){return Ue;}),n.d(r,"MOUSE",function(){return o;}),n.d(r,"Material",function(){return Si;}),n.d(r,"MaterialLoader",function(){return zp;}),n.d(r,"Math",function(){return Un;}),n.d(r,"MathUtils",function(){return Un;}),n.d(r,"Matrix3",function(){return Hn;}),n.d(r,"Matrix4",function(){return Ar;}),n.d(r,"MaxEquation",function(){return C;}),n.d(r,"Mesh",function(){return ho;}),n.d(r,"MeshBasicMaterial",function(){return Mi;}),n.d(r,"MeshDepthMaterial",function(){return Es;}),n.d(r,"MeshDistanceMaterial",function(){return As;}),n.d(r,"MeshFaceMaterial",function(){return tf;}),n.d(r,"MeshLambertMaterial",function(){return _l;}),n.d(r,"MeshMatcapMaterial",function(){return El;}),n.d(r,"MeshNormalMaterial",function(){return Ml;}),n.d(r,"MeshPhongMaterial",function(){return wl;}),n.d(r,"MeshPhysicalMaterial",function(){return bl;}),n.d(r,"MeshStandardMaterial",function(){return xl;}),n.d(r,"MeshToonMaterial",function(){return Sl;}),n.d(r,"MinEquation",function(){return D;}),n.d(r,"MirroredRepeatWrapping",function(){return fe;}),n.d(r,"MixOperation",function(){return J;}),n.d(r,"MultiMaterial",function(){return nf;}),n.d(r,"MultiplyBlending",function(){return _;}),n.d(r,"MultiplyOperation",function(){return $;}),n.d(r,"NearestFilter",function(){return me;}),n.d(r,"NearestMipMapLinearFilter",function(){return xe;}),n.d(r,"NearestMipMapNearestFilter",function(){return ge;}),n.d(r,"NearestMipmapLinearFilter",function(){return ve;}),n.d(r,"NearestMipmapNearestFilter",function(){return ye;}),n.d(r,"NeverDepth",function(){return H;}),n.d(r,"NeverStencilFunc",function(){return vn;}),n.d(r,"NoBlending",function(){return b;}),n.d(r,"NoColors",function(){return Qh;}),n.d(r,"NoToneMapping",function(){return K;}),n.d(r,"NormalAnimationBlendMode",function(){return Wt;}),n.d(r,"NormalBlending",function(){return w;}),n.d(r,"NotEqualDepth",function(){return Z;}),n.d(r,"NotEqualStencilFunc",function(){return Mn;}),n.d(r,"NumberKeyframeTrack",function(){return Bl;}),n.d(r,"Object3D",function(){return Jr;}),n.d(r,"ObjectLoader",function(){return qp;}),n.d(r,"ObjectSpaceNormalMap",function(){return cn;}),n.d(r,"OctahedronBufferGeometry",function(){return Xc;}),n.d(r,"OctahedronGeometry",function(){return Yc;}),n.d(r,"OneFactor",function(){return P;}),n.d(r,"OneMinusDstAlphaFactor",function(){return z;}),n.d(r,"OneMinusDstColorFactor",function(){return U;}),n.d(r,"OneMinusSrcAlphaFactor",function(){return B;}),n.d(r,"OneMinusSrcColorFactor",function(){return L;}),n.d(r,"OrthographicCamera",function(){return Rp;}),n.d(r,"PCFShadowMap",function(){return d;}),n.d(r,"PCFSoftShadowMap",function(){return h;}),n.d(r,"PMREMGenerator",function(){return Uh;}),n.d(r,"ParametricBufferGeometry",function(){return Zc;}),n.d(r,"ParametricGeometry",function(){return $c;}),n.d(r,"Particle",function(){return of;}),n.d(r,"ParticleBasicMaterial",function(){return uf;}),n.d(r,"ParticleSystem",function(){return af;}),n.d(r,"ParticleSystemMaterial",function(){return cf;}),n.d(r,"Path",function(){return Sp;}),n.d(r,"PerspectiveCamera",function(){return So;}),n.d(r,"Plane",function(){return ti;}),n.d(r,"PlaneBufferGeometry",function(){return Po;}),n.d(r,"PlaneGeometry",function(){return Jc;}),n.d(r,"PlaneHelper",function(){return vh;}),n.d(r,"PointCloud",function(){return rf;}),n.d(r,"PointCloudMaterial",function(){return sf;}),n.d(r,"PointLight",function(){return Cp;}),n.d(r,"PointLightHelper",function(){return eh;}),n.d(r,"Points",function(){return Uu;}),n.d(r,"PointsMaterial",function(){return Iu;}),n.d(r,"PolarGridHelper",function(){return ah;}),n.d(r,"PolyhedronBufferGeometry",function(){return ic;}),n.d(r,"PolyhedronGeometry",function(){return Qc;}),n.d(r,"PositionalAudio",function(){return vd;}),n.d(r,"PropertyBinding",function(){return Cd;}),n.d(r,"PropertyMixer",function(){return bd;}),n.d(r,"QuadraticBezierCurve",function(){return gp;}),n.d(r,"QuadraticBezierCurve3",function(){return vp;}),n.d(r,"Quaternion",function(){return Jn;}),n.d(r,"QuaternionKeyframeTrack",function(){return zl;}),n.d(r,"QuaternionLinearInterpolant",function(){return Fl;}),n.d(r,"REVISION",function(){return i;}),n.d(r,"RGBADepthPacking",function(){return sn;}),n.d(r,"RGBAFormat",function(){return ke;}),n.d(r,"RGBAIntegerFormat",function(){return $e;}),n.d(r,"RGBA_ASTC_10x10_Format",function(){return xt;}),n.d(r,"RGBA_ASTC_10x5_Format",function(){return yt;}),n.d(r,"RGBA_ASTC_10x6_Format",function(){return gt;}),n.d(r,"RGBA_ASTC_10x8_Format",function(){return vt;}),n.d(r,"RGBA_ASTC_12x10_Format",function(){return bt;}),n.d(r,"RGBA_ASTC_12x12_Format",function(){return wt;}),n.d(r,"RGBA_ASTC_4x4_Format",function(){return ut;}),n.d(r,"RGBA_ASTC_5x4_Format",function(){return ct;}),n.d(r,"RGBA_ASTC_5x5_Format",function(){return lt;}),n.d(r,"RGBA_ASTC_6x5_Format",function(){return pt;}),n.d(r,"RGBA_ASTC_6x6_Format",function(){return dt;}),n.d(r,"RGBA_ASTC_8x5_Format",function(){return ht;}),n.d(r,"RGBA_ASTC_8x6_Format",function(){return ft;}),n.d(r,"RGBA_ASTC_8x8_Format",function(){return mt;}),n.d(r,"RGBA_BPTC_Format",function(){return St;}),n.d(r,"RGBA_ETC2_EAC_Format",function(){return st;}),n.d(r,"RGBA_PVRTC_2BPPV1_Format",function(){return it;}),n.d(r,"RGBA_PVRTC_4BPPV1_Format",function(){return rt;}),n.d(r,"RGBA_S3TC_DXT1_Format",function(){return Qe;}),n.d(r,"RGBA_S3TC_DXT3_Format",function(){return Ke;}),n.d(r,"RGBA_S3TC_DXT5_Format",function(){return et;}),n.d(r,"RGBDEncoding",function(){return on;}),n.d(r,"RGBEEncoding",function(){return en;}),n.d(r,"RGBEFormat",function(){return He;}),n.d(r,"RGBFormat",function(){return ze;}),n.d(r,"RGBIntegerFormat",function(){return Ze;}),n.d(r,"RGBM16Encoding",function(){return rn;}),n.d(r,"RGBM7Encoding",function(){return nn;}),n.d(r,"RGB_ETC1_Format",function(){return ot;}),n.d(r,"RGB_ETC2_Format",function(){return at;}),n.d(r,"RGB_PVRTC_2BPPV1_Format",function(){return nt;}),n.d(r,"RGB_PVRTC_4BPPV1_Format",function(){return tt;}),n.d(r,"RGB_S3TC_DXT1_Format",function(){return Je;}),n.d(r,"RGFormat",function(){return Xe;}),n.d(r,"RGIntegerFormat",function(){return Ye;}),n.d(r,"RawShaderMaterial",function(){return vl;}),n.d(r,"Ray",function(){return Er;}),n.d(r,"Raycaster",function(){return Fd;}),n.d(r,"RectAreaLight",function(){return Ip;}),n.d(r,"RedFormat",function(){return Ve;}),n.d(r,"RedIntegerFormat",function(){return We;}),n.d(r,"ReinhardToneMapping",function(){return te;}),n.d(r,"RepeatWrapping",function(){return de;}),n.d(r,"ReplaceStencilOp",function(){return dn;}),n.d(r,"ReverseSubtractEquation",function(){return N;}),n.d(r,"RingBufferGeometry",function(){return Kc;}),n.d(r,"RingGeometry",function(){return el;}),n.d(r,"SRGB8_ALPHA8_ASTC_10x10_Format",function(){return Lt;}),n.d(r,"SRGB8_ALPHA8_ASTC_10x5_Format",function(){return Rt;}),n.d(r,"SRGB8_ALPHA8_ASTC_10x6_Format",function(){return Pt;}),n.d(r,"SRGB8_ALPHA8_ASTC_10x8_Format",function(){return Ot;}),n.d(r,"SRGB8_ALPHA8_ASTC_12x10_Format",function(){return It;}),n.d(r,"SRGB8_ALPHA8_ASTC_12x12_Format",function(){return Bt;}),n.d(r,"SRGB8_ALPHA8_ASTC_4x4_Format",function(){return Mt;}),n.d(r,"SRGB8_ALPHA8_ASTC_5x4_Format",function(){return _t;}),n.d(r,"SRGB8_ALPHA8_ASTC_5x5_Format",function(){return Et;}),n.d(r,"SRGB8_ALPHA8_ASTC_6x5_Format",function(){return At;}),n.d(r,"SRGB8_ALPHA8_ASTC_6x6_Format",function(){return Tt;}),n.d(r,"SRGB8_ALPHA8_ASTC_8x5_Format",function(){return Nt;}),n.d(r,"SRGB8_ALPHA8_ASTC_8x6_Format",function(){return Dt;}),n.d(r,"SRGB8_ALPHA8_ASTC_8x8_Format",function(){return Ct;}),n.d(r,"Scene",function(){return Us;}),n.d(r,"SceneUtils",function(){return Lf;}),n.d(r,"ShaderChunk",function(){return Oo;}),n.d(r,"ShaderLib",function(){return Io;}),n.d(r,"ShaderMaterial",function(){return bo;}),n.d(r,"ShadowMaterial",function(){return gl;}),n.d(r,"Shape",function(){return Mp;}),n.d(r,"ShapeBufferGeometry",function(){return tl;}),n.d(r,"ShapeGeometry",function(){return nl;}),n.d(r,"ShapePath",function(){return Yp;}),n.d(r,"ShapeUtils",function(){return Fc;}),n.d(r,"ShortType",function(){return Te;}),n.d(r,"Skeleton",function(){return vu;}),n.d(r,"SkeletonHelper",function(){return Kd;}),n.d(r,"SkinnedMesh",function(){return fu;}),n.d(r,"SmoothShading",function(){return x;}),n.d(r,"Sphere",function(){return gr;}),n.d(r,"SphereBufferGeometry",function(){return rl;}),n.d(r,"SphereGeometry",function(){return il;}),n.d(r,"Spherical",function(){return Ud;}),n.d(r,"SphericalHarmonics3",function(){return Bp;}),n.d(r,"Spline",function(){return Mf;}),n.d(r,"SplineCurve",function(){return xp;}),n.d(r,"SplineCurve3",function(){return Sf;}),n.d(r,"SpotLight",function(){return Np;}),n.d(r,"SpotLightHelper",function(){return Zd;}),n.d(r,"Sprite",function(){return iu;}),n.d(r,"SpriteMaterial",function(){return Gs;}),n.d(r,"SrcAlphaFactor",function(){return I;}),n.d(r,"SrcAlphaSaturateFactor",function(){return j;}),n.d(r,"SrcColorFactor",function(){return O;}),n.d(r,"StaticCopyUsage",function(){return Pn;}),n.d(r,"StaticDrawUsage",function(){return An;}),n.d(r,"StaticReadUsage",function(){return Dn;}),n.d(r,"StereoCamera",function(){return od;}),n.d(r,"StreamCopyUsage",function(){return Ln;}),n.d(r,"StreamDrawUsage",function(){return Nn;}),n.d(r,"StreamReadUsage",function(){return Rn;}),n.d(r,"StringKeyframeTrack",function(){return kl;}),n.d(r,"SubtractEquation",function(){return T;}),n.d(r,"SubtractiveBlending",function(){return M;}),n.d(r,"TOUCH",function(){return a;}),n.d(r,"TangentSpaceNormalMap",function(){return un;}),n.d(r,"TetrahedronBufferGeometry",function(){return ol;}),n.d(r,"TetrahedronGeometry",function(){return al;}),n.d(r,"TextBufferGeometry",function(){return sl;}),n.d(r,"TextGeometry",function(){return ul;}),n.d(r,"Texture",function(){return Wn;}),n.d(r,"TextureLoader",function(){return ep;}),n.d(r,"TorusBufferGeometry",function(){return cl;}),n.d(r,"TorusGeometry",function(){return ll;}),n.d(r,"TorusKnotBufferGeometry",function(){return pl;}),n.d(r,"TorusKnotGeometry",function(){return dl;}),n.d(r,"Triangle",function(){return di;}),n.d(r,"TriangleFanDrawMode",function(){return $t;}),n.d(r,"TriangleStripDrawMode",function(){return Zt;}),n.d(r,"TrianglesDrawMode",function(){return Yt;}),n.d(r,"TubeBufferGeometry",function(){return hl;}),n.d(r,"TubeGeometry",function(){return fl;}),n.d(r,"UVMapping",function(){return oe;}),n.d(r,"Uint16Attribute",function(){return yf;}),n.d(r,"Uint16BufferAttribute",function(){return Ri;}),n.d(r,"Uint32Attribute",function(){return vf;}),n.d(r,"Uint32BufferAttribute",function(){return Oi;}),n.d(r,"Uint8Attribute",function(){return hf;}),n.d(r,"Uint8BufferAttribute",function(){return Ni;}),n.d(r,"Uint8ClampedAttribute",function(){return ff;}),n.d(r,"Uint8ClampedBufferAttribute",function(){return Di;}),n.d(r,"Uniform",function(){return Ld;}),n.d(r,"UniformsLib",function(){return Lo;}),n.d(r,"UniformsUtils",function(){return xo;}),n.d(r,"UnsignedByteType",function(){return Ee;}),n.d(r,"UnsignedInt248Type",function(){return Be;}),n.d(r,"UnsignedIntType",function(){return Ce;}),n.d(r,"UnsignedShort4444Type",function(){return Oe;}),n.d(r,"UnsignedShort5551Type",function(){return Le;}),n.d(r,"UnsignedShort565Type",function(){return Ie;}),n.d(r,"UnsignedShortType",function(){return Ne;}),n.d(r,"VSMShadowMap",function(){return f;}),n.d(r,"Vector2",function(){return jn;}),n.d(r,"Vector3",function(){return Qn;}),n.d(r,"Vector4",function(){return Yn;}),n.d(r,"VectorKeyframeTrack",function(){return Ul;}),n.d(r,"Vertex",function(){return lf;}),n.d(r,"VertexColors",function(){return ef;}),n.d(r,"VideoTexture",function(){return Hu;}),n.d(r,"WebGL1Renderer",function(){return Fs;}),n.d(r,"WebGLCubeRenderTarget",function(){return Eo;}),n.d(r,"WebGLMultisampleRenderTarget",function(){return $n;}),n.d(r,"WebGLRenderTarget",function(){return Zn;}),n.d(r,"WebGLRenderTargetCube",function(){return Cf;}),n.d(r,"WebGLRenderer",function(){return Bs;}),n.d(r,"WebGLUtils",function(){return Cs;}),n.d(r,"WireframeGeometry",function(){return ml;}),n.d(r,"WireframeHelper",function(){return Tf;}),n.d(r,"WrapAroundEnding",function(){return Vt;}),n.d(r,"XHRLoader",function(){return Nf;}),n.d(r,"ZeroCurvatureEnding",function(){return qt;}),n.d(r,"ZeroFactor",function(){return R;}),n.d(r,"ZeroSlopeEnding",function(){return Gt;}),n.d(r,"ZeroStencilOp",function(){return ln;}),n.d(r,"sRGBEncoding",function(){return Qt;});n(164);var i="124",o={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,u=1,c=2,l=3,p=0,d=1,h=2,f=3,m=0,y=1,g=2,v=1,x=2,b=0,w=1,S=2,M=3,_=4,E=5,A=100,T=101,N=102,D=103,C=104,R=200,P=201,O=202,L=203,I=204,B=205,F=206,z=207,k=208,U=209,j=210,H=0,q=1,G=2,V=3,W=4,X=5,Y=6,Z=7,$=0,J=1,Q=2,K=0,ee=1,te=2,ne=3,re=4,ie=5,oe=300,ae=301,se=302,ue=303,ce=304,le=306,pe=307,de=1e3,he=1001,fe=1002,me=1003,ye=1004,ge=1004,ve=1005,xe=1005,be=1006,we=1007,Se=1007,Me=1008,_e=1008,Ee=1009,Ae=1010,Te=1011,Ne=1012,De=1013,Ce=1014,Re=1015,Pe=1016,Oe=1017,Le=1018,Ie=1019,Be=1020,Fe=1021,ze=1022,ke=1023,Ue=1024,je=1025,He=ke,qe=1026,Ge=1027,Ve=1028,We=1029,Xe=1030,Ye=1031,Ze=1032,$e=1033,Je=33776,Qe=33777,Ke=33778,et=33779,tt=35840,nt=35841,rt=35842,it=35843,ot=36196,at=37492,st=37496,ut=37808,ct=37809,lt=37810,pt=37811,dt=37812,ht=37813,ft=37814,mt=37815,yt=37816,gt=37817,vt=37818,xt=37819,bt=37820,wt=37821,St=36492,Mt=37840,_t=37841,Et=37842,At=37843,Tt=37844,Nt=37845,Dt=37846,Ct=37847,Rt=37848,Pt=37849,Ot=37850,Lt=37851,It=37852,Bt=37853,Ft=2200,zt=2201,kt=2202,Ut=2300,jt=2301,Ht=2302,qt=2400,Gt=2401,Vt=2402,Wt=2500,Xt=2501,Yt=0,Zt=1,$t=2,Jt=3e3,Qt=3001,Kt=3007,en=3002,tn=3003,nn=3004,rn=3005,on=3006,an=3200,sn=3201,un=0,cn=1,ln=0,pn=7680,dn=7681,hn=7682,fn=7683,mn=34055,yn=34056,gn=5386,vn=512,xn=513,bn=514,wn=515,Sn=516,Mn=517,_n=518,En=519,An=35044,Tn=35048,Nn=35040,Dn=35045,Cn=35049,Rn=35041,Pn=35046,On=35050,Ln=35042,In="100",Bn="300 es";function Fn(){}Object.assign(Fn.prototype,{addEventListener:function addEventListener(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t);},hasEventListener:function hasEventListener(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t);},removeEventListener:function removeEventListener(e,t){if(void 0===this._listeners)return;var n=this._listeners[e];if(void 0!==n){var _e2=n.indexOf(t);-1!==_e2&&n.splice(_e2,1);}},dispatchEvent:function dispatchEvent(e){if(void 0===this._listeners)return;var t=this._listeners[e.type];if(void 0!==t){e.target=this;var _n2=t.slice(0);for(var _t4=0,_r3=_n2.length;_t4<_r3;_t4++){_n2[_t4].call(this,e);}}}});var zn=[];for(var _e3=0;_e3<256;_e3++){zn[_e3]=(_e3<16?"0":"")+_e3.toString(16);}var kn=1234567;var Un={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function generateUUID(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(zn[255&e]+zn[e>>8&255]+zn[e>>16&255]+zn[e>>24&255]+"-"+zn[255&t]+zn[t>>8&255]+"-"+zn[t>>16&15|64]+zn[t>>24&255]+"-"+zn[63&n|128]+zn[n>>8&255]+"-"+zn[n>>16&255]+zn[n>>24&255]+zn[255&r]+zn[r>>8&255]+zn[r>>16&255]+zn[r>>24&255]).toUpperCase();},clamp:function clamp(e,t,n){return Math.max(t,Math.min(n,e));},euclideanModulo:function euclideanModulo(e,t){return(e%t+t)%t;},mapLinear:function mapLinear(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t);},lerp:function lerp(e,t,n){return(1-n)*e+n*t;},smoothstep:function smoothstep(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e);},smootherstep:function smootherstep(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10);},randInt:function randInt(e,t){return e+Math.floor(Math.random()*(t-e+1));},randFloat:function randFloat(e,t){return e+Math.random()*(t-e);},randFloatSpread:function randFloatSpread(e){return e*(.5-Math.random());},seededRandom:function seededRandom(e){return void 0!==e&&(kn=e%2147483647),kn=16807*kn%2147483647,(kn-1)/2147483646;},degToRad:function degToRad(e){return e*Un.DEG2RAD;},radToDeg:function radToDeg(e){return e*Un.RAD2DEG;},isPowerOfTwo:function isPowerOfTwo(e){return 0==(e&e-1)&&0!==e;},ceilPowerOfTwo:function ceilPowerOfTwo(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2));},floorPowerOfTwo:function floorPowerOfTwo(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2));},setQuaternionFromProperEuler:function setQuaternionFromProperEuler(e,t,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),c=o((t+r)/2),l=a((t+r)/2),p=o((t-r)/2),d=a((t-r)/2),h=o((r-t)/2),f=a((r-t)/2);switch(i){case"XYX":e.set(s*l,u*p,u*d,s*c);break;case"YZY":e.set(u*d,s*l,u*p,s*c);break;case"ZXZ":e.set(u*p,u*d,s*l,s*c);break;case"XZX":e.set(s*l,u*f,u*h,s*c);break;case"YXY":e.set(u*h,s*l,u*f,s*c);break;case"ZYZ":e.set(u*f,u*h,s*l,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i);}}};var jn=/*#__PURE__*/function(){function jn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,jn);Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t;}_createClass(jn,[{key:"set",value:function set(e,t){return this.x=e,this.y=t,this;}},{key:"setScalar",value:function setScalar(e){return this.x=e,this.y=e,this;}},{key:"setX",value:function setX(e){return this.x=e,this;}},{key:"setY",value:function setY(e){return this.y=e,this;}},{key:"setComponent",value:function setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e);}return this;}},{key:"getComponent",value:function getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e);}}},{key:"clone",value:function clone(){return new this.constructor(this.x,this.y);}},{key:"copy",value:function copy(e){return this.x=e.x,this.y=e.y,this;}},{key:"add",value:function add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this);}},{key:"addScalar",value:function addScalar(e){return this.x+=e,this.y+=e,this;}},{key:"addVectors",value:function addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this;}},{key:"addScaledVector",value:function addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this;}},{key:"sub",value:function sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this);}},{key:"subScalar",value:function subScalar(e){return this.x-=e,this.y-=e,this;}},{key:"subVectors",value:function subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this;}},{key:"multiply",value:function multiply(e){return this.x*=e.x,this.y*=e.y,this;}},{key:"multiplyScalar",value:function multiplyScalar(e){return this.x*=e,this.y*=e,this;}},{key:"divide",value:function divide(e){return this.x/=e.x,this.y/=e.y,this;}},{key:"divideScalar",value:function divideScalar(e){return this.multiplyScalar(1/e);}},{key:"applyMatrix3",value:function applyMatrix3(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this;}},{key:"min",value:function min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this;}},{key:"max",value:function max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this;}},{key:"clamp",value:function clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this;}},{key:"clampScalar",value:function clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this;}},{key:"clampLength",value:function clampLength(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)));}},{key:"floor",value:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this;}},{key:"ceil",value:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this;}},{key:"round",value:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this;}},{key:"roundToZero",value:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this;}},{key:"negate",value:function negate(){return this.x=-this.x,this.y=-this.y,this;}},{key:"dot",value:function dot(e){return this.x*e.x+this.y*e.y;}},{key:"cross",value:function cross(e){return this.x*e.y-this.y*e.x;}},{key:"lengthSq",value:function lengthSq(){return this.x*this.x+this.y*this.y;}},{key:"length",value:function length(){return Math.sqrt(this.x*this.x+this.y*this.y);}},{key:"manhattanLength",value:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y);}},{key:"normalize",value:function normalize(){return this.divideScalar(this.length()||1);}},{key:"angle",value:function angle(){return Math.atan2(-this.y,-this.x)+Math.PI;}},{key:"distanceTo",value:function distanceTo(e){return Math.sqrt(this.distanceToSquared(e));}},{key:"distanceToSquared",value:function distanceToSquared(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n;}},{key:"manhattanDistanceTo",value:function manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y);}},{key:"setLength",value:function setLength(e){return this.normalize().multiplyScalar(e);}},{key:"lerp",value:function lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this;}},{key:"lerpVectors",value:function lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this;}},{key:"equals",value:function equals(e){return e.x===this.x&&e.y===this.y;}},{key:"fromArray",value:function fromArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e;}},{key:"fromBufferAttribute",value:function fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this;}},{key:"rotateAround",value:function rotateAround(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this;}},{key:"random",value:function random(){return this.x=Math.random(),this.y=Math.random(),this;}},{key:"width",get:function get(){return this.x;},set:function set(e){this.x=e;}},{key:"height",get:function get(){return this.y;},set:function set(e){this.y=e;}}]);return jn;}();var Hn=/*#__PURE__*/function(){function Hn(){_classCallCheck(this,Hn);Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.");}_createClass(Hn,[{key:"set",value:function set(e,t,n,r,i,o,a,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this;}},{key:"identity",value:function identity(){return this.set(1,0,0,0,1,0,0,0,1),this;}},{key:"clone",value:function clone(){return new this.constructor().fromArray(this.elements);}},{key:"copy",value:function copy(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this;}},{key:"extractBasis",value:function extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this;}},{key:"setFromMatrix4",value:function setFromMatrix4(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this;}},{key:"multiply",value:function multiply(e){return this.multiplyMatrices(this,e);}},{key:"premultiply",value:function premultiply(e){return this.multiplyMatrices(e,this);}},{key:"multiplyMatrices",value:function multiplyMatrices(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],p=n[2],d=n[5],h=n[8],f=r[0],m=r[3],y=r[6],g=r[1],v=r[4],x=r[7],b=r[2],w=r[5],S=r[8];return i[0]=o*f+a*g+s*b,i[3]=o*m+a*v+s*w,i[6]=o*y+a*x+s*S,i[1]=u*f+c*g+l*b,i[4]=u*m+c*v+l*w,i[7]=u*y+c*x+l*S,i[2]=p*f+d*g+h*b,i[5]=p*m+d*v+h*w,i[8]=p*y+d*x+h*S,this;}},{key:"multiplyScalar",value:function multiplyScalar(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this;}},{key:"determinant",value:function determinant(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*i*c+n*a*s+r*i*u-r*o*s;}},{key:"invert",value:function invert(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=c*o-a*u,p=a*s-c*i,d=u*i-o*s,h=t*l+n*p+r*d;if(0===h)return this.set(0,0,0,0,0,0,0,0,0);var f=1/h;return e[0]=l*f,e[1]=(r*u-c*n)*f,e[2]=(a*n-r*o)*f,e[3]=p*f,e[4]=(c*t-r*s)*f,e[5]=(r*i-a*t)*f,e[6]=d*f,e[7]=(n*s-u*t)*f,e[8]=(o*t-n*i)*f,this;}},{key:"transpose",value:function transpose(){var e;var t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this;}},{key:"getNormalMatrix",value:function getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose();}},{key:"transposeIntoArray",value:function transposeIntoArray(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this;}},{key:"setUvTransform",value:function setUvTransform(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1),this;}},{key:"scale",value:function scale(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this;}},{key:"rotate",value:function rotate(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*c,this;}},{key:"translate",value:function translate(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this;}},{key:"equals",value:function equals(e){var t=this.elements,n=e.elements;for(var _e4=0;_e4<9;_e4++){if(t[_e4]!==n[_e4])return!1;}return!0;}},{key:"fromArray",value:function fromArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;for(var _n3=0;_n3<9;_n3++){this.elements[_n3]=e[_n3+t];}return this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e;}}]);return Hn;}();var qn;var Gn={getDataURL:function getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===qn&&(qn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),qn.width=e.width,qn.height=e.height;var _n4=qn.getContext("2d");e instanceof ImageData?_n4.putImageData(e,0,0):_n4.drawImage(e,0,0,e.width,e.height),t=qn;}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png");}};var Vn=0;function Wn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Wn.DEFAULT_IMAGE;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Wn.DEFAULT_MAPPING;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:he;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:he;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:be;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:Me;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:ke;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:Ee;var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:1;var c=arguments.length>9&&arguments[9]!==undefined?arguments[9]:Jt;Object.defineProperty(this,"id",{value:Vn++}),this.uuid=Un.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=s,this.offset=new jn(0,0),this.repeat=new jn(1,1),this.center=new jn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hn(),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null;}function Xn(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Gn.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{});}Wn.DEFAULT_IMAGE=void 0,Wn.DEFAULT_MAPPING=oe,Wn.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Wn,isTexture:!0,updateMatrix:function updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y);},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this;},toJSON:function toJSON(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var _r4=this.image;if(void 0===_r4.uuid&&(_r4.uuid=Un.generateUUID()),!t&&void 0===e.images[_r4.uuid]){var _t5;if(Array.isArray(_r4)){_t5=[];for(var _e5=0,_n5=_r4.length;_e5<_n5;_e5++){_r4[_e5].isDataTexture?_t5.push(Xn(_r4[_e5].image)):_t5.push(Xn(_r4[_e5]));}}else _t5=Xn(_r4);e.images[_r4.uuid]={uuid:_r4.uuid,url:_t5};}n.image=_r4.uuid;}return t||(e.textures[this.uuid]=n),n;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});},transformUv:function transformUv(e){if(this.mapping!==oe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case de:e.x=e.x-Math.floor(e.x);break;case he:e.x=e.x<0?0:1;break;case fe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);}if(e.y<0||e.y>1)switch(this.wrapT){case de:e.y=e.y-Math.floor(e.y);break;case he:e.y=e.y<0?0:1;break;case fe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);}return this.flipY&&(e.y=1-e.y),e;}}),Object.defineProperty(Wn.prototype,"needsUpdate",{set:function set(e){!0===e&&this.version++;}});var Yn=/*#__PURE__*/function(){function Yn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;_classCallCheck(this,Yn);Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=n,this.w=r;}_createClass(Yn,[{key:"set",value:function set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this;}},{key:"setScalar",value:function setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this;}},{key:"setX",value:function setX(e){return this.x=e,this;}},{key:"setY",value:function setY(e){return this.y=e,this;}},{key:"setZ",value:function setZ(e){return this.z=e,this;}},{key:"setW",value:function setW(e){return this.w=e,this;}},{key:"setComponent",value:function setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e);}return this;}},{key:"getComponent",value:function getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e);}}},{key:"clone",value:function clone(){return new this.constructor(this.x,this.y,this.z,this.w);}},{key:"copy",value:function copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this;}},{key:"add",value:function add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this);}},{key:"addScalar",value:function addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this;}},{key:"addVectors",value:function addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this;}},{key:"addScaledVector",value:function addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this;}},{key:"sub",value:function sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this);}},{key:"subScalar",value:function subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this;}},{key:"subVectors",value:function subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this;}},{key:"multiplyScalar",value:function multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this;}},{key:"applyMatrix4",value:function applyMatrix4(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this;}},{key:"divideScalar",value:function divideScalar(e){return this.multiplyScalar(1/e);}},{key:"setAxisAngleFromQuaternion",value:function setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this;}},{key:"setAxisAngleFromRotationMatrix",value:function setAxisAngleFromRotationMatrix(e){var t,n,r,i;var o=e.elements,a=o[0],s=o[4],u=o[8],c=o[1],l=o[5],p=o[9],d=o[2],h=o[6],f=o[10];if(Math.abs(s-c)<.01&&Math.abs(u-d)<.01&&Math.abs(p-h)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+d)<.1&&Math.abs(p+h)<.1&&Math.abs(a+l+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var _e6=(a+1)/2,_o2=(l+1)/2,_m2=(f+1)/2,_y2=(s+c)/4,_g2=(u+d)/4,_v2=(p+h)/4;return _e6>_o2&&_e6>_m2?_e6<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(_e6),r=_y2/n,i=_g2/n):_o2>_m2?_o2<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(_o2),n=_y2/r,i=_v2/r):_m2<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_m2),n=_g2/i,r=_v2/i),this.set(n,r,i,t),this;}var m=Math.sqrt((h-p)*(h-p)+(u-d)*(u-d)+(c-s)*(c-s));return Math.abs(m)<.001&&(m=1),this.x=(h-p)/m,this.y=(u-d)/m,this.z=(c-s)/m,this.w=Math.acos((a+l+f-1)/2),this;}},{key:"min",value:function min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this;}},{key:"max",value:function max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this;}},{key:"clamp",value:function clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this;}},{key:"clampScalar",value:function clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this;}},{key:"clampLength",value:function clampLength(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)));}},{key:"floor",value:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this;}},{key:"ceil",value:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this;}},{key:"round",value:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this;}},{key:"roundToZero",value:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this;}},{key:"negate",value:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this;}},{key:"dot",value:function dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w;}},{key:"lengthSq",value:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;}},{key:"length",value:function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);}},{key:"manhattanLength",value:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w);}},{key:"normalize",value:function normalize(){return this.divideScalar(this.length()||1);}},{key:"setLength",value:function setLength(e){return this.normalize().multiplyScalar(e);}},{key:"lerp",value:function lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this;}},{key:"lerpVectors",value:function lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this;}},{key:"equals",value:function equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w;}},{key:"fromArray",value:function fromArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e;}},{key:"fromBufferAttribute",value:function fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this;}},{key:"random",value:function random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this;}},{key:"width",get:function get(){return this.z;},set:function set(e){this.z=e;}},{key:"height",get:function get(){return this.w;},set:function set(e){this.w=e;}}]);return Yn;}();function Zn(e,t,n){this.width=e,this.height=t,this.scissor=new Yn(0,0,e,t),this.scissorTest=!1,this.viewport=new Yn(0,0,e,t),n=n||{},this.texture=new Wn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:be,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null;}function $n(e,t,n){Zn.call(this,e,t,n),this.samples=4;}Zn.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Zn,isWebGLRenderTarget:!0,setSize:function setSize(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t);},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}}),$n.prototype=Object.assign(Object.create(Zn.prototype),{constructor:$n,isWebGLMultisampleRenderTarget:!0,copy:function copy(e){return Zn.prototype.copy.call(this,e),this.samples=e.samples,this;}});var Jn=/*#__PURE__*/function(){function Jn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;_classCallCheck(this,Jn);Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=n,this._w=r;}_createClass(Jn,[{key:"set",value:function set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this;}},{key:"clone",value:function clone(){return new this.constructor(this._x,this._y,this._z,this._w);}},{key:"copy",value:function copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this;}},{key:"setFromEuler",value:function setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),p=s(n/2),d=s(r/2),h=s(i/2);switch(o){case"XYZ":this._x=p*c*l+u*d*h,this._y=u*d*l-p*c*h,this._z=u*c*h+p*d*l,this._w=u*c*l-p*d*h;break;case"YXZ":this._x=p*c*l+u*d*h,this._y=u*d*l-p*c*h,this._z=u*c*h-p*d*l,this._w=u*c*l+p*d*h;break;case"ZXY":this._x=p*c*l-u*d*h,this._y=u*d*l+p*c*h,this._z=u*c*h+p*d*l,this._w=u*c*l-p*d*h;break;case"ZYX":this._x=p*c*l-u*d*h,this._y=u*d*l+p*c*h,this._z=u*c*h-p*d*l,this._w=u*c*l+p*d*h;break;case"YZX":this._x=p*c*l+u*d*h,this._y=u*d*l+p*c*h,this._z=u*c*h-p*d*l,this._w=u*c*l-p*d*h;break;case"XZY":this._x=p*c*l-u*d*h,this._y=u*d*l-p*c*h,this._z=u*c*h+p*d*l,this._w=u*c*l+p*d*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o);}return!1!==t&&this._onChangeCallback(),this;}},{key:"setFromAxisAngle",value:function setFromAxisAngle(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this;}},{key:"setFromRotationMatrix",value:function setFromRotationMatrix(e){var t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],u=t[2],c=t[6],l=t[10],p=n+a+l;if(p>0){var _e7=.5/Math.sqrt(p+1);this._w=.25/_e7,this._x=(c-s)*_e7,this._y=(i-u)*_e7,this._z=(o-r)*_e7;}else if(n>a&&n>l){var _e8=2*Math.sqrt(1+n-a-l);this._w=(c-s)/_e8,this._x=.25*_e8,this._y=(r+o)/_e8,this._z=(i+u)/_e8;}else if(a>l){var _e9=2*Math.sqrt(1+a-n-l);this._w=(i-u)/_e9,this._x=(r+o)/_e9,this._y=.25*_e9,this._z=(s+c)/_e9;}else{var _e10=2*Math.sqrt(1+l-n-a);this._w=(o-r)/_e10,this._x=(i+u)/_e10,this._y=(s+c)/_e10,this._z=.25*_e10;}return this._onChangeCallback(),this;}},{key:"setFromUnitVectors",value:function setFromUnitVectors(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize();}},{key:"angleTo",value:function angleTo(e){return 2*Math.acos(Math.abs(Un.clamp(this.dot(e),-1,1)));}},{key:"rotateTowards",value:function rotateTowards(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this;}},{key:"identity",value:function identity(){return this.set(0,0,0,1);}},{key:"invert",value:function invert(){return this.conjugate();}},{key:"conjugate",value:function conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this;}},{key:"dot",value:function dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w;}},{key:"lengthSq",value:function lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w;}},{key:"length",value:function length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w);}},{key:"normalize",value:function normalize(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this;}},{key:"multiply",value:function multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e);}},{key:"premultiply",value:function premultiply(e){return this.multiplyQuaternions(e,this);}},{key:"multiplyQuaternions",value:function multiplyQuaternions(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this;}},{key:"slerp",value:function slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w;var a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var _e11=1-t;return this._w=_e11*o+t*this._w,this._x=_e11*n+t*this._x,this._y=_e11*r+t*this._y,this._z=_e11*i+t*this._z,this.normalize(),this._onChangeCallback(),this;}var u=Math.sqrt(s),c=Math.atan2(u,a),l=Math.sin((1-t)*c)/u,p=Math.sin(t*c)/u;return this._w=o*l+this._w*p,this._x=n*l+this._x*p,this._y=r*l+this._y*p,this._z=i*l+this._z*p,this._onChangeCallback(),this;}},{key:"equals",value:function equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w;}},{key:"fromArray",value:function fromArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e;}},{key:"fromBufferAttribute",value:function fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this;}},{key:"_onChange",value:function _onChange(e){return this._onChangeCallback=e,this;}},{key:"_onChangeCallback",value:function _onChangeCallback(){}},{key:"x",get:function get(){return this._x;},set:function set(e){this._x=e,this._onChangeCallback();}},{key:"y",get:function get(){return this._y;},set:function set(e){this._y=e,this._onChangeCallback();}},{key:"z",get:function get(){return this._z;},set:function set(e){this._z=e,this._onChangeCallback();}},{key:"w",get:function get(){return this._w;},set:function set(e){this._w=e,this._onChangeCallback();}}],[{key:"slerp",value:function slerp(e,t,n,r){return n.copy(e).slerp(t,r);}},{key:"slerpFlat",value:function slerpFlat(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3];var p=i[o+0],d=i[o+1],h=i[o+2],f=i[o+3];if(l!==f||s!==p||u!==d||c!==h){var _e12=1-a;var _t6=s*p+u*d+c*h+l*f,_n6=_t6>=0?1:-1,_r5=1-_t6*_t6;if(_r5>Number.EPSILON){var _i3=Math.sqrt(_r5),_o3=Math.atan2(_i3,_t6*_n6);_e12=Math.sin(_e12*_o3)/_i3,a=Math.sin(a*_o3)/_i3;}var _i2=a*_n6;if(s=s*_e12+p*_i2,u=u*_e12+d*_i2,c=c*_e12+h*_i2,l=l*_e12+f*_i2,_e12===1-a){var _e13=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=_e13,u*=_e13,c*=_e13,l*=_e13;}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l;}},{key:"multiplyQuaternionsFlat",value:function multiplyQuaternionsFlat(e,t,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=i[o],p=i[o+1],d=i[o+2],h=i[o+3];return e[t]=a*h+c*l+s*d-u*p,e[t+1]=s*h+c*p+u*l-a*d,e[t+2]=u*h+c*d+a*p-s*l,e[t+3]=c*h-a*l-s*p-u*d,e;}}]);return Jn;}();var Qn=/*#__PURE__*/function(){function Qn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,Qn);Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=n;}_createClass(Qn,[{key:"set",value:function set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this;}},{key:"setScalar",value:function setScalar(e){return this.x=e,this.y=e,this.z=e,this;}},{key:"setX",value:function setX(e){return this.x=e,this;}},{key:"setY",value:function setY(e){return this.y=e,this;}},{key:"setZ",value:function setZ(e){return this.z=e,this;}},{key:"setComponent",value:function setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e);}return this;}},{key:"getComponent",value:function getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e);}}},{key:"clone",value:function clone(){return new this.constructor(this.x,this.y,this.z);}},{key:"copy",value:function copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this;}},{key:"add",value:function add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this);}},{key:"addScalar",value:function addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this;}},{key:"addVectors",value:function addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this;}},{key:"addScaledVector",value:function addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this;}},{key:"sub",value:function sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this);}},{key:"subScalar",value:function subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this;}},{key:"subVectors",value:function subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this;}},{key:"multiply",value:function multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this);}},{key:"multiplyScalar",value:function multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this;}},{key:"multiplyVectors",value:function multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this;}},{key:"applyEuler",value:function applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(er.setFromEuler(e));}},{key:"applyAxisAngle",value:function applyAxisAngle(e,t){return this.applyQuaternion(er.setFromAxisAngle(e,t));}},{key:"applyMatrix3",value:function applyMatrix3(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this;}},{key:"applyNormalMatrix",value:function applyNormalMatrix(e){return this.applyMatrix3(e).normalize();}},{key:"applyMatrix4",value:function applyMatrix4(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this;}},{key:"applyQuaternion",value:function applyQuaternion(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,c=s*n+a*t-i*r,l=s*r+i*n-o*t,p=-i*t-o*n-a*r;return this.x=u*s+p*-i+c*-a-l*-o,this.y=c*s+p*-o+l*-i-u*-a,this.z=l*s+p*-a+u*-o-c*-i,this;}},{key:"project",value:function project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix);}},{key:"unproject",value:function unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld);}},{key:"transformDirection",value:function transformDirection(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize();}},{key:"divide",value:function divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this;}},{key:"divideScalar",value:function divideScalar(e){return this.multiplyScalar(1/e);}},{key:"min",value:function min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this;}},{key:"max",value:function max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this;}},{key:"clamp",value:function clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this;}},{key:"clampScalar",value:function clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this;}},{key:"clampLength",value:function clampLength(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)));}},{key:"floor",value:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this;}},{key:"ceil",value:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this;}},{key:"round",value:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this;}},{key:"roundToZero",value:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this;}},{key:"negate",value:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this;}},{key:"dot",value:function dot(e){return this.x*e.x+this.y*e.y+this.z*e.z;}},{key:"lengthSq",value:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z;}},{key:"length",value:function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);}},{key:"manhattanLength",value:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z);}},{key:"normalize",value:function normalize(){return this.divideScalar(this.length()||1);}},{key:"setLength",value:function setLength(e){return this.normalize().multiplyScalar(e);}},{key:"lerp",value:function lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this;}},{key:"lerpVectors",value:function lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this;}},{key:"cross",value:function cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e);}},{key:"crossVectors",value:function crossVectors(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this;}},{key:"projectOnVector",value:function projectOnVector(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n);}},{key:"projectOnPlane",value:function projectOnPlane(e){return Kn.copy(this).projectOnVector(e),this.sub(Kn);}},{key:"reflect",value:function reflect(e){return this.sub(Kn.copy(e).multiplyScalar(2*this.dot(e)));}},{key:"angleTo",value:function angleTo(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Un.clamp(n,-1,1));}},{key:"distanceTo",value:function distanceTo(e){return Math.sqrt(this.distanceToSquared(e));}},{key:"distanceToSquared",value:function distanceToSquared(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r;}},{key:"manhattanDistanceTo",value:function manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z);}},{key:"setFromSpherical",value:function setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta);}},{key:"setFromSphericalCoords",value:function setFromSphericalCoords(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this;}},{key:"setFromCylindrical",value:function setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y);}},{key:"setFromCylindricalCoords",value:function setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this;}},{key:"setFromMatrixPosition",value:function setFromMatrixPosition(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this;}},{key:"setFromMatrixScale",value:function setFromMatrixScale(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this;}},{key:"setFromMatrixColumn",value:function setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t);}},{key:"setFromMatrix3Column",value:function setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t);}},{key:"equals",value:function equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z;}},{key:"fromArray",value:function fromArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e;}},{key:"fromBufferAttribute",value:function fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this;}},{key:"random",value:function random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this;}}]);return Qn;}();var Kn=new Qn(),er=new Jn();var tr=/*#__PURE__*/function(){function tr(e,t){_classCallCheck(this,tr);Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==e?e:new Qn(1/0,1/0,1/0),this.max=void 0!==t?t:new Qn(-1/0,-1/0,-1/0);}_createClass(tr,[{key:"set",value:function set(e,t){return this.min.copy(e),this.max.copy(t),this;}},{key:"setFromArray",value:function setFromArray(e){var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(var _s2=0,_u2=e.length;_s2<_u2;_s2+=3){var _u3=e[_s2],_c2=e[_s2+1],_l2=e[_s2+2];_u3<t&&(t=_u3),_c2<n&&(n=_c2),_l2<r&&(r=_l2),_u3>i&&(i=_u3),_c2>o&&(o=_c2),_l2>a&&(a=_l2);}return this.min.set(t,n,r),this.max.set(i,o,a),this;}},{key:"setFromBufferAttribute",value:function setFromBufferAttribute(e){var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(var _s3=0,_u4=e.count;_s3<_u4;_s3++){var _u5=e.getX(_s3),_c3=e.getY(_s3),_l3=e.getZ(_s3);_u5<t&&(t=_u5),_c3<n&&(n=_c3),_l3<r&&(r=_l3),_u5>i&&(i=_u5),_c3>o&&(o=_c3),_l3>a&&(a=_l3);}return this.min.set(t,n,r),this.max.set(i,o,a),this;}},{key:"setFromPoints",value:function setFromPoints(e){this.makeEmpty();for(var _t7=0,_n7=e.length;_t7<_n7;_t7++){this.expandByPoint(e[_t7]);}return this;}},{key:"setFromCenterAndSize",value:function setFromCenterAndSize(e,t){var n=ir.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this;}},{key:"setFromObject",value:function setFromObject(e){return this.makeEmpty(),this.expandByObject(e);}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.min.copy(e.min),this.max.copy(e.max),this;}},{key:"makeEmpty",value:function makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this;}},{key:"isEmpty",value:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z;}},{key:"getCenter",value:function getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Qn()),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5);}},{key:"getSize",value:function getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Qn()),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min);}},{key:"expandByPoint",value:function expandByPoint(e){return this.min.min(e),this.max.max(e),this;}},{key:"expandByVector",value:function expandByVector(e){return this.min.sub(e),this.max.add(e),this;}},{key:"expandByScalar",value:function expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this;}},{key:"expandByObject",value:function expandByObject(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),or.copy(t.boundingBox),or.applyMatrix4(e.matrixWorld),this.union(or));var n=e.children;for(var _e14=0,_t8=n.length;_e14<_t8;_e14++){this.expandByObject(n[_e14]);}return this;}},{key:"containsPoint",value:function containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z);}},{key:"containsBox",value:function containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z;}},{key:"getParameter",value:function getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Qn()),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z));}},{key:"intersectsBox",value:function intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z);}},{key:"intersectsSphere",value:function intersectsSphere(e){return this.clampPoint(e.center,ir),ir.distanceToSquared(e.center)<=e.radius*e.radius;}},{key:"intersectsPlane",value:function intersectsPlane(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant;}},{key:"intersectsTriangle",value:function intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dr),hr.subVectors(this.max,dr),ar.subVectors(e.a,dr),sr.subVectors(e.b,dr),ur.subVectors(e.c,dr),cr.subVectors(sr,ar),lr.subVectors(ur,sr),pr.subVectors(ar,ur);var t=[0,-cr.z,cr.y,0,-lr.z,lr.y,0,-pr.z,pr.y,cr.z,0,-cr.x,lr.z,0,-lr.x,pr.z,0,-pr.x,-cr.y,cr.x,0,-lr.y,lr.x,0,-pr.y,pr.x,0];return!!nr(t,ar,sr,ur,hr)&&(t=[1,0,0,0,1,0,0,0,1],!!nr(t,ar,sr,ur,hr)&&(fr.crossVectors(cr,lr),t=[fr.x,fr.y,fr.z],nr(t,ar,sr,ur,hr)));}},{key:"clampPoint",value:function clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Qn()),t.copy(e).clamp(this.min,this.max);}},{key:"distanceToPoint",value:function distanceToPoint(e){return ir.copy(e).clamp(this.min,this.max).sub(e).length();}},{key:"getBoundingSphere",value:function getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(ir).length(),e;}},{key:"intersect",value:function intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this;}},{key:"union",value:function union(e){return this.min.min(e.min),this.max.max(e.max),this;}},{key:"applyMatrix4",value:function applyMatrix4(e){return this.isEmpty()||(rr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rr)),this;}},{key:"translate",value:function translate(e){return this.min.add(e),this.max.add(e),this;}},{key:"equals",value:function equals(e){return e.min.equals(this.min)&&e.max.equals(this.max);}}]);return tr;}();function nr(e,t,n,r,i){for(var _o4=0,_a2=e.length-3;_o4<=_a2;_o4+=3){mr.fromArray(e,_o4);var _a3=i.x*Math.abs(mr.x)+i.y*Math.abs(mr.y)+i.z*Math.abs(mr.z),_s4=t.dot(mr),_u6=n.dot(mr),_c4=r.dot(mr);if(Math.max(-Math.max(_s4,_u6,_c4),Math.min(_s4,_u6,_c4))>_a3)return!1;}return!0;}var rr=[new Qn(),new Qn(),new Qn(),new Qn(),new Qn(),new Qn(),new Qn(),new Qn()],ir=new Qn(),or=new tr(),ar=new Qn(),sr=new Qn(),ur=new Qn(),cr=new Qn(),lr=new Qn(),pr=new Qn(),dr=new Qn(),hr=new Qn(),fr=new Qn(),mr=new Qn(),yr=new tr();var gr=/*#__PURE__*/function(){function gr(e,t){_classCallCheck(this,gr);this.center=void 0!==e?e:new Qn(),this.radius=void 0!==t?t:-1;}_createClass(gr,[{key:"set",value:function set(e,t){return this.center.copy(e),this.radius=t,this;}},{key:"setFromPoints",value:function setFromPoints(e,t){var n=this.center;void 0!==t?n.copy(t):yr.setFromPoints(e).getCenter(n);var r=0;for(var _t9=0,_i4=e.length;_t9<_i4;_t9++){r=Math.max(r,n.distanceToSquared(e[_t9]));}return this.radius=Math.sqrt(r),this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.center.copy(e.center),this.radius=e.radius,this;}},{key:"isEmpty",value:function isEmpty(){return this.radius<0;}},{key:"makeEmpty",value:function makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this;}},{key:"containsPoint",value:function containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius;}},{key:"distanceToPoint",value:function distanceToPoint(e){return e.distanceTo(this.center)-this.radius;}},{key:"intersectsSphere",value:function intersectsSphere(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t;}},{key:"intersectsBox",value:function intersectsBox(e){return e.intersectsSphere(this);}},{key:"intersectsPlane",value:function intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius;}},{key:"clampPoint",value:function clampPoint(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Qn()),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t;}},{key:"getBoundingBox",value:function getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new tr()),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e);}},{key:"applyMatrix4",value:function applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this;}},{key:"translate",value:function translate(e){return this.center.add(e),this;}},{key:"equals",value:function equals(e){return e.center.equals(this.center)&&e.radius===this.radius;}}]);return gr;}();var vr=new Qn(),xr=new Qn(),br=new Qn(),wr=new Qn(),Sr=new Qn(),Mr=new Qn(),_r=new Qn();var Er=/*#__PURE__*/function(){function Er(e,t){_classCallCheck(this,Er);this.origin=void 0!==e?e:new Qn(),this.direction=void 0!==t?t:new Qn(0,0,-1);}_createClass(Er,[{key:"set",value:function set(e,t){return this.origin.copy(e),this.direction.copy(t),this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this;}},{key:"at",value:function at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Qn()),t.copy(this.direction).multiplyScalar(e).add(this.origin);}},{key:"lookAt",value:function lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this;}},{key:"recast",value:function recast(e){return this.origin.copy(this.at(e,vr)),this;}},{key:"closestPointToPoint",value:function closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Qn()),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin);}},{key:"distanceToPoint",value:function distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e));}},{key:"distanceSqToPoint",value:function distanceSqToPoint(e){var t=vr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vr.copy(this.direction).multiplyScalar(t).add(this.origin),vr.distanceToSquared(e));}},{key:"distanceSqToSegment",value:function distanceSqToSegment(e,t,n,r){xr.copy(e).add(t).multiplyScalar(.5),br.copy(t).sub(e).normalize(),wr.copy(this.origin).sub(xr);var i=.5*e.distanceTo(t),o=-this.direction.dot(br),a=wr.dot(this.direction),s=-wr.dot(br),u=wr.lengthSq(),c=Math.abs(1-o*o);var l,p,d,h;if(c>0){if(l=o*s-a,p=o*a-s,h=i*c,l>=0){if(p>=-h){if(p<=h){var _e15=1/c;l*=_e15,p*=_e15,d=l*(l+o*p+2*a)+p*(o*l+p+2*s)+u;}else p=i,l=Math.max(0,-(o*p+a)),d=-l*l+p*(p+2*s)+u;}else p=-i,l=Math.max(0,-(o*p+a)),d=-l*l+p*(p+2*s)+u;}else p<=-h?(l=Math.max(0,-(-o*i+a)),p=l>0?-i:Math.min(Math.max(-i,-s),i),d=-l*l+p*(p+2*s)+u):p<=h?(l=0,p=Math.min(Math.max(-i,-s),i),d=p*(p+2*s)+u):(l=Math.max(0,-(o*i+a)),p=l>0?i:Math.min(Math.max(-i,-s),i),d=-l*l+p*(p+2*s)+u);}else p=o>0?-i:i,l=Math.max(0,-(o*p+a)),d=-l*l+p*(p+2*s)+u;return n&&n.copy(this.direction).multiplyScalar(l).add(this.origin),r&&r.copy(br).multiplyScalar(p).add(xr),d;}},{key:"intersectSphere",value:function intersectSphere(e,t){vr.subVectors(e.center,this.origin);var n=vr.dot(this.direction),r=vr.dot(vr)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t);}},{key:"intersectsSphere",value:function intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius;}},{key:"distanceToPlane",value:function distanceToPlane(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null;}},{key:"intersectPlane",value:function intersectPlane(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t);}},{key:"intersectsPlane",value:function intersectsPlane(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0;}},{key:"intersectBox",value:function intersectBox(e,t){var n,r,i,o,a,s;var u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,p=this.origin;return u>=0?(n=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(n=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),c>=0?(i=(e.min.y-p.y)*c,o=(e.max.y-p.y)*c):(i=(e.max.y-p.y)*c,o=(e.min.y-p.y)*c),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(a=(e.min.z-p.z)*l,s=(e.max.z-p.z)*l):(a=(e.max.z-p.z)*l,s=(e.min.z-p.z)*l),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)));}},{key:"intersectsBox",value:function intersectsBox(e){return null!==this.intersectBox(e,vr);}},{key:"intersectTriangle",value:function intersectTriangle(e,t,n,r,i){Sr.subVectors(t,e),Mr.subVectors(n,e),_r.crossVectors(Sr,Mr);var o,a=this.direction.dot(_r);if(a>0){if(r)return null;o=1;}else{if(!(a<0))return null;o=-1,a=-a;}wr.subVectors(this.origin,e);var s=o*this.direction.dot(Mr.crossVectors(wr,Mr));if(s<0)return null;var u=o*this.direction.dot(Sr.cross(wr));if(u<0)return null;if(s+u>a)return null;var c=-o*wr.dot(_r);return c<0?null:this.at(c/a,i);}},{key:"applyMatrix4",value:function applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this;}},{key:"equals",value:function equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction);}}]);return Er;}();var Ar=/*#__PURE__*/function(){function Ar(){_classCallCheck(this,Ar);Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.");}_createClass(Ar,[{key:"set",value:function set(e,t,n,r,i,o,a,s,u,c,l,p,d,h,f,m){var y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=i,y[5]=o,y[9]=a,y[13]=s,y[2]=u,y[6]=c,y[10]=l,y[14]=p,y[3]=d,y[7]=h,y[11]=f,y[15]=m,this;}},{key:"identity",value:function identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this;}},{key:"clone",value:function clone(){return new Ar().fromArray(this.elements);}},{key:"copy",value:function copy(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this;}},{key:"copyPosition",value:function copyPosition(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this;}},{key:"extractBasis",value:function extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this;}},{key:"makeBasis",value:function makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this;}},{key:"extractRotation",value:function extractRotation(e){var t=this.elements,n=e.elements,r=1/Tr.setFromMatrixColumn(e,0).length(),i=1/Tr.setFromMatrixColumn(e,1).length(),o=1/Tr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this;}},{key:"makeRotationFromEuler",value:function makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var _e16=o*c,_n8=o*l,_r6=a*c,_i5=a*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=_n8+_r6*u,t[5]=_e16-_i5*u,t[9]=-a*s,t[2]=_i5-_e16*u,t[6]=_r6+_n8*u,t[10]=o*s;}else if("YXZ"===e.order){var _e17=s*c,_n9=s*l,_r7=u*c,_i6=u*l;t[0]=_e17+_i6*a,t[4]=_r7*a-_n9,t[8]=o*u,t[1]=o*l,t[5]=o*c,t[9]=-a,t[2]=_n9*a-_r7,t[6]=_i6+_e17*a,t[10]=o*s;}else if("ZXY"===e.order){var _e18=s*c,_n10=s*l,_r8=u*c,_i7=u*l;t[0]=_e18-_i7*a,t[4]=-o*l,t[8]=_r8+_n10*a,t[1]=_n10+_r8*a,t[5]=o*c,t[9]=_i7-_e18*a,t[2]=-o*u,t[6]=a,t[10]=o*s;}else if("ZYX"===e.order){var _e19=o*c,_n11=o*l,_r9=a*c,_i8=a*l;t[0]=s*c,t[4]=_r9*u-_n11,t[8]=_e19*u+_i8,t[1]=s*l,t[5]=_i8*u+_e19,t[9]=_n11*u-_r9,t[2]=-u,t[6]=a*s,t[10]=o*s;}else if("YZX"===e.order){var _e20=o*s,_n12=o*u,_r10=a*s,_i9=a*u;t[0]=s*c,t[4]=_i9-_e20*l,t[8]=_r10*l+_n12,t[1]=l,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=_n12*l+_r10,t[10]=_e20-_i9*l;}else if("XZY"===e.order){var _e21=o*s,_n13=o*u,_r11=a*s,_i10=a*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=_e21*l+_i10,t[5]=o*c,t[9]=_n13*l-_r11,t[2]=_r11*l-_n13,t[6]=a*c,t[10]=_i10*l+_e21;}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this;}},{key:"makeRotationFromQuaternion",value:function makeRotationFromQuaternion(e){return this.compose(Dr,e,Cr);}},{key:"lookAt",value:function lookAt(e,t,n){var r=this.elements;return Or.subVectors(e,t),0===Or.lengthSq()&&(Or.z=1),Or.normalize(),Rr.crossVectors(n,Or),0===Rr.lengthSq()&&(1===Math.abs(n.z)?Or.x+=1e-4:Or.z+=1e-4,Or.normalize(),Rr.crossVectors(n,Or)),Rr.normalize(),Pr.crossVectors(Or,Rr),r[0]=Rr.x,r[4]=Pr.x,r[8]=Or.x,r[1]=Rr.y,r[5]=Pr.y,r[9]=Or.y,r[2]=Rr.z,r[6]=Pr.z,r[10]=Or.z,this;}},{key:"multiply",value:function multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e);}},{key:"premultiply",value:function premultiply(e){return this.multiplyMatrices(e,this);}},{key:"multiplyMatrices",value:function multiplyMatrices(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],p=n[9],d=n[13],h=n[2],f=n[6],m=n[10],y=n[14],g=n[3],v=n[7],x=n[11],b=n[15],w=r[0],S=r[4],M=r[8],_=r[12],E=r[1],A=r[5],T=r[9],N=r[13],D=r[2],C=r[6],R=r[10],P=r[14],O=r[3],L=r[7],I=r[11],B=r[15];return i[0]=o*w+a*E+s*D+u*O,i[4]=o*S+a*A+s*C+u*L,i[8]=o*M+a*T+s*R+u*I,i[12]=o*_+a*N+s*P+u*B,i[1]=c*w+l*E+p*D+d*O,i[5]=c*S+l*A+p*C+d*L,i[9]=c*M+l*T+p*R+d*I,i[13]=c*_+l*N+p*P+d*B,i[2]=h*w+f*E+m*D+y*O,i[6]=h*S+f*A+m*C+y*L,i[10]=h*M+f*T+m*R+y*I,i[14]=h*_+f*N+m*P+y*B,i[3]=g*w+v*E+x*D+b*O,i[7]=g*S+v*A+x*C+b*L,i[11]=g*M+v*T+x*R+b*I,i[15]=g*_+v*N+x*P+b*B,this;}},{key:"multiplyScalar",value:function multiplyScalar(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this;}},{key:"determinant",value:function determinant(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],c=e[2],l=e[6],p=e[10],d=e[14];return e[3]*(+i*s*l-r*u*l-i*a*p+n*u*p+r*a*d-n*s*d)+e[7]*(+t*s*d-t*u*p+i*o*p-r*o*d+r*u*c-i*s*c)+e[11]*(+t*u*l-t*a*d-i*o*l+n*o*d+i*a*c-n*u*c)+e[15]*(-r*a*c-t*s*l+t*a*p+r*o*l-n*o*p+n*s*c);}},{key:"transpose",value:function transpose(){var e=this.elements;var t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this;}},{key:"setPosition",value:function setPosition(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this;}},{key:"invert",value:function invert(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],p=e[10],d=e[11],h=e[12],f=e[13],m=e[14],y=e[15],g=l*m*u-f*p*u+f*s*d-a*m*d-l*s*y+a*p*y,v=h*p*u-c*m*u-h*s*d+o*m*d+c*s*y-o*p*y,x=c*f*u-h*l*u+h*a*d-o*f*d-c*a*y+o*l*y,b=h*l*s-c*f*s-h*a*p+o*f*p+c*a*m-o*l*m,w=t*g+n*v+r*x+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var S=1/w;return e[0]=g*S,e[1]=(f*p*i-l*m*i-f*r*d+n*m*d+l*r*y-n*p*y)*S,e[2]=(a*m*i-f*s*i+f*r*u-n*m*u-a*r*y+n*s*y)*S,e[3]=(l*s*i-a*p*i-l*r*u+n*p*u+a*r*d-n*s*d)*S,e[4]=v*S,e[5]=(c*m*i-h*p*i+h*r*d-t*m*d-c*r*y+t*p*y)*S,e[6]=(h*s*i-o*m*i-h*r*u+t*m*u+o*r*y-t*s*y)*S,e[7]=(o*p*i-c*s*i+c*r*u-t*p*u-o*r*d+t*s*d)*S,e[8]=x*S,e[9]=(h*l*i-c*f*i-h*n*d+t*f*d+c*n*y-t*l*y)*S,e[10]=(o*f*i-h*a*i+h*n*u-t*f*u-o*n*y+t*a*y)*S,e[11]=(c*a*i-o*l*i-c*n*u+t*l*u+o*n*d-t*a*d)*S,e[12]=b*S,e[13]=(c*f*r-h*l*r+h*n*p-t*f*p-c*n*m+t*l*m)*S,e[14]=(h*a*r-o*f*r-h*n*s+t*f*s+o*n*m-t*a*m)*S,e[15]=(o*l*r-c*a*r+c*n*s-t*l*s-o*n*p+t*a*p)*S,this;}},{key:"scale",value:function scale(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this;}},{key:"getMaxScaleOnAxis",value:function getMaxScaleOnAxis(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r));}},{key:"makeTranslation",value:function makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this;}},{key:"makeRotationX",value:function makeRotationX(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this;}},{key:"makeRotationY",value:function makeRotationY(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this;}},{key:"makeRotationZ",value:function makeRotationZ(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this;}},{key:"makeRotationAxis",value:function makeRotationAxis(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this;}},{key:"makeScale",value:function makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this;}},{key:"makeShear",value:function makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this;}},{key:"compose",value:function compose(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,c=o+o,l=a+a,p=i*u,d=i*c,h=i*l,f=o*c,m=o*l,y=a*l,g=s*u,v=s*c,x=s*l,b=n.x,w=n.y,S=n.z;return r[0]=(1-(f+y))*b,r[1]=(d+x)*b,r[2]=(h-v)*b,r[3]=0,r[4]=(d-x)*w,r[5]=(1-(p+y))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(h+v)*S,r[9]=(m-g)*S,r[10]=(1-(p+f))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this;}},{key:"decompose",value:function decompose(e,t,n){var r=this.elements;var i=Tr.set(r[0],r[1],r[2]).length();var o=Tr.set(r[4],r[5],r[6]).length(),a=Tr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Nr.copy(this);var s=1/i,u=1/o,c=1/a;return Nr.elements[0]*=s,Nr.elements[1]*=s,Nr.elements[2]*=s,Nr.elements[4]*=u,Nr.elements[5]*=u,Nr.elements[6]*=u,Nr.elements[8]*=c,Nr.elements[9]*=c,Nr.elements[10]*=c,t.setFromRotationMatrix(Nr),n.x=i,n.y=o,n.z=a,this;}},{key:"makePerspective",value:function makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),p=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this;}},{key:"makeOrthographic",value:function makeOrthographic(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),c=1/(o-i),l=(t+e)*s,p=(n+r)*u,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this;}},{key:"equals",value:function equals(e){var t=this.elements,n=e.elements;for(var _e22=0;_e22<16;_e22++){if(t[_e22]!==n[_e22])return!1;}return!0;}},{key:"fromArray",value:function fromArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;for(var _n14=0;_n14<16;_n14++){this.elements[_n14]=e[_n14+t];}return this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e;}}]);return Ar;}();var Tr=new Qn(),Nr=new Ar(),Dr=new Qn(0,0,0),Cr=new Qn(1,1,1),Rr=new Qn(),Pr=new Qn(),Or=new Qn();var Lr=/*#__PURE__*/function(){function Lr(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:Lr.DefaultOrder;_classCallCheck(this,Lr);Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=n,this._order=r;}_createClass(Lr,[{key:"set",value:function set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this;}},{key:"clone",value:function clone(){return new this.constructor(this._x,this._y,this._z,this._order);}},{key:"copy",value:function copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this;}},{key:"setFromRotationMatrix",value:function setFromRotationMatrix(e,t,n){var r=Un.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],u=i[1],c=i[5],l=i[9],p=i[2],d=i[6],h=i[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-p,h),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o));break;case"ZYX":this._y=Math.asin(-r(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t);}return this._order=t,!1!==n&&this._onChangeCallback(),this;}},{key:"setFromQuaternion",value:function setFromQuaternion(e,t,n){return Ir.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ir,t,n);}},{key:"setFromVector3",value:function setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order);}},{key:"reorder",value:function reorder(e){return Br.setFromEuler(this),this.setFromQuaternion(Br,e);}},{key:"equals",value:function equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order;}},{key:"fromArray",value:function fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e;}},{key:"toVector3",value:function toVector3(e){return e?e.set(this._x,this._y,this._z):new Qn(this._x,this._y,this._z);}},{key:"_onChange",value:function _onChange(e){return this._onChangeCallback=e,this;}},{key:"_onChangeCallback",value:function _onChangeCallback(){}},{key:"x",get:function get(){return this._x;},set:function set(e){this._x=e,this._onChangeCallback();}},{key:"y",get:function get(){return this._y;},set:function set(e){this._y=e,this._onChangeCallback();}},{key:"z",get:function get(){return this._z;},set:function set(e){this._z=e,this._onChangeCallback();}},{key:"order",get:function get(){return this._order;},set:function set(e){this._order=e,this._onChangeCallback();}}]);return Lr;}();Lr.DefaultOrder="XYZ",Lr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Ir=new Ar(),Br=new Jn();var Fr=/*#__PURE__*/function(){function Fr(){_classCallCheck(this,Fr);this.mask=1;}_createClass(Fr,[{key:"set",value:function set(e){this.mask=1<<e|0;}},{key:"enable",value:function enable(e){this.mask|=1<<e|0;}},{key:"enableAll",value:function enableAll(){this.mask=-1;}},{key:"toggle",value:function toggle(e){this.mask^=1<<e|0;}},{key:"disable",value:function disable(e){this.mask&=~(1<<e|0);}},{key:"disableAll",value:function disableAll(){this.mask=0;}},{key:"test",value:function test(e){return 0!=(this.mask&e.mask);}}]);return Fr;}();var zr=0;var kr=new Qn(),Ur=new Jn(),jr=new Ar(),Hr=new Qn(),qr=new Qn(),Gr=new Qn(),Vr=new Jn(),Wr=new Qn(1,0,0),Xr=new Qn(0,1,0),Yr=new Qn(0,0,1),Zr={type:"added"},$r={type:"removed"};function Jr(){Object.defineProperty(this,"id",{value:zr++}),this.uuid=Un.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jr.DefaultUp.clone();var e=new Qn(),t=new Lr(),n=new Jn(),r=new Qn(1,1,1);t._onChange(function(){n.setFromEuler(t,!1);}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1);}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ar()},normalMatrix:{value:new Hn()}}),this.matrix=new Ar(),this.matrixWorld=new Ar(),this.matrixAutoUpdate=Jr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Fr(),this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={};}Jr.DefaultUp=new Qn(0,1,0),Jr.DefaultMatrixAutoUpdate=!0,Jr.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Jr,isObject3D:!0,onBeforeRender:function onBeforeRender(){},onAfterRender:function onAfterRender(){},applyMatrix4:function applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale);},applyQuaternion:function applyQuaternion(e){return this.quaternion.premultiply(e),this;},setRotationFromAxisAngle:function setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t);},setRotationFromEuler:function setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0);},setRotationFromMatrix:function setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e);},setRotationFromQuaternion:function setRotationFromQuaternion(e){this.quaternion.copy(e);},rotateOnAxis:function rotateOnAxis(e,t){return Ur.setFromAxisAngle(e,t),this.quaternion.multiply(Ur),this;},rotateOnWorldAxis:function rotateOnWorldAxis(e,t){return Ur.setFromAxisAngle(e,t),this.quaternion.premultiply(Ur),this;},rotateX:function rotateX(e){return this.rotateOnAxis(Wr,e);},rotateY:function rotateY(e){return this.rotateOnAxis(Xr,e);},rotateZ:function rotateZ(e){return this.rotateOnAxis(Yr,e);},translateOnAxis:function translateOnAxis(e,t){return kr.copy(e).applyQuaternion(this.quaternion),this.position.add(kr.multiplyScalar(t)),this;},translateX:function translateX(e){return this.translateOnAxis(Wr,e);},translateY:function translateY(e){return this.translateOnAxis(Xr,e);},translateZ:function translateZ(e){return this.translateOnAxis(Yr,e);},localToWorld:function localToWorld(e){return e.applyMatrix4(this.matrixWorld);},worldToLocal:function worldToLocal(e){return e.applyMatrix4(jr.copy(this.matrixWorld).invert());},lookAt:function lookAt(e,t,n){e.isVector3?Hr.copy(e):Hr.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),qr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jr.lookAt(qr,Hr,this.up):jr.lookAt(Hr,qr,this.up),this.quaternion.setFromRotationMatrix(jr),r&&(jr.extractRotation(r.matrixWorld),Ur.setFromRotationMatrix(jr),this.quaternion.premultiply(Ur.invert()));},add:function add(e){if(arguments.length>1){for(var _e23=0;_e23<arguments.length;_e23++){this.add(arguments[_e23]);}return this;}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Zr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this);},remove:function remove(e){if(arguments.length>1){for(var _e24=0;_e24<arguments.length;_e24++){this.remove(arguments[_e24]);}return this;}var t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($r)),this;},clear:function clear(){for(var _e25=0;_e25<this.children.length;_e25++){var _t10=this.children[_e25];_t10.parent=null,_t10.dispatchEvent($r);}return this.children.length=0,this;},attach:function attach(e){return this.updateWorldMatrix(!0,!1),jr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),jr.multiply(e.parent.matrixWorld)),e.applyMatrix4(jr),e.updateWorldMatrix(!1,!1),this.add(e),this;},getObjectById:function getObjectById(e){return this.getObjectByProperty("id",e);},getObjectByName:function getObjectByName(e){return this.getObjectByProperty("name",e);},getObjectByProperty:function getObjectByProperty(e,t){if(this[e]===t)return this;for(var _n15=0,_r12=this.children.length;_n15<_r12;_n15++){var _r13=this.children[_n15].getObjectByProperty(e,t);if(void 0!==_r13)return _r13;}},getWorldPosition:function getWorldPosition(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Qn()),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld);},getWorldQuaternion:function getWorldQuaternion(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Jn()),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qr,e,Gr),e;},getWorldScale:function getWorldScale(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Qn()),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qr,Vr,e),e;},getWorldDirection:function getWorldDirection(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Qn()),this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize();},raycast:function raycast(){},traverse:function traverse(e){e(this);var t=this.children;for(var _n16=0,_r14=t.length;_n16<_r14;_n16++){t[_n16].traverse(e);}},traverseVisible:function traverseVisible(e){if(!1===this.visible)return;e(this);var t=this.children;for(var _n17=0,_r15=t.length;_n17<_r15;_n17++){t[_n17].traverseVisible(e);}},traverseAncestors:function traverseAncestors(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e));},updateMatrix:function updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0;},updateMatrixWorld:function updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);var t=this.children;for(var _n18=0,_r16=t.length;_n18<_r16;_n18++){t[_n18].updateMatrixWorld(e);}},updateWorldMatrix:function updateWorldMatrix(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){var _e26=this.children;for(var _t11=0,_n19=_e26.length;_t11<_n19;_t11++){_e26[_t11].updateWorldMatrix(!1,!0);}}},toJSON:function toJSON(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid;}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var _t12=this.geometry.parameters;if(void 0!==_t12&&void 0!==_t12.shapes){var _n20=_t12.shapes;if(Array.isArray(_n20))for(var _t13=0,_r17=_n20.length;_t13<_r17;_t13++){var _r18=_n20[_t13];i(e.shapes,_r18);}else i(e.shapes,_n20);}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){var _t14=[];for(var _n21=0,_r19=this.material.length;_n21<_r19;_n21++){_t14.push(i(e.materials,this.material[_n21]));}r.material=_t14;}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var _t15=0;_t15<this.children.length;_t15++){r.children.push(this.children[_t15].toJSON(e).object);}}if(this.animations.length>0){r.animations=[];for(var _t16=0;_t16<this.animations.length;_t16++){var _n22=this.animations[_t16];r.animations.push(i(e.animations,_n22));}}if(t){var _t17=o(e.geometries),_r20=o(e.materials),_i11=o(e.textures),_a4=o(e.images),_s5=o(e.shapes),_u7=o(e.skeletons),_c5=o(e.animations);_t17.length>0&&(n.geometries=_t17),_r20.length>0&&(n.materials=_r20),_i11.length>0&&(n.textures=_i11),_a4.length>0&&(n.images=_a4),_s5.length>0&&(n.shapes=_s5),_u7.length>0&&(n.skeletons=_u7),_c5.length>0&&(n.animations=_c5);}return n.object=r,n;function o(e){var t=[];for(var _n23 in e){var _r21=e[_n23];delete _r21.metadata,t.push(_r21);}return t;}},clone:function clone(e){return new this.constructor().copy(this,e);},copy:function copy(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var _t18=0;_t18<e.children.length;_t18++){var _n24=e.children[_t18];this.add(_n24.clone());}return this;}});var Qr=new Qn(),Kr=new Qn(),ei=new Hn();var ti=/*#__PURE__*/function(){function ti(e,t){_classCallCheck(this,ti);Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==e?e:new Qn(1,0,0),this.constant=void 0!==t?t:0;}_createClass(ti,[{key:"set",value:function set(e,t){return this.normal.copy(e),this.constant=t,this;}},{key:"setComponents",value:function setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this;}},{key:"setFromNormalAndCoplanarPoint",value:function setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this;}},{key:"setFromCoplanarPoints",value:function setFromCoplanarPoints(e,t,n){var r=Qr.subVectors(n,t).cross(Kr.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this;}},{key:"normalize",value:function normalize(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this;}},{key:"negate",value:function negate(){return this.constant*=-1,this.normal.negate(),this;}},{key:"distanceToPoint",value:function distanceToPoint(e){return this.normal.dot(e)+this.constant;}},{key:"distanceToSphere",value:function distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius;}},{key:"projectPoint",value:function projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Qn()),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e);}},{key:"intersectLine",value:function intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Qn());var n=e.delta(Qr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start);}},{key:"intersectsLine",value:function intersectsLine(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0;}},{key:"intersectsBox",value:function intersectsBox(e){return e.intersectsPlane(this);}},{key:"intersectsSphere",value:function intersectsSphere(e){return e.intersectsPlane(this);}},{key:"coplanarPoint",value:function coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Qn()),e.copy(this.normal).multiplyScalar(-this.constant);}},{key:"applyMatrix4",value:function applyMatrix4(e,t){var n=t||ei.getNormalMatrix(e),r=this.coplanarPoint(Qr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this;}},{key:"translate",value:function translate(e){return this.constant-=e.dot(this.normal),this;}},{key:"equals",value:function equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant;}}]);return ti;}();var ni=new Qn(),ri=new Qn(),ii=new Qn(),oi=new Qn(),ai=new Qn(),si=new Qn(),ui=new Qn(),ci=new Qn(),li=new Qn(),pi=new Qn();var di=/*#__PURE__*/function(){function di(e,t,n){_classCallCheck(this,di);this.a=void 0!==e?e:new Qn(),this.b=void 0!==t?t:new Qn(),this.c=void 0!==n?n:new Qn();}_createClass(di,[{key:"set",value:function set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this;}},{key:"setFromPointsAndIndices",value:function setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this;}},{key:"getArea",value:function getArea(){return ni.subVectors(this.c,this.b),ri.subVectors(this.a,this.b),.5*ni.cross(ri).length();}},{key:"getMidpoint",value:function getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Qn()),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3);}},{key:"getNormal",value:function getNormal(e){return di.getNormal(this.a,this.b,this.c,e);}},{key:"getPlane",value:function getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ti()),e.setFromCoplanarPoints(this.a,this.b,this.c);}},{key:"getBarycoord",value:function getBarycoord(e,t){return di.getBarycoord(e,this.a,this.b,this.c,t);}},{key:"getUV",value:function getUV(e,t,n,r,i){return di.getUV(e,this.a,this.b,this.c,t,n,r,i);}},{key:"containsPoint",value:function containsPoint(e){return di.containsPoint(e,this.a,this.b,this.c);}},{key:"isFrontFacing",value:function isFrontFacing(e){return di.isFrontFacing(this.a,this.b,this.c,e);}},{key:"intersectsBox",value:function intersectsBox(e){return e.intersectsTriangle(this);}},{key:"closestPointToPoint",value:function closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Qn());var n=this.a,r=this.b,i=this.c;var o,a;ai.subVectors(r,n),si.subVectors(i,n),ci.subVectors(e,n);var s=ai.dot(ci),u=si.dot(ci);if(s<=0&&u<=0)return t.copy(n);li.subVectors(e,r);var c=ai.dot(li),l=si.dot(li);if(c>=0&&l<=c)return t.copy(r);var p=s*l-c*u;if(p<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(ai,o);pi.subVectors(e,i);var d=ai.dot(pi),h=si.dot(pi);if(h>=0&&d<=h)return t.copy(i);var f=d*u-s*h;if(f<=0&&u>=0&&h<=0)return a=u/(u-h),t.copy(n).addScaledVector(si,a);var m=c*h-d*l;if(m<=0&&l-c>=0&&d-h>=0)return ui.subVectors(i,r),a=(l-c)/(l-c+(d-h)),t.copy(r).addScaledVector(ui,a);var y=1/(m+f+p);return o=f*y,a=p*y,t.copy(n).addScaledVector(ai,o).addScaledVector(si,a);}},{key:"equals",value:function equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c);}}],[{key:"getNormal",value:function getNormal(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Qn()),r.subVectors(n,t),ni.subVectors(e,t),r.cross(ni);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0);}},{key:"getBarycoord",value:function getBarycoord(e,t,n,r,i){ni.subVectors(r,t),ri.subVectors(n,t),ii.subVectors(e,t);var o=ni.dot(ni),a=ni.dot(ri),s=ni.dot(ii),u=ri.dot(ri),c=ri.dot(ii),l=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Qn()),0===l)return i.set(-2,-1,-1);var p=1/l,d=(u*s-a*c)*p,h=(o*c-a*s)*p;return i.set(1-d-h,h,d);}},{key:"containsPoint",value:function containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,oi),oi.x>=0&&oi.y>=0&&oi.x+oi.y<=1;}},{key:"getUV",value:function getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,oi),s.set(0,0),s.addScaledVector(i,oi.x),s.addScaledVector(o,oi.y),s.addScaledVector(a,oi.z),s;}},{key:"isFrontFacing",value:function isFrontFacing(e,t,n,r){return ni.subVectors(n,t),ri.subVectors(e,t),ni.cross(ri).dot(r)<0;}}]);return di;}();var hi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fi={h:0,s:0,l:0},mi={h:0,s:0,l:0};function yi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e;}function gi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4);}function vi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055;}var xi=/*#__PURE__*/function(){function xi(e,t,n){_classCallCheck(this,xi);return Object.defineProperty(this,"isColor",{value:!0}),void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n);}_createClass(xi,[{key:"set",value:function set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this;}},{key:"setScalar",value:function setScalar(e){return this.r=e,this.g=e,this.b=e,this;}},{key:"setHex",value:function setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this;}},{key:"setRGB",value:function setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this;}},{key:"setHSL",value:function setHSL(e,t,n){if(e=Un.euclideanModulo(e,1),t=Un.clamp(t,0,1),n=Un.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var _r22=n<=.5?n*(1+t):n+t-n*t,_i12=2*n-_r22;this.r=yi(_i12,_r22,e+1/3),this.g=yi(_i12,_r22,e),this.b=yi(_i12,_r22,e-1/3);}return this;}},{key:"setStyle",value:function setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.");}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var _e27;var _r23=n[1],_i13=n[2];switch(_r23){case"rgb":case"rgba":if(_e27=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_i13))return this.r=Math.min(255,parseInt(_e27[1],10))/255,this.g=Math.min(255,parseInt(_e27[2],10))/255,this.b=Math.min(255,parseInt(_e27[3],10))/255,t(_e27[4]),this;if(_e27=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_i13))return this.r=Math.min(100,parseInt(_e27[1],10))/100,this.g=Math.min(100,parseInt(_e27[2],10))/100,this.b=Math.min(100,parseInt(_e27[3],10))/100,t(_e27[4]),this;break;case"hsl":case"hsla":if(_e27=/^(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_i13)){var _n25=parseFloat(_e27[1])/360,_r24=parseInt(_e27[2],10)/100,_i14=parseInt(_e27[3],10)/100;return t(_e27[4]),this.setHSL(_n25,_r24,_i14);}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var _e28=n[1],_t19=_e28.length;if(3===_t19)return this.r=parseInt(_e28.charAt(0)+_e28.charAt(0),16)/255,this.g=parseInt(_e28.charAt(1)+_e28.charAt(1),16)/255,this.b=parseInt(_e28.charAt(2)+_e28.charAt(2),16)/255,this;if(6===_t19)return this.r=parseInt(_e28.charAt(0)+_e28.charAt(1),16)/255,this.g=parseInt(_e28.charAt(2)+_e28.charAt(3),16)/255,this.b=parseInt(_e28.charAt(4)+_e28.charAt(5),16)/255,this;}return e&&e.length>0?this.setColorName(e):this;}},{key:"setColorName",value:function setColorName(e){var t=hi[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this;}},{key:"clone",value:function clone(){return new this.constructor(this.r,this.g,this.b);}},{key:"copy",value:function copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this;}},{key:"copyGammaToLinear",value:function copyGammaToLinear(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this;}},{key:"copyLinearToGamma",value:function copyLinearToGamma(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this;}},{key:"convertGammaToLinear",value:function convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this;}},{key:"convertLinearToGamma",value:function convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this;}},{key:"copySRGBToLinear",value:function copySRGBToLinear(e){return this.r=gi(e.r),this.g=gi(e.g),this.b=gi(e.b),this;}},{key:"copyLinearToSRGB",value:function copyLinearToSRGB(e){return this.r=vi(e.r),this.g=vi(e.g),this.b=vi(e.b),this;}},{key:"convertSRGBToLinear",value:function convertSRGBToLinear(){return this.copySRGBToLinear(this),this;}},{key:"convertLinearToSRGB",value:function convertLinearToSRGB(){return this.copyLinearToSRGB(this),this;}},{key:"getHex",value:function getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0;}},{key:"getHexString",value:function getHexString(){return("000000"+this.getHex().toString(16)).slice(-6);}},{key:"getHSL",value:function getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);var a,s;var u=(o+i)/2;if(o===i)a=0,s=0;else{var _e29=i-o;switch(s=u<=.5?_e29/(i+o):_e29/(2-i-o),i){case t:a=(n-r)/_e29+(n<r?6:0);break;case n:a=(r-t)/_e29+2;break;case r:a=(t-n)/_e29+4;}a/=6;}return e.h=a,e.s=s,e.l=u,e;}},{key:"getStyle",value:function getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")";}},{key:"offsetHSL",value:function offsetHSL(e,t,n){return this.getHSL(fi),fi.h+=e,fi.s+=t,fi.l+=n,this.setHSL(fi.h,fi.s,fi.l),this;}},{key:"add",value:function add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this;}},{key:"addColors",value:function addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this;}},{key:"addScalar",value:function addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this;}},{key:"sub",value:function sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this;}},{key:"multiply",value:function multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this;}},{key:"multiplyScalar",value:function multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this;}},{key:"lerp",value:function lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this;}},{key:"lerpHSL",value:function lerpHSL(e,t){this.getHSL(fi),e.getHSL(mi);var n=Un.lerp(fi.h,mi.h,t),r=Un.lerp(fi.s,mi.s,t),i=Un.lerp(fi.l,mi.l,t);return this.setHSL(n,r,i),this;}},{key:"equals",value:function equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b;}},{key:"fromArray",value:function fromArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e;}},{key:"fromBufferAttribute",value:function fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this;}},{key:"toJSON",value:function toJSON(){return this.getHex();}}]);return xi;}();xi.NAMES=hi,xi.prototype.r=1,xi.prototype.g=1,xi.prototype.b=1;var bi=/*#__PURE__*/function(){function bi(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;_classCallCheck(this,bi);this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Qn(),this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new xi(),this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o;}_createClass(bi,[{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var _t20=0,_n26=e.vertexNormals.length;_t20<_n26;_t20++){this.vertexNormals[_t20]=e.vertexNormals[_t20].clone();}for(var _t21=0,_n27=e.vertexColors.length;_t21<_n27;_t21++){this.vertexColors[_t21]=e.vertexColors[_t21].clone();}return this;}}]);return bi;}();var wi=0;function Si(){Object.defineProperty(this,"id",{value:wi++}),this.uuid=Un.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=w,this.side=m,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=I,this.blendDst=B,this.blendEquation=A,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=En,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=pn,this.stencilZFail=pn,this.stencilZPass=pn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0;}function Mi(e){Si.call(this),this.type="MeshBasicMaterial",this.color=new xi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e);}Si.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Si,isMaterial:!0,onBeforeCompile:function onBeforeCompile(){},customProgramCacheKey:function customProgramCacheKey(){return this.onBeforeCompile.toString();},setValues:function setValues(e){if(void 0!==e)for(var _t22 in e){var _n28=e[_t22];if(void 0===_n28){console.warn("THREE.Material: '"+_t22+"' parameter is undefined.");continue;}if("shading"===_t22){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_n28===v;continue;}var _r25=this[_t22];void 0!==_r25?_r25&&_r25.isColor?_r25.set(_n28):_r25&&_r25.isVector3&&_n28&&_n28.isVector3?_r25.copy(_n28):this[_t22]=_n28:console.warn("THREE."+this.type+": '"+_t22+"' is not a property of this material.");}},toJSON:function toJSON(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var _n29 in e){var _r26=e[_n29];delete _r26.metadata,t.push(_r26);}return t;}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==w&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==m&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var _t23=r(e.textures),_i15=r(e.images);_t23.length>0&&(n.textures=_t23),_i15.length>0&&(n.images=_i15);}return n;},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes;var n=null;if(null!==t){var _e30=t.length;n=new Array(_e30);for(var _r27=0;_r27!==_e30;++_r27){n[_r27]=t[_r27].clone();}}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}}),Object.defineProperty(Si.prototype,"needsUpdate",{set:function set(e){!0===e&&this.version++;}}),Mi.prototype=Object.create(Si.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isMeshBasicMaterial=!0,Mi.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this;};var _i=new Qn(),Ei=new jn();function Ai(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=An,this.updateRange={offset:0,count:-1},this.version=0;}function Ti(e,t,n){Ai.call(this,new Int8Array(e),t,n);}function Ni(e,t,n){Ai.call(this,new Uint8Array(e),t,n);}function Di(e,t,n){Ai.call(this,new Uint8ClampedArray(e),t,n);}function Ci(e,t,n){Ai.call(this,new Int16Array(e),t,n);}function Ri(e,t,n){Ai.call(this,new Uint16Array(e),t,n);}function Pi(e,t,n){Ai.call(this,new Int32Array(e),t,n);}function Oi(e,t,n){Ai.call(this,new Uint32Array(e),t,n);}function Li(e,t,n){Ai.call(this,new Uint16Array(e),t,n);}function Ii(e,t,n){Ai.call(this,new Float32Array(e),t,n);}function Bi(e,t,n){Ai.call(this,new Float64Array(e),t,n);}Object.defineProperty(Ai.prototype,"needsUpdate",{set:function set(e){!0===e&&this.version++;}}),Object.assign(Ai.prototype,{isBufferAttribute:!0,onUploadCallback:function onUploadCallback(){},setUsage:function setUsage(e){return this.usage=e,this;},copy:function copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this;},copyAt:function copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var _r28=0,_i16=this.itemSize;_r28<_i16;_r28++){this.array[e+_r28]=t.array[n+_r28];}return this;},copyArray:function copyArray(e){return this.array.set(e),this;},copyColorsArray:function copyColorsArray(e){var t=this.array;var n=0;for(var _r29=0,_i17=e.length;_r29<_i17;_r29++){var _i18=e[_r29];void 0===_i18&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",_r29),_i18=new xi()),t[n++]=_i18.r,t[n++]=_i18.g,t[n++]=_i18.b;}return this;},copyVector2sArray:function copyVector2sArray(e){var t=this.array;var n=0;for(var _r30=0,_i19=e.length;_r30<_i19;_r30++){var _i20=e[_r30];void 0===_i20&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",_r30),_i20=new jn()),t[n++]=_i20.x,t[n++]=_i20.y;}return this;},copyVector3sArray:function copyVector3sArray(e){var t=this.array;var n=0;for(var _r31=0,_i21=e.length;_r31<_i21;_r31++){var _i22=e[_r31];void 0===_i22&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",_r31),_i22=new Qn()),t[n++]=_i22.x,t[n++]=_i22.y,t[n++]=_i22.z;}return this;},copyVector4sArray:function copyVector4sArray(e){var t=this.array;var n=0;for(var _r32=0,_i23=e.length;_r32<_i23;_r32++){var _i24=e[_r32];void 0===_i24&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",_r32),_i24=new Yn()),t[n++]=_i24.x,t[n++]=_i24.y,t[n++]=_i24.z,t[n++]=_i24.w;}return this;},applyMatrix3:function applyMatrix3(e){if(2===this.itemSize)for(var _t24=0,_n30=this.count;_t24<_n30;_t24++){Ei.fromBufferAttribute(this,_t24),Ei.applyMatrix3(e),this.setXY(_t24,Ei.x,Ei.y);}else if(3===this.itemSize)for(var _t25=0,_n31=this.count;_t25<_n31;_t25++){_i.fromBufferAttribute(this,_t25),_i.applyMatrix3(e),this.setXYZ(_t25,_i.x,_i.y,_i.z);}return this;},applyMatrix4:function applyMatrix4(e){for(var _t26=0,_n32=this.count;_t26<_n32;_t26++){_i.x=this.getX(_t26),_i.y=this.getY(_t26),_i.z=this.getZ(_t26),_i.applyMatrix4(e),this.setXYZ(_t26,_i.x,_i.y,_i.z);}return this;},applyNormalMatrix:function applyNormalMatrix(e){for(var _t27=0,_n33=this.count;_t27<_n33;_t27++){_i.x=this.getX(_t27),_i.y=this.getY(_t27),_i.z=this.getZ(_t27),_i.applyNormalMatrix(e),this.setXYZ(_t27,_i.x,_i.y,_i.z);}return this;},transformDirection:function transformDirection(e){for(var _t28=0,_n34=this.count;_t28<_n34;_t28++){_i.x=this.getX(_t28),_i.y=this.getY(_t28),_i.z=this.getZ(_t28),_i.transformDirection(e),this.setXYZ(_t28,_i.x,_i.y,_i.z);}return this;},set:function set(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.array.set(e,t),this;},getX:function getX(e){return this.array[e*this.itemSize];},setX:function setX(e,t){return this.array[e*this.itemSize]=t,this;},getY:function getY(e){return this.array[e*this.itemSize+1];},setY:function setY(e,t){return this.array[e*this.itemSize+1]=t,this;},getZ:function getZ(e){return this.array[e*this.itemSize+2];},setZ:function setZ(e,t){return this.array[e*this.itemSize+2]=t,this;},getW:function getW(e){return this.array[e*this.itemSize+3];},setW:function setW(e,t){return this.array[e*this.itemSize+3]=t,this;},setXY:function setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this;},setXYZ:function setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this;},setXYZW:function setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this;},onUpload:function onUpload(e){return this.onUploadCallback=e,this;},clone:function clone(){return new this.constructor(this.array,this.itemSize).copy(this);},toJSON:function toJSON(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};}}),Ti.prototype=Object.create(Ai.prototype),Ti.prototype.constructor=Ti,Ni.prototype=Object.create(Ai.prototype),Ni.prototype.constructor=Ni,Di.prototype=Object.create(Ai.prototype),Di.prototype.constructor=Di,Ci.prototype=Object.create(Ai.prototype),Ci.prototype.constructor=Ci,Ri.prototype=Object.create(Ai.prototype),Ri.prototype.constructor=Ri,Pi.prototype=Object.create(Ai.prototype),Pi.prototype.constructor=Pi,Oi.prototype=Object.create(Ai.prototype),Oi.prototype.constructor=Oi,Li.prototype=Object.create(Ai.prototype),Li.prototype.constructor=Li,Li.prototype.isFloat16BufferAttribute=!0,Ii.prototype=Object.create(Ai.prototype),Ii.prototype.constructor=Ii,Bi.prototype=Object.create(Ai.prototype),Bi.prototype.constructor=Bi;var Fi=/*#__PURE__*/function(){function Fi(){_classCallCheck(this,Fi);this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1;}_createClass(Fi,[{key:"computeGroups",value:function computeGroups(e){var t=[];var n,r,i=void 0;var o=e.faces;for(r=0;r<o.length;r++){var _e31=o[r];_e31.materialIndex!==i&&(i=_e31.materialIndex,void 0!==n&&(n.count=3*r-n.start,t.push(n)),n={start:3*r,materialIndex:i});}void 0!==n&&(n.count=3*r-n.start,t.push(n)),this.groups=t;}},{key:"fromGeometry",value:function fromGeometry(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=e.morphTargets,s=a.length;var u;if(s>0){u=[];for(var _e32=0;_e32<s;_e32++){u[_e32]={name:a[_e32].name,data:[]};}this.morphTargets.position=u;}var c=e.morphNormals,l=c.length;var p;if(l>0){p=[];for(var _e33=0;_e33<l;_e33++){p[_e33]={name:c[_e33].name,data:[]};}this.morphTargets.normal=p;}var d=e.skinIndices,h=e.skinWeights,f=d.length===n.length,m=h.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var _e34=0;_e34<t.length;_e34++){var _y3=t[_e34];this.vertices.push(n[_y3.a],n[_y3.b],n[_y3.c]);var _g3=_y3.vertexNormals;if(3===_g3.length)this.normals.push(_g3[0],_g3[1],_g3[2]);else{var _e35=_y3.normal;this.normals.push(_e35,_e35,_e35);}var _v3=_y3.vertexColors;if(3===_v3.length)this.colors.push(_v3[0],_v3[1],_v3[2]);else{var _e36=_y3.color;this.colors.push(_e36,_e36,_e36);}if(!0===i){var _t29=r[0][_e34];void 0!==_t29?this.uvs.push(_t29[0],_t29[1],_t29[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",_e34),this.uvs.push(new jn(),new jn(),new jn()));}if(!0===o){var _t30=r[1][_e34];void 0!==_t30?this.uvs2.push(_t30[0],_t30[1],_t30[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",_e34),this.uvs2.push(new jn(),new jn(),new jn()));}for(var _e37=0;_e37<s;_e37++){var _t31=a[_e37].vertices;u[_e37].data.push(_t31[_y3.a],_t31[_y3.b],_t31[_y3.c]);}for(var _t32=0;_t32<l;_t32++){var _n35=c[_t32].vertexNormals[_e34];p[_t32].data.push(_n35.a,_n35.b,_n35.c);}f&&this.skinIndices.push(d[_y3.a],d[_y3.b],d[_y3.c]),m&&this.skinWeights.push(h[_y3.a],h[_y3.b],h[_y3.c]);}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this;}}]);return Fi;}();function zi(e){if(0===e.length)return-1/0;var t=e[0];for(var _n36=1,_r33=e.length;_n36<_r33;++_n36){e[_n36]>t&&(t=e[_n36]);}return t;}var ki={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ui(e,t){return new ki[e](t);}var ji=1;var Hi=new Ar(),qi=new Jr(),Gi=new Qn(),Vi=new tr(),Wi=new tr(),Xi=new Qn();function Yi(){Object.defineProperty(this,"id",{value:ji+=2}),this.uuid=Un.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={};}Yi.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Yi,isBufferGeometry:!0,getIndex:function getIndex(){return this.index;},setIndex:function setIndex(e){return Array.isArray(e)?this.index=new(zi(e)>65535?Oi:Ri)(e,1):this.index=e,this;},getAttribute:function getAttribute(e){return this.attributes[e];},setAttribute:function setAttribute(e,t){return this.attributes[e]=t,this;},deleteAttribute:function deleteAttribute(e){return delete this.attributes[e],this;},hasAttribute:function hasAttribute(e){return void 0!==this.attributes[e];},addGroup:function addGroup(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n});},clearGroups:function clearGroups(){this.groups=[];},setDrawRange:function setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t;},applyMatrix4:function applyMatrix4(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var _t33=new Hn().getNormalMatrix(e);n.applyNormalMatrix(_t33),n.needsUpdate=!0;}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this;},rotateX:function rotateX(e){return Hi.makeRotationX(e),this.applyMatrix4(Hi),this;},rotateY:function rotateY(e){return Hi.makeRotationY(e),this.applyMatrix4(Hi),this;},rotateZ:function rotateZ(e){return Hi.makeRotationZ(e),this.applyMatrix4(Hi),this;},translate:function translate(e,t,n){return Hi.makeTranslation(e,t,n),this.applyMatrix4(Hi),this;},scale:function scale(e,t,n){return Hi.makeScale(e,t,n),this.applyMatrix4(Hi),this;},lookAt:function lookAt(e){return qi.lookAt(e),qi.updateMatrix(),this.applyMatrix4(qi.matrix),this;},center:function center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gi).negate(),this.translate(Gi.x,Gi.y,Gi.z),this;},setFromObject:function setFromObject(e){var t=e.geometry;if(e.isPoints||e.isLine){var _e38=new Ii(3*t.vertices.length,3),_n37=new Ii(3*t.colors.length,3);if(this.setAttribute("position",_e38.copyVector3sArray(t.vertices)),this.setAttribute("color",_n37.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var _e39=new Ii(t.lineDistances.length,1);this.setAttribute("lineDistance",_e39.copyArray(t.lineDistances));}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone());}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this;},setFromPoints:function setFromPoints(e){var t=[];for(var _n38=0,_r34=e.length;_n38<_r34;_n38++){var _r35=e[_n38];t.push(_r35.x,_r35.y,_r35.z||0);}return this.setAttribute("position",new Ii(t,3)),this;},updateFromObject:function updateFromObject(e){var t=e.geometry;if(e.isMesh){var _e40=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(_e40=void 0,t.elementsNeedUpdate=!1),void 0===_e40)return this.fromGeometry(t);_e40.verticesNeedUpdate=t.verticesNeedUpdate,_e40.normalsNeedUpdate=t.normalsNeedUpdate,_e40.colorsNeedUpdate=t.colorsNeedUpdate,_e40.uvsNeedUpdate=t.uvsNeedUpdate,_e40.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=_e40;}if(!0===t.verticesNeedUpdate){var _e41=this.attributes.position;void 0!==_e41&&(_e41.copyVector3sArray(t.vertices),_e41.needsUpdate=!0),t.verticesNeedUpdate=!1;}if(!0===t.normalsNeedUpdate){var _e42=this.attributes.normal;void 0!==_e42&&(_e42.copyVector3sArray(t.normals),_e42.needsUpdate=!0),t.normalsNeedUpdate=!1;}if(!0===t.colorsNeedUpdate){var _e43=this.attributes.color;void 0!==_e43&&(_e43.copyColorsArray(t.colors),_e43.needsUpdate=!0),t.colorsNeedUpdate=!1;}if(t.uvsNeedUpdate){var _e44=this.attributes.uv;void 0!==_e44&&(_e44.copyVector2sArray(t.uvs),_e44.needsUpdate=!0),t.uvsNeedUpdate=!1;}if(t.lineDistancesNeedUpdate){var _e45=this.attributes.lineDistance;void 0!==_e45&&(_e45.copyArray(t.lineDistances),_e45.needsUpdate=!0),t.lineDistancesNeedUpdate=!1;}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this;},fromGeometry:function fromGeometry(e){return e.__directGeometry=new Fi().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry);},fromDirectGeometry:function fromDirectGeometry(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new Ai(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var _t34=new Float32Array(3*e.normals.length);this.setAttribute("normal",new Ai(_t34,3).copyVector3sArray(e.normals));}if(e.colors.length>0){var _t35=new Float32Array(3*e.colors.length);this.setAttribute("color",new Ai(_t35,3).copyColorsArray(e.colors));}if(e.uvs.length>0){var _t36=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new Ai(_t36,2).copyVector2sArray(e.uvs));}if(e.uvs2.length>0){var _t37=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new Ai(_t37,2).copyVector2sArray(e.uvs2));}this.groups=e.groups;for(var _t38 in e.morphTargets){var _n39=[],_r36=e.morphTargets[_t38];for(var _e46=0,_t39=_r36.length;_e46<_t39;_e46++){var _t40=_r36[_e46],_i25=new Ii(3*_t40.data.length,3);_i25.name=_t40.name,_n39.push(_i25.copyVector3sArray(_t40.data));}this.morphAttributes[_t38]=_n39;}if(e.skinIndices.length>0){var _t41=new Ii(4*e.skinIndices.length,4);this.setAttribute("skinIndex",_t41.copyVector4sArray(e.skinIndices));}if(e.skinWeights.length>0){var _t42=new Ii(4*e.skinWeights.length,4);this.setAttribute("skinWeight",_t42.copyVector4sArray(e.skinWeights));}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this;},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new tr());var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Qn(-1/0,-1/0,-1/0),new Qn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var _e47=0,_n40=t.length;_e47<_n40;_e47++){var _n41=t[_e47];Vi.setFromBufferAttribute(_n41),this.morphTargetsRelative?(Xi.addVectors(this.boundingBox.min,Vi.min),this.boundingBox.expandByPoint(Xi),Xi.addVectors(this.boundingBox.max,Vi.max),this.boundingBox.expandByPoint(Xi)):(this.boundingBox.expandByPoint(Vi.min),this.boundingBox.expandByPoint(Vi.max));}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this);},computeBoundingSphere:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new gr());var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Qn(),1/0);if(e){var _n42=this.boundingSphere.center;if(Vi.setFromBufferAttribute(e),t)for(var _e48=0,_n43=t.length;_e48<_n43;_e48++){var _n44=t[_e48];Wi.setFromBufferAttribute(_n44),this.morphTargetsRelative?(Xi.addVectors(Vi.min,Wi.min),Vi.expandByPoint(Xi),Xi.addVectors(Vi.max,Wi.max),Vi.expandByPoint(Xi)):(Vi.expandByPoint(Wi.min),Vi.expandByPoint(Wi.max));}Vi.getCenter(_n42);var _r37=0;for(var _t43=0,_i26=e.count;_t43<_i26;_t43++){Xi.fromBufferAttribute(e,_t43),_r37=Math.max(_r37,_n42.distanceToSquared(Xi));}if(t)for(var _i27=0,_o5=t.length;_i27<_o5;_i27++){var _o6=t[_i27],_a5=this.morphTargetsRelative;for(var _t44=0,_i28=_o6.count;_t44<_i28;_t44++){Xi.fromBufferAttribute(_o6,_t44),_a5&&(Gi.fromBufferAttribute(e,_t44),Xi.add(Gi)),_r37=Math.max(_r37,_n42.distanceToSquared(Xi));}}this.boundingSphere.radius=Math.sqrt(_r37),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this);}},computeFaceNormals:function computeFaceNormals(){},computeVertexNormals:function computeVertexNormals(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var _n45=this.getAttribute("normal");if(void 0===_n45)_n45=new Ai(new Float32Array(3*t.count),3),this.setAttribute("normal",_n45);else for(var _e49=0,_t45=_n45.count;_e49<_t45;_e49++){_n45.setXYZ(_e49,0,0,0);}var _r38=new Qn(),_i29=new Qn(),_o7=new Qn(),_a6=new Qn(),_s6=new Qn(),_u8=new Qn(),_c6=new Qn(),_l4=new Qn();if(e)for(var _p2=0,_d2=e.count;_p2<_d2;_p2+=3){var _d3=e.getX(_p2+0),_h2=e.getX(_p2+1),_f2=e.getX(_p2+2);_r38.fromBufferAttribute(t,_d3),_i29.fromBufferAttribute(t,_h2),_o7.fromBufferAttribute(t,_f2),_c6.subVectors(_o7,_i29),_l4.subVectors(_r38,_i29),_c6.cross(_l4),_a6.fromBufferAttribute(_n45,_d3),_s6.fromBufferAttribute(_n45,_h2),_u8.fromBufferAttribute(_n45,_f2),_a6.add(_c6),_s6.add(_c6),_u8.add(_c6),_n45.setXYZ(_d3,_a6.x,_a6.y,_a6.z),_n45.setXYZ(_h2,_s6.x,_s6.y,_s6.z),_n45.setXYZ(_f2,_u8.x,_u8.y,_u8.z);}else for(var _e50=0,_a7=t.count;_e50<_a7;_e50+=3){_r38.fromBufferAttribute(t,_e50+0),_i29.fromBufferAttribute(t,_e50+1),_o7.fromBufferAttribute(t,_e50+2),_c6.subVectors(_o7,_i29),_l4.subVectors(_r38,_i29),_c6.cross(_l4),_n45.setXYZ(_e50+0,_c6.x,_c6.y,_c6.z),_n45.setXYZ(_e50+1,_c6.x,_c6.y,_c6.z),_n45.setXYZ(_e50+2,_c6.x,_c6.y,_c6.z);}this.normalizeNormals(),_n45.needsUpdate=!0;}},merge:function merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var _r39 in n){if(void 0===e.attributes[_r39])continue;var _i30=n[_r39].array,_o8=e.attributes[_r39],_a8=_o8.array,_s7=_o8.itemSize*t,_u9=Math.min(_a8.length,_i30.length-_s7);for(var _e51=0,_t46=_s7;_e51<_u9;_e51++,_t46++){_i30[_t46]=_a8[_e51];}}return this;},normalizeNormals:function normalizeNormals(){var e=this.attributes.normal;for(var _t47=0,_n46=e.count;_t47<_n46;_t47++){Xi.fromBufferAttribute(e,_t47),Xi.normalize(),e.setXYZ(_t47,Xi.x,Xi.y,Xi.z);}},toNonIndexed:function toNonIndexed(){function e(e,t){var n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);var a=0,s=0;for(var _e52=0,_i31=t.length;_e52<_i31;_e52++){a=t[_e52]*r;for(var _e53=0;_e53<r;_e53++){o[s++]=n[a++];}}return new Ai(o,r,i);}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Yi(),n=this.index.array,r=this.attributes;for(var _i32 in r){var _o9=e(r[_i32],n);t.setAttribute(_i32,_o9);}var i=this.morphAttributes;for(var _r40 in i){var _o10=[],_a9=i[_r40];for(var _t48=0,_r41=_a9.length;_t48<_r41;_t48++){var _r42=e(_a9[_t48],n);_o10.push(_r42);}t.morphAttributes[_r40]=_o10;}t.morphTargetsRelative=this.morphTargetsRelative;var o=this.groups;for(var _e54=0,_n47=o.length;_e54<_n47;_e54++){var _n48=o[_e54];t.addGroup(_n48.start,_n48.count,_n48.materialIndex);}return t;},toJSON:function toJSON(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var _t49=this.parameters;for(var _n49 in _t49){void 0!==_t49[_n49]&&(e[_n49]=_t49[_n49]);}return e;}e.data={attributes:{}};var t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});var n=this.attributes;for(var _t50 in n){var _r43=n[_t50],_i33=_r43.toJSON(e.data);""!==_r43.name&&(_i33.name=_r43.name),e.data.attributes[_t50]=_i33;}var r={};var i=!1;for(var _t51 in this.morphAttributes){var _n50=this.morphAttributes[_t51],_o11=[];for(var _t52=0,_r44=_n50.length;_t52<_r44;_t52++){var _r45=_n50[_t52],_i34=_r45.toJSON(e.data);""!==_r45.name&&(_i34.name=_r45.name),_o11.push(_i34);}_o11.length>0&&(r[_t51]=_o11,i=!0);}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);var o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));var a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e;},clone:function clone(){return new Yi().copy(this);},copy:function copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var _e55 in r){var _n51=r[_e55];this.setAttribute(_e55,_n51.clone(t));}var i=e.morphAttributes;for(var _e56 in i){var _n52=[],_r46=i[_e56];for(var _e57=0,_i35=_r46.length;_e57<_i35;_e57++){_n52.push(_r46[_e57].clone(t));}this.morphAttributes[_e56]=_n52;}this.morphTargetsRelative=e.morphTargetsRelative;var o=e.groups;for(var _e58=0,_t53=o.length;_e58<_t53;_e58++){var _t54=o[_e58];this.addGroup(_t54.start,_t54.count,_t54.materialIndex);}var a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());var s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}});var Zi=new Ar(),$i=new Er(),Ji=new gr(),Qi=new Qn(),Ki=new Qn(),eo=new Qn(),to=new Qn(),no=new Qn(),ro=new Qn(),io=new Qn(),oo=new Qn(),ao=new Qn(),so=new jn(),uo=new jn(),co=new jn(),lo=new Qn(),po=new Qn();function ho(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Yi();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Mi();Jr.call(this),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets();}function fo(e,t,n,r,i,o,a,s){var u;if(u=t.side===y?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==g,s),null===u)return null;po.copy(s),po.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(po);return c<n.near||c>n.far?null:{distance:c,point:po.clone(),object:e};}function mo(e,t,n,r,i,o,a,s,u,c,l,p){Qi.fromBufferAttribute(i,c),Ki.fromBufferAttribute(i,l),eo.fromBufferAttribute(i,p);var d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){io.set(0,0,0),oo.set(0,0,0),ao.set(0,0,0);for(var _e59=0,_t55=o.length;_e59<_t55;_e59++){var _t56=d[_e59],_n53=o[_e59];0!==_t56&&(to.fromBufferAttribute(_n53,c),no.fromBufferAttribute(_n53,l),ro.fromBufferAttribute(_n53,p),a?(io.addScaledVector(to,_t56),oo.addScaledVector(no,_t56),ao.addScaledVector(ro,_t56)):(io.addScaledVector(to.sub(Qi),_t56),oo.addScaledVector(no.sub(Ki),_t56),ao.addScaledVector(ro.sub(eo),_t56)));}Qi.add(io),Ki.add(oo),eo.add(ao);}e.isSkinnedMesh&&(e.boneTransform(c,Qi),e.boneTransform(l,Ki),e.boneTransform(p,eo));var h=fo(e,t,n,r,Qi,Ki,eo,lo);if(h){s&&(so.fromBufferAttribute(s,c),uo.fromBufferAttribute(s,l),co.fromBufferAttribute(s,p),h.uv=di.getUV(lo,Qi,Ki,eo,so,uo,co,new jn())),u&&(so.fromBufferAttribute(u,c),uo.fromBufferAttribute(u,l),co.fromBufferAttribute(u,p),h.uv2=di.getUV(lo,Qi,Ki,eo,so,uo,co,new jn()));var _e60=new bi(c,l,p);di.getNormal(Qi,Ki,eo,_e60.normal),h.face=_e60;}return h;}ho.prototype=Object.assign(Object.create(Jr.prototype),{constructor:ho,isMesh:!0,copy:function copy(e){return Jr.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this;},updateMorphTargets:function updateMorphTargets(){var e=this.geometry;if(e.isBufferGeometry){var _t57=e.morphAttributes,_n54=Object.keys(_t57);if(_n54.length>0){var _e61=_t57[_n54[0]];if(void 0!==_e61){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var _t58=0,_n55=_e61.length;_t58<_n55;_t58++){var _n56=_e61[_t58].name||String(_t58);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_n56]=_t58;}}}}else{var _t59=e.morphTargets;void 0!==_t59&&_t59.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");}},raycast:function raycast(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ji.copy(n.boundingSphere),Ji.applyMatrix4(i),!1===e.ray.intersectsSphere(Ji))return;if(Zi.copy(i).invert(),$i.copy(e.ray).applyMatrix4(Zi),null!==n.boundingBox&&!1===$i.intersectsBox(n.boundingBox))return;var o;if(n.isBufferGeometry){var _i36=n.index,_a10=n.attributes.position,_s8=n.morphAttributes.position,_u10=n.morphTargetsRelative,_c7=n.attributes.uv,_l5=n.attributes.uv2,_p3=n.groups,_d4=n.drawRange;if(null!==_i36){if(Array.isArray(r))for(var _n57=0,_h3=_p3.length;_n57<_h3;_n57++){var _h4=_p3[_n57],_f3=r[_h4.materialIndex];for(var _n58=Math.max(_h4.start,_d4.start),_r47=Math.min(_h4.start+_h4.count,_d4.start+_d4.count);_n58<_r47;_n58+=3){var _r48=_i36.getX(_n58),_p4=_i36.getX(_n58+1),_d5=_i36.getX(_n58+2);o=mo(this,_f3,e,$i,_a10,_s8,_u10,_c7,_l5,_r48,_p4,_d5),o&&(o.faceIndex=Math.floor(_n58/3),o.face.materialIndex=_h4.materialIndex,t.push(o));}}else{for(var _n59=Math.max(0,_d4.start),_p5=Math.min(_i36.count,_d4.start+_d4.count);_n59<_p5;_n59+=3){var _p6=_i36.getX(_n59),_d6=_i36.getX(_n59+1),_h5=_i36.getX(_n59+2);o=mo(this,r,e,$i,_a10,_s8,_u10,_c7,_l5,_p6,_d6,_h5),o&&(o.faceIndex=Math.floor(_n59/3),t.push(o));}}}else if(void 0!==_a10)if(Array.isArray(r))for(var _n60=0,_i37=_p3.length;_n60<_i37;_n60++){var _i38=_p3[_n60],_h6=r[_i38.materialIndex];for(var _n61=Math.max(_i38.start,_d4.start),_r49=Math.min(_i38.start+_i38.count,_d4.start+_d4.count);_n61<_r49;_n61+=3){o=mo(this,_h6,e,$i,_a10,_s8,_u10,_c7,_l5,_n61,_n61+1,_n61+2),o&&(o.faceIndex=Math.floor(_n61/3),o.face.materialIndex=_i38.materialIndex,t.push(o));}}else{for(var _n62=Math.max(0,_d4.start),_i39=Math.min(_a10.count,_d4.start+_d4.count);_n62<_i39;_n62+=3){o=mo(this,r,e,$i,_a10,_s8,_u10,_c7,_l5,_n62,_n62+1,_n62+2),o&&(o.faceIndex=Math.floor(_n62/3),t.push(o));}}}else if(n.isGeometry){var _i40=Array.isArray(r),_a11=n.vertices,_s9=n.faces;var _u11;var _c8=n.faceVertexUvs[0];_c8.length>0&&(_u11=_c8);for(var _n63=0,_c9=_s9.length;_n63<_c9;_n63++){var _c10=_s9[_n63],_l6=_i40?r[_c10.materialIndex]:r;if(void 0===_l6)continue;var _p7=_a11[_c10.a],_d7=_a11[_c10.b],_h7=_a11[_c10.c];if(o=fo(this,_l6,e,$i,_p7,_d7,_h7,lo),o){if(_u11&&_u11[_n63]){var _e62=_u11[_n63];so.copy(_e62[0]),uo.copy(_e62[1]),co.copy(_e62[2]),o.uv=di.getUV(lo,_p7,_d7,_h7,so,uo,co,new jn());}o.face=_c10,o.faceIndex=_n63,t.push(o);}}}}});var yo=/*#__PURE__*/function(_Yi){_inherits(yo,_Yi);var _super=_createSuper(yo);function yo(){var _this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:1;_classCallCheck(this,yo);_this=_super.call(this),_this.type="BoxBufferGeometry",_this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=_assertThisInitialized(_this);r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);var s=[],u=[],c=[],l=[];var p=0,d=0;function h(e,t,n,r,i,o,h,f,m,y,g){var v=o/m,x=h/y,b=o/2,w=h/2,S=f/2,M=m+1,_=y+1;var E=0,A=0;var T=new Qn();for(var _o12=0;_o12<_;_o12++){var _a12=_o12*x-w;for(var _s10=0;_s10<M;_s10++){var _p8=_s10*v-b;T[e]=_p8*r,T[t]=_a12*i,T[n]=S,u.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=f>0?1:-1,c.push(T.x,T.y,T.z),l.push(_s10/m),l.push(1-_o12/y),E+=1;}}for(var _e63=0;_e63<y;_e63++){for(var _t60=0;_t60<m;_t60++){var _n64=p+_t60+M*_e63,_r50=p+_t60+M*(_e63+1),_i41=p+(_t60+1)+M*(_e63+1),_o13=p+(_t60+1)+M*_e63;s.push(_n64,_r50,_o13),s.push(_r50,_i41,_o13),A+=6;}}a.addGroup(d,A,g),d+=A,p+=E;}h("z","y","x",-1,-1,n,t,e,o,i,0),h("z","y","x",1,-1,n,t,-e,o,i,1),h("x","z","y",1,1,e,n,t,r,o,2),h("x","z","y",1,-1,e,n,-t,r,o,3),h("x","y","z",1,-1,e,t,n,r,i,4),h("x","y","z",-1,-1,e,t,-n,r,i,5),_this.setIndex(s),_this.setAttribute("position",new Ii(u,3)),_this.setAttribute("normal",new Ii(c,3)),_this.setAttribute("uv",new Ii(l,2));return _this;}return yo;}(Yi);function go(e){var t={};for(var _n65 in e){t[_n65]={};for(var _r51 in e[_n65]){var _i42=e[_n65][_r51];_i42&&(_i42.isColor||_i42.isMatrix3||_i42.isMatrix4||_i42.isVector2||_i42.isVector3||_i42.isVector4||_i42.isTexture)?t[_n65][_r51]=_i42.clone():Array.isArray(_i42)?t[_n65][_r51]=_i42.slice():t[_n65][_r51]=_i42;}}return t;}function vo(e){var t={};for(var _n66=0;_n66<e.length;_n66++){var _r52=go(e[_n66]);for(var _e64 in _r52){t[_e64]=_r52[_e64];}}return t;}var xo={clone:go,merge:vo};function bo(e){Si.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e));}function wo(){Jr.call(this),this.type="Camera",this.matrixWorldInverse=new Ar(),this.projectionMatrix=new Ar(),this.projectionMatrixInverse=new Ar();}function So(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:50;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:.1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:2e3;wo.call(this),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix();}bo.prototype=Object.create(Si.prototype),bo.prototype.constructor=bo,bo.prototype.isShaderMaterial=!0,bo.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=go(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this;},bo.prototype.toJSON=function(e){var t=Si.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(var _n67 in this.uniforms){var _r53=this.uniforms[_n67].value;_r53&&_r53.isTexture?t.uniforms[_n67]={type:"t",value:_r53.toJSON(e).uuid}:_r53&&_r53.isColor?t.uniforms[_n67]={type:"c",value:_r53.getHex()}:_r53&&_r53.isVector2?t.uniforms[_n67]={type:"v2",value:_r53.toArray()}:_r53&&_r53.isVector3?t.uniforms[_n67]={type:"v3",value:_r53.toArray()}:_r53&&_r53.isVector4?t.uniforms[_n67]={type:"v4",value:_r53.toArray()}:_r53&&_r53.isMatrix3?t.uniforms[_n67]={type:"m3",value:_r53.toArray()}:_r53&&_r53.isMatrix4?t.uniforms[_n67]={type:"m4",value:_r53.toArray()}:t.uniforms[_n67]={value:_r53};}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var n={};for(var _e65 in this.extensions){!0===this.extensions[_e65]&&(n[_e65]=!0);}return Object.keys(n).length>0&&(t.extensions=n),t;},wo.prototype=Object.assign(Object.create(Jr.prototype),{constructor:wo,isCamera:!0,copy:function copy(e,t){return Jr.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this;},getWorldDirection:function getWorldDirection(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Qn()),this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize();},updateMatrixWorld:function updateMatrixWorld(e){Jr.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert();},updateWorldMatrix:function updateWorldMatrix(e,t){Jr.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert();},clone:function clone(){return new this.constructor().copy(this);}}),So.prototype=Object.assign(Object.create(wo.prototype),{constructor:So,isPerspectiveCamera:!0,copy:function copy(e,t){return wo.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this;},setFocalLength:function setFocalLength(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Un.RAD2DEG*Math.atan(t),this.updateProjectionMatrix();},getFocalLength:function getFocalLength(){var e=Math.tan(.5*Un.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e;},getEffectiveFOV:function getEffectiveFOV(){return 2*Un.RAD2DEG*Math.atan(Math.tan(.5*Un.DEG2RAD*this.fov)/this.zoom);},getFilmWidth:function getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1);},getFilmHeight:function getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1);},setViewOffset:function setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix();},clearViewOffset:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix();},updateProjectionMatrix:function updateProjectionMatrix(){var e=this.near;var t=e*Math.tan(.5*Un.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;var o=this.view;if(null!==this.view&&this.view.enabled){var _e66=o.fullWidth,_a13=o.fullHeight;i+=o.offsetX*r/_e66,t-=o.offsetY*n/_a13,r*=o.width/_e66,n*=o.height/_a13;}var a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert();},toJSON:function toJSON(e){var t=Jr.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t;}});function Mo(e,t,n){if(Jr.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;var r=new So(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Qn(1,0,0)),this.add(r);var i=new So(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Qn(-1,0,0)),this.add(i);var o=new So(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Qn(0,1,0)),this.add(o);var a=new So(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Qn(0,-1,0)),this.add(a);var s=new So(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Qn(0,0,1)),this.add(s);var u=new So(90,1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Qn(0,0,-1)),this.add(u),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var c=e.xr.enabled,l=e.getRenderTarget();e.xr.enabled=!1;var p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(l),e.xr.enabled=c;};}function _o(e,t,n,r,i,o,a,s,u,c){e=void 0!==e?e:[],t=void 0!==t?t:ae,a=void 0!==a?a:ze,Wn.call(this,e,t,n,r,i,o,a,s,u,c),this.flipY=!1,this._needsFlipEnvMap=!0;}function Eo(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),Zn.call(this,e,e,t),t=t||{},this.texture=new _o(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1;}function Ao(e,t,n,r,i,o,a,s,u,c,l,p){Wn.call(this,null,o,a,s,u,c,r,i,l,p),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==u?u:me,this.minFilter=void 0!==c?c:me,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0;}Mo.prototype=Object.create(Jr.prototype),Mo.prototype.constructor=Mo,_o.prototype=Object.create(Wn.prototype),_o.prototype.constructor=_o,_o.prototype.isCubeTexture=!0,Object.defineProperty(_o.prototype,"images",{get:function get(){return this.image;},set:function set(e){this.image=e;}}),Eo.prototype=Object.create(Zn.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isWebGLCubeRenderTarget=!0,Eo.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=ke,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},r=new yo(5,5,5),i=new bo({name:"CubemapFromEquirect",uniforms:go(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:y,blending:b});i.uniforms.tEquirect.value=t;var o=new ho(r,i),a=t.minFilter;return t.minFilter===Me&&(t.minFilter=be),new Mo(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this;},Eo.prototype.clear=function(e,t,n,r){var i=e.getRenderTarget();for(var _i43=0;_i43<6;_i43++){e.setRenderTarget(this,_i43),e.clear(t,n,r);}e.setRenderTarget(i);},Ao.prototype=Object.create(Wn.prototype),Ao.prototype.constructor=Ao,Ao.prototype.isDataTexture=!0;var To=new gr(),No=new Qn();var Do=/*#__PURE__*/function(){function Do(e,t,n,r,i,o){_classCallCheck(this,Do);this.planes=[void 0!==e?e:new ti(),void 0!==t?t:new ti(),void 0!==n?n:new ti(),void 0!==r?r:new ti(),void 0!==i?i:new ti(),void 0!==o?o:new ti()];}_createClass(Do,[{key:"set",value:function set(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){var t=this.planes;for(var _n68=0;_n68<6;_n68++){t[_n68].copy(e.planes[_n68]);}return this;}},{key:"setFromProjectionMatrix",value:function setFromProjectionMatrix(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],p=n[8],d=n[9],h=n[10],f=n[11],m=n[12],y=n[13],g=n[14],v=n[15];return t[0].setComponents(a-r,l-s,f-p,v-m).normalize(),t[1].setComponents(a+r,l+s,f+p,v+m).normalize(),t[2].setComponents(a+i,l+u,f+d,v+y).normalize(),t[3].setComponents(a-i,l-u,f-d,v-y).normalize(),t[4].setComponents(a-o,l-c,f-h,v-g).normalize(),t[5].setComponents(a+o,l+c,f+h,v+g).normalize(),this;}},{key:"intersectsObject",value:function intersectsObject(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),To.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(To);}},{key:"intersectsSprite",value:function intersectsSprite(e){return To.center.set(0,0,0),To.radius=.7071067811865476,To.applyMatrix4(e.matrixWorld),this.intersectsSphere(To);}},{key:"intersectsSphere",value:function intersectsSphere(e){var t=this.planes,n=e.center,r=-e.radius;for(var _e67=0;_e67<6;_e67++){if(t[_e67].distanceToPoint(n)<r)return!1;}return!0;}},{key:"intersectsBox",value:function intersectsBox(e){var t=this.planes;for(var _n69=0;_n69<6;_n69++){var _r54=t[_n69];if(No.x=_r54.normal.x>0?e.max.x:e.min.x,No.y=_r54.normal.y>0?e.max.y:e.min.y,No.z=_r54.normal.z>0?e.max.z:e.min.z,_r54.distanceToPoint(No)<0)return!1;}return!0;}},{key:"containsPoint",value:function containsPoint(e){var t=this.planes;for(var _n70=0;_n70<6;_n70++){if(t[_n70].distanceToPoint(e)<0)return!1;}return!0;}}]);return Do;}();function Co(){var e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i);}return{start:function start(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0);},stop:function stop(){e.cancelAnimationFrame(r),t=!1;},setAnimationLoop:function setAnimationLoop(e){n=e;},setContext:function setContext(t){e=t;}};}function Ro(e,t){var n=t.isWebGL2,r=new WeakMap();return{get:function get(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e);},remove:function remove(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r["delete"](t));},update:function update(t,i){if(t.isGLBufferAttribute){var _e68=r.get(t);return void((!_e68||_e68.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}));}t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version};}(t,i)):o.version<t.version&&(!function(t,r,i){var o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1);}(o.buffer,t,i),o.version=t.version);}};}var Po=/*#__PURE__*/function(_Yi2){_inherits(Po,_Yi2);var _super2=_createSuper(Po);function Po(){var _this2;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;_classCallCheck(this,Po);_this2=_super2.call(this),_this2.type="PlaneBufferGeometry",_this2.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),u=a+1,c=s+1,l=e/a,p=t/s,d=[],h=[],f=[],m=[];for(var _e69=0;_e69<c;_e69++){var _t61=_e69*p-o;for(var _n71=0;_n71<u;_n71++){var _r55=_n71*l-i;h.push(_r55,-_t61,0),f.push(0,0,1),m.push(_n71/a),m.push(1-_e69/s);}}for(var _e70=0;_e70<s;_e70++){for(var _t62=0;_t62<a;_t62++){var _n72=_t62+u*_e70,_r56=_t62+u*(_e70+1),_i44=_t62+1+u*(_e70+1),_o14=_t62+1+u*_e70;d.push(_n72,_r56,_o14),d.push(_r56,_i44,_o14);}}_this2.setIndex(d),_this2.setAttribute("position",new Ii(h,3)),_this2.setAttribute("normal",new Ii(f,3)),_this2.setAttribute("uv",new Ii(m,2));return _this2;}return Po;}(Yi);var Oo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Lo={common:{diffuse:{value:new xi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hn()},uv2Transform:{value:new Hn()},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new jn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn()}},sprite:{diffuse:{value:new xi(15658734)},opacity:{value:1},center:{value:new jn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn()}}},Io={basic:{uniforms:vo([Lo.common,Lo.specularmap,Lo.envmap,Lo.aomap,Lo.lightmap,Lo.fog]),vertexShader:Oo.meshbasic_vert,fragmentShader:Oo.meshbasic_frag},lambert:{uniforms:vo([Lo.common,Lo.specularmap,Lo.envmap,Lo.aomap,Lo.lightmap,Lo.emissivemap,Lo.fog,Lo.lights,{emissive:{value:new xi(0)}}]),vertexShader:Oo.meshlambert_vert,fragmentShader:Oo.meshlambert_frag},phong:{uniforms:vo([Lo.common,Lo.specularmap,Lo.envmap,Lo.aomap,Lo.lightmap,Lo.emissivemap,Lo.bumpmap,Lo.normalmap,Lo.displacementmap,Lo.fog,Lo.lights,{emissive:{value:new xi(0)},specular:{value:new xi(1118481)},shininess:{value:30}}]),vertexShader:Oo.meshphong_vert,fragmentShader:Oo.meshphong_frag},standard:{uniforms:vo([Lo.common,Lo.envmap,Lo.aomap,Lo.lightmap,Lo.emissivemap,Lo.bumpmap,Lo.normalmap,Lo.displacementmap,Lo.roughnessmap,Lo.metalnessmap,Lo.fog,Lo.lights,{emissive:{value:new xi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Oo.meshphysical_vert,fragmentShader:Oo.meshphysical_frag},toon:{uniforms:vo([Lo.common,Lo.aomap,Lo.lightmap,Lo.emissivemap,Lo.bumpmap,Lo.normalmap,Lo.displacementmap,Lo.gradientmap,Lo.fog,Lo.lights,{emissive:{value:new xi(0)}}]),vertexShader:Oo.meshtoon_vert,fragmentShader:Oo.meshtoon_frag},matcap:{uniforms:vo([Lo.common,Lo.bumpmap,Lo.normalmap,Lo.displacementmap,Lo.fog,{matcap:{value:null}}]),vertexShader:Oo.meshmatcap_vert,fragmentShader:Oo.meshmatcap_frag},points:{uniforms:vo([Lo.points,Lo.fog]),vertexShader:Oo.points_vert,fragmentShader:Oo.points_frag},dashed:{uniforms:vo([Lo.common,Lo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Oo.linedashed_vert,fragmentShader:Oo.linedashed_frag},depth:{uniforms:vo([Lo.common,Lo.displacementmap]),vertexShader:Oo.depth_vert,fragmentShader:Oo.depth_frag},normal:{uniforms:vo([Lo.common,Lo.bumpmap,Lo.normalmap,Lo.displacementmap,{opacity:{value:1}}]),vertexShader:Oo.normal_vert,fragmentShader:Oo.normal_frag},sprite:{uniforms:vo([Lo.sprite,Lo.fog]),vertexShader:Oo.sprite_vert,fragmentShader:Oo.sprite_frag},background:{uniforms:{uvTransform:{value:new Hn()},t2D:{value:null}},vertexShader:Oo.background_vert,fragmentShader:Oo.background_frag},cube:{uniforms:vo([Lo.envmap,{opacity:{value:1}}]),vertexShader:Oo.cube_vert,fragmentShader:Oo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Oo.equirect_vert,fragmentShader:Oo.equirect_frag},distanceRGBA:{uniforms:vo([Lo.common,Lo.displacementmap,{referencePosition:{value:new Qn()},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Oo.distanceRGBA_vert,fragmentShader:Oo.distanceRGBA_frag},shadow:{uniforms:vo([Lo.lights,Lo.fog,{color:{value:new xi(0)},opacity:{value:1}}]),vertexShader:Oo.shadow_vert,fragmentShader:Oo.shadow_frag}};function Bo(e,t,n,r,i){var o=new xi(0);var a,s,u=0,c=null,l=0,p=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i);}return{getClearColor:function getClearColor(){return o;},setClearColor:function setClearColor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;o.set(e),u=t,d(o,u);},getClearAlpha:function getClearAlpha(){return u;},setClearAlpha:function setClearAlpha(e){u=e,d(o,u);},render:function render(n,i,h,f){var g=!0===i.isScene?i.background:null;g&&g.isTexture&&(g=t.get(g));var v=e.xr,x=v.getSession&&v.getSession();x&&"additive"===x.environmentBlendMode&&(g=null),null===g?d(o,u):g&&g.isColor&&(d(g,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.mapping===le)?(void 0===s&&(s=new ho(new yo(1,1,1),new bo({name:"BackgroundCubeMaterial",uniforms:go(Io.cube.uniforms),vertexShader:Io.cube.vertexShader,fragmentShader:Io.cube.fragmentShader,side:y,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld);},Object.defineProperty(s.material,"envMap",{get:function get(){return this.uniforms.envMap.value;}}),r.update(s)),g.isWebGLCubeRenderTarget&&(g=g.texture),s.material.uniforms.envMap.value=g,s.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g._needsFlipEnvMap?-1:1,c===g&&l===g.version&&p===e.toneMapping||(s.material.needsUpdate=!0,c=g,l=g.version,p=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):g&&g.isTexture&&(void 0===a&&(a=new ho(new Po(2,2),new bo({name:"BackgroundMaterial",uniforms:go(Io.background.uniforms),vertexShader:Io.background.vertexShader,fragmentShader:Io.background.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function get(){return this.uniforms.t2D.value;}}),r.update(a)),a.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&l===g.version&&p===e.toneMapping||(a.material.needsUpdate=!0,c=g,l=g.version,p=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null));}};}function Fo(e,t,n,r){var i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=d(null);var c=u;function l(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t);}function p(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t);}function d(e){var t=[],n=[],r=[];for(var _e71=0;_e71<i;_e71++){t[_e71]=0,n[_e71]=0,r[_e71]=0;}return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null};}function h(){var e=c.newAttributes;for(var _t63=0,_n73=e.length;_t63<_n73;_t63++){e[_t63]=0;}}function f(e){m(e,0);}function m(n,i){var o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i;}}function y(){var t=c.newAttributes,n=c.enabledAttributes;for(var _r57=0,_i45=n.length;_r57<_i45;_r57++){n[_r57]!==t[_r57]&&(e.disableVertexAttribArray(_r57),n[_r57]=0);}}function g(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s);}function v(){x(),c!==u&&(c=u,l(c.object));}function x(){u.geometry=null,u.program=null,u.wireframe=!1;}return{setup:function setup(i,u,p,v,x){var b=!1;if(a){var _t64=function(t,n,i){var a=!0===i.wireframe;var u=s[t.id];void 0===u&&(u={},s[t.id]=u);var c=u[n.id];void 0===c&&(c={},u[n.id]=c);var l=c[a];void 0===l&&(l=d(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=l);return l;}(v,p,u);c!==_t64&&(c=_t64,l(c.object)),b=function(e,t){var n=c.attributes,r=e.attributes;var i=0;for(var _e72 in r){var _t65=n[_e72],_o15=r[_e72];if(void 0===_t65)return!0;if(_t65.attribute!==_o15)return!0;if(_t65.data!==_o15.data)return!0;i++;}return c.attributesNum!==i||c.index!==t;}(v,x),b&&function(e,t){var n={},r=e.attributes;var i=0;for(var _e73 in r){var _t66=r[_e73],_o16={};_o16.attribute=_t66,_t66.data&&(_o16.data=_t66.data),n[_e73]=_o16,i++;}c.attributes=n,c.attributesNum=i,c.index=t;}(v,x);}else{var _e74=!0===u.wireframe;c.geometry===v.id&&c.program===p.id&&c.wireframe===_e74||(c.geometry=v.id,c.program=p.id,c.wireframe=_e74,b=!0);}!0===i.isInstancedMesh&&(b=!0),null!==x&&n.update(x,34963),b&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;h();var u=s.attributes,c=a.getAttributes(),l=o.defaultAttributeValues;for(var _t67 in c){var _r58=c[_t67];if(_r58>=0){var _o17=u[_t67];if(void 0!==_o17){var _t68=_o17.normalized,_i46=_o17.itemSize,_a14=n.get(_o17);if(void 0===_a14)continue;var _u12=_a14.buffer,_c11=_a14.type,_l7=_a14.bytesPerElement;if(_o17.isInterleavedBufferAttribute){var _n74=_o17.data,_a15=_n74.stride,_p9=_o17.offset;_n74&&_n74.isInstancedInterleavedBuffer?(m(_r58,_n74.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=_n74.meshPerAttribute*_n74.count)):f(_r58),e.bindBuffer(34962,_u12),g(_r58,_i46,_c11,_t68,_a15*_l7,_p9*_l7);}else _o17.isInstancedBufferAttribute?(m(_r58,_o17.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=_o17.meshPerAttribute*_o17.count)):f(_r58),e.bindBuffer(34962,_u12),g(_r58,_i46,_c11,_t68,0,0);}else if("instanceMatrix"===_t67){var _t69=n.get(i.instanceMatrix);if(void 0===_t69)continue;var _o18=_t69.buffer,_a16=_t69.type;m(_r58+0,1),m(_r58+1,1),m(_r58+2,1),m(_r58+3,1),e.bindBuffer(34962,_o18),e.vertexAttribPointer(_r58+0,4,_a16,!1,64,0),e.vertexAttribPointer(_r58+1,4,_a16,!1,64,16),e.vertexAttribPointer(_r58+2,4,_a16,!1,64,32),e.vertexAttribPointer(_r58+3,4,_a16,!1,64,48);}else if("instanceColor"===_t67){var _t70=n.get(i.instanceColor);if(void 0===_t70)continue;var _o19=_t70.buffer,_a17=_t70.type;m(_r58,1),e.bindBuffer(34962,_o19),e.vertexAttribPointer(_r58,3,_a17,!1,12,0);}else if(void 0!==l){var _n75=l[_t67];if(void 0!==_n75)switch(_n75.length){case 2:e.vertexAttrib2fv(_r58,_n75);break;case 3:e.vertexAttrib3fv(_r58,_n75);break;case 4:e.vertexAttrib4fv(_r58,_n75);break;default:e.vertexAttrib1fv(_r58,_n75);}}}}y();}(i,u,p,v),null!==x&&e.bindBuffer(34963,n.get(x).buffer));},reset:v,resetDefaultState:x,dispose:function dispose(){v();for(var _e75 in s){var _t71=s[_e75];for(var _e76 in _t71){var _n76=_t71[_e76];for(var _e77 in _n76){p(_n76[_e77].object),delete _n76[_e77];}delete _t71[_e76];}delete s[_e75];}},releaseStatesOfGeometry:function releaseStatesOfGeometry(e){if(void 0===s[e.id])return;var t=s[e.id];for(var _e78 in t){var _n77=t[_e78];for(var _e79 in _n77){p(_n77[_e79].object),delete _n77[_e79];}delete t[_e78];}delete s[e.id];},releaseStatesOfProgram:function releaseStatesOfProgram(e){for(var _t72 in s){var _n78=s[_t72];if(void 0===_n78[e.id])continue;var _r59=_n78[e.id];for(var _e80 in _r59){p(_r59[_e80].object),delete _r59[_e80];}delete _n78[e.id];}},initAttributes:h,enableAttribute:f,disableUnusedAttributes:y};}function zo(e,t,n,r){var i=r.isWebGL2;var o;this.setMode=function(e){o=e;},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1);},this.renderInstances=function(r,a,s){if(0===s)return;var u,c;if(i)u=e,c="drawArraysInstanced";else if(u=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](o,r,a,s),n.update(a,o,s);};}function ko(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump";}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp";}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;var a=void 0!==n.precision?n.precision:"highp";var s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),l=e.getParameter(35660),p=e.getParameter(3379),d=e.getParameter(34076),h=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),y=e.getParameter(36349),g=l>0,v=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r;},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:p,maxCubemapSize:d,maxAttributes:h,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:o?e.getParameter(36183):0};}function Uo(e){var t=this;var n=null,r=0,i=!1,o=!1;var a=new ti(),s=new Hn(),u={value:null,needsUpdate:!1};function c(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0;}function l(e,n,r,i){var o=null!==e?e.length:0;var c=null;if(0!==o){if(c=u.value,!0!==i||null===c){var _t73=r+4*o,_i47=n.matrixWorldInverse;s.getNormalMatrix(_i47),(null===c||c.length<_t73)&&(c=new Float32Array(_t73));for(var _t74=0,_n79=r;_t74!==o;++_t74,_n79+=4){a.copy(e[_t74]).applyMatrix4(_i47,s),a.normal.toArray(c,_n79),c[_n79+3]=a.constant;}}u.value=c,u.needsUpdate=!0;}return t.numPlanes=o,t.numIntersection=0,c;}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){var a=0!==e.length||t||0!==r||i;return i=t,n=l(e,o,0),r=e.length,a;},this.beginShadows=function(){o=!0,l(null);},this.endShadows=function(){o=!1,c();},this.setState=function(t,a,s){var p=t.clippingPlanes,d=t.clipIntersection,h=t.clipShadows,f=e.get(t);if(!i||null===p||0===p.length||o&&!h)o?l(null):c();else{var _e81=o?0:r,_t75=4*_e81;var _i48=f.clippingState||null;u.value=_i48,_i48=l(p,a,_t75,s);for(var _e82=0;_e82!==_t75;++_e82){_i48[_e82]=n[_e82];}f.clippingState=_i48,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=_e81;}};}function jo(e){var t=new WeakMap();function n(e,t){return t===ue?e.mapping=ae:t===ce&&(e.mapping=se),e;}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t["delete"](n),i.dispose());}return{get:function get(i){if(i&&i.isTexture){var _o20=i.mapping;if(_o20===ue||_o20===ce){if(t.has(i)){return n(t.get(i).texture,i.mapping);}{var _o21=i.image;if(_o21&&_o21.height>0){var _a18=e.getRenderList(),_s11=e.getRenderTarget(),_u13=new Eo(_o21.height/2);return _u13.fromEquirectangularTexture(e,i),t.set(i,_u13),e.setRenderTarget(_s11),e.setRenderList(_a18),i.addEventListener("dispose",r),n(_u13.texture,i.mapping);}return null;}}}return i;},dispose:function dispose(){t=new WeakMap();}};}function Ho(e){var t={};return{has:function has(n){if(void 0!==t[n])return null!==t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n);}return t[n]=r,null!==r;},get:function get(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e];}};}function qo(e,t,n,r){var i=new WeakMap(),o=new WeakMap();function a(e){var s=e.target,u=i.get(s);null!==u.index&&t.remove(u.index);for(var _e83 in u.attributes){t.remove(u.attributes[_e83]);}s.removeEventListener("dispose",a),i["delete"](s);var c=o.get(u);c&&(t.remove(c),o["delete"](u)),r.releaseStatesOfGeometry(u),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--;}function s(e){var n=[],r=e.index,i=e.attributes.position;var a=0;if(null!==r){var _e84=r.array;a=r.version;for(var _t76=0,_r60=_e84.length;_t76<_r60;_t76+=3){var _r61=_e84[_t76+0],_i49=_e84[_t76+1],_o22=_e84[_t76+2];n.push(_r61,_i49,_i49,_o22,_o22,_r61);}}else{var _e85=i.array;a=i.version;for(var _t77=0,_r62=_e85.length/3-1;_t77<_r62;_t77+=3){var _e86=_t77+0,_r63=_t77+1,_i50=_t77+2;n.push(_e86,_r63,_r63,_i50,_i50,_e86);}}var s=new(zi(n)>65535?Oi:Ri)(n,1);s.version=a;var u=o.get(e);u&&t.remove(u),o.set(e,s);}return{get:function get(e,t){var r=i.get(t);return r||(t.addEventListener("dispose",a),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new Yi().setFromObject(e)),r=t._bufferGeometry),i.set(t,r),n.memory.geometries++,r);},update:function update(e){var n=e.attributes;for(var _e87 in n){t.update(n[_e87],34962);}var r=e.morphAttributes;for(var _e88 in r){var _n80=r[_e88];for(var _e89=0,_r64=_n80.length;_e89<_r64;_e89++){t.update(_n80[_e89],34962);}}},getWireframeAttribute:function getWireframeAttribute(e){var t=o.get(e);if(t){var _n81=e.index;null!==_n81&&t.version<_n81.version&&s(e);}else s(e);return o.get(e);}};}function Go(e,t,n,r){var i=r.isWebGL2;var o,a,s;this.setMode=function(e){o=e;},this.setIndex=function(e){a=e.type,s=e.bytesPerElement;},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1);},this.renderInstances=function(r,u,c){if(0===c)return;var l,p;if(i)l=e,p="drawElementsInstanced";else if(l=t.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[p](o,u,a,r*s,c),n.update(u,o,c);};}function Vo(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function reset(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0;},update:function update(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n);}}};}function Wo(e,t){return e[0]-t[0];}function Xo(e,t){return Math.abs(t[1])-Math.abs(e[1]);}function Yo(e){var t={},n=new Float32Array(8),r=[];for(var _e90=0;_e90<8;_e90++){r[_e90]=[_e90,0];}return{update:function update(i,o,a,s){var u=i.morphTargetInfluences,c=void 0===u?0:u.length;var l=t[o.id];if(void 0===l){l=[];for(var _e91=0;_e91<c;_e91++){l[_e91]=[_e91,0];}t[o.id]=l;}for(var _e92=0;_e92<c;_e92++){var _t78=l[_e92];_t78[0]=_e92,_t78[1]=u[_e92];}l.sort(Xo);for(var _e93=0;_e93<8;_e93++){_e93<c&&l[_e93][1]?(r[_e93][0]=l[_e93][0],r[_e93][1]=l[_e93][1]):(r[_e93][0]=Number.MAX_SAFE_INTEGER,r[_e93][1]=0);}r.sort(Wo);var p=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;var h=0;for(var _e94=0;_e94<8;_e94++){var _t79=r[_e94],_i51=_t79[0],_a19=_t79[1];_i51!==Number.MAX_SAFE_INTEGER&&_a19?(p&&o.getAttribute("morphTarget"+_e94)!==p[_i51]&&o.setAttribute("morphTarget"+_e94,p[_i51]),d&&o.getAttribute("morphNormal"+_e94)!==d[_i51]&&o.setAttribute("morphNormal"+_e94,d[_i51]),n[_e94]=_a19,h+=_a19):(p&&!0===o.hasAttribute("morphTarget"+_e94)&&o.deleteAttribute("morphTarget"+_e94),d&&!0===o.hasAttribute("morphNormal"+_e94)&&o.deleteAttribute("morphNormal"+_e94),n[_e94]=0);}var f=o.morphTargetsRelative?1:1-h;s.getUniforms().setValue(e,"morphTargetBaseInfluence",f),s.getUniforms().setValue(e,"morphTargetInfluences",n);}};}function Zo(e,t,n,r){var i=new WeakMap();function o(e){var t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor);}return{update:function update(e){var a=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==a&&(s.isGeometry&&u.updateFromObject(e),t.update(u),i.set(u,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u;},dispose:function dispose(){i=new WeakMap();}};}function $o(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;Wn.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=me,this.minFilter=me,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0;}function Jo(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;Wn.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=me,this.minFilter=me,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0;}Io.physical={uniforms:vo([Io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new jn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new xi(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Oo.meshphysical_vert,fragmentShader:Oo.meshphysical_frag},$o.prototype=Object.create(Wn.prototype),$o.prototype.constructor=$o,$o.prototype.isDataTexture2DArray=!0,Jo.prototype=Object.create(Wn.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isDataTexture3D=!0;var Qo=new Wn(),Ko=new $o(),ea=new Jo(),ta=new _o(),na=[],ra=[],ia=new Float32Array(16),oa=new Float32Array(9),aa=new Float32Array(4);function sa(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n;var o=na[i];if(void 0===o&&(o=new Float32Array(i),na[i]=o),0!==t){r.toArray(o,0);for(var _r65=1,_i52=0;_r65!==t;++_r65){_i52+=n,e[_r65].toArray(o,_i52);}}return o;}function ua(e,t){if(e.length!==t.length)return!1;for(var _n82=0,_r66=e.length;_n82<_r66;_n82++){if(e[_n82]!==t[_n82])return!1;}return!0;}function ca(e,t){for(var _n83=0,_r67=t.length;_n83<_r67;_n83++){e[_n83]=t[_n83];}}function la(e,t){var n=ra[t];void 0===n&&(n=new Int32Array(t),ra[t]=n);for(var _r68=0;_r68!==t;++_r68){n[_r68]=e.allocateTextureUnit();}return n;}function pa(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t);}function da(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ua(n,t))return;e.uniform2fv(this.addr,t),ca(n,t);}}function ha(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ua(n,t))return;e.uniform3fv(this.addr,t),ca(n,t);}}function fa(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ua(n,t))return;e.uniform4fv(this.addr,t),ca(n,t);}}function ma(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ua(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ca(n,t);}else{if(ua(n,r))return;aa.set(r),e.uniformMatrix2fv(this.addr,!1,aa),ca(n,r);}}function ya(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ua(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ca(n,t);}else{if(ua(n,r))return;oa.set(r),e.uniformMatrix3fv(this.addr,!1,oa),ca(n,r);}}function ga(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ua(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ca(n,t);}else{if(ua(n,r))return;ia.set(r),e.uniformMatrix4fv(this.addr,!1,ia),ca(n,r);}}function va(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Qo,i);}function xa(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Ko,i);}function ba(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||ea,i);}function wa(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||ta,i);}function Sa(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t);}function Ma(e,t){var n=this.cache;ua(n,t)||(e.uniform2iv(this.addr,t),ca(n,t));}function _a(e,t){var n=this.cache;ua(n,t)||(e.uniform3iv(this.addr,t),ca(n,t));}function Ea(e,t){var n=this.cache;ua(n,t)||(e.uniform4iv(this.addr,t),ca(n,t));}function Aa(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t);}function Ta(e,t){e.uniform1fv(this.addr,t);}function Na(e,t){e.uniform1iv(this.addr,t);}function Da(e,t){e.uniform2iv(this.addr,t);}function Ca(e,t){e.uniform3iv(this.addr,t);}function Ra(e,t){e.uniform4iv(this.addr,t);}function Pa(e,t){var n=sa(t,this.size,2);e.uniform2fv(this.addr,n);}function Oa(e,t){var n=sa(t,this.size,3);e.uniform3fv(this.addr,n);}function La(e,t){var n=sa(t,this.size,4);e.uniform4fv(this.addr,n);}function Ia(e,t){var n=sa(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n);}function Ba(e,t){var n=sa(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n);}function Fa(e,t){var n=sa(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n);}function za(e,t,n){var r=t.length,i=la(n,r);e.uniform1iv(this.addr,i);for(var _e95=0;_e95!==r;++_e95){n.safeSetTexture2D(t[_e95]||Qo,i[_e95]);}}function ka(e,t,n){var r=t.length,i=la(n,r);e.uniform1iv(this.addr,i);for(var _e96=0;_e96!==r;++_e96){n.safeSetTextureCube(t[_e96]||ta,i[_e96]);}}function Ua(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return pa;case 35664:return da;case 35665:return ha;case 35666:return fa;case 35674:return ma;case 35675:return ya;case 35676:return ga;case 5124:case 35670:return Sa;case 35667:case 35671:return Ma;case 35668:case 35672:return _a;case 35669:case 35673:return Ea;case 5125:return Aa;case 35678:case 36198:case 36298:case 36306:case 35682:return va;case 35679:case 36299:case 36307:return ba;case 35680:case 36300:case 36308:case 36293:return wa;case 36289:case 36303:case 36311:case 36292:return xa;}}(t.type);}function ja(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ta;case 35664:return Pa;case 35665:return Oa;case 35666:return La;case 35674:return Ia;case 35675:return Ba;case 35676:return Fa;case 5124:case 35670:return Na;case 35667:case 35671:return Da;case 35668:case 35672:return Ca;case 35669:case 35673:return Ra;case 35678:case 36198:case 36298:case 36306:case 35682:return za;case 35680:case 36300:case 36308:case 36293:return ka;}}(t.type);}function Ha(e){this.id=e,this.seq=[],this.map={};}ja.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ca(t,e);},Ha.prototype.setValue=function(e,t,n){var r=this.seq;for(var _i53=0,_o23=r.length;_i53!==_o23;++_i53){var _o24=r[_i53];_o24.setValue(e,t[_o24.id],n);}};var qa=/(\w+)(\])?(\[|\.)?/g;function Ga(e,t){e.seq.push(t),e.map[t.id]=t;}function Va(e,t,n){var r=e.name,i=r.length;for(qa.lastIndex=0;;){var _o25=qa.exec(r),_a20=qa.lastIndex;var _s12=_o25[1];var _u14="]"===_o25[2],_c12=_o25[3];if(_u14&&(_s12|=0),void 0===_c12||"["===_c12&&_a20+2===i){Ga(n,void 0===_c12?new Ua(_s12,e,t):new ja(_s12,e,t));break;}{var _e97=n.map[_s12];void 0===_e97&&(_e97=new Ha(_s12),Ga(n,_e97)),n=_e97;}}}function Wa(e,t){this.seq=[],this.map={};var n=e.getProgramParameter(t,35718);for(var _r69=0;_r69<n;++_r69){var _n84=e.getActiveUniform(t,_r69);Va(_n84,e.getUniformLocation(t,_n84.name),this);}}function Xa(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r;}Wa.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r);},Wa.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r);},Wa.upload=function(e,t,n,r){for(var _i54=0,_o26=t.length;_i54!==_o26;++_i54){var _o27=t[_i54],_a21=n[_o27.id];!1!==_a21.needsUpdate&&_o27.setValue(e,_a21.value,r);}},Wa.seqWithValue=function(e,t){var n=[];for(var _r70=0,_i55=e.length;_r70!==_i55;++_r70){var _i56=e[_r70];_i56.id in t&&n.push(_i56);}return n;};var Ya=0;function Za(e){switch(e){case Jt:return["Linear","( value )"];case Qt:return["sRGB","( value )"];case en:return["RGBE","( value )"];case nn:return["RGBM","( value, 7.0 )"];case rn:return["RGBM","( value, 16.0 )"];case on:return["RGBD","( value, 256.0 )"];case Kt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case tn:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"];}}function $a(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){var t=e.split("\n");for(var _e98=0;_e98<t.length;_e98++){t[_e98]=_e98+1+": "+t[_e98];}return t.join("\n");}(e.getShaderSource(t));}function Ja(e,t){var n=Za(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }";}function Qa(e,t){var n=Za(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }";}function Ka(e,t){var n;switch(t){case ee:n="Linear";break;case te:n="Reinhard";break;case ne:n="OptimizedCineon";break;case re:n="ACESFilmic";break;case ie:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear";}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }";}function es(e){return""!==e;}function ts(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows);}function ns(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection);}var rs=/^[ \t]*#include +<([\w\d./]+)>/gm;function is(e){return e.replace(rs,os);}function os(e,t){var n=Oo[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return is(n);}var as=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ss=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function us(e){return e.replace(ss,ls).replace(as,cs);}function cs(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ls(e,t,n,r);}function ls(e,t,n,r){var i="";for(var _e99=parseInt(t);_e99<parseInt(n);_e99++){i+=r.replace(/\[\s*i\s*\]/g,"[ "+_e99+" ]").replace(/UNROLLED_LOOP_INDEX/g,_e99);}return i;}function ps(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t;}function ds(e,t,n,r){var i=e.getContext(),o=n.defines;var a=n.vertexShader,s=n.fragmentShader;var u=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===f&&(t="SHADOWMAP_TYPE_VSM"),t;}(n),c=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ae:case se:t="ENVMAP_TYPE_CUBE";break;case le:case pe:t="ENVMAP_TYPE_CUBE_UV";}return t;}(n),l=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case se:case pe:t="ENVMAP_MODE_REFRACTION";}return t;}(n),p=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case $:t="ENVMAP_BLENDING_MULTIPLY";break;case J:t="ENVMAP_BLENDING_MIX";break;case Q:t="ENVMAP_BLENDING_ADD";}return t;}(n),m=e.gammaFactor>0?e.gammaFactor:1,y=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(es).join("\n");}(n),g=function(e){var t=[];for(var _n85 in e){var _r71=e[_n85];!1!==_r71&&t.push("#define "+_n85+" "+_r71);}return t.join("\n");}(o),v=i.createProgram();var x,b,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(x=[g].filter(es).join("\n"),x.length>0&&(x+="\n"),b=[y,g].filter(es).join("\n"),b.length>0&&(b+="\n")):(x=[ps(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(es).join("\n"),b=[y,ps(n),"#define SHADER_NAME "+n.shaderName,g,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+l:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==K?"#define TONE_MAPPING":"",n.toneMapping!==K?Oo.tonemapping_pars_fragment:"",n.toneMapping!==K?Ka("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Oo.encodings_pars_fragment,n.map?Ja("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ja("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ja("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ja("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Ja("lightMapTexelToLinear",n.lightMapEncoding):"",Qa("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(es).join("\n")),a=is(a),a=ts(a,n),a=ns(a,n),s=is(s),s=ts(s,n),s=ns(s,n),a=us(a),s=us(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",x=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+x,b=["#define varying in",n.glslVersion===Bn?"":"out highp vec4 pc_fragColor;",n.glslVersion===Bn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);var S=w+b+s,M=Xa(i,35633,w+x+a),_=Xa(i,35632,S);if(i.attachShader(v,M),i.attachShader(v,_),void 0!==n.index0AttributeName?i.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),e.debug.checkShaderErrors){var _e100=i.getProgramInfoLog(v).trim(),_t80=i.getShaderInfoLog(M).trim(),_n86=i.getShaderInfoLog(_).trim();var _r72=!0,_o28=!0;if(!1===i.getProgramParameter(v,35714)){_r72=!1;var _t81=$a(i,M,"vertex"),_n87=$a(i,_,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(v,35715),"gl.getProgramInfoLog",_e100,_t81,_n87);}else""!==_e100?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",_e100):""!==_t80&&""!==_n86||(_o28=!1);_o28&&(this.diagnostics={runnable:_r72,programLog:_e100,vertexShader:{log:_t80,prefix:x},fragmentShader:{log:_n86,prefix:b}});}var E,A;return i.deleteShader(M),i.deleteShader(_),this.getUniforms=function(){return void 0===E&&(E=new Wa(i,v)),E;},this.getAttributes=function(){return void 0===A&&(A=function(e,t){var n={},r=e.getProgramParameter(t,35721);for(var _i57=0;_i57<r;_i57++){var _r73=e.getActiveAttrib(t,_i57).name;n[_r73]=e.getAttribLocation(t,_r73);}return n;}(i,v)),A;},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0;},this.name=n.shaderName,this.id=Ya++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=_,this;}function hs(e,t,n,r,i,o){var a=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,c=r.floatVertexTextures,l=r.maxVertexUniforms,p=r.vertexTextures;var d=r.precision;var h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Jt,t;}return{getParameters:function getParameters(i,a,f,v,x){var b=v.fog,w=i.isMeshStandardMaterial?v.environment:null,S=t.get(i.envMap||w),M=h[i.type],_=x.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(c)return 1024;{var _e101=l,_n88=Math.floor((_e101-20)/4),_r74=Math.min(_n88,t.length);return _r74<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+_r74+"."),0):_r74;}}(x):0;var E,A;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),M){var _e102=Io[M];E=_e102.vertexShader,A=_e102.fragmentShader;}else E=i.vertexShader,A=i.fragmentShader;var T=e.getRenderTarget();return{isWebGL2:s,shaderID:M,shaderName:i.type,vertexShader:E,fragmentShader:A,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===x.isInstancedMesh,instancingColor:!0===x.isInstancedMesh&&null!==x.instanceColor,supportsVertexTextures:p,outputEncoding:null!==T?m(T.texture):e.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!S,envMapMode:S&&S.mapping,envMapEncoding:m(S),envMapCubeUV:!!S&&(S.mapping===le||S.mapping===pe),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===cn,tangentSpaceNormalMap:i.normalMapType===un,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!b,useFog:i.fog,fogExp2:b&&b.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:i.skinning&&_>0,maxBones:_,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&f.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:K,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===g,flipSided:i.side===y,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()};},getProgramCacheKey:function getProgramCacheKey(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var _e103 in t.defines){n.push(_e103),n.push(t.defines[_e103]);}if(!1===t.isRawShaderMaterial){for(var _e104=0;_e104<f.length;_e104++){n.push(t[f[_e104]]);}n.push(e.outputEncoding),n.push(e.gammaFactor);}return n.push(t.customProgramCacheKey),n.join();},getUniforms:function getUniforms(e){var t=h[e.type];var n;if(t){var _e105=Io[t];n=xo.clone(_e105.uniforms);}else n=e.uniforms;return n;},acquireProgram:function acquireProgram(t,n){var r;for(var _e106=0,_t82=a.length;_e106<_t82;_e106++){var _t83=a[_e106];if(_t83.cacheKey===n){r=_t83,++r.usedTimes;break;}}return void 0===r&&(r=new ds(e,n,t,i),a.push(r)),r;},releaseProgram:function releaseProgram(e){if(0==--e.usedTimes){var _t84=a.indexOf(e);a[_t84]=a[a.length-1],a.pop(),e.destroy();}},programs:a};}function fs(){var e=new WeakMap();return{get:function get(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n;},remove:function remove(t){e["delete"](t);},update:function update(t,n,r){e.get(t)[n]=r;},dispose:function dispose(){e=new WeakMap();}};}function ms(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id;}function ys(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id;}function gs(e){var t=[];var n=0;var r=[],i=[],o={id:-1};function a(r,i,a,s,u,c){var l=t[n];var p=e.get(a);return void 0===l?(l={id:r.id,object:r,geometry:i,material:a,program:p.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:c},t[n]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=a,l.program=p.program||o,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=u,l.group=c),n++,l;}return{opaque:r,transparent:i,init:function init(){n=0,r.length=0,i.length=0;},push:function push(e,t,n,o,s,u){var c=a(e,t,n,o,s,u);(!0===n.transparent?i:r).push(c);},unshift:function unshift(e,t,n,o,s,u){var c=a(e,t,n,o,s,u);(!0===n.transparent?i:r).unshift(c);},finish:function finish(){for(var _e107=n,_r75=t.length;_e107<_r75;_e107++){var _n89=t[_e107];if(null===_n89.id)break;_n89.id=null,_n89.object=null,_n89.geometry=null,_n89.material=null,_n89.program=null,_n89.group=null;}},sort:function sort(e,t){r.length>1&&r.sort(e||ms),i.length>1&&i.sort(t||ys);}};}function vs(e){var t=new WeakMap();return{get:function get(n,r){var i=t.get(n);var o;return void 0===i?(o=new gs(e),t.set(n,new WeakMap()),t.get(n).set(r,o)):(o=i.get(r),void 0===o&&(o=new gs(e),i.set(r,o))),o;},dispose:function dispose(){t=new WeakMap();}};}function xs(){var e={};return{get:function get(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Qn(),color:new xi()};break;case"SpotLight":n={position:new Qn(),direction:new Qn(),color:new xi(),distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Qn(),color:new xi(),distance:0,decay:0};break;case"HemisphereLight":n={direction:new Qn(),skyColor:new xi(),groundColor:new xi()};break;case"RectAreaLight":n={color:new xi(),position:new Qn(),halfWidth:new Qn(),halfHeight:new Qn()};}return e[t.id]=n,n;}};}var bs=0;function ws(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0);}function Ss(e,t){var n=new xs(),r=function(){var e={};return{get:function get(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn()};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn(),shadowCameraNear:1,shadowCameraFar:1e3};}return e[t.id]=n,n;}};}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(var _e108=0;_e108<9;_e108++){i.probe.push(new Qn());}var o=new Qn(),a=new Ar(),s=new Ar();return{setup:function setup(o){var a=0,s=0,u=0;for(var _e109=0;_e109<9;_e109++){i.probe[_e109].set(0,0,0);}var c=0,l=0,p=0,d=0,h=0,f=0,m=0,y=0;o.sort(ws);for(var _e110=0,_t85=o.length;_e110<_t85;_e110++){var _t86=o[_e110],_g4=_t86.color,_v4=_t86.intensity,_x2=_t86.distance,_b2=_t86.shadow&&_t86.shadow.map?_t86.shadow.map.texture:null;if(_t86.isAmbientLight)a+=_g4.r*_v4,s+=_g4.g*_v4,u+=_g4.b*_v4;else if(_t86.isLightProbe)for(var _e111=0;_e111<9;_e111++){i.probe[_e111].addScaledVector(_t86.sh.coefficients[_e111],_v4);}else if(_t86.isDirectionalLight){var _e112=n.get(_t86);if(_e112.color.copy(_t86.color).multiplyScalar(_t86.intensity),_t86.castShadow){var _e113=_t86.shadow,_n90=r.get(_t86);_n90.shadowBias=_e113.bias,_n90.shadowNormalBias=_e113.normalBias,_n90.shadowRadius=_e113.radius,_n90.shadowMapSize=_e113.mapSize,i.directionalShadow[c]=_n90,i.directionalShadowMap[c]=_b2,i.directionalShadowMatrix[c]=_t86.shadow.matrix,f++;}i.directional[c]=_e112,c++;}else if(_t86.isSpotLight){var _e114=n.get(_t86);if(_e114.position.setFromMatrixPosition(_t86.matrixWorld),_e114.color.copy(_g4).multiplyScalar(_v4),_e114.distance=_x2,_e114.coneCos=Math.cos(_t86.angle),_e114.penumbraCos=Math.cos(_t86.angle*(1-_t86.penumbra)),_e114.decay=_t86.decay,_t86.castShadow){var _e115=_t86.shadow,_n91=r.get(_t86);_n91.shadowBias=_e115.bias,_n91.shadowNormalBias=_e115.normalBias,_n91.shadowRadius=_e115.radius,_n91.shadowMapSize=_e115.mapSize,i.spotShadow[p]=_n91,i.spotShadowMap[p]=_b2,i.spotShadowMatrix[p]=_t86.shadow.matrix,y++;}i.spot[p]=_e114,p++;}else if(_t86.isRectAreaLight){var _e116=n.get(_t86);_e116.color.copy(_g4).multiplyScalar(_v4),_e116.halfWidth.set(.5*_t86.width,0,0),_e116.halfHeight.set(0,.5*_t86.height,0),i.rectArea[d]=_e116,d++;}else if(_t86.isPointLight){var _e117=n.get(_t86);if(_e117.color.copy(_t86.color).multiplyScalar(_t86.intensity),_e117.distance=_t86.distance,_e117.decay=_t86.decay,_t86.castShadow){var _e118=_t86.shadow,_n92=r.get(_t86);_n92.shadowBias=_e118.bias,_n92.shadowNormalBias=_e118.normalBias,_n92.shadowRadius=_e118.radius,_n92.shadowMapSize=_e118.mapSize,_n92.shadowCameraNear=_e118.camera.near,_n92.shadowCameraFar=_e118.camera.far,i.pointShadow[l]=_n92,i.pointShadowMap[l]=_b2,i.pointShadowMatrix[l]=_t86.shadow.matrix,m++;}i.point[l]=_e117,l++;}else if(_t86.isHemisphereLight){var _e119=n.get(_t86);_e119.skyColor.copy(_t86.color).multiplyScalar(_v4),_e119.groundColor.copy(_t86.groundColor).multiplyScalar(_v4),i.hemi[h]=_e119,h++;}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Lo.LTC_FLOAT_1,i.rectAreaLTC2=Lo.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Lo.LTC_HALF_1,i.rectAreaLTC2=Lo.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=u;var g=i.hash;g.directionalLength===c&&g.pointLength===l&&g.spotLength===p&&g.rectAreaLength===d&&g.hemiLength===h&&g.numDirectionalShadows===f&&g.numPointShadows===m&&g.numSpotShadows===y||(i.directional.length=c,i.spot.length=p,i.rectArea.length=d,i.point.length=l,i.hemi.length=h,i.directionalShadow.length=f,i.directionalShadowMap.length=f,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=f,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=y,g.directionalLength=c,g.pointLength=l,g.spotLength=p,g.rectAreaLength=d,g.hemiLength=h,g.numDirectionalShadows=f,g.numPointShadows=m,g.numSpotShadows=y,i.version=bs++);},setupView:function setupView(e,t){var n=0,r=0,u=0,c=0,l=0;var p=t.matrixWorldInverse;for(var _t87=0,_d8=e.length;_t87<_d8;_t87++){var _d9=e[_t87];if(_d9.isDirectionalLight){var _e120=i.directional[n];_e120.direction.setFromMatrixPosition(_d9.matrixWorld),o.setFromMatrixPosition(_d9.target.matrixWorld),_e120.direction.sub(o),_e120.direction.transformDirection(p),n++;}else if(_d9.isSpotLight){var _e121=i.spot[u];_e121.position.setFromMatrixPosition(_d9.matrixWorld),_e121.position.applyMatrix4(p),_e121.direction.setFromMatrixPosition(_d9.matrixWorld),o.setFromMatrixPosition(_d9.target.matrixWorld),_e121.direction.sub(o),_e121.direction.transformDirection(p),u++;}else if(_d9.isRectAreaLight){var _e122=i.rectArea[c];_e122.position.setFromMatrixPosition(_d9.matrixWorld),_e122.position.applyMatrix4(p),s.identity(),a.copy(_d9.matrixWorld),a.premultiply(p),s.extractRotation(a),_e122.halfWidth.set(.5*_d9.width,0,0),_e122.halfHeight.set(0,.5*_d9.height,0),_e122.halfWidth.applyMatrix4(s),_e122.halfHeight.applyMatrix4(s),c++;}else if(_d9.isPointLight){var _e123=i.point[r];_e123.position.setFromMatrixPosition(_d9.matrixWorld),_e123.position.applyMatrix4(p),r++;}else if(_d9.isHemisphereLight){var _e124=i.hemi[l];_e124.direction.setFromMatrixPosition(_d9.matrixWorld),_e124.direction.transformDirection(p),_e124.direction.normalize(),l++;}}},state:i};}function Ms(e,t){var n=new Ss(e,t),r=[],i=[];return{init:function init(){r.length=0,i.length=0;},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function setupLights(){n.setup(r);},setupLightsView:function setupLightsView(e){n.setupView(r,e);},pushLight:function pushLight(e){r.push(e);},pushShadow:function pushShadow(e){i.push(e);}};}function _s(e,t){var n=new WeakMap();return{get:function get(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var o;return!1===n.has(r)?(o=new Ms(e,t),n.set(r,[]),n.get(r).push(o)):i>=n.get(r).length?(o=new Ms(e,t),n.get(r).push(o)):o=n.get(r)[i],o;},dispose:function dispose(){n=new WeakMap();}};}function Es(e){Si.call(this),this.type="MeshDepthMaterial",this.depthPacking=an,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e);}function As(e){Si.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Qn(),this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e);}Es.prototype=Object.create(Si.prototype),Es.prototype.constructor=Es,Es.prototype.isMeshDepthMaterial=!0,Es.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this;},As.prototype=Object.create(Si.prototype),As.prototype.constructor=As,As.prototype.isMeshDistanceMaterial=!0,As.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this;};function Ts(e,t,n){var r=new Do();var i=new jn(),o=new jn(),a=new Yn(),s=[],u=[],c={},l={0:y,1:m,2:g},p=new bo({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new jn()},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),h=p.clone();h.defines.HORIZONTAL_PASS=1;var v=new Yi();v.setAttribute("position",new Ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var x=new ho(v,p),w=this;function S(n,r){var i=t.update(x);p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,p,x,null),h.uniforms.shadow_pass.value=n.mapPass.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,h,x,null);}function M(e,t,n){var r=e<<0|t<<1|n<<2;var i=s[r];return void 0===i&&(i=new Es({depthPacking:sn,morphTargets:e,skinning:t}),s[r]=i),i;}function _(e,t,n){var r=e<<0|t<<1|n<<2;var i=u[r];return void 0===i&&(i=new As({morphTargets:e,skinning:t}),u[r]=i),i;}function E(t,n,r,i,o,a,s){var u=null,p=M,d=t.customDepthMaterial;if(!0===i.isPointLight&&(p=_,d=t.customDistanceMaterial),void 0===d){var _e125=!1;!0===r.morphTargets&&(_e125=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var _i58=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?_i58=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),u=p(_e125,_i58,!0===t.isInstancedMesh);}else u=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var _e126=u.uuid,_t88=r.uuid;var _n93=c[_e126];void 0===_n93&&(_n93={},c[_e126]=_n93);var _i59=_n93[_t88];void 0===_i59&&(_i59=u.clone(),_n93[_t88]=_i59),u=_i59;}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=s===f?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:l[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u;}function A(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===f)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var _r76=t.update(n),_i60=n.material;if(Array.isArray(_i60)){var _t89=_r76.groups;for(var _u15=0,_c13=_t89.length;_u15<_c13;_u15++){var _c14=_t89[_u15],_l8=_i60[_c14.materialIndex];if(_l8&&_l8.visible){var _t90=E(n,_r76,_l8,a,o.near,o.far,s);e.renderBufferDirect(o,null,_r76,_t90,n,_c14);}}}else if(_i60.visible){var _t91=E(n,_r76,_i60,a,o.near,o.far,s);e.renderBufferDirect(o,null,_r76,_t91,n,null);}}var u=n.children;for(var _e127=0,_t92=u.length;_e127<_t92;_e127++){A(u[_e127],i,o,a,s);}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d,this.render=function(t,s,u){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;var c=e.getRenderTarget(),l=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),d=e.state;d.setBlending(b),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var _c15=0,_l9=t.length;_c15<_l9;_c15++){var _l10=t[_c15],_p10=_l10.shadow;if(void 0===_p10){console.warn("THREE.WebGLShadowMap:",_l10,"has no shadow.");continue;}if(!1===_p10.autoUpdate&&!1===_p10.needsUpdate)continue;i.copy(_p10.mapSize);var _h8=_p10.getFrameExtents();if(i.multiply(_h8),o.copy(_p10.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/_h8.x),i.x=o.x*_h8.x,_p10.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/_h8.y),i.y=o.y*_h8.y,_p10.mapSize.y=o.y)),null===_p10.map&&!_p10.isPointLightShadow&&this.type===f){var _e128={minFilter:be,magFilter:be,format:ke};_p10.map=new Zn(i.x,i.y,_e128),_p10.map.texture.name=_l10.name+".shadowMap",_p10.mapPass=new Zn(i.x,i.y,_e128),_p10.camera.updateProjectionMatrix();}if(null===_p10.map){var _e129={minFilter:me,magFilter:me,format:ke};_p10.map=new Zn(i.x,i.y,_e129),_p10.map.texture.name=_l10.name+".shadowMap",_p10.camera.updateProjectionMatrix();}e.setRenderTarget(_p10.map),e.clear();var _m3=_p10.getViewportCount();for(var _e130=0;_e130<_m3;_e130++){var _t93=_p10.getViewport(_e130);a.set(o.x*_t93.x,o.y*_t93.y,o.x*_t93.z,o.y*_t93.w),d.viewport(a),_p10.updateMatrices(_l10,_e130),r=_p10.getFrustum(),A(s,u,_p10.camera,_l10,this.type);}_p10.isPointLightShadow||this.type!==f||S(_p10,u),_p10.needsUpdate=!1;}w.needsUpdate=!1,e.setRenderTarget(c,l,p);};}function Ns(e,t,n){var _ye,_ge;var r=n.isWebGL2;var i=new function(){var t=!1;var n=new Yn();var r=null;var i=new Yn(0,0,0,0);return{setMask:function setMask(n){r===n||t||(e.colorMask(n,n,n,n),r=n);},setLocked:function setLocked(e){t=e;},setClear:function setClear(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n));},reset:function reset(){t=!1,r=null,i.set(-1,0,0,0);}};}(),o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function setTest(e){e?fe(2929):me(2929);},setMask:function setMask(r){n===r||t||(e.depthMask(r),n=r);},setFunc:function setFunc(t){if(r!==t){if(t)switch(t){case H:e.depthFunc(512);break;case q:e.depthFunc(519);break;case G:e.depthFunc(513);break;case V:e.depthFunc(515);break;case W:e.depthFunc(514);break;case X:e.depthFunc(518);break;case Y:e.depthFunc(516);break;case Z:e.depthFunc(517);break;default:e.depthFunc(515);}else e.depthFunc(515);r=t;}},setLocked:function setLocked(e){t=e;},setClear:function setClear(t){i!==t&&(e.clearDepth(t),i=t);},reset:function reset(){t=!1,n=null,r=null,i=null;}};}(),a=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function setTest(e){t||(e?fe(2960):me(2960));},setMask:function setMask(r){n===r||t||(e.stencilMask(r),n=r);},setFunc:function setFunc(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a);},setOp:function setOp(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r);},setLocked:function setLocked(e){t=e;},setClear:function setClear(t){c!==t&&(e.clearStencil(t),c=t);},reset:function reset(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;}};}();var l={},p=null,d=null,h=null,f=null,m=null,v=null,x=null,$=null,J=null,Q=!1,K=null,ee=null,te=null,ne=null,re=null;var ie=e.getParameter(35661);var oe=!1,ae=0;var se=e.getParameter(7938);-1!==se.indexOf("WebGL")?(ae=parseFloat(/^WebGL (\d)/.exec(se)[1]),oe=ae>=1):-1!==se.indexOf("OpenGL ES")&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(se)[1]),oe=ae>=2);var ue=null,ce={};var le=new Yn(),pe=new Yn();function de(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var _t94=0;_t94<r;_t94++){e.texImage2D(n+_t94,0,6408,1,1,0,6408,5121,i);}return o;}var he={};function fe(t){!0!==l[t]&&(e.enable(t),l[t]=!0);}function me(t){!1!==l[t]&&(e.disable(t),l[t]=!1);}he[3553]=de(3553,3553,1),he[34067]=de(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),fe(2929),o.setFunc(V),xe(!1),be(u),fe(2884),ve(b);var ye=(_ye={},_defineProperty(_ye,A,32774),_defineProperty(_ye,T,32778),_defineProperty(_ye,N,32779),_ye);if(r)ye[D]=32775,ye[C]=32776;else{var _e131=t.get("EXT_blend_minmax");null!==_e131&&(ye[D]=_e131.MIN_EXT,ye[C]=_e131.MAX_EXT);}var ge=(_ge={},_defineProperty(_ge,R,0),_defineProperty(_ge,P,1),_defineProperty(_ge,O,768),_defineProperty(_ge,I,770),_defineProperty(_ge,j,776),_defineProperty(_ge,k,774),_defineProperty(_ge,F,772),_defineProperty(_ge,L,769),_defineProperty(_ge,B,771),_defineProperty(_ge,U,775),_defineProperty(_ge,z,773),_ge);function ve(t,n,r,i,o,a,s,u){if(t!==b){if(d||(fe(3042),d=!0),t===E)o=o||n,a=a||r,s=s||i,n===f&&o===x||(e.blendEquationSeparate(ye[n],ye[o]),f=n,x=o),r===m&&i===v&&a===$&&s===J||(e.blendFuncSeparate(ge[r],ge[i],ge[a],ge[s]),m=r,v=i,$=a,J=s),h=t,Q=null;else if(t!==h||u!==Q){if(f===A&&x===A||(e.blendEquation(32774),f=A,x=A),u)switch(t){case w:e.blendFuncSeparate(1,771,1,771);break;case S:e.blendFunc(1,1);break;case M:e.blendFuncSeparate(0,0,769,771);break;case _:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);}else switch(t){case w:e.blendFuncSeparate(770,771,1,771);break;case S:e.blendFunc(770,1);break;case M:e.blendFunc(0,769);break;case _:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);}m=null,v=null,$=null,J=null,h=t,Q=u;}}else d&&(me(3042),d=!1);}function xe(t){K!==t&&(t?e.frontFace(2304):e.frontFace(2305),K=t);}function be(t){t!==s?(fe(2884),t!==ee&&(t===u?e.cullFace(1029):t===c?e.cullFace(1028):e.cullFace(1032))):me(2884),ee=t;}function we(t,n,r){t?(fe(32823),ne===n&&re===r||(e.polygonOffset(n,r),ne=n,re=r)):me(32823);}function Se(t){void 0===t&&(t=33984+ie-1),ue!==t&&(e.activeTexture(t),ue=t);}return{buffers:{color:i,depth:o,stencil:a},enable:fe,disable:me,useProgram:function useProgram(t){return p!==t&&(e.useProgram(t),p=t,!0);},setBlending:ve,setMaterial:function setMaterial(e,t){e.side===g?me(2884):fe(2884);var n=e.side===y;t&&(n=!n),xe(n),e.blending===w&&!1===e.transparent?ve(b):ve(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);var r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),we(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits);},setFlipSided:xe,setCullFace:be,setLineWidth:function setLineWidth(t){t!==te&&(oe&&e.lineWidth(t),te=t);},setPolygonOffset:we,setScissorTest:function setScissorTest(e){e?fe(3089):me(3089);},activeTexture:Se,bindTexture:function bindTexture(t,n){null===ue&&Se();var r=ce[ue];void 0===r&&(r={type:void 0,texture:void 0},ce[ue]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||he[t]),r.type=t,r.texture=n);},unbindTexture:function unbindTexture(){var t=ce[ue];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0);},compressedTexImage2D:function compressedTexImage2D(){try{e.compressedTexImage2D.apply(e,arguments);}catch(e){console.error("THREE.WebGLState:",e);}},texImage2D:function texImage2D(){try{e.texImage2D.apply(e,arguments);}catch(e){console.error("THREE.WebGLState:",e);}},texImage3D:function texImage3D(){try{e.texImage3D.apply(e,arguments);}catch(e){console.error("THREE.WebGLState:",e);}},scissor:function scissor(t){!1===le.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),le.copy(t));},viewport:function viewport(t){!1===pe.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),pe.copy(t));},reset:function reset(){l={},ue=null,ce={},p=null,d=null,h=null,f=null,m=null,v=null,x=null,$=null,J=null,Q=!1,K=null,ee=null,te=null,ne=null,re=null,i.reset(),o.reset(),a.reset();}};}function Ds(e,t,n,r,i,o,a){var _T,_N;var s=i.isWebGL2,u=i.maxTextures,c=i.maxCubemapSize,l=i.maxTextureSize,p=i.maxSamples,d=new WeakMap();var h,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d");}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas");}function y(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var _r77=t?Un.floorPowerOfTwo:Math.floor,_o29=_r77(i*e.width),_a22=_r77(i*e.height);void 0===h&&(h=m(_o29,_a22));var _s13=n?m(_o29,_a22):h;return _s13.width=_o29,_s13.height=_a22,_s13.getContext("2d").drawImage(e,0,0,_o29,_a22),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+_o29+"x"+_a22+")."),_s13;}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e;}return e;}function g(e){return Un.isPowerOfTwo(e.width)&&Un.isPowerOfTwo(e.height);}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==me&&e.minFilter!==be;}function x(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E;}function b(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'");}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o;}function w(e){return e===me||e===ye||e===ve?9728:9729;}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t);}(n),n.isVideoTexture&&d["delete"](n),a.memory.textures--;}function M(t){var n=t.target;n.removeEventListener("dispose",M),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var _t95=0;_t95<6;_t95++){e.deleteFramebuffer(n.__webglFramebuffer[_t95]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[_t95]);}else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(t.texture),r.remove(t);}(n),a.memory.textures--;}var _=0;function E(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update());}(e),e.version>0&&i.__version!==e.version){var _n94=e.image;if(void 0===_n94)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==_n94.complete)return void R(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture);}function A(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;C(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY);var a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),u=r.image[0]&&r.image[0].isDataTexture,l=[];for(var _e132=0;_e132<6;_e132++){l[_e132]=a||u?u?r.image[_e132].image:r.image[_e132]:y(r.image[_e132],!1,!0,c);}var p=l[0],d=g(p)||s,h=o.convert(r.format),f=o.convert(r.type),m=b(r.internalFormat,h,f);var w;if(D(34067,r,d),a){for(var _e133=0;_e133<6;_e133++){w=l[_e133].mipmaps;for(var _t96=0;_t96<w.length;_t96++){var _i61=w[_t96];r.format!==ke&&r.format!==ze?null!==h?n.compressedTexImage2D(34069+_e133,_t96,m,_i61.width,_i61.height,0,_i61.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+_e133,_t96,m,_i61.width,_i61.height,0,h,f,_i61.data);}}t.__maxMipLevel=w.length-1;}else{w=r.mipmaps;for(var _e134=0;_e134<6;_e134++){if(u){n.texImage2D(34069+_e134,0,m,l[_e134].width,l[_e134].height,0,h,f,l[_e134].data);for(var _t97=0;_t97<w.length;_t97++){var _r78=w[_t97].image[_e134].image;n.texImage2D(34069+_e134,_t97+1,m,_r78.width,_r78.height,0,h,f,_r78.data);}}else{n.texImage2D(34069+_e134,0,m,h,f,l[_e134]);for(var _t98=0;_t98<w.length;_t98++){var _r79=w[_t98];n.texImage2D(34069+_e134,_t98+1,m,h,f,_r79.image[_e134]);}}}t.__maxMipLevel=w.length;}v(r,d)&&x(34067,r,p.width,p.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r);}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture));}var T=(_T={},_defineProperty(_T,de,10497),_defineProperty(_T,he,33071),_defineProperty(_T,fe,33648),_T),N=(_N={},_defineProperty(_N,me,9728),_defineProperty(_N,ye,9984),_defineProperty(_N,ve,9986),_defineProperty(_N,be,9729),_defineProperty(_N,we,9985),_defineProperty(_N,Me,9987),_N);function D(n,o,a){a?(e.texParameteri(n,10242,T[o.wrapS]),e.texParameteri(n,10243,T[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,T[o.wrapR]),e.texParameteri(n,10240,N[o.magFilter]),e.texParameteri(n,10241,N[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===he&&o.wrapT===he||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(o.magFilter)),e.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==me&&o.minFilter!==be&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var u=t.get("EXT_texture_filter_anisotropic");if(u){if(o.type===Re&&null===t.get("OES_texture_float_linear"))return;if(o.type===Pe&&null===(s||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy);}}function C(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S),t.__webglTexture=e.createTexture(),a.memory.textures++);}function R(t,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),C(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var u=function(e){return!s&&(e.wrapS!==he||e.wrapT!==he||e.minFilter!==me&&e.minFilter!==be);}(r)&&!1===g(r.image),c=y(r.image,u,!1,l),p=g(c)||s,d=o.convert(r.format);var h,f=o.convert(r.type),m=b(r.internalFormat,d,f);D(a,r,p);var w=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=r.type===Re?36012:r.type===Ce?33190:r.type===Be?35056:33189:r.type===Re&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===qe&&6402===m&&r.type!==Ne&&r.type!==Ce&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ne,f=o.convert(r.type)),r.format===Ge&&6402===m&&(m=34041,r.type!==Be&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Be,f=o.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(r.isDataTexture){if(w.length>0&&p){for(var _e135=0,_t99=w.length;_e135<_t99;_e135++){h=w[_e135],n.texImage2D(3553,_e135,m,h.width,h.height,0,d,f,h.data);}r.generateMipmaps=!1,t.__maxMipLevel=w.length-1;}else n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data),t.__maxMipLevel=0;}else if(r.isCompressedTexture){for(var _e136=0,_t100=w.length;_e136<_t100;_e136++){h=w[_e136],r.format!==ke&&r.format!==ze?null!==d?n.compressedTexImage2D(3553,_e136,m,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,_e136,m,h.width,h.height,0,d,f,h.data);}t.__maxMipLevel=w.length-1;}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(w.length>0&&p){for(var _e137=0,_t101=w.length;_e137<_t101;_e137++){h=w[_e137],n.texImage2D(3553,_e137,m,d,f,h);}r.generateMipmaps=!1,t.__maxMipLevel=w.length-1;}else n.texImage2D(3553,0,m,d,f,c),t.__maxMipLevel=0;v(r,p)&&x(a,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r);}function P(t,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type),l=b(i.texture.internalFormat,u,c);n.texImage2D(s,0,l,i.width,i.height,0,u,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null);}function O(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var _i62=33189;if(r){var _t102=n.depthTexture;_t102&&_t102.isDepthTexture&&(_t102.type===Re?_i62=36012:_t102.type===Ce&&(_i62=33190));var _r80=I(n);e.renderbufferStorageMultisample(36161,_r80,_i62,n.width,n.height);}else e.renderbufferStorage(36161,_i62,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t);}else if(n.depthBuffer&&n.stencilBuffer){if(r){var _t103=I(n);e.renderbufferStorageMultisample(36161,_t103,35056,n.width,n.height);}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t);}else{var _t104=o.convert(n.texture.format),_i63=o.convert(n.texture.type),_a23=b(n.texture.internalFormat,_t104,_i63);if(r){var _t105=I(n);e.renderbufferStorageMultisample(36161,_t105,_a23,n.width,n.height);}else e.renderbufferStorage(36161,_a23,n.width,n.height);}e.bindRenderbuffer(36161,null);}function L(t){var n=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),E(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===qe)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==Ge)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0);}}(n.__webglFramebuffer,t);}else if(i){n.__webglDepthbuffer=[];for(var _r81=0;_r81<6;_r81++){e.bindFramebuffer(36160,n.__webglFramebuffer[_r81]),n.__webglDepthbuffer[_r81]=e.createRenderbuffer(),O(n.__webglDepthbuffer[_r81],t,!1);}}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),O(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null);}function I(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(p,e.samples):0;}var B=!1,F=!1;this.allocateTextureUnit=function(){var e=_;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),_+=1,e;},this.resetTextureUnits=function(){_=0;},this.setTexture2D=E,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture));},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture));},this.setTextureCube=A,this.setupRenderTarget=function(t){var i=r.get(t),u=r.get(t.texture);t.addEventListener("dispose",M),u.__webglTexture=e.createTexture(),a.memory.textures++;var c=!0===t.isWebGLCubeRenderTarget,l=!0===t.isWebGLMultisampleRenderTarget,p=g(t)||s;if(!s||t.texture.format!==ze||t.texture.type!==Re&&t.texture.type!==Pe||(t.texture.format=ke,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){i.__webglFramebuffer=[];for(var _t106=0;_t106<6;_t106++){i.__webglFramebuffer[_t106]=e.createFramebuffer();}}else if(i.__webglFramebuffer=e.createFramebuffer(),l)if(s){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);var _n95=o.convert(t.texture.format),_r82=o.convert(t.texture.type),_a24=b(t.texture.internalFormat,_n95,_r82),_s14=I(t);e.renderbufferStorageMultisample(36161,_s14,_a24,t.width,t.height),e.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),O(i.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null);}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,u.__webglTexture),D(34067,t.texture,p);for(var _e138=0;_e138<6;_e138++){P(i.__webglFramebuffer[_e138],t,36064,34069+_e138);}v(t.texture,p)&&x(34067,t.texture,t.width,t.height),n.bindTexture(34067,null);}else n.bindTexture(3553,u.__webglTexture),D(3553,t.texture,p),P(i.__webglFramebuffer,t,36064,3553),v(t.texture,p)&&x(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&L(t);},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(v(t,g(e)||s)){var _i64=e.isWebGLCubeRenderTarget?34067:3553,_o30=r.get(t).__webglTexture;n.bindTexture(_i64,_o30),x(_i64,t,e.width,e.height),n.bindTexture(_i64,null);}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){var _n96=r.get(t);e.bindFramebuffer(36008,_n96.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,_n96.__webglFramebuffer);var _i65=t.width,_o31=t.height;var _a25=16384;t.depthBuffer&&(_a25|=256),t.stencilBuffer&&(_a25|=1024),e.blitFramebuffer(0,0,_i65,_o31,0,0,_i65,_o31,_a25,9728),e.bindFramebuffer(36160,_n96.__webglMultisampledFramebuffer);}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),E(e,t);},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),A(e,t);};}function Cs(e,t,n){var r=n.isWebGL2;return{convert:function convert(e){var n;if(e===Ee)return 5121;if(e===Oe)return 32819;if(e===Le)return 32820;if(e===Ie)return 33635;if(e===Ae)return 5120;if(e===Te)return 5122;if(e===Ne)return 5123;if(e===De)return 5124;if(e===Ce)return 5125;if(e===Re)return 5126;if(e===Pe)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===Fe)return 6406;if(e===ze)return 6407;if(e===ke)return 6408;if(e===Ue)return 6409;if(e===je)return 6410;if(e===qe)return 6402;if(e===Ge)return 34041;if(e===Ve)return 6403;if(e===We)return 36244;if(e===Xe)return 33319;if(e===Ye)return 33320;if(e===Ze)return 36248;if(e===$e)return 36249;if(e===Je||e===Qe||e===Ke||e===et){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Je)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Qe)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ke)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===et)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT;}if(e===tt||e===nt||e===rt||e===it){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===tt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===nt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===rt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===it)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;}if(e===ot)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===at||e===st)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===at)return n.COMPRESSED_RGB8_ETC2;if(e===st)return n.COMPRESSED_RGBA8_ETC2_EAC;}return e===ut||e===ct||e===lt||e===pt||e===dt||e===ht||e===ft||e===mt||e===yt||e===gt||e===vt||e===xt||e===bt||e===wt||e===Mt||e===_t||e===Et||e===At||e===Tt||e===Nt||e===Dt||e===Ct||e===Rt||e===Pt||e===Ot||e===Lt||e===It||e===Bt?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===St?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Be?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0;}};}function Rs(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];So.call(this),this.cameras=e;}function Ps(){Jr.call(this),this.type="Group";}function Os(){this._targetRay=null,this._grip=null,this._hand=null;}function Ls(e,t){var n=this;var r=null,i=1,o=null,a="local-floor",s=null;var u=[],c=new Map(),l=new So();l.layers.enable(1),l.viewport=new Yn();var p=new So();p.layers.enable(2),p.viewport=new Yn();var d=[l,p],h=new Rs();h.layers.enable(1),h.layers.enable(2);var f=null,m=null;function y(e){var t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource});}function g(){c.forEach(function(e,t){e.disconnect(t);}),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),_.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"});}function v(e){o=e,_.setContext(r),_.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"});}function x(e){var t=r.inputSources;for(var _e139=0;_e139<u.length;_e139++){c.set(t[_e139],u[_e139]);}for(var _t107=0;_t107<e.removed.length;_t107++){var _n97=e.removed[_t107],_r83=c.get(_n97);_r83&&(_r83.dispatchEvent({type:"disconnected",data:_n97}),c["delete"](_n97));}for(var _t108=0;_t108<e.added.length;_t108++){var _n98=e.added[_t108],_r84=c.get(_n98);_r84&&_r84.dispatchEvent({type:"connected",data:_n98});}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=u[e];return void 0===t&&(t=new Os(),u[e]=t),t.getTargetRaySpace();},this.getControllerGrip=function(e){var t=u[e];return void 0===t&&(t=new Os(),u[e]=t),t.getGripSpace();},this.getHand=function(e){var t=u[e];return void 0===t&&(t=new Os(),u[e]=t),t.getHandSpace();},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.");},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.");},this.getReferenceSpace=function(){return o;},this.getSession=function(){return r;},this.setSession=function(e){if(r=e,null!==r){r.addEventListener("select",y),r.addEventListener("selectstart",y),r.addEventListener("selectend",y),r.addEventListener("squeeze",y),r.addEventListener("squeezestart",y),r.addEventListener("squeezeend",y),r.addEventListener("end",g);var _e140=t.getContextAttributes();!0!==_e140.xrCompatible&&t.makeXRCompatible();var _n99={antialias:_e140.antialias,alpha:_e140.alpha,depth:_e140.depth,stencil:_e140.stencil,framebufferScaleFactor:i},_o32=new XRWebGLLayer(r,t,_n99);r.updateRenderState({baseLayer:_o32}),r.requestReferenceSpace(a).then(v),r.addEventListener("inputsourceschange",x);}};var b=new Qn(),w=new Qn();function S(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert();}this.getCamera=function(e){h.near=p.near=l.near=e.near,h.far=p.far=l.far=e.far,f===h.near&&m===h.far||(r.updateRenderState({depthNear:h.near,depthFar:h.far}),f=h.near,m=h.far);var t=e.parent,n=h.cameras;S(h,t);for(var _e141=0;_e141<n.length;_e141++){S(n[_e141],t);}e.matrixWorld.copy(h.matrixWorld);var i=e.children;for(var _e142=0,_t109=i.length;_e142<_t109;_e142++){i[_e142].updateMatrixWorld(!0);}return 2===n.length?function(e,t,n){b.setFromMatrixPosition(t.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);var r=b.distanceTo(w),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],p=(o[8]+1)/o[0],d=a*l,h=a*p,f=r/(-l+p),m=f*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var y=a+f,g=s+f,v=d-m,x=h+(r-m),S=u*s/g*y,M=c*s/g*y;e.projectionMatrix.makePerspective(v,x,S,M,y,g);}(h,l,p):h.projectionMatrix.copy(l.projectionMatrix),h;};var M=null;var _=new Co();_.setAnimationLoop(function(t,n){if(s=n.getViewerPose(o),null!==s){var _t110=s.views,_n100=r.renderState.baseLayer;e.setFramebuffer(_n100.framebuffer);var _i66=!1;_t110.length!==h.cameras.length&&(h.cameras.length=0,_i66=!0);for(var _e143=0;_e143<_t110.length;_e143++){var _r85=_t110[_e143],_o33=_n100.getViewport(_r85),_a26=d[_e143];_a26.matrix.fromArray(_r85.transform.matrix),_a26.projectionMatrix.fromArray(_r85.projectionMatrix),_a26.viewport.set(_o33.x,_o33.y,_o33.width,_o33.height),0===_e143&&h.matrix.copy(_a26.matrix),!0===_i66&&h.cameras.push(_a26);}}var i=r.inputSources;for(var _e144=0;_e144<u.length;_e144++){var _t111=u[_e144],_r86=i[_e144];_t111.update(_r86,n,o);}M&&M(t,n);}),this.setAnimationLoop=function(e){M=e;},this.dispose=function(){};}function Is(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var _i67=e.get(r).__maxMipLevel;void 0!==_i67&&(t.maxMipLevel.value=_i67);}var i,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix));}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===y&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===y&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity);}return{refreshFogUniforms:function refreshFogUniforms(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density);},refreshMaterialUniforms:function refreshMaterialUniforms(e,r,i,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===y&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===y&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===y&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===y&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===y&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap);}(e,r):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===y&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===y&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance;}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===y&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===y&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity;}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale;}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix));}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix));}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1);}};}function Bs(e){var t=void 0!==(e=e||{}).canvas?e.canvas:function(){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e;}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;var p=null,d=null;var h=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Jt,this.physicallyCorrectLights=!1,this.toneMapping=K,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var f=this;var m=!1,y=null,g=0,v=0,x=null,b=null,w=-1,S=null;var M=new Yn(),_=new Yn();var E=null,A=t.width,T=t.height,N=1,D=null,C=null;var R=new Yn(0,0,A,T),P=new Yn(0,0,A,T);var O=!1;var L=new Do();var I=!1,B=!1;var F=new Ar(),z=new Qn(),k={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===x?N:1;}var j,H,q,G,V,W,X,Y,Z,$,J,Q,ee,te,ne,re,ie,oe,ae,se,ue,ce=n;function le(e,n){for(var _r87=0;_r87<e.length;_r87++){var _i68=e[_r87],_o34=t.getContext(_i68,n);if(null!==_o34)return _o34;}return null;}try{var _e145={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l};if(t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",me,!1),null===ce){var _t112=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&_t112.shift(),ce=le(_t112,_e145),null===ce)throw le(_t112)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1};});}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e;}function pe(){j=new Ho(ce),H=new ko(ce,j,e),!1===H.isWebGL2&&(j.get("WEBGL_depth_texture"),j.get("OES_texture_float"),j.get("OES_texture_half_float"),j.get("OES_texture_half_float_linear"),j.get("OES_standard_derivatives"),j.get("OES_element_index_uint"),j.get("OES_vertex_array_object"),j.get("ANGLE_instanced_arrays")),j.get("OES_texture_float_linear"),se=new Cs(ce,j,H),q=new Ns(ce,j,H),q.scissor(_.copy(P).multiplyScalar(N).floor()),q.viewport(M.copy(R).multiplyScalar(N).floor()),G=new Vo(ce),V=new fs(),W=new Ds(ce,j,q,V,H,se,G),X=new jo(f),Y=new Ro(ce,H),ue=new Fo(ce,j,Y,H),Z=new qo(ce,Y,G,ue),$=new Zo(ce,Z,Y,G),ie=new Yo(ce),ne=new Uo(V),J=new hs(f,X,j,H,ue,ne),Q=new Is(V),ee=new vs(V),te=new _s(j,H),re=new Bo(f,X,q,$,s),oe=new zo(ce,j,G,H),ae=new Go(ce,j,G,H),G.programs=J.programs,f.capabilities=H,f.extensions=j,f.properties=V,f.renderLists=ee,f.state=q,f.info=G;}pe();var de=new Ls(f,ce);this.xr=de;var he=new Ts(f,$,H.maxTextureSize);function fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0;}function me(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1,pe();}function ye(e){var t=e.target;t.removeEventListener("dispose",ye),function(e){ge(e),V.remove(e);}(t);}function ge(e){var t=V.get(e).program;void 0!==t&&J.releaseProgram(t);}this.shadowMap=he,this.getContext=function(){return ce;},this.getContextAttributes=function(){return ce.getContextAttributes();},this.forceContextLoss=function(){var e=j.get("WEBGL_lose_context");e&&e.loseContext();},this.forceContextRestore=function(){var e=j.get("WEBGL_lose_context");e&&e.restoreContext();},this.getPixelRatio=function(){return N;},this.setPixelRatio=function(e){void 0!==e&&(N=e,this.setSize(A,T,!1));},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new jn()),e.set(A,T);},this.setSize=function(e,n,r){de.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(A=e,T=n,t.width=Math.floor(e*N),t.height=Math.floor(n*N),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n));},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new jn()),e.set(A*N,T*N).floor();},this.setDrawingBufferSize=function(e,n,r){A=e,T=n,N=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n);},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Yn()),e.copy(M);},this.getViewport=function(e){return e.copy(R);},this.setViewport=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),q.viewport(M.copy(R).multiplyScalar(N).floor());},this.getScissor=function(e){return e.copy(P);},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),q.scissor(_.copy(P).multiplyScalar(N).floor());},this.getScissorTest=function(){return O;},this.setScissorTest=function(e){q.setScissorTest(O=e);},this.setOpaqueSort=function(e){D=e;},this.setTransparentSort=function(e){C=e;},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new xi()),e.copy(re.getClearColor());},this.setClearColor=function(){re.setClearColor.apply(re,arguments);},this.getClearAlpha=function(){return re.getClearAlpha();},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments);},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ce.clear(r);},this.clearColor=function(){this.clear(!0,!1,!1);},this.clearDepth=function(){this.clear(!1,!0,!1);},this.clearStencil=function(){this.clear(!1,!1,!0);},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",me,!1),ee.dispose(),te.dispose(),V.dispose(),X.dispose(),$.dispose(),ue.dispose(),de.dispose(),xe.stop();},this.renderBufferImmediate=function(e,t){ue.initAttributes();var n=V.get(e);e.hasPositions&&!n.position&&(n.position=ce.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),e.hasColors&&!n.color&&(n.color=ce.createBuffer());var r=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,n.position),ce.bufferData(34962,e.positionArray,35048),ue.enableAttribute(r.position),ce.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,n.normal),ce.bufferData(34962,e.normalArray,35048),ue.enableAttribute(r.normal),ce.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,n.uv),ce.bufferData(34962,e.uvArray,35048),ue.enableAttribute(r.uv),ce.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,n.color),ce.bufferData(34962,e.colorArray,35048),ue.enableAttribute(r.color),ce.vertexAttribPointer(r.color,3,5126,!1,0,0)),ue.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0;},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=k);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=_e(e,t,r,i);q.setMaterial(r,a);var u=n.index;var c=n.attributes.position;if(null===u){if(void 0===c||0===c.count)return;}else if(0===u.count)return;var l,p=1;!0===r.wireframe&&(u=Z.getWireframeAttribute(n),p=2),(r.morphTargets||r.morphNormals)&&ie.update(i,n,r,s),ue.setup(i,r,s,n,u);var d=oe;null!==u&&(l=Y.get(u),d=ae,d.setIndex(l));var h=null!==u?u.count:c.count,f=n.drawRange.start*p,m=n.drawRange.count*p,y=null!==o?o.start*p:0,g=null!==o?o.count*p:1/0,v=Math.max(f,y),x=Math.min(h,f+m,y+g)-1,b=Math.max(0,x-v+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(q.setLineWidth(r.wireframeLinewidth*U()),d.setMode(1)):d.setMode(4);else if(i.isLine){var _e146=r.linewidth;void 0===_e146&&(_e146=1),q.setLineWidth(_e146*U()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3);}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(v,b,i.count);else if(n.isInstancedBufferGeometry){var _e147=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(v,b,_e147);}else d.render(v,b);}},this.compile=function(e,t){d=te.get(e),d.init(),e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e));}),d.setupLights();var n=new WeakMap();e.traverse(function(t){var r=t.material;if(r)if(Array.isArray(r))for(var _i69=0;_i69<r.length;_i69++){var _o35=r[_i69];!1===n.has(_o35)&&(Me(_o35,e,t),n.set(_o35));}else!1===n.has(r)&&(Me(r,e,t),n.set(r));});};var ve=null;var xe=new Co();function be(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||L.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);var _t113=$.update(e),_i70=e.material;_i70.visible&&p.push(e,_t113,_i70,n,z.z,null);}}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F),p.push(e,null,e.material,n,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==G.render.frame&&(e.skeleton.update(),e.skeleton.frame=G.render.frame),!e.frustumCulled||L.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);var _t114=$.update(e),_i71=e.material;if(Array.isArray(_i71)){var _r88=_t114.groups;for(var _o36=0,_a27=_r88.length;_o36<_a27;_o36++){var _a28=_r88[_o36],_s15=_i71[_a28.materialIndex];_s15&&_s15.visible&&p.push(e,_t114,_s15,n,z.z,_a28);}}else _i71.visible&&p.push(e,_t114,_i71,n,z.z,null);}var i=e.children;for(var _e148=0,_o37=i.length;_e148<_o37;_e148++){be(i[_e148],t,n,r);}}function we(e,t,n){var r=!0===t.isScene?t.overrideMaterial:null;for(var _i72=0,_o38=e.length;_i72<_o38;_i72++){var _o39=e[_i72],_a29=_o39.object,_s16=_o39.geometry,_u16=null===r?_o39.material:r,_c16=_o39.group;if(n.isArrayCamera){var _e149=n.cameras;for(var _n101=0,_r89=_e149.length;_n101<_r89;_n101++){var _r90=_e149[_n101];_a29.layers.test(_r90.layers)&&(q.viewport(M.copy(_r90.viewport)),d.setupLightsView(_r90),Se(_a29,t,_r90,_s16,_u16,_c16));}}else Se(_a29,t,n,_s16,_u16,_c16);}}function Se(e,t,n,r,i,o){if(e.onBeforeRender(f,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var _r91=_e(n,t,i,e);q.setMaterial(i),ue.reset(),function(e,t){e.render(function(e){f.renderBufferImmediate(e,t);});}(e,_r91);}else f.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(f,t,n,r,i,o);}function Me(e,t,n){!0!==t.isScene&&(t=k);var r=V.get(e),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=J.getParameters(e,i.state,o,t,n),u=J.getProgramCacheKey(s);var c=r.program,l=!0;if(void 0===c)e.addEventListener("dispose",ye);else if(c.cacheKey!==u)ge(e);else if(r.lightsStateVersion!==a)l=!1;else{if(void 0!==s.shaderID){var _n102=e.isMeshStandardMaterial?t.environment:null;return void(r.envMap=X.get(e.envMap||_n102));}l=!1;}l&&(s.uniforms=J.getUniforms(e),e.onBeforeCompile(s,f),c=J.acquireProgram(s,u),r.program=c,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);var p=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ne.numPlanes,r.numIntersection=ne.numIntersection,p.clippingPlanes=ne.uniform),r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=X.get(e.envMap||r.environment),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights;}(e),r.lightsStateVersion=a,r.needsLights&&(p.ambientLightColor.value=i.state.ambient,p.lightProbe.value=i.state.probe,p.directionalLights.value=i.state.directional,p.directionalLightShadows.value=i.state.directionalShadow,p.spotLights.value=i.state.spot,p.spotLightShadows.value=i.state.spotShadow,p.rectAreaLights.value=i.state.rectArea,p.ltc_1.value=i.state.rectAreaLTC1,p.ltc_2.value=i.state.rectAreaLTC2,p.pointLights.value=i.state.point,p.pointLightShadows.value=i.state.pointShadow,p.hemisphereLights.value=i.state.hemi,p.directionalShadowMap.value=i.state.directionalShadowMap,p.directionalShadowMatrix.value=i.state.directionalShadowMatrix,p.spotShadowMap.value=i.state.spotShadowMap,p.spotShadowMatrix.value=i.state.spotShadowMatrix,p.pointShadowMap.value=i.state.pointShadowMap,p.pointShadowMatrix.value=i.state.pointShadowMatrix);var h=r.program.getUniforms(),m=Wa.seqWithValue(h.seq,p);r.uniformsList=m;}function _e(e,t,n,r){!0!==t.isScene&&(t=k),W.resetTextureUnits();var i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===x?f.outputEncoding:x.texture.encoding,s=X.get(n.envMap||o),u=V.get(n),c=d.state.lights;if(!0===I&&(!0===B||e!==S)){var _t115=e===S&&n.id===w;ne.setState(n,e,_t115);}n.version===u.__version?n.fog&&u.fog!==i||u.environment!==o||u.needsLights&&u.lightsStateVersion!==c.state.version?Me(n,t,r):void 0===u.numClippingPlanes||u.numClippingPlanes===ne.numPlanes&&u.numIntersection===ne.numIntersection?(u.outputEncoding!==a||u.envMap!==s)&&Me(n,t,r):Me(n,t,r):(Me(n,t,r),u.__version=n.version);var l=!1,p=!1,h=!1;var m=u.program,y=m.getUniforms(),g=u.uniforms;if(q.useProgram(m.program)&&(l=!0,p=!0,h=!0),n.id!==w&&(w=n.id,p=!0),l||S!==e){if(y.setValue(ce,"projectionMatrix",e.projectionMatrix),H.logarithmicDepthBuffer&&y.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),S!==e&&(S=e,p=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var _t116=y.map.cameraPosition;void 0!==_t116&&_t116.setValue(ce,z.setFromMatrixPosition(e.matrixWorld));}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&y.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&y.setValue(ce,"viewMatrix",e.matrixWorldInverse);}if(n.skinning){y.setOptional(ce,r,"bindMatrix"),y.setOptional(ce,r,"bindMatrixInverse");var _e150=r.skeleton;if(_e150){var _t117=_e150.bones;if(H.floatVertexTextures){if(null===_e150.boneTexture){var _n103=Math.sqrt(4*_t117.length);_n103=Un.ceilPowerOfTwo(_n103),_n103=Math.max(_n103,4);var _r92=new Float32Array(_n103*_n103*4);_r92.set(_e150.boneMatrices);var _i73=new Ao(_r92,_n103,_n103,ke,Re);_e150.boneMatrices=_r92,_e150.boneTexture=_i73,_e150.boneTextureSize=_n103;}y.setValue(ce,"boneTexture",_e150.boneTexture,W),y.setValue(ce,"boneTextureSize",_e150.boneTextureSize);}else y.setOptional(ce,_e150,"boneMatrices");}}var v,b;return(p||u.receiveShadow!==r.receiveShadow)&&(u.receiveShadow=r.receiveShadow,y.setValue(ce,"receiveShadow",r.receiveShadow)),p&&(y.setValue(ce,"toneMappingExposure",f.toneMappingExposure),u.needsLights&&(b=h,(v=g).ambientLightColor.needsUpdate=b,v.lightProbe.needsUpdate=b,v.directionalLights.needsUpdate=b,v.directionalLightShadows.needsUpdate=b,v.pointLights.needsUpdate=b,v.pointLightShadows.needsUpdate=b,v.spotLights.needsUpdate=b,v.spotLightShadows.needsUpdate=b,v.rectAreaLights.needsUpdate=b,v.hemisphereLights.needsUpdate=b),i&&n.fog&&Q.refreshFogUniforms(g,i),Q.refreshMaterialUniforms(g,n,N,T),Wa.upload(ce,u.uniformsList,g,W)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Wa.upload(ce,u.uniformsList,g,W),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&y.setValue(ce,"center",r.center),y.setValue(ce,"modelViewMatrix",r.modelViewMatrix),y.setValue(ce,"normalMatrix",r.normalMatrix),y.setValue(ce,"modelMatrix",r.matrixWorld),m;}xe.setAnimationLoop(function(e){de.isPresenting||ve&&ve(e);}),"undefined"!=typeof window&&xe.setContext(window),this.setAnimationLoop=function(e){ve=e,de.setAnimationLoop(e),null===e?xe.stop():xe.start();},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===m)return;ue.resetDefaultState(),w=-1,S=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===de.enabled&&!0===de.isPresenting&&(t=de.getCamera(t)),!0===e.isScene&&e.onBeforeRender(f,e,t,n||x),d=te.get(e,h.length),d.init(),h.push(d),F.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),L.setFromProjectionMatrix(F),B=this.localClippingEnabled,I=ne.init(this.clippingPlanes,B,t),p=ee.get(e,t),p.init(),be(e,t,0,f.sortObjects),p.finish(),!0===f.sortObjects&&p.sort(D,C),!0===I&&ne.beginShadows();var i=d.state.shadowsArray;he.render(i,e,t),d.setupLights(),d.setupLightsView(t),!0===I&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),re.render(p,e,t,r);var o=p.opaque,a=p.transparent;o.length>0&&we(o,e,t),a.length>0&&we(a,e,t),!0===e.isScene&&e.onAfterRender(f,e,t),null!==x&&(W.updateRenderTargetMipmap(x),W.updateMultisampleRenderTarget(x)),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1),h.pop(),d=h.length>0?h[h.length-1]:null,p=null;},this.setFramebuffer=function(e){y!==e&&null===x&&ce.bindFramebuffer(36160,e),y=e;},this.getActiveCubeFace=function(){return g;},this.getActiveMipmapLevel=function(){return v;},this.getRenderList=function(){return p;},this.setRenderList=function(e){p=e;},this.getRenderTarget=function(){return x;},this.setRenderTarget=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;x=e,g=t,v=n,e&&void 0===V.get(e).__webglFramebuffer&&W.setupRenderTarget(e);var r=y,i=!1;if(e){var _n104=V.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=_n104[t],i=!0):r=e.isWebGLMultisampleRenderTarget?V.get(e).__webglMultisampledFramebuffer:_n104,M.copy(e.viewport),_.copy(e.scissor),E=e.scissorTest;}else M.copy(R).multiplyScalar(N).floor(),_.copy(P).multiplyScalar(N).floor(),E=O;if(b!==r&&(ce.bindFramebuffer(36160,r),b=r),q.viewport(M),q.scissor(_),q.setScissorTest(E),i){var _r93=V.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,_r93.__webglTexture,n);}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=V.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var _a30=!1;s!==b&&(ce.bindFramebuffer(36160,s),_a30=!0);try{var _s17=e.texture,_u17=_s17.format,_c17=_s17.type;if(_u17!==ke&&se.convert(_u17)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(_c17===Ee||se.convert(_c17)===ce.getParameter(35738)||_c17===Re&&(H.isWebGL2||j.get("OES_texture_float")||j.get("WEBGL_color_buffer_float"))||_c17===Pe&&(H.isWebGL2?j.get("EXT_color_buffer_float"):j.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ce.readPixels(t,n,r,i,se.convert(_u17),se.convert(_c17),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.");}finally{_a30&&ce.bindFramebuffer(36160,b);}}},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),a=se.convert(t.format);W.setTexture2D(t,0),ce.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),q.unbindTexture();},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var i=t.image.width,o=t.image.height,a=se.convert(n.format),s=se.convert(n.type);W.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ce.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&ce.generateMipmap(3553),q.unbindTexture();},this.initTexture=function(e){W.setTexture2D(e,0),q.unbindTexture();},this.resetState=function(){q.reset(),ue.reset();},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}));}function Fs(e){Bs.call(this,e);}Rs.prototype=Object.assign(Object.create(So.prototype),{constructor:Rs,isArrayCamera:!0}),Ps.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Ps,isGroup:!0}),Object.assign(Os.prototype,{constructor:Os,getHandSpace:function getHandSpace(){if(null===this._hand&&(this._hand=new Ps(),this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var _e151=0;_e151<=window.XRHand.LITTLE_PHALANX_TIP;_e151++){var _e152=new Ps();_e152.matrixAutoUpdate=!1,_e152.visible=!1,this._hand.joints.push(_e152),this._hand.add(_e152);}return this._hand;},getTargetRaySpace:function getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ps(),this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay;},getGripSpace:function getGripSpace(){return null===this._grip&&(this._grip=new Ps(),this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip;},dispatchEvent:function dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this;},disconnect:function disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this;},update:function update(e,t,n){var r=null,i=null,o=null;var a=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(u&&e.hand){o=!0;for(var _r94=0;_r94<=window.XRHand.LITTLE_PHALANX_TIP;_r94++){if(e.hand[_r94]){var _i74=t.getJointPose(e.hand[_r94],n),_o40=u.joints[_r94];null!==_i74&&(_o40.matrix.fromArray(_i74.transform.matrix),_o40.matrix.decompose(_o40.position,_o40.rotation,_o40.scale),_o40.jointRadius=_i74.radius),_o40.visible=null!==_i74;var _a31=u.joints[window.XRHand.INDEX_PHALANX_TIP],_s18=u.joints[window.XRHand.THUMB_PHALANX_TIP],_c18=_a31.position.distanceTo(_s18.position),_l11=.02,_p11=.005;u.inputState.pinching&&_c18>_l11+_p11?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&_c18<=_l11-_p11&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}));}}}else null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this;}}),Object.assign(Ls.prototype,Fn.prototype),Fs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Fs,isWebGL1Renderer:!0});var zs=/*#__PURE__*/function(){function zs(e,t){_classCallCheck(this,zs);Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new xi(e),this.density=void 0!==t?t:25e-5;}_createClass(zs,[{key:"clone",value:function clone(){return new zs(this.color,this.density);}},{key:"toJSON",value:function toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density};}}]);return zs;}();var ks=/*#__PURE__*/function(){function ks(e,t,n){_classCallCheck(this,ks);Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new xi(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3;}_createClass(ks,[{key:"clone",value:function clone(){return new ks(this.color,this.near,this.far);}},{key:"toJSON",value:function toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far};}}]);return ks;}();var Us=/*#__PURE__*/function(_Jr){_inherits(Us,_Jr);var _super3=_createSuper(Us);function Us(){var _this3;_classCallCheck(this,Us);_this3=_super3.call(this),Object.defineProperty(_assertThisInitialized(_this3),"isScene",{value:!0}),_this3.type="Scene",_this3.background=null,_this3.environment=null,_this3.fog=null,_this3.overrideMaterial=null,_this3.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:_assertThisInitialized(_this3)}));return _this3;}_createClass(Us,[{key:"copy",value:function copy(e,t){return _get(_getPrototypeOf(Us.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this;}},{key:"toJSON",value:function toJSON(e){var t=_get(_getPrototypeOf(Us.prototype),"toJSON",this).call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t;}}]);return Us;}(Jr);function js(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=An,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Un.generateUUID();}Object.defineProperty(js.prototype,"needsUpdate",{set:function set(e){!0===e&&this.version++;}}),Object.assign(js.prototype,{isInterleavedBuffer:!0,onUploadCallback:function onUploadCallback(){},setUsage:function setUsage(e){return this.usage=e,this;},copy:function copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this;},copyAt:function copyAt(e,t,n){e*=this.stride,n*=t.stride;for(var _r95=0,_i75=this.stride;_r95<_i75;_r95++){this.array[e+_r95]=t.array[n+_r95];}return this;},set:function set(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.array.set(e,t),this;},clone:function clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Un.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new js(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t;},onUpload:function onUpload(e){return this.onUploadCallback=e,this;},toJSON:function toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Un.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride};}});var Hs=new Qn();function qs(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r;}function Gs(e){Si.call(this),this.type="SpriteMaterial",this.color=new xi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e);}var Vs;Object.defineProperties(qs.prototype,{count:{get:function get(){return this.data.count;}},array:{get:function get(){return this.data.array;}},needsUpdate:{set:function set(e){this.data.needsUpdate=e;}}}),Object.assign(qs.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function applyMatrix4(e){for(var _t118=0,_n105=this.data.count;_t118<_n105;_t118++){Hs.x=this.getX(_t118),Hs.y=this.getY(_t118),Hs.z=this.getZ(_t118),Hs.applyMatrix4(e),this.setXYZ(_t118,Hs.x,Hs.y,Hs.z);}return this;},setX:function setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this;},setY:function setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this;},setZ:function setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this;},setW:function setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this;},getX:function getX(e){return this.data.array[e*this.data.stride+this.offset];},getY:function getY(e){return this.data.array[e*this.data.stride+this.offset+1];},getZ:function getZ(e){return this.data.array[e*this.data.stride+this.offset+2];},getW:function getW(e){return this.data.array[e*this.data.stride+this.offset+3];},setXY:function setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this;},setXYZ:function setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this;},setXYZW:function setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this;},clone:function clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");var _e153=[];for(var _t119=0;_t119<this.count;_t119++){var _n106=_t119*this.data.stride+this.offset;for(var _t120=0;_t120<this.itemSize;_t120++){_e153.push(this.data.array[_n106+_t120]);}}return new Ai(new this.array.constructor(_e153),this.itemSize,this.normalized);}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new qs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);},toJSON:function toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");var _e154=[];for(var _t121=0;_t121<this.count;_t121++){var _n107=_t121*this.data.stride+this.offset;for(var _t122=0;_t122<this.itemSize;_t122++){_e154.push(this.data.array[_n107+_t122]);}}return{itemSize:this.itemSize,type:this.array.constructor.name,array:_e154,normalized:this.normalized};}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};}}),Gs.prototype=Object.create(Si.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isSpriteMaterial=!0,Gs.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this;};var Ws=new Qn(),Xs=new Qn(),Ys=new Qn(),Zs=new jn(),$s=new jn(),Js=new Ar(),Qs=new Qn(),Ks=new Qn(),eu=new Qn(),tu=new jn(),nu=new jn(),ru=new jn();function iu(e){if(Jr.call(this),this.type="Sprite",void 0===Vs){Vs=new Yi();var _e155=new js(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Vs.setIndex([0,1,2,0,2,3]),Vs.setAttribute("position",new qs(_e155,3,0,!1)),Vs.setAttribute("uv",new qs(_e155,2,3,!1));}this.geometry=Vs,this.material=void 0!==e?e:new Gs(),this.center=new jn(.5,.5);}function ou(e,t,n,r,i,o){Zs.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?($s.x=o*Zs.x-i*Zs.y,$s.y=i*Zs.x+o*Zs.y):$s.copy(Zs),e.copy(t),e.x+=$s.x,e.y+=$s.y,e.applyMatrix4(Js);}iu.prototype=Object.assign(Object.create(Jr.prototype),{constructor:iu,isSprite:!0,raycast:function raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xs.setFromMatrixScale(this.matrixWorld),Js.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ys.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Xs.multiplyScalar(-Ys.z);var n=this.material.rotation;var r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));var o=this.center;ou(Qs.set(-.5,-.5,0),Ys,o,Xs,r,i),ou(Ks.set(.5,-.5,0),Ys,o,Xs,r,i),ou(eu.set(.5,.5,0),Ys,o,Xs,r,i),tu.set(0,0),nu.set(1,0),ru.set(1,1);var a=e.ray.intersectTriangle(Qs,Ks,eu,!1,Ws);if(null===a&&(ou(Ks.set(-.5,.5,0),Ys,o,Xs,r,i),nu.set(0,1),a=e.ray.intersectTriangle(Qs,eu,Ks,!1,Ws),null===a))return;var s=e.ray.origin.distanceTo(Ws);s<e.near||s>e.far||t.push({distance:s,point:Ws.clone(),uv:di.getUV(Ws,Qs,Ks,eu,tu,nu,ru,new jn()),face:null,object:this});},copy:function copy(e){return Jr.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this;}});var au=new Qn(),su=new Qn();function uu(){Jr.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0;}uu.prototype=Object.assign(Object.create(Jr.prototype),{constructor:uu,isLOD:!0,copy:function copy(e){Jr.prototype.copy.call(this,e,!1);var t=e.levels;for(var _e156=0,_n108=t.length;_e156<_n108;_e156++){var _n109=t[_e156];this.addLevel(_n109.object.clone(),_n109.distance);}return this.autoUpdate=e.autoUpdate,this;},addLevel:function addLevel(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;t=Math.abs(t);var n=this.levels;var r;for(r=0;r<n.length&&!(t<n[r].distance);r++){;}return n.splice(r,0,{distance:t,object:e}),this.add(e),this;},getCurrentLevel:function getCurrentLevel(){return this._currentLevel;},getObjectForDistance:function getObjectForDistance(e){var t=this.levels;if(t.length>0){var _n110,_r96;for(_n110=1,_r96=t.length;_n110<_r96&&!(e<t[_n110].distance);_n110++){;}return t[_n110-1].object;}return null;},raycast:function raycast(e,t){if(this.levels.length>0){au.setFromMatrixPosition(this.matrixWorld);var _n111=e.ray.origin.distanceTo(au);this.getObjectForDistance(_n111).raycast(e,t);}},update:function update(e){var t=this.levels;if(t.length>1){au.setFromMatrixPosition(e.matrixWorld),su.setFromMatrixPosition(this.matrixWorld);var _n112=au.distanceTo(su)/e.zoom;var _r97,_i76;for(t[0].object.visible=!0,_r97=1,_i76=t.length;_r97<_i76&&_n112>=t[_r97].distance;_r97++){t[_r97-1].object.visible=!1,t[_r97].object.visible=!0;}for(this._currentLevel=_r97-1;_r97<_i76;_r97++){t[_r97].object.visible=!1;}}},toJSON:function toJSON(e){var t=Jr.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];var n=this.levels;for(var _e157=0,_r98=n.length;_e157<_r98;_e157++){var _r99=n[_e157];t.object.levels.push({object:_r99.object.uuid,distance:_r99.distance});}return t;}});var cu=new Qn(),lu=new Yn(),pu=new Yn(),du=new Qn(),hu=new Ar();function fu(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ho.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ar(),this.bindMatrixInverse=new Ar();}function mu(){Jr.call(this),this.type="Bone";}fu.prototype=Object.assign(Object.create(ho.prototype),{constructor:fu,isSkinnedMesh:!0,copy:function copy(e){return ho.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this;},bind:function bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert();},pose:function pose(){this.skeleton.pose();},normalizeSkinWeights:function normalizeSkinWeights(){var e=new Yn(),t=this.geometry.attributes.skinWeight;for(var _n113=0,_r100=t.count;_n113<_r100;_n113++){e.x=t.getX(_n113),e.y=t.getY(_n113),e.z=t.getZ(_n113),e.w=t.getW(_n113);var _r101=1/e.manhattanLength();_r101!==1/0?e.multiplyScalar(_r101):e.set(1,0,0,0),t.setXYZW(_n113,e.x,e.y,e.z,e.w);}},updateMatrixWorld:function updateMatrixWorld(e){ho.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode);},boneTransform:function boneTransform(e,t){var n=this.skeleton,r=this.geometry;lu.fromBufferAttribute(r.attributes.skinIndex,e),pu.fromBufferAttribute(r.attributes.skinWeight,e),cu.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var _e158=0;_e158<4;_e158++){var _r102=pu.getComponent(_e158);if(0!==_r102){var _i77=lu.getComponent(_e158);hu.multiplyMatrices(n.bones[_i77].matrixWorld,n.boneInverses[_i77]),t.addScaledVector(du.copy(cu).applyMatrix4(hu),_r102);}}return t.applyMatrix4(this.bindMatrixInverse);}}),mu.prototype=Object.assign(Object.create(Jr.prototype),{constructor:mu,isBone:!0});var yu=new Ar(),gu=new Ar();function vu(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];this.uuid=Un.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init();}Object.assign(vu.prototype,{init:function init(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var _e159=0,_t123=this.bones.length;_e159<_t123;_e159++){this.boneInverses.push(new Ar());}}},calculateInverses:function calculateInverses(){this.boneInverses.length=0;for(var _e160=0,_t124=this.bones.length;_e160<_t124;_e160++){var _t125=new Ar();this.bones[_e160]&&_t125.copy(this.bones[_e160].matrixWorld).invert(),this.boneInverses.push(_t125);}},pose:function pose(){for(var _e161=0,_t126=this.bones.length;_e161<_t126;_e161++){var _t127=this.bones[_e161];_t127&&_t127.matrixWorld.copy(this.boneInverses[_e161]).invert();}for(var _e162=0,_t128=this.bones.length;_e162<_t128;_e162++){var _t129=this.bones[_e162];_t129&&(_t129.parent&&_t129.parent.isBone?(_t129.matrix.copy(_t129.parent.matrixWorld).invert(),_t129.matrix.multiply(_t129.matrixWorld)):_t129.matrix.copy(_t129.matrixWorld),_t129.matrix.decompose(_t129.position,_t129.quaternion,_t129.scale));}},update:function update(){var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(var _r103=0,_i78=e.length;_r103<_i78;_r103++){var _i79=e[_r103]?e[_r103].matrixWorld:gu;yu.multiplyMatrices(_i79,t[_r103]),yu.toArray(n,16*_r103);}null!==r&&(r.needsUpdate=!0);},clone:function clone(){return new vu(this.bones,this.boneInverses);},getBoneByName:function getBoneByName(e){for(var _t130=0,_n114=this.bones.length;_t130<_n114;_t130++){var _n115=this.bones[_t130];if(_n115.name===e)return _n115;}},dispose:function dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null);},fromJSON:function fromJSON(e,t){this.uuid=e.uuid;for(var _n116=0,_r104=e.bones.length;_n116<_r104;_n116++){var _r105=e.bones[_n116];var _i80=t[_r105];void 0===_i80&&(console.warn("THREE.Skeleton: No bone found with UUID:",_r105),_i80=new mu()),this.bones.push(_i80),this.boneInverses.push(new Ar().fromArray(e.boneInverses[_n116]));}return this.init(),this;},toJSON:function toJSON(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;var t=this.bones,n=this.boneInverses;for(var _r106=0,_i81=t.length;_r106<_i81;_r106++){var _i82=t[_r106];e.bones.push(_i82.uuid);var _o41=n[_r106];e.boneInverses.push(_o41.toArray());}return e;}});var xu=new Ar(),bu=new Ar(),wu=[],Su=new ho();function Mu(e,t,n){ho.call(this,e,t),this.instanceMatrix=new Ai(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;}function _u(e){Si.call(this),this.type="LineBasicMaterial",this.color=new xi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e);}Mu.prototype=Object.assign(Object.create(ho.prototype),{constructor:Mu,isInstancedMesh:!0,copy:function copy(e){return ho.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this;},getColorAt:function getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e);},getMatrixAt:function getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e);},raycast:function raycast(e,t){var n=this.matrixWorld,r=this.count;if(Su.geometry=this.geometry,Su.material=this.material,void 0!==Su.material)for(var _i83=0;_i83<r;_i83++){this.getMatrixAt(_i83,xu),bu.multiplyMatrices(n,xu),Su.matrixWorld=bu,Su.raycast(e,wu);for(var _e163=0,_n117=wu.length;_e163<_n117;_e163++){var _n118=wu[_e163];_n118.instanceId=_i83,_n118.object=this,t.push(_n118);}wu.length=0;}},setColorAt:function setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Ai(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e);},setMatrixAt:function setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e);},updateMorphTargets:function updateMorphTargets(){},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}}),_u.prototype=Object.create(Si.prototype),_u.prototype.constructor=_u,_u.prototype.isLineBasicMaterial=!0,_u.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this;};var Eu=new Qn(),Au=new Qn(),Tu=new Ar(),Nu=new Er(),Du=new gr();function Cu(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Yi();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new _u();Jr.call(this),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets();}Cu.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Cu,isLine:!0,copy:function copy(e){return Jr.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this;},computeLineDistances:function computeLineDistances(){var e=this.geometry;if(e.isBufferGeometry){if(null===e.index){var _t131=e.attributes.position,_n119=[0];for(var _e164=1,_r107=_t131.count;_e164<_r107;_e164++){Eu.fromBufferAttribute(_t131,_e164-1),Au.fromBufferAttribute(_t131,_e164),_n119[_e164]=_n119[_e164-1],_n119[_e164]+=Eu.distanceTo(Au);}e.setAttribute("lineDistance",new Ii(_n119,1));}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(e.isGeometry){var _t132=e.vertices,_n120=e.lineDistances;_n120[0]=0;for(var _e165=1,_r108=_t132.length;_e165<_r108;_e165++){_n120[_e165]=_n120[_e165-1],_n120[_e165]+=_t132[_e165-1].distanceTo(_t132[_e165]);}}return this;},raycast:function raycast(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Du.copy(n.boundingSphere),Du.applyMatrix4(r),Du.radius+=i,!1===e.ray.intersectsSphere(Du))return;Tu.copy(r).invert(),Nu.copy(e.ray).applyMatrix4(Tu);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Qn(),u=new Qn(),c=new Qn(),l=new Qn(),p=this.isLineSegments?2:1;if(n.isBufferGeometry){var _r109=n.index,_i84=n.attributes.position;if(null!==_r109){var _n121=_r109.array;for(var _r110=0,_o42=_n121.length-1;_r110<_o42;_r110+=p){var _o43=_n121[_r110],_p12=_n121[_r110+1];if(s.fromBufferAttribute(_i84,_o43),u.fromBufferAttribute(_i84,_p12),Nu.distanceSqToSegment(s,u,l,c)>a)continue;l.applyMatrix4(this.matrixWorld);var _d10=e.ray.origin.distanceTo(l);_d10<e.near||_d10>e.far||t.push({distance:_d10,point:c.clone().applyMatrix4(this.matrixWorld),index:_r110,face:null,faceIndex:null,object:this});}}else for(var _n122=0,_r111=_i84.count-1;_n122<_r111;_n122+=p){if(s.fromBufferAttribute(_i84,_n122),u.fromBufferAttribute(_i84,_n122+1),Nu.distanceSqToSegment(s,u,l,c)>a)continue;l.applyMatrix4(this.matrixWorld);var _r112=e.ray.origin.distanceTo(l);_r112<e.near||_r112>e.far||t.push({distance:_r112,point:c.clone().applyMatrix4(this.matrixWorld),index:_n122,face:null,faceIndex:null,object:this});}}else if(n.isGeometry){var _r113=n.vertices,_i85=_r113.length;for(var _n123=0;_n123<_i85-1;_n123+=p){if(Nu.distanceSqToSegment(_r113[_n123],_r113[_n123+1],l,c)>a)continue;l.applyMatrix4(this.matrixWorld);var _i86=e.ray.origin.distanceTo(l);_i86<e.near||_i86>e.far||t.push({distance:_i86,point:c.clone().applyMatrix4(this.matrixWorld),index:_n123,face:null,faceIndex:null,object:this});}}},updateMorphTargets:function updateMorphTargets(){var e=this.geometry;if(e.isBufferGeometry){var _t133=e.morphAttributes,_n124=Object.keys(_t133);if(_n124.length>0){var _e166=_t133[_n124[0]];if(void 0!==_e166){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var _t134=0,_n125=_e166.length;_t134<_n125;_t134++){var _n126=_e166[_t134].name||String(_t134);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_n126]=_t134;}}}}else{var _t135=e.morphTargets;void 0!==_t135&&_t135.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.");}}});var Ru=new Qn(),Pu=new Qn();function Ou(e,t){Cu.call(this,e,t),this.type="LineSegments";}function Lu(e,t){Cu.call(this,e,t),this.type="LineLoop";}function Iu(e){Si.call(this),this.type="PointsMaterial",this.color=new xi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e);}Ou.prototype=Object.assign(Object.create(Cu.prototype),{constructor:Ou,isLineSegments:!0,computeLineDistances:function computeLineDistances(){var e=this.geometry;if(e.isBufferGeometry){if(null===e.index){var _t136=e.attributes.position,_n127=[];for(var _e167=0,_r114=_t136.count;_e167<_r114;_e167+=2){Ru.fromBufferAttribute(_t136,_e167),Pu.fromBufferAttribute(_t136,_e167+1),_n127[_e167]=0===_e167?0:_n127[_e167-1],_n127[_e167+1]=_n127[_e167]+Ru.distanceTo(Pu);}e.setAttribute("lineDistance",new Ii(_n127,1));}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(e.isGeometry){var _t137=e.vertices,_n128=e.lineDistances;for(var _e168=0,_r115=_t137.length;_e168<_r115;_e168+=2){Ru.copy(_t137[_e168]),Pu.copy(_t137[_e168+1]),_n128[_e168]=0===_e168?0:_n128[_e168-1],_n128[_e168+1]=_n128[_e168]+Ru.distanceTo(Pu);}}return this;}}),Lu.prototype=Object.assign(Object.create(Cu.prototype),{constructor:Lu,isLineLoop:!0}),Iu.prototype=Object.create(Si.prototype),Iu.prototype.constructor=Iu,Iu.prototype.isPointsMaterial=!0,Iu.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this;};var Bu=new Ar(),Fu=new Er(),zu=new gr(),ku=new Qn();function Uu(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Yi();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Iu();Jr.call(this),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets();}function ju(e,t,n,r,i,o,a){var s=Fu.distanceSqToPoint(e);if(s<n){var _n129=new Qn();Fu.closestPointToPoint(e,_n129),_n129.applyMatrix4(r);var _u18=i.ray.origin.distanceTo(_n129);if(_u18<i.near||_u18>i.far)return;o.push({distance:_u18,distanceToRay:Math.sqrt(s),point:_n129,index:t,face:null,object:a});}}function Hu(e,t,n,r,i,o,a,s,u){Wn.call(this,e,t,n,r,i,o,a,s,u),this.format=void 0!==a?a:ze,this.minFilter=void 0!==o?o:be,this.magFilter=void 0!==i?i:be,this.generateMipmaps=!1;var c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t);});}function qu(e,t,n,r,i,o,a,s,u,c,l,p){Wn.call(this,null,o,a,s,u,c,r,i,l,p),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1;}function Gu(e,t,n,r,i,o,a,s,u){Wn.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0;}function Vu(e,t,n,r,i,o,a,s,u,c){if((c=void 0!==c?c:qe)!==qe&&c!==Ge)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===qe&&(n=Ne),void 0===n&&c===Ge&&(n=Be),Wn.call(this,null,r,i,o,a,s,c,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:me,this.minFilter=void 0!==s?s:me,this.flipY=!1,this.generateMipmaps=!1;}Uu.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Uu,isPoints:!0,copy:function copy(e){return Jr.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this;},raycast:function raycast(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),zu.copy(n.boundingSphere),zu.applyMatrix4(r),zu.radius+=i,!1===e.ray.intersectsSphere(zu))return;Bu.copy(r).invert(),Fu.copy(e.ray).applyMatrix4(Bu);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var _i87=n.index,_o44=n.attributes.position;if(null!==_i87){var _n130=_i87.array;for(var _i88=0,_s19=_n130.length;_i88<_s19;_i88++){var _s20=_n130[_i88];ku.fromBufferAttribute(_o44,_s20),ju(ku,_s20,a,r,e,t,this);}}else for(var _n131=0,_i89=_o44.count;_n131<_i89;_n131++){ku.fromBufferAttribute(_o44,_n131),ju(ku,_n131,a,r,e,t,this);}}else{var _i90=n.vertices;for(var _n132=0,_o45=_i90.length;_n132<_o45;_n132++){ju(_i90[_n132],_n132,a,r,e,t,this);}}},updateMorphTargets:function updateMorphTargets(){var e=this.geometry;if(e.isBufferGeometry){var _t138=e.morphAttributes,_n133=Object.keys(_t138);if(_n133.length>0){var _e169=_t138[_n133[0]];if(void 0!==_e169){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var _t139=0,_n134=_e169.length;_t139<_n134;_t139++){var _n135=_e169[_t139].name||String(_t139);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_n135]=_t139;}}}}else{var _t140=e.morphTargets;void 0!==_t140&&_t140.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.");}}}),Hu.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Hu,clone:function clone(){return new this.constructor(this.image).copy(this);},isVideoTexture:!0,update:function update(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0);}}),qu.prototype=Object.create(Wn.prototype),qu.prototype.constructor=qu,qu.prototype.isCompressedTexture=!0,Gu.prototype=Object.create(Wn.prototype),Gu.prototype.constructor=Gu,Gu.prototype.isCanvasTexture=!0,Vu.prototype=Object.create(Wn.prototype),Vu.prototype.constructor=Vu,Vu.prototype.isDepthTexture=!0;var Wu=0;var Xu=new Ar(),Yu=new Jr(),Zu=new Qn();function $u(){Object.defineProperty(this,"id",{value:Wu+=2}),this.uuid=Un.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1;}$u.prototype=Object.assign(Object.create(Fn.prototype),{constructor:$u,isGeometry:!0,applyMatrix4:function applyMatrix4(e){var t=new Hn().getNormalMatrix(e);for(var _t141=0,_n136=this.vertices.length;_t141<_n136;_t141++){this.vertices[_t141].applyMatrix4(e);}for(var _e170=0,_n137=this.faces.length;_e170<_n137;_e170++){var _n138=this.faces[_e170];_n138.normal.applyMatrix3(t).normalize();for(var _e171=0,_r116=_n138.vertexNormals.length;_e171<_r116;_e171++){_n138.vertexNormals[_e171].applyMatrix3(t).normalize();}}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this;},rotateX:function rotateX(e){return Xu.makeRotationX(e),this.applyMatrix4(Xu),this;},rotateY:function rotateY(e){return Xu.makeRotationY(e),this.applyMatrix4(Xu),this;},rotateZ:function rotateZ(e){return Xu.makeRotationZ(e),this.applyMatrix4(Xu),this;},translate:function translate(e,t,n){return Xu.makeTranslation(e,t,n),this.applyMatrix4(Xu),this;},scale:function scale(e,t,n){return Xu.makeScale(e,t,n),this.applyMatrix4(Xu),this;},lookAt:function lookAt(e){return Yu.lookAt(e),Yu.updateMatrix(),this.applyMatrix4(Yu.matrix),this;},fromBufferGeometry:function fromBufferGeometry(e){var t=this,n=null!==e.index?e.index:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position,o=r.normal,a=r.color,s=r.uv,u=r.uv2;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var _e172=0;_e172<i.count;_e172++){t.vertices.push(new Qn().fromBufferAttribute(i,_e172)),void 0!==a&&t.colors.push(new xi().fromBufferAttribute(a,_e172));}function c(e,n,r,i){var c=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],l=void 0===o?[]:[new Qn().fromBufferAttribute(o,e),new Qn().fromBufferAttribute(o,n),new Qn().fromBufferAttribute(o,r)],p=new bi(e,n,r,l,c,i);t.faces.push(p),void 0!==s&&t.faceVertexUvs[0].push([new jn().fromBufferAttribute(s,e),new jn().fromBufferAttribute(s,n),new jn().fromBufferAttribute(s,r)]),void 0!==u&&t.faceVertexUvs[1].push([new jn().fromBufferAttribute(u,e),new jn().fromBufferAttribute(u,n),new jn().fromBufferAttribute(u,r)]);}var l=e.groups;if(l.length>0)for(var _e173=0;_e173<l.length;_e173++){var _t142=l[_e173],_r117=_t142.start;for(var _e174=_r117,_i91=_r117+_t142.count;_e174<_i91;_e174+=3){void 0!==n?c(n.getX(_e174),n.getX(_e174+1),n.getX(_e174+2),_t142.materialIndex):c(_e174,_e174+1,_e174+2,_t142.materialIndex);}}else if(void 0!==n)for(var _e175=0;_e175<n.count;_e175+=3){c(n.getX(_e175),n.getX(_e175+1),n.getX(_e175+2));}else for(var _e176=0;_e176<i.count;_e176+=3){c(_e176,_e176+1,_e176+2);}return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this;},center:function center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zu).negate(),this.translate(Zu.x,Zu.y,Zu.z),this;},normalize:function normalize(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new Ar();return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this;},computeFaceNormals:function computeFaceNormals(){var e=new Qn(),t=new Qn();for(var _n139=0,_r118=this.faces.length;_n139<_r118;_n139++){var _r119=this.faces[_n139],_i92=this.vertices[_r119.a],_o46=this.vertices[_r119.b],_a32=this.vertices[_r119.c];e.subVectors(_a32,_o46),t.subVectors(_i92,_o46),e.cross(t),e.normalize(),_r119.normal.copy(e);}},computeVertexNormals:function computeVertexNormals(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!0;var t=new Array(this.vertices.length);for(var _e177=0,_n140=this.vertices.length;_e177<_n140;_e177++){t[_e177]=new Qn();}if(e){var _e178=new Qn(),_n141=new Qn();for(var _r120=0,_i93=this.faces.length;_r120<_i93;_r120++){var _i94=this.faces[_r120],_o47=this.vertices[_i94.a],_a33=this.vertices[_i94.b],_s21=this.vertices[_i94.c];_e178.subVectors(_s21,_a33),_n141.subVectors(_o47,_a33),_e178.cross(_n141),t[_i94.a].add(_e178),t[_i94.b].add(_e178),t[_i94.c].add(_e178);}}else{this.computeFaceNormals();for(var _e179=0,_n142=this.faces.length;_e179<_n142;_e179++){var _n143=this.faces[_e179];t[_n143.a].add(_n143.normal),t[_n143.b].add(_n143.normal),t[_n143.c].add(_n143.normal);}}for(var _e180=0,_n144=this.vertices.length;_e180<_n144;_e180++){t[_e180].normalize();}for(var _e181=0,_n145=this.faces.length;_e181<_n145;_e181++){var _n146=this.faces[_e181],_r121=_n146.vertexNormals;3===_r121.length?(_r121[0].copy(t[_n146.a]),_r121[1].copy(t[_n146.b]),_r121[2].copy(t[_n146.c])):(_r121[0]=t[_n146.a].clone(),_r121[1]=t[_n146.b].clone(),_r121[2]=t[_n146.c].clone());}this.faces.length>0&&(this.normalsNeedUpdate=!0);},computeFlatVertexNormals:function computeFlatVertexNormals(){this.computeFaceNormals();for(var _e182=0,_t143=this.faces.length;_e182<_t143;_e182++){var _t144=this.faces[_e182],_n147=_t144.vertexNormals;3===_n147.length?(_n147[0].copy(_t144.normal),_n147[1].copy(_t144.normal),_n147[2].copy(_t144.normal)):(_n147[0]=_t144.normal.clone(),_n147[1]=_t144.normal.clone(),_n147[2]=_t144.normal.clone());}this.faces.length>0&&(this.normalsNeedUpdate=!0);},computeMorphNormals:function computeMorphNormals(){for(var _e183=0,_t145=this.faces.length;_e183<_t145;_e183++){var _t146=this.faces[_e183];_t146.__originalFaceNormal?_t146.__originalFaceNormal.copy(_t146.normal):_t146.__originalFaceNormal=_t146.normal.clone(),_t146.__originalVertexNormals||(_t146.__originalVertexNormals=[]);for(var _e184=0,_n148=_t146.vertexNormals.length;_e184<_n148;_e184++){_t146.__originalVertexNormals[_e184]?_t146.__originalVertexNormals[_e184].copy(_t146.vertexNormals[_e184]):_t146.__originalVertexNormals[_e184]=_t146.vertexNormals[_e184].clone();}}var e=new $u();e.faces=this.faces;for(var _t147=0,_n149=this.morphTargets.length;_t147<_n149;_t147++){if(!this.morphNormals[_t147]){this.morphNormals[_t147]={},this.morphNormals[_t147].faceNormals=[],this.morphNormals[_t147].vertexNormals=[];var _e185=this.morphNormals[_t147].faceNormals,_n151=this.morphNormals[_t147].vertexNormals;for(var _t148=0,_r122=this.faces.length;_t148<_r122;_t148++){var _t149=new Qn(),_r123={a:new Qn(),b:new Qn(),c:new Qn()};_e185.push(_t149),_n151.push(_r123);}}var _n150=this.morphNormals[_t147];e.vertices=this.morphTargets[_t147].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(var _e186=0,_t150=this.faces.length;_e186<_t150;_e186++){var _t151=this.faces[_e186],_r124=_n150.faceNormals[_e186],_i95=_n150.vertexNormals[_e186];_r124.copy(_t151.normal),_i95.a.copy(_t151.vertexNormals[0]),_i95.b.copy(_t151.vertexNormals[1]),_i95.c.copy(_t151.vertexNormals[2]);}}for(var _e187=0,_t152=this.faces.length;_e187<_t152;_e187++){var _t153=this.faces[_e187];_t153.normal=_t153.__originalFaceNormal,_t153.vertexNormals=_t153.__originalVertexNormals;}},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new tr()),this.boundingBox.setFromPoints(this.vertices);},computeBoundingSphere:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new gr()),this.boundingSphere.setFromPoints(this.vertices);},merge:function merge(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r;var i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,c=this.colors,l=e.colors;void 0!==t&&(r=new Hn().getNormalMatrix(t));for(var _e188=0,_n152=a.length;_e188<_n152;_e188++){var _n153=a[_e188].clone();void 0!==t&&_n153.applyMatrix4(t),o.push(_n153);}for(var _e189=0,_t154=l.length;_e189<_t154;_e189++){c.push(l[_e189].clone());}for(var _e190=0,_t155=u.length;_e190<_t155;_e190++){var _t156=u[_e190];var _o48=void 0,_a34=void 0;var _c19=_t156.vertexNormals,_l12=_t156.vertexColors,_p13=new bi(_t156.a+i,_t156.b+i,_t156.c+i);_p13.normal.copy(_t156.normal),void 0!==r&&_p13.normal.applyMatrix3(r).normalize();for(var _e191=0,_t157=_c19.length;_e191<_t157;_e191++){_o48=_c19[_e191].clone(),void 0!==r&&_o48.applyMatrix3(r).normalize(),_p13.vertexNormals.push(_o48);}_p13.color.copy(_t156.color);for(var _e192=0,_t158=_l12.length;_e192<_t158;_e192++){_a34=_l12[_e192],_p13.vertexColors.push(_a34.clone());}_p13.materialIndex=_t156.materialIndex+n,s.push(_p13);}for(var _t159=0,_n154=e.faceVertexUvs.length;_t159<_n154;_t159++){var _n155=e.faceVertexUvs[_t159];void 0===this.faceVertexUvs[_t159]&&(this.faceVertexUvs[_t159]=[]);for(var _e193=0,_r125=_n155.length;_e193<_r125;_e193++){var _r126=_n155[_e193],_i96=[];for(var _e194=0,_t160=_r126.length;_e194<_t160;_e194++){_i96.push(_r126[_e194].clone());}this.faceVertexUvs[_t159].push(_i96);}}},mergeMesh:function mergeMesh(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);},mergeVertices:function mergeVertices(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:4;var t={},n=[],r=[],i=Math.pow(10,e);for(var _e195=0,_o49=this.vertices.length;_e195<_o49;_e195++){var _o50=this.vertices[_e195],_a35=Math.round(_o50.x*i)+"_"+Math.round(_o50.y*i)+"_"+Math.round(_o50.z*i);void 0===t[_a35]?(t[_a35]=_e195,n.push(this.vertices[_e195]),r[_e195]=n.length-1):r[_e195]=r[t[_a35]];}var o=[];for(var _e196=0,_t161=this.faces.length;_e196<_t161;_e196++){var _t162=this.faces[_e196];_t162.a=r[_t162.a],_t162.b=r[_t162.b],_t162.c=r[_t162.c];var _n156=[_t162.a,_t162.b,_t162.c];for(var _t163=0;_t163<3;_t163++){if(_n156[_t163]===_n156[(_t163+1)%3]){o.push(_e196);break;}}}for(var _e197=o.length-1;_e197>=0;_e197--){var _t164=o[_e197];this.faces.splice(_t164,1);for(var _e198=0,_n157=this.faceVertexUvs.length;_e198<_n157;_e198++){this.faceVertexUvs[_e198].splice(_t164,1);}}var a=this.vertices.length-n.length;return this.vertices=n,a;},setFromPoints:function setFromPoints(e){this.vertices=[];for(var _t165=0,_n158=e.length;_t165<_n158;_t165++){var _n159=e[_t165];this.vertices.push(new Qn(_n159.x,_n159.y,_n159.z||0));}return this;},sortFacesByMaterialIndex:function sortFacesByMaterialIndex(){var e=this.faces,t=e.length;for(var _n160=0;_n160<t;_n160++){e[_n160]._id=_n160;}e.sort(function(e,t){return e.materialIndex-t.materialIndex;});var n=this.faceVertexUvs[0],r=this.faceVertexUvs[1];var i,o;n&&n.length===t&&(i=[]),r&&r.length===t&&(o=[]);for(var _a36=0;_a36<t;_a36++){var _t166=e[_a36]._id;i&&i.push(n[_t166]),o&&o.push(r[_t166]);}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o);},toJSON:function toJSON(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var _t167=this.parameters;for(var _n161 in _t167){void 0!==_t167[_n161]&&(e[_n161]=_t167[_n161]);}return e;}var t=[];for(var _e199=0;_e199<this.vertices.length;_e199++){var _n162=this.vertices[_e199];t.push(_n162.x,_n162.y,_n162.z);}var n=[],r=[],i={},o=[],a={},s=[],u={};for(var _e200=0;_e200<this.faces.length;_e200++){var _t168=this.faces[_e200],_r127=!0,_i97=!1,_o51=void 0!==this.faceVertexUvs[0][_e200],_a37=_t168.normal.length()>0,_s22=_t168.vertexNormals.length>0,_u19=1!==_t168.color.r||1!==_t168.color.g||1!==_t168.color.b,_h9=_t168.vertexColors.length>0;var _f4=0;if(_f4=c(_f4,0,0),_f4=c(_f4,1,_r127),_f4=c(_f4,2,_i97),_f4=c(_f4,3,_o51),_f4=c(_f4,4,_a37),_f4=c(_f4,5,_s22),_f4=c(_f4,6,_u19),_f4=c(_f4,7,_h9),n.push(_f4),n.push(_t168.a,_t168.b,_t168.c),n.push(_t168.materialIndex),_o51){var _t169=this.faceVertexUvs[0][_e200];n.push(d(_t169[0]),d(_t169[1]),d(_t169[2]));}if(_a37&&n.push(l(_t168.normal)),_s22){var _e201=_t168.vertexNormals;n.push(l(_e201[0]),l(_e201[1]),l(_e201[2]));}if(_u19&&n.push(p(_t168.color)),_h9){var _e202=_t168.vertexColors;n.push(p(_e202[0]),p(_e202[1]),p(_e202[2]));}}function c(e,t,n){return n?e|1<<t:e&~(1<<t);}function l(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==i[t]||(i[t]=r.length/3,r.push(e.x,e.y,e.z)),i[t];}function p(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==a[t]||(a[t]=o.length,o.push(e.getHex())),a[t];}function d(e){var t=e.x.toString()+e.y.toString();return void 0!==u[t]||(u[t]=s.length/2,s.push(e.x,e.y)),u[t];}return e.data={},e.data.vertices=t,e.data.normals=r,o.length>0&&(e.data.colors=o),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e;},clone:function clone(){return new $u().copy(this);},copy:function copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var t=e.vertices;for(var _e203=0,_n163=t.length;_e203<_n163;_e203++){this.vertices.push(t[_e203].clone());}var n=e.colors;for(var _e204=0,_t170=n.length;_e204<_t170;_e204++){this.colors.push(n[_e204].clone());}var r=e.faces;for(var _e205=0,_t171=r.length;_e205<_t171;_e205++){this.faces.push(r[_e205].clone());}for(var _t172=0,_n164=e.faceVertexUvs.length;_t172<_n164;_t172++){var _n165=e.faceVertexUvs[_t172];void 0===this.faceVertexUvs[_t172]&&(this.faceVertexUvs[_t172]=[]);for(var _e206=0,_r128=_n165.length;_e206<_r128;_e206++){var _r129=_n165[_e206],_i98=[];for(var _e207=0,_t173=_r129.length;_e207<_t173;_e207++){var _t174=_r129[_e207];_i98.push(_t174.clone());}this.faceVertexUvs[_t172].push(_i98);}}var i=e.morphTargets;for(var _e208=0,_t175=i.length;_e208<_t175;_e208++){var _t176={};if(_t176.name=i[_e208].name,void 0!==i[_e208].vertices){_t176.vertices=[];for(var _n166=0,_r130=i[_e208].vertices.length;_n166<_r130;_n166++){_t176.vertices.push(i[_e208].vertices[_n166].clone());}}if(void 0!==i[_e208].normals){_t176.normals=[];for(var _n167=0,_r131=i[_e208].normals.length;_n167<_r131;_n167++){_t176.normals.push(i[_e208].normals[_n167].clone());}}this.morphTargets.push(_t176);}var o=e.morphNormals;for(var _e209=0,_t177=o.length;_e209<_t177;_e209++){var _t178={};if(void 0!==o[_e209].vertexNormals){_t178.vertexNormals=[];for(var _n168=0,_r132=o[_e209].vertexNormals.length;_n168<_r132;_n168++){var _r133=o[_e209].vertexNormals[_n168],_i99={};_i99.a=_r133.a.clone(),_i99.b=_r133.b.clone(),_i99.c=_r133.c.clone(),_t178.vertexNormals.push(_i99);}}if(void 0!==o[_e209].faceNormals){_t178.faceNormals=[];for(var _n169=0,_r134=o[_e209].faceNormals.length;_n169<_r134;_n169++){_t178.faceNormals.push(o[_e209].faceNormals[_n169].clone());}}this.morphNormals.push(_t178);}var a=e.skinWeights;for(var _e210=0,_t179=a.length;_e210<_t179;_e210++){this.skinWeights.push(a[_e210].clone());}var s=e.skinIndices;for(var _e211=0,_t180=s.length;_e211<_t180;_e211++){this.skinIndices.push(s[_e211].clone());}var u=e.lineDistances;for(var _e212=0,_t181=u.length;_e212<_t181;_e212++){this.lineDistances.push(u[_e212]);}var c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());var l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}});var Ju=/*#__PURE__*/function(_$u){_inherits(Ju,_$u);var _super4=_createSuper(Ju);function Ju(e,t,n,r,i,o){var _this4;_classCallCheck(this,Ju);_this4=_super4.call(this),_this4.type="BoxGeometry",_this4.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},_this4.fromBufferGeometry(new yo(e,t,n,r,i,o)),_this4.mergeVertices();return _this4;}return Ju;}($u);var Qu=/*#__PURE__*/function(_Yi3){_inherits(Qu,_Yi3);var _super5=_createSuper(Qu);function Qu(){var _this5;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:8;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:2*Math.PI;_classCallCheck(this,Qu);_this5=_super5.call(this),_this5.type="CircleBufferGeometry",_this5.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);var i=[],o=[],a=[],s=[],u=new Qn(),c=new jn();o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(var _i100=0,_l13=3;_i100<=t;_i100++,_l13+=3){var _p14=n+_i100/t*r;u.x=e*Math.cos(_p14),u.y=e*Math.sin(_p14),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[_l13]/e+1)/2,c.y=(o[_l13+1]/e+1)/2,s.push(c.x,c.y);}for(var _e213=1;_e213<=t;_e213++){i.push(_e213,_e213+1,0);}_this5.setIndex(i),_this5.setAttribute("position",new Ii(o,3)),_this5.setAttribute("normal",new Ii(a,3)),_this5.setAttribute("uv",new Ii(s,2));return _this5;}return Qu;}(Yi);var Ku=/*#__PURE__*/function(_$u2){_inherits(Ku,_$u2);var _super6=_createSuper(Ku);function Ku(e,t,n,r){var _this6;_classCallCheck(this,Ku);_this6=_super6.call(this),_this6.type="CircleGeometry",_this6.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},_this6.fromBufferGeometry(new Qu(e,t,n,r)),_this6.mergeVertices();return _this6;}return Ku;}($u);var ec=/*#__PURE__*/function(_Yi4){_inherits(ec,_Yi4);var _super7=_createSuper(ec);function ec(){var _this7;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:8;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:!1;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:2*Math.PI;_classCallCheck(this,ec);_this7=_super7.call(this),_this7.type="CylinderBufferGeometry",_this7.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=_assertThisInitialized(_this7);r=Math.floor(r),i=Math.floor(i);var c=[],l=[],p=[],d=[];var h=0;var f=[],m=n/2;var y=0;function g(n){var i=h,o=new jn(),f=new Qn();var g=0;var v=!0===n?e:t,x=!0===n?1:-1;for(var _e214=1;_e214<=r;_e214++){l.push(0,m*x,0),p.push(0,x,0),d.push(.5,.5),h++;}var b=h;for(var _e215=0;_e215<=r;_e215++){var _t182=_e215/r*s+a,_n170=Math.cos(_t182),_i101=Math.sin(_t182);f.x=v*_i101,f.y=m*x,f.z=v*_n170,l.push(f.x,f.y,f.z),p.push(0,x,0),o.x=.5*_n170+.5,o.y=.5*_i101*x+.5,d.push(o.x,o.y),h++;}for(var _e216=0;_e216<r;_e216++){var _t183=i+_e216,_r135=b+_e216;!0===n?c.push(_r135,_r135+1,_t183):c.push(_r135+1,_r135,_t183),g+=3;}u.addGroup(y,g,!0===n?1:2),y+=g;}!function(){var o=new Qn(),g=new Qn();var v=0;var x=(t-e)/n;for(var _u20=0;_u20<=i;_u20++){var _c20=[],_y4=_u20/i,_v5=_y4*(t-e)+e;for(var _e217=0;_e217<=r;_e217++){var _t184=_e217/r,_i102=_t184*s+a,_u21=Math.sin(_i102),_f5=Math.cos(_i102);g.x=_v5*_u21,g.y=-_y4*n+m,g.z=_v5*_f5,l.push(g.x,g.y,g.z),o.set(_u21,x,_f5).normalize(),p.push(o.x,o.y,o.z),d.push(_t184,1-_y4),_c20.push(h++);}f.push(_c20);}for(var _e218=0;_e218<r;_e218++){for(var _t185=0;_t185<i;_t185++){var _n171=f[_t185][_e218],_r136=f[_t185+1][_e218],_i103=f[_t185+1][_e218+1],_o52=f[_t185][_e218+1];c.push(_n171,_r136,_o52),c.push(_r136,_i103,_o52),v+=6;}}u.addGroup(y,v,0),y+=v;}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),_this7.setIndex(c),_this7.setAttribute("position",new Ii(l,3)),_this7.setAttribute("normal",new Ii(p,3)),_this7.setAttribute("uv",new Ii(d,2));return _this7;}return ec;}(Yi);var tc=/*#__PURE__*/function(_$u3){_inherits(tc,_$u3);var _super8=_createSuper(tc);function tc(e,t,n,r,i,o,a,s){var _this8;_classCallCheck(this,tc);_this8=_super8.call(this),_this8.type="CylinderGeometry",_this8.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},_this8.fromBufferGeometry(new ec(e,t,n,r,i,o,a,s)),_this8.mergeVertices();return _this8;}return tc;}($u);var nc=/*#__PURE__*/function(_tc){_inherits(nc,_tc);var _super9=_createSuper(nc);function nc(e,t,n,r,i,o,a){var _this9;_classCallCheck(this,nc);_this9=_super9.call(this,0,e,t,n,r,i,o,a),_this9.type="ConeGeometry",_this9.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a};return _this9;}return nc;}(tc);var rc=/*#__PURE__*/function(_ec){_inherits(rc,_ec);var _super10=_createSuper(rc);function rc(){var _this10;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:8;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:2*Math.PI;_classCallCheck(this,rc);_this10=_super10.call(this,0,e,t,n,r,i,o,a),_this10.type="ConeBufferGeometry",_this10.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a};return _this10;}return rc;}(ec);var ic=/*#__PURE__*/function(_Yi5){_inherits(ic,_Yi5);var _super11=_createSuper(ic);function ic(e,t){var _this11;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_classCallCheck(this,ic);_this11=_super11.call(this),_this11.type="PolyhedronBufferGeometry",_this11.parameters={vertices:e,indices:t,radius:n,detail:r};var i=[],o=[];function a(e,t,n,r){var i=r+1,o=[];for(var _r137=0;_r137<=i;_r137++){o[_r137]=[];var _a38=e.clone().lerp(n,_r137/i),_s23=t.clone().lerp(n,_r137/i),_u22=i-_r137;for(var _e219=0;_e219<=_u22;_e219++){o[_r137][_e219]=0===_e219&&_r137===i?_a38:_a38.clone().lerp(_s23,_e219/_u22);}}for(var _e220=0;_e220<i;_e220++){for(var _t186=0;_t186<2*(i-_e220)-1;_t186++){var _n172=Math.floor(_t186/2);_t186%2==0?(s(o[_e220][_n172+1]),s(o[_e220+1][_n172]),s(o[_e220][_n172])):(s(o[_e220][_n172+1]),s(o[_e220+1][_n172+1]),s(o[_e220+1][_n172]));}}}function s(e){i.push(e.x,e.y,e.z);}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2];}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5);}function l(e){return Math.atan2(e.z,-e.x);}!function(e){var n=new Qn(),r=new Qn(),i=new Qn();for(var _o53=0;_o53<t.length;_o53+=3){u(t[_o53+0],n),u(t[_o53+1],r),u(t[_o53+2],i),a(n,r,i,e);}}(r),function(e){var t=new Qn();for(var _n173=0;_n173<i.length;_n173+=3){t.x=i[_n173+0],t.y=i[_n173+1],t.z=i[_n173+2],t.normalize().multiplyScalar(e),i[_n173+0]=t.x,i[_n173+1]=t.y,i[_n173+2]=t.z;}}(n),function(){var e=new Qn();for(var _n174=0;_n174<i.length;_n174+=3){e.x=i[_n174+0],e.y=i[_n174+1],e.z=i[_n174+2];var _r138=l(e)/2/Math.PI+.5,_a39=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(_r138,1-_a39);}var t;(function(){var e=new Qn(),t=new Qn(),n=new Qn(),r=new Qn(),a=new jn(),s=new jn(),u=new jn();for(var _p15=0,_d11=0;_p15<i.length;_p15+=9,_d11+=6){e.set(i[_p15+0],i[_p15+1],i[_p15+2]),t.set(i[_p15+3],i[_p15+4],i[_p15+5]),n.set(i[_p15+6],i[_p15+7],i[_p15+8]),a.set(o[_d11+0],o[_d11+1]),s.set(o[_d11+2],o[_d11+3]),u.set(o[_d11+4],o[_d11+5]),r.copy(e).add(t).add(n).divideScalar(3);var _h10=l(r);c(a,_d11+0,e,_h10),c(s,_d11+2,t,_h10),c(u,_d11+4,n,_h10);}})(),function(){for(var _e221=0;_e221<o.length;_e221+=6){var _t187=o[_e221+0],_n175=o[_e221+2],_r139=o[_e221+4],_i104=Math.max(_t187,_n175,_r139),_a40=Math.min(_t187,_n175,_r139);_i104>.9&&_a40<.1&&(_t187<.2&&(o[_e221+0]+=1),_n175<.2&&(o[_e221+2]+=1),_r139<.2&&(o[_e221+4]+=1));}}();}(),_this11.setAttribute("position",new Ii(i,3)),_this11.setAttribute("normal",new Ii(i.slice(),3)),_this11.setAttribute("uv",new Ii(o,2)),0===r?_this11.computeVertexNormals():_this11.normalizeNormals();return _this11;}return ic;}(Yi);var oc=/*#__PURE__*/function(_ic){_inherits(oc,_ic);var _super12=_createSuper(oc);function oc(){var _this12;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,oc);var n=(1+Math.sqrt(5))/2,r=1/n;_this12=_super12.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),_this12.type="DodecahedronBufferGeometry",_this12.parameters={radius:e,detail:t};return _this12;}return oc;}(ic);var ac=/*#__PURE__*/function(_$u4){_inherits(ac,_$u4);var _super13=_createSuper(ac);function ac(e,t){var _this13;_classCallCheck(this,ac);_this13=_super13.call(this),_this13.type="DodecahedronGeometry",_this13.parameters={radius:e,detail:t},_this13.fromBufferGeometry(new oc(e,t)),_this13.mergeVertices();return _this13;}return ac;}($u);var sc=new Qn(),uc=new Qn(),cc=new Qn(),lc=new di();var pc=/*#__PURE__*/function(_Yi6){_inherits(pc,_Yi6);var _super14=_createSuper(pc);function pc(e,t){var _this14;_classCallCheck(this,pc);_this14=_super14.call(this),_this14.type="EdgesGeometry",_this14.parameters={thresholdAngle:t},t=void 0!==t?t:1,e.isGeometry&&(e=new Yi().fromGeometry(e));var n=Math.pow(10,4),r=Math.cos(Un.DEG2RAD*t),i=e.getIndex(),o=e.getAttribute("position"),a=i?i.count:o.count,s=[0,0,0],u=["a","b","c"],c=new Array(3),l={},p=[];for(var _e222=0;_e222<a;_e222+=3){i?(s[0]=i.getX(_e222),s[1]=i.getX(_e222+1),s[2]=i.getX(_e222+2)):(s[0]=_e222,s[1]=_e222+1,s[2]=_e222+2);var _t188=lc.a,_a41=lc.b,_d12=lc.c;if(_t188.fromBufferAttribute(o,s[0]),_a41.fromBufferAttribute(o,s[1]),_d12.fromBufferAttribute(o,s[2]),lc.getNormal(cc),c[0]="".concat(Math.round(_t188.x*n),",").concat(Math.round(_t188.y*n),",").concat(Math.round(_t188.z*n)),c[1]="".concat(Math.round(_a41.x*n),",").concat(Math.round(_a41.y*n),",").concat(Math.round(_a41.z*n)),c[2]="".concat(Math.round(_d12.x*n),",").concat(Math.round(_d12.y*n),",").concat(Math.round(_d12.z*n)),c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(var _e223=0;_e223<3;_e223++){var _t189=(_e223+1)%3,_n176=c[_e223],_i105=c[_t189],_o54=lc[u[_e223]],_a42=lc[u[_t189]],_d13="".concat(_n176,"_").concat(_i105),_h11="".concat(_i105,"_").concat(_n176);_h11 in l&&l[_h11]?(cc.dot(l[_h11].normal)<=r&&(p.push(_o54.x,_o54.y,_o54.z),p.push(_a42.x,_a42.y,_a42.z)),l[_h11]=null):_d13 in l||(l[_d13]={index0:s[_e223],index1:s[_t189],normal:cc.clone()});}}for(var _e224 in l){if(l[_e224]){var _l$_e=l[_e224],_t190=_l$_e.index0,_n177=_l$_e.index1;sc.fromBufferAttribute(o,_t190),uc.fromBufferAttribute(o,_n177),p.push(sc.x,sc.y,sc.z),p.push(uc.x,uc.y,uc.z);}}_this14.setAttribute("position",new Ii(p,3));return _this14;}return pc;}(Yi);var dc=function dc(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length;var o=hc(e,0,i,n,!0);var a=[];if(!o||o.next===o.prev)return a;var s,u,c,l,p,d,h;if(r&&(o=function(e,t,n,r){var i=[];var o,a,s,u,c;for(o=0,a=t.length;o<a;o++){s=t[o]*r,u=o<a-1?t[o+1]*r:e.length,c=hc(e,s,u,r,!1),c===c.next&&(c.steiner=!0),i.push(_c(c));}for(i.sort(bc),o=0;o<i.length;o++){wc(i[o],n),n=fc(n,n.next);}return n;}(e,t,o,n)),e.length>80*n){s=c=e[0],u=l=e[1];for(var _t191=n;_t191<i;_t191+=n){p=e[_t191],d=e[_t191+1],p<s&&(s=p),d<u&&(u=d),p>c&&(c=p),d>l&&(l=d);}h=Math.max(c-s,l-u),h=0!==h?1/h:0;}return mc(o,a,n,s,u,h),a;};function hc(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){var i=0;for(var _o55=t,_a43=n-r;_o55<n;_o55+=r){i+=(e[_a43]-e[_o55])*(e[_o55+1]+e[_a43+1]),_a43=_o55;}return i;}(e,t,n,r)>0)for(o=t;o<n;o+=r){a=Lc(o,e[o],e[o+1],a);}else for(o=n-r;o>=t;o-=r){a=Lc(o,e[o],e[o+1],a);}return a&&Nc(a,a.next)&&(Ic(a),a=a.next),a;}function fc(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Nc(r,r.next)&&0!==Tc(r.prev,r,r.next))r=r.next;else{if(Ic(r),r=t=r.prev,r===r.next)break;n=!0;}}while(n||r!==t);return t;}function mc(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Mc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++){;}for(u=c;s>0||u>0&&r;){0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;}n=r;}o.nextZ=null,c*=2;}while(a>1);}(i);}(e,r,i,o);var s,u,c=e;for(;e.prev!==e.next;){if(s=e.prev,u=e.next,o?gc(e,r,i,o):yc(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Ic(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?mc(e=vc(fc(e),t,n),t,n,r,i,o,2):2===a&&xc(e,t,n,r,i,o):mc(fc(e),t,n,r,i,o,1);break;}}}function yc(e){var t=e.prev,n=e,r=e.next;if(Tc(t,n,r)>=0)return!1;var i=e.next.next;for(;i!==e.prev;){if(Ec(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Tc(i.prev,i,i.next)>=0)return!1;i=i.next;}return!0;}function gc(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Tc(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=Mc(s,u,t,n,r),d=Mc(c,l,t,n,r);var h=e.prevZ,f=e.nextZ;for(;h&&h.z>=p&&f&&f.z<=d;){if(h!==e.prev&&h!==e.next&&Ec(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Tc(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&Ec(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Tc(f.prev,f,f.next)>=0)return!1;f=f.nextZ;}for(;h&&h.z>=p;){if(h!==e.prev&&h!==e.next&&Ec(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Tc(h.prev,h,h.next)>=0)return!1;h=h.prevZ;}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&Ec(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Tc(f.prev,f,f.next)>=0)return!1;f=f.nextZ;}return!0;}function vc(e,t,n){var r=e;do{var _i106=r.prev,_o56=r.next.next;!Nc(_i106,_o56)&&Dc(_i106,r,r.next,_o56)&&Pc(_i106,_o56)&&Pc(_o56,_i106)&&(t.push(_i106.i/n),t.push(r.i/n),t.push(_o56.i/n),Ic(r),Ic(r.next),r=e=_o56),r=r.next;}while(r!==e);return fc(r);}function xc(e,t,n,r,i,o){var a=e;do{var _e225=a.next.next;for(;_e225!==a.prev;){if(a.i!==_e225.i&&Ac(a,_e225)){var _s24=Oc(a,_e225);return a=fc(a,a.next),_s24=fc(_s24,_s24.next),mc(a,t,n,r,i,o),void mc(_s24,t,n,r,i,o);}_e225=_e225.next;}a=a.next;}while(a!==e);}function bc(e,t){return e.x-t.x;}function wc(e,t){if(t=function(e,t){var n=t;var r=e.x,i=e.y;var o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var _e226=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(_e226<=r&&_e226>a){if(a=_e226,_e226===r){if(i===n.y)return n;if(i===n.next.y)return n.next;}o=n.x<n.next.x?n:n.next;}}n=n.next;}while(n!==t);if(!o)return null;if(r===a)return o;var s=o,u=o.x,c=o.y;var l,p=1/0;n=o;do{r>=n.x&&n.x>=u&&r!==n.x&&Ec(i<c?r:a,i,u,c,i<c?a:r,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(r-n.x),Pc(n,e)&&(l<p||l===p&&(n.x>o.x||n.x===o.x&&Sc(o,n)))&&(o=n,p=l)),n=n.next;}while(n!==s);return o;}(e,t)){var _n178=Oc(t,e);fc(t,t.next),fc(_n178,_n178.next);}}function Sc(e,t){return Tc(e.prev,e,t.prev)<0&&Tc(t.next,e,e.next)<0;}function Mc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1;}function _c(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;}while(t!==e);return n;}function Ec(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0;}function Ac(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Dc(n,n.next,e,t))return!0;n=n.next;}while(n!==e);return!1;}(e,t)&&(Pc(e,t)&&Pc(t,e)&&function(e,t){var n=e,r=!1;var i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;}while(n!==e);return r;}(e,t)&&(Tc(e.prev,e,t.prev)||Tc(e,t.prev,t))||Nc(e,t)&&Tc(e.prev,e,e.next)>0&&Tc(t.prev,t,t.next)>0);}function Tc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);}function Nc(e,t){return e.x===t.x&&e.y===t.y;}function Dc(e,t,n,r){var i=Rc(Tc(e,t,n)),o=Rc(Tc(e,t,r)),a=Rc(Tc(n,r,e)),s=Rc(Tc(n,r,t));return i!==o&&a!==s||!(0!==i||!Cc(e,n,t))||!(0!==o||!Cc(e,r,t))||!(0!==a||!Cc(n,e,r))||!(0!==s||!Cc(n,t,r));}function Cc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y);}function Rc(e){return e>0?1:e<0?-1:0;}function Pc(e,t){return Tc(e.prev,e,e.next)<0?Tc(e,t,e.next)>=0&&Tc(e,e.prev,t)>=0:Tc(e,t,e.prev)<0||Tc(e,e.next,t)<0;}function Oc(e,t){var n=new Bc(e.i,e.x,e.y),r=new Bc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r;}function Lc(e,t,n,r){var i=new Bc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i;}function Ic(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ);}function Bc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1;}var Fc={area:function area(e){var t=e.length;var n=0;for(var _r140=t-1,_i107=0;_i107<t;_r140=_i107++){n+=e[_r140].x*e[_i107].y-e[_i107].x*e[_r140].y;}return .5*n;},isClockWise:function isClockWise(e){return Fc.area(e)<0;},triangulateShape:function triangulateShape(e,t){var n=[],r=[],i=[];zc(e),kc(n,e);var o=e.length;t.forEach(zc);for(var _e227=0;_e227<t.length;_e227++){r.push(o),o+=t[_e227].length,kc(n,t[_e227]);}var a=dc(n,r);for(var _e228=0;_e228<a.length;_e228+=3){i.push(a.slice(_e228,_e228+3));}return i;}};function zc(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop();}function kc(e,t){for(var _n179=0;_n179<t.length;_n179++){e.push(t[_n179].x),e.push(t[_n179].y);}}var Uc=/*#__PURE__*/function(_Yi7){_inherits(Uc,_Yi7);var _super15=_createSuper(Uc);function Uc(e,t){var _this15;_classCallCheck(this,Uc);_this15=_super15.call(this),_this15.type="ExtrudeBufferGeometry",_this15.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];var n=_assertThisInitialized(_this15),r=[],i=[];for(var _t192=0,_n180=e.length;_t192<_n180;_t192++){o(e[_t192]);}function o(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;var u=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,p=void 0!==t.bevelSize?t.bevelSize:l-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,h=void 0!==t.bevelSegments?t.bevelSegments:3;var f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:jc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);var y,g,v,x,b,w=!1;f&&(y=f.getSpacedPoints(s),w=!0,c=!1,g=f.computeFrenetFrames(s,!1),v=new Qn(),x=new Qn(),b=new Qn()),c||(h=0,l=0,p=0,d=0);var S=e.extractPoints(a);var M=S.shape;var _=S.holes;if(!Fc.isClockWise(M)){M=M.reverse();for(var _e229=0,_t193=_.length;_e229<_t193;_e229++){var _t194=_[_e229];Fc.isClockWise(_t194)&&(_[_e229]=_t194.reverse());}}var E=Fc.triangulateShape(M,_),A=M;for(var _e230=0,_t195=_.length;_e230<_t195;_e230++){var _t196=_[_e230];M=M.concat(_t196);}function T(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e);}var N=M.length,D=E.length;function C(e,t,n){var r,i,o;var a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,c=n.y-e.y,l=a*a+s*s,p=a*c-s*u;if(Math.abs(p)>Number.EPSILON){var _p16=Math.sqrt(l),_d14=Math.sqrt(u*u+c*c),_h12=t.x-s/_p16,_f6=t.y+a/_p16,_m4=((n.x-c/_d14-_h12)*c-(n.y+u/_d14-_f6)*u)/(a*c-s*u);r=_h12+a*_m4-e.x,i=_f6+s*_m4-e.y;var _y5=r*r+i*i;if(_y5<=2)return new jn(r,i);o=Math.sqrt(_y5/2);}else{var _e231=!1;a>Number.EPSILON?u>Number.EPSILON&&(_e231=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(_e231=!0):Math.sign(s)===Math.sign(c)&&(_e231=!0),_e231?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2));}return new jn(r/o,i/o);}var R=[];for(var _e232=0,_t197=A.length,_n181=_t197-1,_r141=_e232+1;_e232<_t197;_e232++,_n181++,_r141++){_n181===_t197&&(_n181=0),_r141===_t197&&(_r141=0),R[_e232]=C(A[_e232],A[_n181],A[_r141]);}var P=[];var O,L=R.concat();for(var _e233=0,_t198=_.length;_e233<_t198;_e233++){var _t199=_[_e233];O=[];for(var _e234=0,_n182=_t199.length,_r142=_n182-1,_i108=_e234+1;_e234<_n182;_e234++,_r142++,_i108++){_r142===_n182&&(_r142=0),_i108===_n182&&(_i108=0),O[_e234]=C(_t199[_e234],_t199[_r142],_t199[_i108]);}P.push(O),L=L.concat(O);}for(var _e235=0;_e235<h;_e235++){var _t200=_e235/h,_n183=l*Math.cos(_t200*Math.PI/2),_r143=p*Math.sin(_t200*Math.PI/2)+d;for(var _e236=0,_t201=A.length;_e236<_t201;_e236++){var _t202=T(A[_e236],R[_e236],_r143);F(_t202.x,_t202.y,-_n183);}for(var _e237=0,_t203=_.length;_e237<_t203;_e237++){var _t204=_[_e237];O=P[_e237];for(var _e238=0,_i109=_t204.length;_e238<_i109;_e238++){var _i110=T(_t204[_e238],O[_e238],_r143);F(_i110.x,_i110.y,-_n183);}}}var I=p+d;for(var _e239=0;_e239<N;_e239++){var _t205=c?T(M[_e239],L[_e239],I):M[_e239];w?(x.copy(g.normals[0]).multiplyScalar(_t205.x),v.copy(g.binormals[0]).multiplyScalar(_t205.y),b.copy(y[0]).add(x).add(v),F(b.x,b.y,b.z)):F(_t205.x,_t205.y,0);}for(var _e240=1;_e240<=s;_e240++){for(var _t206=0;_t206<N;_t206++){var _n184=c?T(M[_t206],L[_t206],I):M[_t206];w?(x.copy(g.normals[_e240]).multiplyScalar(_n184.x),v.copy(g.binormals[_e240]).multiplyScalar(_n184.y),b.copy(y[_e240]).add(x).add(v),F(b.x,b.y,b.z)):F(_n184.x,_n184.y,u/s*_e240);}}for(var _e241=h-1;_e241>=0;_e241--){var _t207=_e241/h,_n185=l*Math.cos(_t207*Math.PI/2),_r144=p*Math.sin(_t207*Math.PI/2)+d;for(var _e242=0,_t208=A.length;_e242<_t208;_e242++){var _t209=T(A[_e242],R[_e242],_r144);F(_t209.x,_t209.y,u+_n185);}for(var _e243=0,_t210=_.length;_e243<_t210;_e243++){var _t211=_[_e243];O=P[_e243];for(var _e244=0,_i111=_t211.length;_e244<_i111;_e244++){var _i112=T(_t211[_e244],O[_e244],_r144);w?F(_i112.x,_i112.y+y[s-1].y,y[s-1].x+_n185):F(_i112.x,_i112.y,u+_n185);}}}function B(e,t){var n=e.length;for(;--n>=0;){var _r145=n;var _i113=n-1;_i113<0&&(_i113=e.length-1);for(var _e245=0,_n186=s+2*h;_e245<_n186;_e245++){var _n187=N*_e245,_o57=N*(_e245+1);k(t+_r145+_n187,t+_i113+_n187,t+_i113+_o57,t+_r145+_o57);}}}function F(e,t,n){o.push(e),o.push(t),o.push(n);}function z(e,t,i){U(e),U(t),U(i);var o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);j(a[0]),j(a[1]),j(a[2]);}function k(e,t,i,o){U(e),U(t),U(o),U(t),U(i),U(o);var a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3]);}function U(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2]);}function j(e){i.push(e.x),i.push(e.y);}!function(){var e=r.length/3;if(c){var _e246=0,_t212=N*_e246;for(var _e247=0;_e247<D;_e247++){var _n188=E[_e247];z(_n188[2]+_t212,_n188[1]+_t212,_n188[0]+_t212);}_e246=s+2*h,_t212=N*_e246;for(var _e248=0;_e248<D;_e248++){var _n189=E[_e248];z(_n189[0]+_t212,_n189[1]+_t212,_n189[2]+_t212);}}else{for(var _e249=0;_e249<D;_e249++){var _t213=E[_e249];z(_t213[2],_t213[1],_t213[0]);}for(var _e250=0;_e250<D;_e250++){var _t214=E[_e250];z(_t214[0]+N*s,_t214[1]+N*s,_t214[2]+N*s);}}n.addGroup(e,r.length/3-e,0);}(),function(){var e=r.length/3;var t=0;B(A,t),t+=A.length;for(var _e251=0,_n190=_.length;_e251<_n190;_e251++){var _n191=_[_e251];B(_n191,t),t+=_n191.length;}n.addGroup(e,r.length/3-e,1);}();}_this15.setAttribute("position",new Ii(r,3)),_this15.setAttribute("uv",new Ii(i,2)),_this15.computeVertexNormals();return _this15;}_createClass(Uc,[{key:"toJSON",value:function toJSON(){var e=Yi.prototype.toJSON.call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var _t215=0,_r146=e.length;_t215<_r146;_t215++){var _r147=e[_t215];n.shapes.push(_r147.uuid);}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n;}(this.parameters.shapes,this.parameters.options,e);}}]);return Uc;}(Yi);var jc={generateTopUV:function generateTopUV(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],c=t[3*i],l=t[3*i+1];return[new jn(o,a),new jn(s,u),new jn(c,l)];},generateSideWallUV:function generateSideWallUV(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*r],l=t[3*r+1],p=t[3*r+2],d=t[3*i],h=t[3*i+1],f=t[3*i+2],m=t[3*o],y=t[3*o+1],g=t[3*o+2];return Math.abs(s-l)<.01?[new jn(a,1-u),new jn(c,1-p),new jn(d,1-f),new jn(m,1-g)]:[new jn(s,1-u),new jn(l,1-p),new jn(h,1-f),new jn(y,1-g)];}};var Hc=/*#__PURE__*/function(_$u5){_inherits(Hc,_$u5);var _super16=_createSuper(Hc);function Hc(e,t){var _this16;_classCallCheck(this,Hc);_this16=_super16.call(this),_this16.type="ExtrudeGeometry",_this16.parameters={shapes:e,options:t},_this16.fromBufferGeometry(new Uc(e,t)),_this16.mergeVertices();return _this16;}_createClass(Hc,[{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Hc.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var _t216=0,_r148=e.length;_t216<_r148;_t216++){var _r149=e[_t216];n.shapes.push(_r149.uuid);}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n;}(this.parameters.shapes,this.parameters.options,e);}}]);return Hc;}($u);var qc=/*#__PURE__*/function(_ic2){_inherits(qc,_ic2);var _super17=_createSuper(qc);function qc(){var _this17;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,qc);var n=(1+Math.sqrt(5))/2;_this17=_super17.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),_this17.type="IcosahedronBufferGeometry",_this17.parameters={radius:e,detail:t};return _this17;}return qc;}(ic);var Gc=/*#__PURE__*/function(_$u6){_inherits(Gc,_$u6);var _super18=_createSuper(Gc);function Gc(e,t){var _this18;_classCallCheck(this,Gc);_this18=_super18.call(this),_this18.type="IcosahedronGeometry",_this18.parameters={radius:e,detail:t},_this18.fromBufferGeometry(new qc(e,t)),_this18.mergeVertices();return _this18;}return Gc;}($u);var Vc=/*#__PURE__*/function(_Yi8){_inherits(Vc,_Yi8);var _super19=_createSuper(Vc);function Vc(e){var _this19;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:12;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:2*Math.PI;_classCallCheck(this,Vc);_this19=_super19.call(this),_this19.type="LatheBufferGeometry",_this19.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Un.clamp(r,0,2*Math.PI);var i=[],o=[],a=[],s=1/t,u=new Qn(),c=new jn();for(var _i114=0;_i114<=t;_i114++){var _l14=n+_i114*s*r,_p17=Math.sin(_l14),_d15=Math.cos(_l14);for(var _n192=0;_n192<=e.length-1;_n192++){u.x=e[_n192].x*_p17,u.y=e[_n192].y,u.z=e[_n192].x*_d15,o.push(u.x,u.y,u.z),c.x=_i114/t,c.y=_n192/(e.length-1),a.push(c.x,c.y);}}for(var _n193=0;_n193<t;_n193++){for(var _t217=0;_t217<e.length-1;_t217++){var _r150=_t217+_n193*e.length,_o58=_r150,_a44=_r150+e.length,_s25=_r150+e.length+1,_u23=_r150+1;i.push(_o58,_a44,_u23),i.push(_a44,_s25,_u23);}}if(_this19.setIndex(i),_this19.setAttribute("position",new Ii(o,3)),_this19.setAttribute("uv",new Ii(a,2)),_this19.computeVertexNormals(),r===2*Math.PI){var _n194=_this19.attributes.normal.array,_r151=new Qn(),_i115=new Qn(),_o59=new Qn(),_a45=t*e.length*3;for(var _t218=0,_s26=0;_t218<e.length;_t218++,_s26+=3){_r151.x=_n194[_s26+0],_r151.y=_n194[_s26+1],_r151.z=_n194[_s26+2],_i115.x=_n194[_a45+_s26+0],_i115.y=_n194[_a45+_s26+1],_i115.z=_n194[_a45+_s26+2],_o59.addVectors(_r151,_i115).normalize(),_n194[_s26+0]=_n194[_a45+_s26+0]=_o59.x,_n194[_s26+1]=_n194[_a45+_s26+1]=_o59.y,_n194[_s26+2]=_n194[_a45+_s26+2]=_o59.z;}}return _this19;}return Vc;}(Yi);var Wc=/*#__PURE__*/function(_$u7){_inherits(Wc,_$u7);var _super20=_createSuper(Wc);function Wc(e,t,n,r){var _this20;_classCallCheck(this,Wc);_this20=_super20.call(this),_this20.type="LatheGeometry",_this20.parameters={points:e,segments:t,phiStart:n,phiLength:r},_this20.fromBufferGeometry(new Vc(e,t,n,r)),_this20.mergeVertices();return _this20;}return Wc;}($u);var Xc=/*#__PURE__*/function(_ic3){_inherits(Xc,_ic3);var _super21=_createSuper(Xc);function Xc(){var _this21;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,Xc);_this21=_super21.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),_this21.type="OctahedronBufferGeometry",_this21.parameters={radius:e,detail:t};return _this21;}return Xc;}(ic);var Yc=/*#__PURE__*/function(_$u8){_inherits(Yc,_$u8);var _super22=_createSuper(Yc);function Yc(e,t){var _this22;_classCallCheck(this,Yc);_this22=_super22.call(this),_this22.type="OctahedronGeometry",_this22.parameters={radius:e,detail:t},_this22.fromBufferGeometry(new Xc(e,t)),_this22.mergeVertices();return _this22;}return Yc;}($u);function Zc(e,t,n){Yi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r=[],i=[],o=[],a=[],s=1e-5,u=new Qn(),c=new Qn(),l=new Qn(),p=new Qn(),d=new Qn();e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var h=t+1;for(var _r152=0;_r152<=n;_r152++){var _h13=_r152/n;for(var _n195=0;_n195<=t;_n195++){var _r153=_n195/t;e(_r153,_h13,c),i.push(c.x,c.y,c.z),_r153-s>=0?(e(_r153-s,_h13,l),p.subVectors(c,l)):(e(_r153+s,_h13,l),p.subVectors(l,c)),_h13-s>=0?(e(_r153,_h13-s,l),d.subVectors(c,l)):(e(_r153,_h13+s,l),d.subVectors(l,c)),u.crossVectors(p,d).normalize(),o.push(u.x,u.y,u.z),a.push(_r153,_h13);}}for(var _e252=0;_e252<n;_e252++){for(var _n196=0;_n196<t;_n196++){var _t219=_e252*h+_n196,_i116=_e252*h+_n196+1,_o60=(_e252+1)*h+_n196+1,_a46=(_e252+1)*h+_n196;r.push(_t219,_i116,_a46),r.push(_i116,_o60,_a46);}}this.setIndex(r),this.setAttribute("position",new Ii(i,3)),this.setAttribute("normal",new Ii(o,3)),this.setAttribute("uv",new Ii(a,2));}function $c(e,t,n){$u.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Zc(e,t,n)),this.mergeVertices();}Zc.prototype=Object.create(Yi.prototype),Zc.prototype.constructor=Zc,$c.prototype=Object.create($u.prototype),$c.prototype.constructor=$c;var Jc=/*#__PURE__*/function(_$u9){_inherits(Jc,_$u9);var _super23=_createSuper(Jc);function Jc(e,t,n,r){var _this23;_classCallCheck(this,Jc);_this23=_super23.call(this),_this23.type="PlaneGeometry",_this23.parameters={width:e,height:t,widthSegments:n,heightSegments:r},_this23.fromBufferGeometry(new Po(e,t,n,r)),_this23.mergeVertices();return _this23;}return Jc;}($u);var Qc=/*#__PURE__*/function(_$u10){_inherits(Qc,_$u10);var _super24=_createSuper(Qc);function Qc(e,t,n,r){var _this24;_classCallCheck(this,Qc);_this24=_super24.call(this),_this24.type="PolyhedronGeometry",_this24.parameters={vertices:e,indices:t,radius:n,detail:r},_this24.fromBufferGeometry(new ic(e,t,n,r)),_this24.mergeVertices();return _this24;}return Qc;}($u);var Kc=/*#__PURE__*/function(_Yi9){_inherits(Kc,_Yi9);var _super25=_createSuper(Kc);function Kc(){var _this25;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:.5;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:8;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:2*Math.PI;_classCallCheck(this,Kc);_this25=_super25.call(this),_this25.type="RingBufferGeometry",_this25.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);var a=[],s=[],u=[],c=[];var l=e;var p=(t-e)/(r=Math.max(1,r)),d=new Qn(),h=new jn();for(var _e253=0;_e253<=r;_e253++){for(var _e254=0;_e254<=n;_e254++){var _r154=i+_e254/n*o;d.x=l*Math.cos(_r154),d.y=l*Math.sin(_r154),s.push(d.x,d.y,d.z),u.push(0,0,1),h.x=(d.x/t+1)/2,h.y=(d.y/t+1)/2,c.push(h.x,h.y);}l+=p;}for(var _e255=0;_e255<r;_e255++){var _t220=_e255*(n+1);for(var _e256=0;_e256<n;_e256++){var _r155=_e256+_t220,_i117=_r155,_o61=_r155+n+1,_s27=_r155+n+2,_u24=_r155+1;a.push(_i117,_o61,_u24),a.push(_o61,_s27,_u24);}}_this25.setIndex(a),_this25.setAttribute("position",new Ii(s,3)),_this25.setAttribute("normal",new Ii(u,3)),_this25.setAttribute("uv",new Ii(c,2));return _this25;}return Kc;}(Yi);var el=/*#__PURE__*/function(_$u11){_inherits(el,_$u11);var _super26=_createSuper(el);function el(e,t,n,r,i,o){var _this26;_classCallCheck(this,el);_this26=_super26.call(this),_this26.type="RingGeometry",_this26.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},_this26.fromBufferGeometry(new Kc(e,t,n,r,i,o)),_this26.mergeVertices();return _this26;}return el;}($u);var tl=/*#__PURE__*/function(_Yi10){_inherits(tl,_Yi10);var _super27=_createSuper(tl);function tl(e){var _this27;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:12;_classCallCheck(this,tl);_this27=_super27.call(this),_this27.type="ShapeBufferGeometry",_this27.parameters={shapes:e,curveSegments:t};var n=[],r=[],i=[],o=[];var a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var _t221=0;_t221<e.length;_t221++){u(e[_t221]),_this27.addGroup(a,s,_t221),a+=s,s=0;}function u(e){var a=r.length/3,u=e.extractPoints(t);var c=u.shape;var l=u.holes;!1===Fc.isClockWise(c)&&(c=c.reverse());for(var _e257=0,_t222=l.length;_e257<_t222;_e257++){var _t223=l[_e257];!0===Fc.isClockWise(_t223)&&(l[_e257]=_t223.reverse());}var p=Fc.triangulateShape(c,l);for(var _e258=0,_t224=l.length;_e258<_t224;_e258++){var _t225=l[_e258];c=c.concat(_t225);}for(var _e259=0,_t226=c.length;_e259<_t226;_e259++){var _t227=c[_e259];r.push(_t227.x,_t227.y,0),i.push(0,0,1),o.push(_t227.x,_t227.y);}for(var _e260=0,_t228=p.length;_e260<_t228;_e260++){var _t229=p[_e260],_r156=_t229[0]+a,_i118=_t229[1]+a,_o62=_t229[2]+a;n.push(_r156,_i118,_o62),s+=3;}}_this27.setIndex(n),_this27.setAttribute("position",new Ii(r,3)),_this27.setAttribute("normal",new Ii(i,3)),_this27.setAttribute("uv",new Ii(o,2));return _this27;}_createClass(tl,[{key:"toJSON",value:function toJSON(){var e=Yi.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var _n197=0,_r157=e.length;_n197<_r157;_n197++){var _r158=e[_n197];t.shapes.push(_r158.uuid);}else t.shapes.push(e.uuid);return t;}(this.parameters.shapes,e);}}]);return tl;}(Yi);var nl=/*#__PURE__*/function(_$u12){_inherits(nl,_$u12);var _super28=_createSuper(nl);function nl(e,t){var _this28;_classCallCheck(this,nl);_this28=_super28.call(this),_this28.type="ShapeGeometry","object"==_typeof(t)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),_this28.parameters={shapes:e,curveSegments:t},_this28.fromBufferGeometry(new tl(e,t)),_this28.mergeVertices();return _this28;}_createClass(nl,[{key:"toJSON",value:function toJSON(){var e=$u.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var _n198=0,_r159=e.length;_n198<_r159;_n198++){var _r160=e[_n198];t.shapes.push(_r160.uuid);}else t.shapes.push(e.uuid);return t;}(this.parameters.shapes,e);}}]);return nl;}($u);var rl=/*#__PURE__*/function(_Yi11){_inherits(rl,_Yi11);var _super29=_createSuper(rl);function rl(){var _this29;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:8;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:6;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:2*Math.PI;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:Math.PI;_classCallCheck(this,rl);_this29=_super29.call(this),_this29.type="SphereBufferGeometry",_this29.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));var s=Math.min(o+a,Math.PI);var u=0;var c=[],l=new Qn(),p=new Qn(),d=[],h=[],f=[],m=[];for(var _d16=0;_d16<=n;_d16++){var _y6=[],_g5=_d16/n;var _v6=0;0==_d16&&0==o?_v6=.5/t:_d16==n&&s==Math.PI&&(_v6=-.5/t);for(var _n199=0;_n199<=t;_n199++){var _s28=_n199/t;l.x=-e*Math.cos(r+_s28*i)*Math.sin(o+_g5*a),l.y=e*Math.cos(o+_g5*a),l.z=e*Math.sin(r+_s28*i)*Math.sin(o+_g5*a),h.push(l.x,l.y,l.z),p.copy(l).normalize(),f.push(p.x,p.y,p.z),m.push(_s28+_v6,1-_g5),_y6.push(u++);}c.push(_y6);}for(var _e261=0;_e261<n;_e261++){for(var _r161=0;_r161<t;_r161++){var _t230=c[_e261][_r161+1],_i119=c[_e261][_r161],_a47=c[_e261+1][_r161],_u25=c[_e261+1][_r161+1];(0!==_e261||o>0)&&d.push(_t230,_i119,_u25),(_e261!==n-1||s<Math.PI)&&d.push(_i119,_a47,_u25);}}_this29.setIndex(d),_this29.setAttribute("position",new Ii(h,3)),_this29.setAttribute("normal",new Ii(f,3)),_this29.setAttribute("uv",new Ii(m,2));return _this29;}return rl;}(Yi);var il=/*#__PURE__*/function(_$u13){_inherits(il,_$u13);var _super30=_createSuper(il);function il(e,t,n,r,i,o,a){var _this30;_classCallCheck(this,il);_this30=_super30.call(this),_this30.type="SphereGeometry",_this30.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},_this30.fromBufferGeometry(new rl(e,t,n,r,i,o,a)),_this30.mergeVertices();return _this30;}return il;}($u);var ol=/*#__PURE__*/function(_ic4){_inherits(ol,_ic4);var _super31=_createSuper(ol);function ol(){var _this31;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,ol);_this31=_super31.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),_this31.type="TetrahedronBufferGeometry",_this31.parameters={radius:e,detail:t};return _this31;}return ol;}(ic);var al=/*#__PURE__*/function(_$u14){_inherits(al,_$u14);var _super32=_createSuper(al);function al(e,t){var _this32;_classCallCheck(this,al);_this32=_super32.call(this),_this32.type="TetrahedronGeometry",_this32.parameters={radius:e,detail:t},_this32.fromBufferGeometry(new ol(e,t)),_this32.mergeVertices();return _this32;}return al;}($u);var sl=/*#__PURE__*/function(_Uc){_inherits(sl,_Uc);var _super33=_createSuper(sl);function sl(e){var _this33;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,sl);var n=t.font;if(!n||!n.isFont)return _possibleConstructorReturn(_this33,(console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Yi()));var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),_this33=_super33.call(this,r,t),_this33.type="TextBufferGeometry";return _this33;}return sl;}(Uc);var ul=/*#__PURE__*/function(_$u15){_inherits(ul,_$u15);var _super34=_createSuper(ul);function ul(e,t){var _this34;_classCallCheck(this,ul);_this34=_super34.call(this),_this34.type="TextGeometry",_this34.parameters={text:e,parameters:t},_this34.fromBufferGeometry(new sl(e,t)),_this34.mergeVertices();return _this34;}return ul;}($u);var cl=/*#__PURE__*/function(_Yi12){_inherits(cl,_Yi12);var _super35=_createSuper(cl);function cl(){var _this35;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:.4;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:8;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:6;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:2*Math.PI;_classCallCheck(this,cl);_this35=_super35.call(this),_this35.type="TorusBufferGeometry",_this35.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);var o=[],a=[],s=[],u=[],c=new Qn(),l=new Qn(),p=new Qn();for(var _o63=0;_o63<=n;_o63++){for(var _d17=0;_d17<=r;_d17++){var _h14=_d17/r*i,_f7=_o63/n*Math.PI*2;l.x=(e+t*Math.cos(_f7))*Math.cos(_h14),l.y=(e+t*Math.cos(_f7))*Math.sin(_h14),l.z=t*Math.sin(_f7),a.push(l.x,l.y,l.z),c.x=e*Math.cos(_h14),c.y=e*Math.sin(_h14),p.subVectors(l,c).normalize(),s.push(p.x,p.y,p.z),u.push(_d17/r),u.push(_o63/n);}}for(var _e262=1;_e262<=n;_e262++){for(var _t231=1;_t231<=r;_t231++){var _n200=(r+1)*_e262+_t231-1,_i120=(r+1)*(_e262-1)+_t231-1,_a48=(r+1)*(_e262-1)+_t231,_s29=(r+1)*_e262+_t231;o.push(_n200,_i120,_s29),o.push(_i120,_a48,_s29);}}_this35.setIndex(o),_this35.setAttribute("position",new Ii(a,3)),_this35.setAttribute("normal",new Ii(s,3)),_this35.setAttribute("uv",new Ii(u,2));return _this35;}return cl;}(Yi);var ll=/*#__PURE__*/function(_$u16){_inherits(ll,_$u16);var _super36=_createSuper(ll);function ll(e,t,n,r,i){var _this36;_classCallCheck(this,ll);_this36=_super36.call(this),_this36.type="TorusGeometry",_this36.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},_this36.fromBufferGeometry(new cl(e,t,n,r,i)),_this36.mergeVertices();return _this36;}return ll;}($u);var pl=/*#__PURE__*/function(_Yi13){_inherits(pl,_Yi13);var _super37=_createSuper(pl);function pl(){var _this37;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:.4;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:64;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:8;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:2;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:3;_classCallCheck(this,pl);_this37=_super37.call(this),_this37.type="TorusKnotBufferGeometry",_this37.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);var a=[],s=[],u=[],c=[],l=new Qn(),p=new Qn(),d=new Qn(),h=new Qn(),f=new Qn(),m=new Qn(),y=new Qn();for(var _a49=0;_a49<=n;++_a49){var _v7=_a49/n*i*Math.PI*2;g(_v7,i,o,e,d),g(_v7+.01,i,o,e,h),m.subVectors(h,d),y.addVectors(h,d),f.crossVectors(m,y),y.crossVectors(f,m),f.normalize(),y.normalize();for(var _e263=0;_e263<=r;++_e263){var _i121=_e263/r*Math.PI*2,_o64=-t*Math.cos(_i121),_h15=t*Math.sin(_i121);l.x=d.x+(_o64*y.x+_h15*f.x),l.y=d.y+(_o64*y.y+_h15*f.y),l.z=d.z+(_o64*y.z+_h15*f.z),s.push(l.x,l.y,l.z),p.subVectors(l,d).normalize(),u.push(p.x,p.y,p.z),c.push(_a49/n),c.push(_e263/r);}}for(var _e264=1;_e264<=n;_e264++){for(var _t232=1;_t232<=r;_t232++){var _n201=(r+1)*(_e264-1)+(_t232-1),_i122=(r+1)*_e264+(_t232-1),_o65=(r+1)*_e264+_t232,_s30=(r+1)*(_e264-1)+_t232;a.push(_n201,_i122,_s30),a.push(_i122,_o65,_s30);}}function g(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5;}_this37.setIndex(a),_this37.setAttribute("position",new Ii(s,3)),_this37.setAttribute("normal",new Ii(u,3)),_this37.setAttribute("uv",new Ii(c,2));return _this37;}return pl;}(Yi);var dl=/*#__PURE__*/function(_$u17){_inherits(dl,_$u17);var _super38=_createSuper(dl);function dl(e,t,n,r,i,o,a){var _this38;_classCallCheck(this,dl);_this38=_super38.call(this),_this38.type="TorusKnotGeometry",_this38.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),_this38.fromBufferGeometry(new pl(e,t,n,r,i,o)),_this38.mergeVertices();return _this38;}return dl;}($u);var hl=/*#__PURE__*/function(_Yi14){_inherits(hl,_Yi14);var _super39=_createSuper(hl);function hl(e){var _this39;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:64;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:8;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;_classCallCheck(this,hl);_this39=_super39.call(this),_this39.type="TubeBufferGeometry",_this39.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};var o=e.computeFrenetFrames(t,i);_this39.tangents=o.tangents,_this39.normals=o.normals,_this39.binormals=o.binormals;var a=new Qn(),s=new Qn(),u=new jn();var c=new Qn();var l=[],p=[],d=[],h=[];function f(i){c=e.getPointAt(i/t,c);var u=o.normals[i],d=o.binormals[i];for(var _e265=0;_e265<=r;_e265++){var _t233=_e265/r*Math.PI*2,_i123=Math.sin(_t233),_o66=-Math.cos(_t233);s.x=_o66*u.x+_i123*d.x,s.y=_o66*u.y+_i123*d.y,s.z=_o66*u.z+_i123*d.z,s.normalize(),p.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,l.push(a.x,a.y,a.z);}}!function(){for(var _e266=0;_e266<t;_e266++){f(_e266);}f(!1===i?t:0),function(){for(var _e267=0;_e267<=t;_e267++){for(var _n202=0;_n202<=r;_n202++){u.x=_e267/t,u.y=_n202/r,d.push(u.x,u.y);}}}(),function(){for(var _e268=1;_e268<=t;_e268++){for(var _t234=1;_t234<=r;_t234++){var _n203=(r+1)*(_e268-1)+(_t234-1),_i124=(r+1)*_e268+(_t234-1),_o67=(r+1)*_e268+_t234,_a50=(r+1)*(_e268-1)+_t234;h.push(_n203,_i124,_a50),h.push(_i124,_o67,_a50);}}}();}(),_this39.setIndex(h),_this39.setAttribute("position",new Ii(l,3)),_this39.setAttribute("normal",new Ii(p,3)),_this39.setAttribute("uv",new Ii(d,2));return _this39;}_createClass(hl,[{key:"toJSON",value:function toJSON(){var e=Yi.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e;}}]);return hl;}(Yi);var fl=/*#__PURE__*/function(_$u18){_inherits(fl,_$u18);var _super40=_createSuper(fl);function fl(e,t,n,r,i,o){var _this40;_classCallCheck(this,fl);_this40=_super40.call(this),_this40.type="TubeGeometry",_this40.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new hl(e,t,n,r,i);_this40.tangents=a.tangents,_this40.normals=a.normals,_this40.binormals=a.binormals,_this40.fromBufferGeometry(a),_this40.mergeVertices();return _this40;}return fl;}($u);var ml=/*#__PURE__*/function(_Yi15){_inherits(ml,_Yi15);var _super41=_createSuper(ml);function ml(e){var _this41;_classCallCheck(this,ml);_this41=_super41.call(this),_this41.type="WireframeGeometry";var t=[],n=[0,0],r={},i=["a","b","c"];if(e&&e.isGeometry){var _o68=e.faces;for(var _e269=0,_t235=_o68.length;_e269<_t235;_e269++){var _t236=_o68[_e269];for(var _e270=0;_e270<3;_e270++){var _o69=_t236[i[_e270]],_a51=_t236[i[(_e270+1)%3]];n[0]=Math.min(_o69,_a51),n[1]=Math.max(_o69,_a51);var _s31=n[0]+","+n[1];void 0===r[_s31]&&(r[_s31]={index1:n[0],index2:n[1]});}}for(var _n204 in r){var _i125=r[_n204];var _o70=e.vertices[_i125.index1];t.push(_o70.x,_o70.y,_o70.z),_o70=e.vertices[_i125.index2],t.push(_o70.x,_o70.y,_o70.z);}}else if(e&&e.isBufferGeometry){var _i126=new Qn();if(null!==e.index){var _o71=e.attributes.position,_a52=e.index;var _s32=e.groups;0===_s32.length&&(_s32=[{start:0,count:_a52.count,materialIndex:0}]);for(var _e271=0,_t237=_s32.length;_e271<_t237;++_e271){var _t238=_s32[_e271],_i127=_t238.start;for(var _e272=_i127,_o72=_i127+_t238.count;_e272<_o72;_e272+=3){for(var _t239=0;_t239<3;_t239++){var _i128=_a52.getX(_e272+_t239),_o73=_a52.getX(_e272+(_t239+1)%3);n[0]=Math.min(_i128,_o73),n[1]=Math.max(_i128,_o73);var _s33=n[0]+","+n[1];void 0===r[_s33]&&(r[_s33]={index1:n[0],index2:n[1]});}}}for(var _e273 in r){var _n205=r[_e273];_i126.fromBufferAttribute(_o71,_n205.index1),t.push(_i126.x,_i126.y,_i126.z),_i126.fromBufferAttribute(_o71,_n205.index2),t.push(_i126.x,_i126.y,_i126.z);}}else{var _n206=e.attributes.position;for(var _e274=0,_r162=_n206.count/3;_e274<_r162;_e274++){for(var _r163=0;_r163<3;_r163++){var _o74=3*_e274+_r163;_i126.fromBufferAttribute(_n206,_o74),t.push(_i126.x,_i126.y,_i126.z);var _a53=3*_e274+(_r163+1)%3;_i126.fromBufferAttribute(_n206,_a53),t.push(_i126.x,_i126.y,_i126.z);}}}}_this41.setAttribute("position",new Ii(t,3));return _this41;}return ml;}(Yi);var yl=Object.freeze({__proto__:null,BoxGeometry:Ju,BoxBufferGeometry:yo,CircleGeometry:Ku,CircleBufferGeometry:Qu,ConeGeometry:nc,ConeBufferGeometry:rc,CylinderGeometry:tc,CylinderBufferGeometry:ec,DodecahedronGeometry:ac,DodecahedronBufferGeometry:oc,EdgesGeometry:pc,ExtrudeGeometry:Hc,ExtrudeBufferGeometry:Uc,IcosahedronGeometry:Gc,IcosahedronBufferGeometry:qc,LatheGeometry:Wc,LatheBufferGeometry:Vc,OctahedronGeometry:Yc,OctahedronBufferGeometry:Xc,ParametricGeometry:$c,ParametricBufferGeometry:Zc,PlaneGeometry:Jc,PlaneBufferGeometry:Po,PolyhedronGeometry:Qc,PolyhedronBufferGeometry:ic,RingGeometry:el,RingBufferGeometry:Kc,ShapeGeometry:nl,ShapeBufferGeometry:tl,SphereGeometry:il,SphereBufferGeometry:rl,TetrahedronGeometry:al,TetrahedronBufferGeometry:ol,TextGeometry:ul,TextBufferGeometry:sl,TorusGeometry:ll,TorusBufferGeometry:cl,TorusKnotGeometry:dl,TorusKnotBufferGeometry:pl,TubeGeometry:fl,TubeBufferGeometry:hl,WireframeGeometry:ml});function gl(e){Si.call(this),this.type="ShadowMaterial",this.color=new xi(0),this.transparent=!0,this.setValues(e);}function vl(e){bo.call(this,e),this.type="RawShaderMaterial";}function xl(e){Si.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new xi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=un,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e);}function bl(e){xl.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new jn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function get(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity);},set:function set(e){this.reflectivity=Un.clamp(2.5*(e-1)/(e+1),0,1);}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e);}function wl(e){Si.call(this),this.type="MeshPhongMaterial",this.color=new xi(16777215),this.specular=new xi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=un,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e);}function Sl(e){Si.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=un,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e);}function Ml(e){Si.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=un,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e);}function _l(e){Si.call(this),this.type="MeshLambertMaterial",this.color=new xi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e);}function El(e){Si.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=un,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e);}function Al(e){_u.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e);}gl.prototype=Object.create(Si.prototype),gl.prototype.constructor=gl,gl.prototype.isShadowMaterial=!0,gl.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.color.copy(e.color),this;},vl.prototype=Object.create(bo.prototype),vl.prototype.constructor=vl,vl.prototype.isRawShaderMaterial=!0,xl.prototype=Object.create(Si.prototype),xl.prototype.constructor=xl,xl.prototype.isMeshStandardMaterial=!0,xl.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this;},bl.prototype=Object.create(xl.prototype),bl.prototype.constructor=bl,bl.prototype.isMeshPhysicalMaterial=!0,bl.prototype.copy=function(e){return xl.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new xi()).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this;},wl.prototype=Object.create(Si.prototype),wl.prototype.constructor=wl,wl.prototype.isMeshPhongMaterial=!0,wl.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this;},Sl.prototype=Object.create(Si.prototype),Sl.prototype.constructor=Sl,Sl.prototype.isMeshToonMaterial=!0,Sl.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this;},Ml.prototype=Object.create(Si.prototype),Ml.prototype.constructor=Ml,Ml.prototype.isMeshNormalMaterial=!0,Ml.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this;},_l.prototype=Object.create(Si.prototype),_l.prototype.constructor=_l,_l.prototype.isMeshLambertMaterial=!0,_l.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this;},El.prototype=Object.create(Si.prototype),El.prototype.constructor=El,El.prototype.isMeshMatcapMaterial=!0,El.prototype.copy=function(e){return Si.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this;},Al.prototype=Object.create(_u.prototype),Al.prototype.constructor=Al,Al.prototype.isLineDashedMaterial=!0,Al.prototype.copy=function(e){return _u.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this;};var Tl=Object.freeze({__proto__:null,ShadowMaterial:gl,SpriteMaterial:Gs,RawShaderMaterial:vl,ShaderMaterial:bo,PointsMaterial:Iu,MeshPhysicalMaterial:bl,MeshStandardMaterial:xl,MeshPhongMaterial:wl,MeshToonMaterial:Sl,MeshNormalMaterial:Ml,MeshLambertMaterial:_l,MeshDepthMaterial:Es,MeshDistanceMaterial:As,MeshBasicMaterial:Mi,MeshMatcapMaterial:El,LineDashedMaterial:Al,LineBasicMaterial:_u,Material:Si});var Nl={arraySlice:function arraySlice(e,t,n){return Nl.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n);},convertArray:function convertArray(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e);},isTypedArray:function isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView);},getKeyframeOrder:function getKeyframeOrder(e){var t=e.length,n=new Array(t);for(var _e275=0;_e275!==t;++_e275){n[_e275]=_e275;}return n.sort(function(t,n){return e[t]-e[n];}),n;},sortedArray:function sortedArray(e,t,n){var r=e.length,i=new e.constructor(r);for(var _o75=0,_a54=0;_a54!==r;++_o75){var _r164=n[_o75]*t;for(var _n207=0;_n207!==t;++_n207){i[_a54++]=e[_r164+_n207];}}return i;},flattenJSON:function flattenJSON(e,t,n,r){var i=1,o=e[0];for(;void 0!==o&&void 0===o[r];){o=e[i++];}if(void 0===o)return;var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++];}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++];}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++];}while(void 0!==o);},subclip:function subclip(e,t,n,r){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:30;var o=e.clone();o.name=t;var a=[];for(var _e276=0;_e276<o.tracks.length;++_e276){var _t240=o.tracks[_e276],_s34=_t240.getValueSize(),_u26=[],_c21=[];for(var _e277=0;_e277<_t240.times.length;++_e277){var _o76=_t240.times[_e277]*i;if(!(_o76<n||_o76>=r)){_u26.push(_t240.times[_e277]);for(var _n208=0;_n208<_s34;++_n208){_c21.push(_t240.values[_e277*_s34+_n208]);}}}0!==_u26.length&&(_t240.times=Nl.convertArray(_u26,_t240.times.constructor),_t240.values=Nl.convertArray(_c21,_t240.values.constructor),a.push(_t240));}o.tracks=a;var s=1/0;for(var _e278=0;_e278<o.tracks.length;++_e278){s>o.tracks[_e278].times[0]&&(s=o.tracks[_e278].times[0]);}for(var _e279=0;_e279<o.tracks.length;++_e279){o.tracks[_e279].shift(-1*s);}return o.resetDuration(),o;},makeClipAdditive:function makeClipAdditive(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:e;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:30;r<=0&&(r=30);var i=n.tracks.length,o=t/r;var _loop=function _loop(_t241){var r=n.tracks[_t241],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var a=e.tracks.find(function(e){return e.name===r.name&&e.ValueTypeName===i;});if(void 0===a)return"continue";var s=0;var u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var c=0;var l=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);var p=r.times.length-1;var d=void 0;if(o<=r.times[0]){var _e280=s,_t242=u-s;d=Nl.arraySlice(r.values,_e280,_t242);}else if(o>=r.times[p]){var _e281=p*u+s,_t243=_e281+u-s;d=Nl.arraySlice(r.values,_e281,_t243);}else{var _e282=r.createInterpolant(),_t244=s,_n209=u-s;_e282.evaluate(o),d=Nl.arraySlice(_e282.resultBuffer,_t244,_n209);}if("quaternion"===i){new Jn().fromArray(d).normalize().conjugate().toArray(d);}var h=a.times.length;for(var _e283=0;_e283<h;++_e283){var _t245=_e283*l+c;if("quaternion"===i)Jn.multiplyQuaternionsFlat(a.values,_t245,d,0,a.values,_t245);else{var _e284=l-2*c;for(var _n210=0;_n210<_e284;++_n210){a.values[_t245+_n210]-=d[_n210];}}}};for(var _t241=0;_t241<i;++_t241){var _ret=_loop(_t241);if(_ret==="continue")continue;}return e.blendMode=Xt,e;}};function Dl(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n;}function Cl(e,t,n,r){Dl.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0;}function Rl(e,t,n,r){Dl.call(this,e,t,n,r);}function Pl(e,t,n,r){Dl.call(this,e,t,n,r);}function Ol(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Nl.convertArray(t,this.TimeBufferType),this.values=Nl.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation);}function Ll(e,t,n){Ol.call(this,e,t,n);}function Il(e,t,n,r){Ol.call(this,e,t,n,r);}function Bl(e,t,n,r){Ol.call(this,e,t,n,r);}function Fl(e,t,n,r){Dl.call(this,e,t,n,r);}function zl(e,t,n,r){Ol.call(this,e,t,n,r);}function kl(e,t,n,r){Ol.call(this,e,t,n,r);}function Ul(e,t,n,r){Ol.call(this,e,t,n,r);}function jl(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var n=arguments.length>2?arguments[2]:undefined;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:Wt;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Un.generateUUID(),this.duration<0&&this.resetDuration();}function Hl(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bl;case"vector":case"vector2":case"vector3":case"vector4":return Ul;case"color":return Il;case"quaternion":return zl;case"bool":case"boolean":return Ll;case"string":return kl;}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e);}(e.type);if(void 0===e.times){var _t246=[],_n211=[];Nl.flattenJSON(e.keys,_t246,_n211,"value"),e.times=_t246,e.values=_n211;}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation);}Object.assign(Dl.prototype,{evaluate:function evaluate(e){var t=this.parameterPositions;var n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var _o77;n:{r:if(!(e<r)){for(var _o78=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i);}if(n===_o78)break;if(i=r,r=t[++n],e<r)break t;}_o77=t.length;break n;}if(e>=i)break e;{var _a55=t[1];e<_a55&&(n=2,i=_a55);for(var _o79=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===_o79)break;if(r=i,i=t[--n-1],e>=i)break t;}_o77=n,n=0;}}for(;n<_o77;){var _r165=n+_o77>>>1;e<t[_r165]?_o77=_r165:n=_r165+1;}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e);}this._cachedIndex=n,this.intervalChanged_(n,i,r);}return this.interpolate_(n,i,e,r);},settings:null,DefaultSettings_:{},getSettings_:function getSettings_(){return this.settings||this.DefaultSettings_;},copySampleValue_:function copySampleValue_(e){var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(var _e285=0;_e285!==r;++_e285){t[_e285]=n[i+_e285];}return t;},interpolate_:function interpolate_(){throw new Error("call to abstract method");},intervalChanged_:function intervalChanged_(){}}),Object.assign(Dl.prototype,{beforeStart_:Dl.prototype.copySampleValue_,afterEnd_:Dl.prototype.copySampleValue_}),Cl.prototype=Object.assign(Object.create(Dl.prototype),{constructor:Cl,DefaultSettings_:{endingStart:qt,endingEnd:qt},intervalChanged_:function intervalChanged_(e,t,n){var r=this.parameterPositions;var i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Gt:i=e,a=2*t-n;break;case Vt:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n;}if(void 0===s)switch(this.getSettings_().endingEnd){case Gt:o=e,s=2*n-t;break;case Vt:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t;}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c;},interpolate_:function interpolate_(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,p=this._weightPrev,d=this._weightNext,h=(n-t)/(r-t),f=h*h,m=f*h,y=-p*m+2*p*f-p*h,g=(1+p)*m+(-1.5-2*p)*f+(-.5+p)*h+1,v=(-1-d)*m+(1.5+d)*f+.5*h,x=d*m-d*f;for(var _e286=0;_e286!==a;++_e286){i[_e286]=y*o[c+_e286]+g*o[u+_e286]+v*o[s+_e286]+x*o[l+_e286];}return i;}}),Rl.prototype=Object.assign(Object.create(Dl.prototype),{constructor:Rl,interpolate_:function interpolate_(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=(n-t)/(r-t),l=1-c;for(var _e287=0;_e287!==a;++_e287){i[_e287]=o[u+_e287]*l+o[s+_e287]*c;}return i;}}),Pl.prototype=Object.assign(Object.create(Dl.prototype),{constructor:Pl,interpolate_:function interpolate_(e){return this.copySampleValue_(e-1);}}),Object.assign(Ol,{toJSON:function toJSON(e){var t=e.constructor;var n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Nl.convertArray(e.times,Array),values:Nl.convertArray(e.values,Array)};var _t247=e.getInterpolation();_t247!==e.DefaultInterpolation&&(n.interpolation=_t247);}return n.type=e.ValueTypeName,n;}}),Object.assign(Ol.prototype,{constructor:Ol,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:jt,InterpolantFactoryMethodDiscrete:function InterpolantFactoryMethodDiscrete(e){return new Pl(this.times,this.values,this.getValueSize(),e);},InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(e){return new Rl(this.times,this.values,this.getValueSize(),e);},InterpolantFactoryMethodSmooth:function InterpolantFactoryMethodSmooth(e){return new Cl(this.times,this.values,this.getValueSize(),e);},setInterpolation:function setInterpolation(e){var t;switch(e){case Ut:t=this.InterpolantFactoryMethodDiscrete;break;case jt:t=this.InterpolantFactoryMethodLinear;break;case Ht:t=this.InterpolantFactoryMethodSmooth;}if(void 0===t){var _t248="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(_t248);this.setInterpolation(this.DefaultInterpolation);}return console.warn("THREE.KeyframeTrack:",_t248),this;}return this.createInterpolant=t,this;},getInterpolation:function getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ut;case this.InterpolantFactoryMethodLinear:return jt;case this.InterpolantFactoryMethodSmooth:return Ht;}},getValueSize:function getValueSize(){return this.values.length/this.times.length;},shift:function shift(e){if(0!==e){var _t249=this.times;for(var _n212=0,_r166=_t249.length;_n212!==_r166;++_n212){_t249[_n212]+=e;}}return this;},scale:function scale(e){if(1!==e){var _t250=this.times;for(var _n213=0,_r167=_t250.length;_n213!==_r167;++_n213){_t250[_n213]*=e;}}return this;},trim:function trim(e,t){var n=this.times,r=n.length;var i=0,o=r-1;for(;i!==r&&n[i]<e;){++i;}for(;-1!==o&&n[o]>t;){--o;}if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var _e288=this.getValueSize();this.times=Nl.arraySlice(n,i,o),this.values=Nl.arraySlice(this.values,i*_e288,o*_e288);}return this;},validate:function validate(){var e=!0;var t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);var o=null;for(var _t251=0;_t251!==i;_t251++){var _r168=n[_t251];if("number"==typeof _r168&&isNaN(_r168)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,_t251,_r168),e=!1;break;}if(null!==o&&o>_r168){console.error("THREE.KeyframeTrack: Out of order keys.",this,_t251,_r168,o),e=!1;break;}o=_r168;}if(void 0!==r&&Nl.isTypedArray(r))for(var _t252=0,_n214=r.length;_t252!==_n214;++_t252){var _n215=r[_t252];if(isNaN(_n215)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_t252,_n215),e=!1;break;}}return e;},optimize:function optimize(){var e=Nl.arraySlice(this.times),t=Nl.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Ht,i=e.length-1;var o=1;for(var _a56=1;_a56<i;++_a56){var _i129=!1;var _s35=e[_a56];if(_s35!==e[_a56+1]&&(1!==_a56||_s35!==_s35[0]))if(r)_i129=!0;else{var _e289=_a56*n,_r169=_e289-n,_o80=_e289+n;for(var _a57=0;_a57!==n;++_a57){var _n216=t[_e289+_a57];if(_n216!==t[_r169+_a57]||_n216!==t[_o80+_a57]){_i129=!0;break;}}}if(_i129){if(_a56!==o){e[o]=e[_a56];var _r170=_a56*n,_i130=o*n;for(var _e290=0;_e290!==n;++_e290){t[_i130+_e290]=t[_r170+_e290];}}++o;}}if(i>0){e[o]=e[i];for(var _e291=i*n,_r171=o*n,_a58=0;_a58!==n;++_a58){t[_r171+_a58]=t[_e291+_a58];}++o;}return o!==e.length?(this.times=Nl.arraySlice(e,0,o),this.values=Nl.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this;},clone:function clone(){var e=Nl.arraySlice(this.times,0),t=Nl.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n;}}),Ll.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Ll,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ut,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Il.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Il,ValueTypeName:"color"}),Bl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Bl,ValueTypeName:"number"}),Fl.prototype=Object.assign(Object.create(Dl.prototype),{constructor:Fl,interpolate_:function interpolate_(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);var u=e*a;for(var _e292=u+a;u!==_e292;u+=4){Jn.slerpFlat(i,0,o,u-a,o,u,s);}return i;}}),zl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:zl,ValueTypeName:"quaternion",DefaultInterpolation:jt,InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(e){return new Fl(this.times,this.values,this.getValueSize(),e);},InterpolantFactoryMethodSmooth:void 0}),kl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:kl,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ut,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ul.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Ul,ValueTypeName:"vector"}),Object.assign(jl,{parse:function parse(e){var t=[],n=e.tracks,r=1/(e.fps||1);for(var _e293=0,_i131=n.length;_e293!==_i131;++_e293){t.push(Hl(n[_e293]).scale(r));}var i=new jl(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i;},toJSON:function toJSON(e){var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(var _e294=0,_r172=n.length;_e294!==_r172;++_e294){t.push(Ol.toJSON(n[_e294]));}return r;},CreateFromMorphTargetSequence:function CreateFromMorphTargetSequence(e,t,n,r){var i=t.length,o=[];for(var _e295=0;_e295<i;_e295++){var _a59=[],_s36=[];_a59.push((_e295+i-1)%i,_e295,(_e295+1)%i),_s36.push(0,1,0);var _u27=Nl.getKeyframeOrder(_a59);_a59=Nl.sortedArray(_a59,1,_u27),_s36=Nl.sortedArray(_s36,1,_u27),r||0!==_a59[0]||(_a59.push(i),_s36.push(_s36[0])),o.push(new Bl(".morphTargetInfluences["+t[_e295].name+"]",_a59,_s36).scale(1/n));}return new jl(e,-1,o);},findByName:function findByName(e,t){var n=e;if(!Array.isArray(e)){var _t253=e;n=_t253.geometry&&_t253.geometry.animations||_t253.animations;}for(var _e296=0;_e296<n.length;_e296++){if(n[_e296].name===t)return n[_e296];}return null;},CreateClipsFromMorphTargetSequences:function CreateClipsFromMorphTargetSequences(e,t,n){var r={},i=/^([\w-]*?)([\d]+)$/;for(var _t254=0,_n217=e.length;_t254<_n217;_t254++){var _n218=e[_t254],_o81=_n218.name.match(i);if(_o81&&_o81.length>1){var _e297=_o81[1];var _t255=r[_e297];_t255||(r[_e297]=_t255=[]),_t255.push(_n218);}}var o=[];for(var _e298 in r){o.push(jl.CreateFromMorphTargetSequence(_e298,r[_e298],t,n));}return o;},parseAnimation:function parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var n=function n(e,t,_n219,r,i){if(0!==_n219.length){var _o82=[],_a60=[];Nl.flattenJSON(_n219,_o82,_a60,r),0!==_o82.length&&i.push(new e(t,_o82,_a60));}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;var s=e.length||-1;var u=e.hierarchy||[];for(var _e299=0;_e299<u.length;_e299++){var _i132=u[_e299].keys;if(_i132&&0!==_i132.length)if(_i132[0].morphTargets){var _e300={};var _t256=void 0;for(_t256=0;_t256<_i132.length;_t256++){if(_i132[_t256].morphTargets)for(var _n220=0;_n220<_i132[_t256].morphTargets.length;_n220++){_e300[_i132[_t256].morphTargets[_n220]]=-1;}}for(var _n221 in _e300){var _e301=[],_o83=[];for(var _r173=0;_r173!==_i132[_t256].morphTargets.length;++_r173){var _r174=_i132[_t256];_e301.push(_r174.time),_o83.push(_r174.morphTarget===_n221?1:0);}r.push(new Bl(".morphTargetInfluence["+_n221+"]",_e301,_o83));}s=_e300.length*(o||1);}else{var _o84=".bones["+t[_e299].name+"]";n(Ul,_o84+".position",_i132,"pos",r),n(zl,_o84+".quaternion",_i132,"rot",r),n(Ul,_o84+".scale",_i132,"scl",r);}}return 0===r.length?null:new jl(i,s,r,a);}}),Object.assign(jl.prototype,{resetDuration:function resetDuration(){var e=0;for(var _t257=0,_n222=this.tracks.length;_t257!==_n222;++_t257){var _n223=this.tracks[_t257];e=Math.max(e,_n223.times[_n223.times.length-1]);}return this.duration=e,this;},trim:function trim(){for(var _e302=0;_e302<this.tracks.length;_e302++){this.tracks[_e302].trim(0,this.duration);}return this;},validate:function validate(){var e=!0;for(var _t258=0;_t258<this.tracks.length;_t258++){e=e&&this.tracks[_t258].validate();}return e;},optimize:function optimize(){for(var _e303=0;_e303<this.tracks.length;_e303++){this.tracks[_e303].optimize();}return this;},clone:function clone(){var e=[];for(var _t259=0;_t259<this.tracks.length;_t259++){e.push(this.tracks[_t259].clone());}return new jl(this.name,this.duration,e,this.blendMode);},toJSON:function toJSON(){return jl.toJSON(this);}});var ql={enabled:!1,files:{},add:function add(e,t){!1!==this.enabled&&(this.files[e]=t);},get:function get(e){if(!1!==this.enabled)return this.files[e];},remove:function remove(e){delete this.files[e];},clear:function clear(){this.files={};}};function Gl(e,t,n){var r=this;var i=!1,o=0,a=0,s=void 0;var u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0;},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad());},this.itemError=function(e){void 0!==r.onError&&r.onError(e);},this.resolveURL=function(e){return s?s(e):e;},this.setURLModifier=function(e){return s=e,this;},this.addHandler=function(e,t){return u.push(e,t),this;},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this;},this.getHandler=function(e){for(var _t260=0,_n224=u.length;_t260<_n224;_t260+=2){var _n225=u[_t260],_r175=u[_t260+1];if(_n225.global&&(_n225.lastIndex=0),_n225.test(e))return _r175;}return null;};}var Vl=new Gl();function Wl(e){this.manager=void 0!==e?e:Vl,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={};}Object.assign(Wl.prototype,{load:function load(){},loadAsync:function loadAsync(e,t){var n=this;return new Promise(function(r,i){n.load(e,r,t,i);});},parse:function parse(){},setCrossOrigin:function setCrossOrigin(e){return this.crossOrigin=e,this;},setWithCredentials:function setWithCredentials(e){return this.withCredentials=e,this;},setPath:function setPath(e){return this.path=e,this;},setResourcePath:function setResourcePath(e){return this.resourcePath=e,this;},setRequestHeader:function setRequestHeader(e){return this.requestHeader=e,this;}});var Xl={};function Yl(e){Wl.call(this,e);}function Zl(e){Wl.call(this,e);}function $l(e){Wl.call(this,e);}function Jl(e){Wl.call(this,e);}function Ql(e){Wl.call(this,e);}function Kl(e){Wl.call(this,e);}function ep(e){Wl.call(this,e);}function tp(){this.type="Curve",this.arcLengthDivisions=200;}function np(e,t,n,r,i,o,a,s){tp.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0;}function rp(e,t,n,r,i,o){np.call(this,e,t,n,n,r,i,o),this.type="ArcCurve";}function ip(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s;}return{initCatmullRom:function initCatmullRom(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t));},initNonuniformCatmullRom:function initNonuniformCatmullRom(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;u*=a,c*=a,i(t,n,u,c);},calc:function calc(i){var o=i*i;return e+t*i+n*o+r*(o*i);}};}Yl.prototype=Object.assign(Object.create(Wl.prototype),{constructor:Yl,load:function load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ql.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e);},0),o;if(void 0!==Xl[e])return void Xl[e].push({onLoad:t,onProgress:n,onError:r});var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);var s;if(a){var _n226=a[1],_o85=!!a[2];var _s37=a[3];_s37=decodeURIComponent(_s37),_o85&&(_s37=atob(_s37));try{var _r176;var _o86=(this.responseType||"").toLowerCase();switch(_o86){case"arraybuffer":case"blob":var _e304=new Uint8Array(_s37.length);for(var _t262=0;_t262<_s37.length;_t262++){_e304[_t262]=_s37.charCodeAt(_t262);}_r176="blob"===_o86?new Blob([_e304.buffer],{type:_n226}):_e304.buffer;break;case"document":var _t261=new DOMParser();_r176=_t261.parseFromString(_s37,_n226);break;case"json":_r176=JSON.parse(_s37);break;default:_r176=_s37;}setTimeout(function(){t&&t(_r176),i.manager.itemEnd(e);},0);}catch(t){setTimeout(function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e);},0);}}else{Xl[e]=[],Xl[e].push({onLoad:t,onProgress:n,onError:r}),s=new XMLHttpRequest(),s.open("GET",e,!0),s.addEventListener("load",function(t){var n=this.response,r=Xl[e];if(delete Xl[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),ql.add(e,n);for(var _e305=0,_t263=r.length;_e305<_t263;_e305++){var _t264=r[_e305];_t264.onLoad&&_t264.onLoad(n);}i.manager.itemEnd(e);}else{for(var _e306=0,_n227=r.length;_e306<_n227;_e306++){var _n228=r[_e306];_n228.onError&&_n228.onError(t);}i.manager.itemError(e),i.manager.itemEnd(e);}},!1),s.addEventListener("progress",function(t){var n=Xl[e];for(var _e307=0,_r177=n.length;_e307<_r177;_e307++){var _r178=n[_e307];_r178.onProgress&&_r178.onProgress(t);}},!1),s.addEventListener("error",function(t){var n=Xl[e];delete Xl[e];for(var _e308=0,_r179=n.length;_e308<_r179;_e308++){var _r180=n[_e308];_r180.onError&&_r180.onError(t);}i.manager.itemError(e),i.manager.itemEnd(e);},!1),s.addEventListener("abort",function(t){var n=Xl[e];delete Xl[e];for(var _e309=0,_r181=n.length;_e309<_r181;_e309++){var _r182=n[_e309];_r182.onError&&_r182.onError(t);}i.manager.itemError(e),i.manager.itemEnd(e);},!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var _e310 in this.requestHeader){s.setRequestHeader(_e310,this.requestHeader[_e310]);}s.send(null);}return i.manager.itemStart(e),s;},setResponseType:function setResponseType(e){return this.responseType=e,this;},setMimeType:function setMimeType(e){return this.mimeType=e,this;}}),Zl.prototype=Object.assign(Object.create(Wl.prototype),{constructor:Zl,load:function load(e,t,n,r){var i=this,o=new Yl(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(n){try{t(i.parse(JSON.parse(n)));}catch(t){r?r(t):console.error(t),i.manager.itemError(e);}},n,r);},parse:function parse(e){var t=[];for(var _n229=0;_n229<e.length;_n229++){var _r183=jl.parse(e[_n229]);t.push(_r183);}return t;}}),$l.prototype=Object.assign(Object.create(Wl.prototype),{constructor:$l,load:function load(e,t,n,r){var i=this,o=[],a=new qu(),s=new Yl(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;function c(c){s.load(e[c],function(e){var n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},u+=1,6===u&&(1===n.mipmapCount&&(a.minFilter=be),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a));},n,r);}if(Array.isArray(e))for(var _t265=0,_n230=e.length;_t265<_n230;++_t265){c(_t265);}else s.load(e,function(e){var n=i.parse(e,!0);if(n.isCubemap){var _e311=n.mipmaps.length/n.mipmapCount;for(var _t266=0;_t266<_e311;_t266++){o[_t266]={mipmaps:[]};for(var _e312=0;_e312<n.mipmapCount;_e312++){o[_t266].mipmaps.push(n.mipmaps[_t266*n.mipmapCount+_e312]),o[_t266].format=n.format,o[_t266].width=n.width,o[_t266].height=n.height;}}a.image=o;}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=be),a.format=n.format,a.needsUpdate=!0,t&&t(a);},n,r);return a;}}),Jl.prototype=Object.assign(Object.create(Wl.prototype),{constructor:Jl,load:function load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ql.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e);},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),ql.add(e,this),t&&t(this),i.manager.itemEnd(e);}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e);}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a;}}),Ql.prototype=Object.assign(Object.create(Wl.prototype),{constructor:Ql,load:function load(e,t,n,r){var i=new _o(),o=new Jl(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i));},void 0,r);}for(var _t267=0;_t267<e.length;++_t267){s(_t267);}return i;}}),Kl.prototype=Object.assign(Object.create(Wl.prototype),{constructor:Kl,load:function load(e,t,n,r){var i=this,o=new Ao(),a=new Yl(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,function(e){var n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:he,o.wrapT=void 0!==n.wrapT?n.wrapT:he,o.magFilter=void 0!==n.magFilter?n.magFilter:be,o.minFilter=void 0!==n.minFilter?n.minFilter:be,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Me),1===n.mipmapCount&&(o.minFilter=be),o.needsUpdate=!0,t&&t(o,n));},n,r),o;}}),ep.prototype=Object.assign(Object.create(Wl.prototype),{constructor:ep,load:function load(e,t,n,r){var i=new Wn(),o=new Jl(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?ze:ke,i.needsUpdate=!0,void 0!==t&&t(i);},n,r),i;}}),Object.assign(tp.prototype,{getPoint:function getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null;},getPointAt:function getPointAt(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t);},getPoints:function getPoints(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:5;var t=[];for(var _n231=0;_n231<=e;_n231++){t.push(this.getPoint(_n231/e));}return t;},getSpacedPoints:function getSpacedPoints(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:5;var t=[];for(var _n232=0;_n232<=e;_n232++){t.push(this.getPointAt(_n232/e));}return t;},getLength:function getLength(){var e=this.getLengths();return e[e.length-1];},getLengths:function getLengths(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[];var n,r=this.getPoint(0),i=0;t.push(0);for(var _o87=1;_o87<=e;_o87++){n=this.getPoint(_o87/e),i+=n.distanceTo(r),t.push(i),r=n;}return this.cacheArcLengths=t,t;},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.getLengths();},getUtoTmapping:function getUtoTmapping(e,t){var n=this.getLengths();var r=0;var i=n.length;var o;o=t||e*n[i-1];var a,s=0,u=i-1;for(;s<=u;){if(r=Math.floor(s+(u-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){u=r;break;}u=r-1;}}if(r=u,n[r]===o)return r/(i-1);var c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1);},getTangent:function getTangent(e,t){var n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=t||(i.isVector2?new jn():new Qn());return a.copy(o).sub(i).normalize(),a;},getTangentAt:function getTangentAt(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t);},computeFrenetFrames:function computeFrenetFrames(e,t){var n=new Qn(),r=[],i=[],o=[],a=new Qn(),s=new Ar();for(var _t268=0;_t268<=e;_t268++){var _n233=_t268/e;r[_t268]=this.getTangentAt(_n233,new Qn()),r[_t268].normalize();}i[0]=new Qn(),o[0]=new Qn();var u=Number.MAX_VALUE;var c=Math.abs(r[0].x),l=Math.abs(r[0].y),p=Math.abs(r[0].z);c<=u&&(u=c,n.set(1,0,0)),l<=u&&(u=l,n.set(0,1,0)),p<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(var _t269=1;_t269<=e;_t269++){if(i[_t269]=i[_t269-1].clone(),o[_t269]=o[_t269-1].clone(),a.crossVectors(r[_t269-1],r[_t269]),a.length()>Number.EPSILON){a.normalize();var _e313=Math.acos(Un.clamp(r[_t269-1].dot(r[_t269]),-1,1));i[_t269].applyMatrix4(s.makeRotationAxis(a,_e313));}o[_t269].crossVectors(r[_t269],i[_t269]);}if(!0===t){var _t270=Math.acos(Un.clamp(i[0].dot(i[e]),-1,1));_t270/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(_t270=-_t270);for(var _n234=1;_n234<=e;_n234++){i[_n234].applyMatrix4(s.makeRotationAxis(r[_n234],_t270*_n234)),o[_n234].crossVectors(r[_n234],i[_n234]);}}return{tangents:r,normals:i,binormals:o};},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this;},toJSON:function toJSON(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e;},fromJSON:function fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this;}}),np.prototype=Object.create(tp.prototype),np.prototype.constructor=np,np.prototype.isEllipseCurve=!0,np.prototype.getPoint=function(e,t){var n=t||new jn(),r=2*Math.PI;var i=this.aEndAngle-this.aStartAngle;var o=Math.abs(i)<Number.EPSILON;for(;i<0;){i+=r;}for(;i>r;){i-=r;}i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i;var s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var _e314=Math.cos(this.aRotation),_t271=Math.sin(this.aRotation),_n235=s-this.aX,_r184=u-this.aY;s=_n235*_e314-_r184*_t271+this.aX,u=_n235*_t271+_r184*_e314+this.aY;}return n.set(s,u);},np.prototype.copy=function(e){return tp.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this;},np.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e;},np.prototype.fromJSON=function(e){return tp.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this;},rp.prototype=Object.create(np.prototype),rp.prototype.constructor=rp,rp.prototype.isArcCurve=!0;var op=new Qn(),ap=new ip(),sp=new ip(),up=new ip();function cp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"centripetal";var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:.5;tp.call(this),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r;}function lp(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n;}function pp(e,t,n,r){return function(e,t){var n=1-e;return n*n*t;}(e,t)+function(e,t){return 2*(1-e)*e*t;}(e,n)+function(e,t){return e*e*t;}(e,r);}function dp(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t;}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t;}(e,n)+function(e,t){return 3*(1-e)*e*e*t;}(e,r)+function(e,t){return e*e*e*t;}(e,i);}function hp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new jn();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new jn();var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new jn();var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new jn();tp.call(this),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r;}function fp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Qn();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Qn();var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new Qn();var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new Qn();tp.call(this),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r;}function mp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new jn();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new jn();tp.call(this),this.type="LineCurve",this.v1=e,this.v2=t;}function yp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Qn();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Qn();tp.call(this),this.type="LineCurve3",this.v1=e,this.v2=t;}function gp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new jn();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new jn();var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new jn();tp.call(this),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n;}function vp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Qn();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Qn();var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new Qn();tp.call(this),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n;}function xp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];tp.call(this),this.type="SplineCurve",this.points=e;}cp.prototype=Object.create(tp.prototype),cp.prototype.constructor=cp,cp.prototype.isCatmullRomCurve3=!0,cp.prototype.getPoint=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Qn();var n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;var a,s,u=Math.floor(o),c=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/i)+1)*i:0===c&&u===i-1&&(u=i-2,c=1),this.closed||u>0?a=r[(u-1)%i]:(op.subVectors(r[0],r[1]).add(r[0]),a=op);var l=r[u%i],p=r[(u+1)%i];if(this.closed||u+2<i?s=r[(u+2)%i]:(op.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=op),"centripetal"===this.curveType||"chordal"===this.curveType){var _e315="chordal"===this.curveType?.5:.25;var _t272=Math.pow(a.distanceToSquared(l),_e315),_n236=Math.pow(l.distanceToSquared(p),_e315),_r185=Math.pow(p.distanceToSquared(s),_e315);_n236<1e-4&&(_n236=1),_t272<1e-4&&(_t272=_n236),_r185<1e-4&&(_r185=_n236),ap.initNonuniformCatmullRom(a.x,l.x,p.x,s.x,_t272,_n236,_r185),sp.initNonuniformCatmullRom(a.y,l.y,p.y,s.y,_t272,_n236,_r185),up.initNonuniformCatmullRom(a.z,l.z,p.z,s.z,_t272,_n236,_r185);}else"catmullrom"===this.curveType&&(ap.initCatmullRom(a.x,l.x,p.x,s.x,this.tension),sp.initCatmullRom(a.y,l.y,p.y,s.y,this.tension),up.initCatmullRom(a.z,l.z,p.z,s.z,this.tension));return n.set(ap.calc(c),sp.calc(c),up.calc(c)),n;},cp.prototype.copy=function(e){tp.prototype.copy.call(this,e),this.points=[];for(var _t273=0,_n237=e.points.length;_t273<_n237;_t273++){var _n238=e.points[_t273];this.points.push(_n238.clone());}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this;},cp.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);e.points=[];for(var _t274=0,_n239=this.points.length;_t274<_n239;_t274++){var _n240=this.points[_t274];e.points.push(_n240.toArray());}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e;},cp.prototype.fromJSON=function(e){tp.prototype.fromJSON.call(this,e),this.points=[];for(var _t275=0,_n241=e.points.length;_t275<_n241;_t275++){var _n242=e.points[_t275];this.points.push(new Qn().fromArray(_n242));}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this;},hp.prototype=Object.create(tp.prototype),hp.prototype.constructor=hp,hp.prototype.isCubicBezierCurve=!0,hp.prototype.getPoint=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new jn();var n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(dp(e,r.x,i.x,o.x,a.x),dp(e,r.y,i.y,o.y,a.y)),n;},hp.prototype.copy=function(e){return tp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this;},hp.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e;},hp.prototype.fromJSON=function(e){return tp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this;},fp.prototype=Object.create(tp.prototype),fp.prototype.constructor=fp,fp.prototype.isCubicBezierCurve3=!0,fp.prototype.getPoint=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Qn();var n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(dp(e,r.x,i.x,o.x,a.x),dp(e,r.y,i.y,o.y,a.y),dp(e,r.z,i.z,o.z,a.z)),n;},fp.prototype.copy=function(e){return tp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this;},fp.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e;},fp.prototype.fromJSON=function(e){return tp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this;},mp.prototype=Object.create(tp.prototype),mp.prototype.constructor=mp,mp.prototype.isLineCurve=!0,mp.prototype.getPoint=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new jn();var n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n;},mp.prototype.getPointAt=function(e,t){return this.getPoint(e,t);},mp.prototype.getTangent=function(e,t){var n=t||new jn();return n.copy(this.v2).sub(this.v1).normalize(),n;},mp.prototype.copy=function(e){return tp.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this;},mp.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e;},mp.prototype.fromJSON=function(e){return tp.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this;},yp.prototype=Object.create(tp.prototype),yp.prototype.constructor=yp,yp.prototype.isLineCurve3=!0,yp.prototype.getPoint=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Qn();var n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n;},yp.prototype.getPointAt=function(e,t){return this.getPoint(e,t);},yp.prototype.copy=function(e){return tp.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this;},yp.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e;},yp.prototype.fromJSON=function(e){return tp.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this;},gp.prototype=Object.create(tp.prototype),gp.prototype.constructor=gp,gp.prototype.isQuadraticBezierCurve=!0,gp.prototype.getPoint=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new jn();var n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(pp(e,r.x,i.x,o.x),pp(e,r.y,i.y,o.y)),n;},gp.prototype.copy=function(e){return tp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this;},gp.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e;},gp.prototype.fromJSON=function(e){return tp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this;},vp.prototype=Object.create(tp.prototype),vp.prototype.constructor=vp,vp.prototype.isQuadraticBezierCurve3=!0,vp.prototype.getPoint=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Qn();var n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(pp(e,r.x,i.x,o.x),pp(e,r.y,i.y,o.y),pp(e,r.z,i.z,o.z)),n;},vp.prototype.copy=function(e){return tp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this;},vp.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e;},vp.prototype.fromJSON=function(e){return tp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this;},xp.prototype=Object.create(tp.prototype),xp.prototype.constructor=xp,xp.prototype.isSplineCurve=!0,xp.prototype.getPoint=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new jn();var n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(lp(a,s.x,u.x,c.x,l.x),lp(a,s.y,u.y,c.y,l.y)),n;},xp.prototype.copy=function(e){tp.prototype.copy.call(this,e),this.points=[];for(var _t276=0,_n243=e.points.length;_t276<_n243;_t276++){var _n244=e.points[_t276];this.points.push(_n244.clone());}return this;},xp.prototype.toJSON=function(){var e=tp.prototype.toJSON.call(this);e.points=[];for(var _t277=0,_n245=this.points.length;_t277<_n245;_t277++){var _n246=this.points[_t277];e.points.push(_n246.toArray());}return e;},xp.prototype.fromJSON=function(e){tp.prototype.fromJSON.call(this,e),this.points=[];for(var _t278=0,_n247=e.points.length;_t278<_n247;_t278++){var _n248=e.points[_t278];this.points.push(new jn().fromArray(_n248));}return this;};var bp=Object.freeze({__proto__:null,ArcCurve:rp,CatmullRomCurve3:cp,CubicBezierCurve:hp,CubicBezierCurve3:fp,EllipseCurve:np,LineCurve:mp,LineCurve3:yp,QuadraticBezierCurve:gp,QuadraticBezierCurve3:vp,SplineCurve:xp});function wp(){tp.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1;}function Sp(e){wp.call(this),this.type="Path",this.currentPoint=new jn(),e&&this.setFromPoints(e);}function Mp(e){Sp.call(this,e),this.uuid=Un.generateUUID(),this.type="Shape",this.holes=[];}function _p(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;Jr.call(this),this.type="Light",this.color=new xi(e),this.intensity=t;}function Ep(e,t,n){_p.call(this,e,n),this.type="HemisphereLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.groundColor=new xi(t);}function Ap(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new jn(512,512),this.map=null,this.mapPass=null,this.matrix=new Ar(),this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Do(),this._frameExtents=new jn(1,1),this._viewportCount=1,this._viewports=[new Yn(0,0,1,1)];}function Tp(){Ap.call(this,new So(50,1,.5,500)),this.focus=1;}function Np(e,t,n,r,i,o){_p.call(this,e,t),this.type="SpotLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.target=new Jr(),Object.defineProperty(this,"power",{get:function get(){return this.intensity*Math.PI;},set:function set(e){this.intensity=e/Math.PI;}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Tp();}function Dp(){Ap.call(this,new So(90,1,.5,500)),this._frameExtents=new jn(4,2),this._viewportCount=6,this._viewports=[new Yn(2,1,1,1),new Yn(0,1,1,1),new Yn(3,1,1,1),new Yn(1,1,1,1),new Yn(3,0,1,1),new Yn(1,0,1,1)],this._cubeDirections=[new Qn(1,0,0),new Qn(-1,0,0),new Qn(0,0,1),new Qn(0,0,-1),new Qn(0,1,0),new Qn(0,-1,0)],this._cubeUps=[new Qn(0,1,0),new Qn(0,1,0),new Qn(0,1,0),new Qn(0,1,0),new Qn(0,0,1),new Qn(0,0,-1)];}function Cp(e,t,n,r){_p.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function get(){return 4*this.intensity*Math.PI;},set:function set(e){this.intensity=e/(4*Math.PI);}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Dp();}function Rp(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:.1;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:2e3;wo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix();}function Pp(){Ap.call(this,new Rp(-5,5,5,-5,.5,500));}function Op(e,t){_p.call(this,e,t),this.type="DirectionalLight",this.position.copy(Jr.DefaultUp),this.updateMatrix(),this.target=new Jr(),this.shadow=new Pp();}function Lp(e,t){_p.call(this,e,t),this.type="AmbientLight";}function Ip(e,t,n,r){_p.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10;}wp.prototype=Object.assign(Object.create(tp.prototype),{constructor:wp,add:function add(e){this.curves.push(e);},closePath:function closePath(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new mp(t,e));},getPoint:function getPoint(e){var t=e*this.getLength(),n=this.getCurveLengths();var r=0;for(;r<n.length;){if(n[r]>=t){var _e316=n[r]-t,_i133=this.curves[r],_o88=_i133.getLength(),_a61=0===_o88?0:1-_e316/_o88;return _i133.getPointAt(_a61);}r++;}return null;},getLength:function getLength(){var e=this.getCurveLengths();return e[e.length-1];},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths();},getCurveLengths:function getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var e=[];var t=0;for(var _n249=0,_r186=this.curves.length;_n249<_r186;_n249++){t+=this.curves[_n249].getLength(),e.push(t);}return this.cacheLengths=e,e;},getSpacedPoints:function getSpacedPoints(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:40;var t=[];for(var _n250=0;_n250<=e;_n250++){t.push(this.getPoint(_n250/e));}return this.autoClose&&t.push(t[0]),t;},getPoints:function getPoints(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:12;var t=[];var n;for(var _r187=0,_i134=this.curves;_r187<_i134.length;_r187++){var _o89=_i134[_r187],_a62=_o89&&_o89.isEllipseCurve?2*e:_o89&&(_o89.isLineCurve||_o89.isLineCurve3)?1:_o89&&_o89.isSplineCurve?e*_o89.points.length:e,_s38=_o89.getPoints(_a62);for(var _e317=0;_e317<_s38.length;_e317++){var _r188=_s38[_e317];n&&n.equals(_r188)||(t.push(_r188),n=_r188);}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t;},copy:function copy(e){tp.prototype.copy.call(this,e),this.curves=[];for(var _t279=0,_n251=e.curves.length;_t279<_n251;_t279++){var _n252=e.curves[_t279];this.curves.push(_n252.clone());}return this.autoClose=e.autoClose,this;},toJSON:function toJSON(){var e=tp.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var _t280=0,_n253=this.curves.length;_t280<_n253;_t280++){var _n254=this.curves[_t280];e.curves.push(_n254.toJSON());}return e;},fromJSON:function fromJSON(e){tp.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var _t281=0,_n255=e.curves.length;_t281<_n255;_t281++){var _n256=e.curves[_t281];this.curves.push(new bp[_n256.type]().fromJSON(_n256));}return this;}}),Sp.prototype=Object.assign(Object.create(wp.prototype),{constructor:Sp,setFromPoints:function setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(var _t282=1,_n257=e.length;_t282<_n257;_t282++){this.lineTo(e[_t282].x,e[_t282].y);}return this;},moveTo:function moveTo(e,t){return this.currentPoint.set(e,t),this;},lineTo:function lineTo(e,t){var n=new mp(this.currentPoint.clone(),new jn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this;},quadraticCurveTo:function quadraticCurveTo(e,t,n,r){var i=new gp(this.currentPoint.clone(),new jn(e,t),new jn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this;},bezierCurveTo:function bezierCurveTo(e,t,n,r,i,o){var a=new hp(this.currentPoint.clone(),new jn(e,t),new jn(n,r),new jn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this;},splineThru:function splineThru(e){var t=new xp([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this;},arc:function arc(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this;},absarc:function absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this;},ellipse:function ellipse(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,i,o,a,s),this;},absellipse:function absellipse(e,t,n,r,i,o,a,s){var u=new np(e,t,n,r,i,o,a,s);if(this.curves.length>0){var _e318=u.getPoint(0);_e318.equals(this.currentPoint)||this.lineTo(_e318.x,_e318.y);}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this;},copy:function copy(e){return wp.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this;},toJSON:function toJSON(){var e=wp.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e;},fromJSON:function fromJSON(e){return wp.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this;}}),Mp.prototype=Object.assign(Object.create(Sp.prototype),{constructor:Mp,getPointsHoles:function getPointsHoles(e){var t=[];for(var _n258=0,_r189=this.holes.length;_n258<_r189;_n258++){t[_n258]=this.holes[_n258].getPoints(e);}return t;},extractPoints:function extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)};},copy:function copy(e){Sp.prototype.copy.call(this,e),this.holes=[];for(var _t283=0,_n259=e.holes.length;_t283<_n259;_t283++){var _n260=e.holes[_t283];this.holes.push(_n260.clone());}return this;},toJSON:function toJSON(){var e=Sp.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var _t284=0,_n261=this.holes.length;_t284<_n261;_t284++){var _n262=this.holes[_t284];e.holes.push(_n262.toJSON());}return e;},fromJSON:function fromJSON(e){Sp.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var _t285=0,_n263=e.holes.length;_t285<_n263;_t285++){var _n264=e.holes[_t285];this.holes.push(new Sp().fromJSON(_n264));}return this;}}),_p.prototype=Object.assign(Object.create(Jr.prototype),{constructor:_p,isLight:!0,copy:function copy(e){return Jr.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this;},toJSON:function toJSON(e){var t=Jr.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t;}}),Ep.prototype=Object.assign(Object.create(_p.prototype),{constructor:Ep,isHemisphereLight:!0,copy:function copy(e){return _p.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this;}}),Object.assign(Ap.prototype,{_projScreenMatrix:new Ar(),_lightPositionWorld:new Qn(),_lookTarget:new Qn(),getViewportCount:function getViewportCount(){return this._viewportCount;},getFrustum:function getFrustum(){return this._frustum;},updateMatrices:function updateMatrices(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse);},getViewport:function getViewport(e){return this._viewports[e];},getFrameExtents:function getFrameExtents(){return this._frameExtents;},copy:function copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this;},clone:function clone(){return new this.constructor().copy(this);},toJSON:function toJSON(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e;}}),Tp.prototype=Object.assign(Object.create(Ap.prototype),{constructor:Tp,isSpotLightShadow:!0,updateMatrices:function updateMatrices(e){var t=this.camera,n=2*Un.RAD2DEG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),Ap.prototype.updateMatrices.call(this,e);}}),Np.prototype=Object.assign(Object.create(_p.prototype),{constructor:Np,isSpotLight:!0,copy:function copy(e){return _p.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this;}}),Dp.prototype=Object.assign(Object.create(Ap.prototype),{constructor:Dp,isPointLightShadow:!0,updateMatrices:function updateMatrices(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a);}}),Cp.prototype=Object.assign(Object.create(_p.prototype),{constructor:Cp,isPointLight:!0,copy:function copy(e){return _p.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this;}}),Rp.prototype=Object.assign(Object.create(wo.prototype),{constructor:Rp,isOrthographicCamera:!0,copy:function copy(e,t){return wo.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this;},setViewOffset:function setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix();},clearViewOffset:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix();},updateProjectionMatrix:function updateProjectionMatrix(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;var i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var _e319=(this.right-this.left)/this.view.fullWidth/this.zoom,_t286=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=_e319*this.view.offsetX,o=i+_e319*this.view.width,a-=_t286*this.view.offsetY,s=a-_t286*this.view.height;}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert();},toJSON:function toJSON(e){var t=Jr.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t;}}),Pp.prototype=Object.assign(Object.create(Ap.prototype),{constructor:Pp,isDirectionalLightShadow:!0,updateMatrices:function updateMatrices(e){Ap.prototype.updateMatrices.call(this,e);}}),Op.prototype=Object.assign(Object.create(_p.prototype),{constructor:Op,isDirectionalLight:!0,copy:function copy(e){return _p.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this;}}),Lp.prototype=Object.assign(Object.create(_p.prototype),{constructor:Lp,isAmbientLight:!0}),Ip.prototype=Object.assign(Object.create(_p.prototype),{constructor:Ip,isRectAreaLight:!0,copy:function copy(e){return _p.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this;},toJSON:function toJSON(e){var t=_p.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t;}});var Bp=/*#__PURE__*/function(){function Bp(){_classCallCheck(this,Bp);Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var _e320=0;_e320<9;_e320++){this.coefficients.push(new Qn());}}_createClass(Bp,[{key:"set",value:function set(e){for(var _t287=0;_t287<9;_t287++){this.coefficients[_t287].copy(e[_t287]);}return this;}},{key:"zero",value:function zero(){for(var _e321=0;_e321<9;_e321++){this.coefficients[_e321].set(0,0,0);}return this;}},{key:"getAt",value:function getAt(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t;}},{key:"getIrradianceAt",value:function getIrradianceAt(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t;}},{key:"add",value:function add(e){for(var _t288=0;_t288<9;_t288++){this.coefficients[_t288].add(e.coefficients[_t288]);}return this;}},{key:"addScaledSH",value:function addScaledSH(e,t){for(var _n265=0;_n265<9;_n265++){this.coefficients[_n265].addScaledVector(e.coefficients[_n265],t);}return this;}},{key:"scale",value:function scale(e){for(var _t289=0;_t289<9;_t289++){this.coefficients[_t289].multiplyScalar(e);}return this;}},{key:"lerp",value:function lerp(e,t){for(var _n266=0;_n266<9;_n266++){this.coefficients[_n266].lerp(e.coefficients[_n266],t);}return this;}},{key:"equals",value:function equals(e){for(var _t290=0;_t290<9;_t290++){if(!this.coefficients[_t290].equals(e.coefficients[_t290]))return!1;}return!0;}},{key:"copy",value:function copy(e){return this.set(e.coefficients);}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"fromArray",value:function fromArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=this.coefficients;for(var _r190=0;_r190<9;_r190++){n[_r190].fromArray(e,t+3*_r190);}return this;}},{key:"toArray",value:function toArray(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=this.coefficients;for(var _r191=0;_r191<9;_r191++){n[_r191].toArray(e,t+3*_r191);}return e;}}],[{key:"getBasisAt",value:function getBasisAt(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r);}}]);return Bp;}();function Fp(e,t){_p.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new Bp();}function zp(e){Wl.call(this,e),this.textures={};}Fp.prototype=Object.assign(Object.create(_p.prototype),{constructor:Fp,isLightProbe:!0,copy:function copy(e){return _p.prototype.copy.call(this,e),this.sh.copy(e.sh),this;},fromJSON:function fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this;},toJSON:function toJSON(e){var t=_p.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t;}}),zp.prototype=Object.assign(Object.create(Wl.prototype),{constructor:zp,load:function load(e,t,n,r){var i=this,o=new Yl(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(n){try{t(i.parse(JSON.parse(n)));}catch(t){r?r(t):console.error(t),i.manager.itemError(e);}},n,r);},parse:function parse(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e];}var r=new Tl[e.type]();if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=new xi().setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var _t291 in e.uniforms){var _i135=e.uniforms[_t291];switch(r.uniforms[_t291]={},_i135.type){case"t":r.uniforms[_t291].value=n(_i135.value);break;case"c":r.uniforms[_t291].value=new xi().setHex(_i135.value);break;case"v2":r.uniforms[_t291].value=new jn().fromArray(_i135.value);break;case"v3":r.uniforms[_t291].value=new Qn().fromArray(_i135.value);break;case"v4":r.uniforms[_t291].value=new Yn().fromArray(_i135.value);break;case"m3":r.uniforms[_t291].value=new Hn().fromArray(_i135.value);break;case"m4":r.uniforms[_t291].value=new Ar().fromArray(_i135.value);break;default:r.uniforms[_t291].value=_i135.value;}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var _t292 in e.extensions){r.extensions[_t292]=e.extensions[_t292];}if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var _t293=e.normalScale;!1===Array.isArray(_t293)&&(_t293=[_t293,_t293]),r.normalScale=new jn().fromArray(_t293);}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=new jn().fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),r;},setTextures:function setTextures(e){return this.textures=e,this;}});var kp={decodeText:function decodeText(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);var t="";for(var _n267=0,_r192=e.length;_n267<_r192;_n267++){t+=String.fromCharCode(e[_n267]);}try{return decodeURIComponent(escape(t));}catch(e){return t;}},extractUrlBase:function extractUrlBase(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1);}};function Up(){Yi.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0;}function jp(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ai.call(this,e,t,n),this.meshPerAttribute=r||1;}function Hp(e){Wl.call(this,e);}Up.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Up,isInstancedBufferGeometry:!0,copy:function copy(e){return Yi.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this;},clone:function clone(){return new this.constructor().copy(this);},toJSON:function toJSON(){var e=Yi.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e;}}),jp.prototype=Object.assign(Object.create(Ai.prototype),{constructor:jp,isInstancedBufferAttribute:!0,copy:function copy(e){return Ai.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this;},toJSON:function toJSON(){var e=Ai.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e;}}),Hp.prototype=Object.assign(Object.create(Wl.prototype),{constructor:Hp,load:function load(e,t,n,r){var i=this,o=new Yl(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(n){try{t(i.parse(JSON.parse(n)));}catch(t){r?r(t):console.error(t),i.manager.itemError(e);}},n,r);},parse:function parse(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i;}(e,i.buffer),a=new js(Ui(i.type,o),i.stride);return a.uuid=i.uuid,t[r]=a,a;}var i=e.isInstancedBufferGeometry?new Up():new Yi(),o=e.data.index;if(void 0!==o){var _e322=Ui(o.type,o.array);i.setIndex(new Ai(_e322,1));}var a=e.data.attributes;for(var _t294 in a){var _n268=a[_t294];var _o90=void 0;if(_n268.isInterleavedBufferAttribute){_o90=new qs(r(e.data,_n268.data),_n268.itemSize,_n268.offset,_n268.normalized);}else{var _e323=Ui(_n268.type,_n268.array);_o90=new(_n268.isInstancedBufferAttribute?jp:Ai)(_e323,_n268.itemSize,_n268.normalized);}void 0!==_n268.name&&(_o90.name=_n268.name),i.setAttribute(_t294,_o90);}var s=e.data.morphAttributes;if(s)for(var _t295 in s){var _n269=s[_t295],_o91=[];for(var _t296=0,_i136=_n269.length;_t296<_i136;_t296++){var _i137=_n269[_t296];var _a63=void 0;if(_i137.isInterleavedBufferAttribute){_a63=new qs(r(e.data,_i137.data),_i137.itemSize,_i137.offset,_i137.normalized);}else{_a63=new Ai(Ui(_i137.type,_i137.array),_i137.itemSize,_i137.normalized);}void 0!==_i137.name&&(_a63.name=_i137.name),_o91.push(_a63);}i.morphAttributes[_t295]=_o91;}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var u=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==u)for(var _e324=0,_t297=u.length;_e324!==_t297;++_e324){var _t298=u[_e324];i.addGroup(_t298.start,_t298.count,_t298.materialIndex);}var c=e.data.boundingSphere;if(void 0!==c){var _e325=new Qn();void 0!==c.center&&_e325.fromArray(c.center),i.boundingSphere=new gr(_e325,c.radius);}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i;}});var qp=/*#__PURE__*/function(_Wl){_inherits(qp,_Wl);var _super42=_createSuper(qp);function qp(e){_classCallCheck(this,qp);return _super42.call(this,e);}_createClass(qp,[{key:"load",value:function load(e,t,n,r){var i=this,o=""===this.path?kp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Yl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){var o=null;try{o=JSON.parse(n);}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e);},n,r);}},{key:"parse",value:function parse(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){void 0!==t&&t(u);}),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,i,s,n),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),void 0!==t){var _e326=!1;for(var _t299 in o){if(o[_t299]instanceof HTMLImageElement){_e326=!0;break;}}!1===_e326&&t(u);}return u;}},{key:"parseShapes",value:function parseShapes(e){var t={};if(void 0!==e)for(var _n270=0,_r193=e.length;_n270<_r193;_n270++){var _r194=new Mp().fromJSON(e[_n270]);t[_r194.uuid]=_r194;}return t;}},{key:"parseSkeletons",value:function parseSkeletons(e,t){var n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e);}),void 0!==e)for(var _t300=0,_i138=e.length;_t300<_i138;_t300++){var _i139=new vu().fromJSON(e[_t300],r);n[_i139.uuid]=_i139;}return n;}},{key:"parseGeometries",value:function parseGeometries(e,t){var n={};var r;if(void 0!==e){var _i140=new Hp();for(var _o92=0,_a64=e.length;_o92<_a64;_o92++){var _a65=void 0;var _s39=e[_o92];switch(_s39.type){case"PlaneGeometry":case"PlaneBufferGeometry":_a65=new yl[_s39.type](_s39.width,_s39.height,_s39.widthSegments,_s39.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":_a65=new yl[_s39.type](_s39.width,_s39.height,_s39.depth,_s39.widthSegments,_s39.heightSegments,_s39.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":_a65=new yl[_s39.type](_s39.radius,_s39.segments,_s39.thetaStart,_s39.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":_a65=new yl[_s39.type](_s39.radiusTop,_s39.radiusBottom,_s39.height,_s39.radialSegments,_s39.heightSegments,_s39.openEnded,_s39.thetaStart,_s39.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":_a65=new yl[_s39.type](_s39.radius,_s39.height,_s39.radialSegments,_s39.heightSegments,_s39.openEnded,_s39.thetaStart,_s39.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":_a65=new yl[_s39.type](_s39.radius,_s39.widthSegments,_s39.heightSegments,_s39.phiStart,_s39.phiLength,_s39.thetaStart,_s39.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":_a65=new yl[_s39.type](_s39.radius,_s39.detail);break;case"RingGeometry":case"RingBufferGeometry":_a65=new yl[_s39.type](_s39.innerRadius,_s39.outerRadius,_s39.thetaSegments,_s39.phiSegments,_s39.thetaStart,_s39.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":_a65=new yl[_s39.type](_s39.radius,_s39.tube,_s39.radialSegments,_s39.tubularSegments,_s39.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":_a65=new yl[_s39.type](_s39.radius,_s39.tube,_s39.tubularSegments,_s39.radialSegments,_s39.p,_s39.q);break;case"TubeGeometry":case"TubeBufferGeometry":_a65=new yl[_s39.type](new bp[_s39.path.type]().fromJSON(_s39.path),_s39.tubularSegments,_s39.radius,_s39.radialSegments,_s39.closed);break;case"LatheGeometry":case"LatheBufferGeometry":_a65=new yl[_s39.type](_s39.points,_s39.segments,_s39.phiStart,_s39.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":_a65=new yl[_s39.type](_s39.vertices,_s39.indices,_s39.radius,_s39.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(var _e328=0,_n271=_s39.shapes.length;_e328<_n271;_e328++){var _n272=t[_s39.shapes[_e328]];r.push(_n272);}_a65=new yl[_s39.type](r,_s39.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(var _e329=0,_n273=_s39.shapes.length;_e329<_n273;_e329++){var _n274=t[_s39.shapes[_e329]];r.push(_n274);}var _e327=_s39.options.extrudePath;void 0!==_e327&&(_s39.options.extrudePath=new bp[_e327.type]().fromJSON(_e327)),_a65=new yl[_s39.type](r,_s39.options);break;case"BufferGeometry":case"InstancedBufferGeometry":_a65=_i140.parse(_s39);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+_s39.type+'"');continue;}_a65.uuid=_s39.uuid,void 0!==_s39.name&&(_a65.name=_s39.name),!0===_a65.isBufferGeometry&&void 0!==_s39.userData&&(_a65.userData=_s39.userData),n[_s39.uuid]=_a65;}}return n;}},{key:"parseMaterials",value:function parseMaterials(e,t){var n={},r={};if(void 0!==e){var _i141=new zp();_i141.setTextures(t);for(var _t301=0,_o93=e.length;_t301<_o93;_t301++){var _o94=e[_t301];if("MultiMaterial"===_o94.type){var _e330=[];for(var _t302=0;_t302<_o94.materials.length;_t302++){var _r195=_o94.materials[_t302];void 0===n[_r195.uuid]&&(n[_r195.uuid]=_i141.parse(_r195)),_e330.push(n[_r195.uuid]);}r[_o94.uuid]=_e330;}else void 0===n[_o94.uuid]&&(n[_o94.uuid]=_i141.parse(_o94)),r[_o94.uuid]=n[_o94.uuid];}}return r;}},{key:"parseAnimations",value:function parseAnimations(e){var t={};if(void 0!==e)for(var _n275=0;_n275<e.length;_n275++){var _r196=e[_n275],_i142=jl.parse(_r196);t[_i142.uuid]=_i142;}return t;}},{key:"parseImages",value:function parseImages(e,t){var n=this,r={};var i;function o(e){if("string"==typeof e){var _t303=e;return function(e){return n.manager.itemStart(e),i.load(e,function(){n.manager.itemEnd(e);},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e);});}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(_t303)?_t303:n.resourcePath+_t303);}return e.data?{data:Ui(e.type,e.data),width:e.width,height:e.height}:null;}if(void 0!==e&&e.length>0){var _n276=new Gl(t);i=new Jl(_n276),i.setCrossOrigin(this.crossOrigin);for(var _t304=0,_n277=e.length;_t304<_n277;_t304++){var _n278=e[_t304],_i143=_n278.url;if(Array.isArray(_i143)){r[_n278.uuid]=[];for(var _e331=0,_t305=_i143.length;_e331<_t305;_e331++){var _t306=o(_i143[_e331]);null!==_t306&&(_t306 instanceof HTMLImageElement?r[_n278.uuid].push(_t306):r[_n278.uuid].push(new Ao(_t306.data,_t306.width,_t306.height)));}}else{var _e332=o(_n278.url);null!==_e332&&(r[_n278.uuid]=_e332);}}}return r;}},{key:"parseTextures",value:function parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e]);}var r={};if(void 0!==e)for(var _i144=0,_o95=e.length;_i144<_o95;_i144++){var _o96=e[_i144];var _a66=void 0;void 0===_o96.image&&console.warn('THREE.ObjectLoader: No "image" specified for',_o96.uuid),void 0===t[_o96.image]&&console.warn("THREE.ObjectLoader: Undefined image",_o96.image);var _s40=t[_o96.image];Array.isArray(_s40)?(_a66=new _o(_s40),6===_s40.length&&(_a66.needsUpdate=!0)):(_a66=_s40&&_s40.data?new Ao(_s40.data,_s40.width,_s40.height):new Wn(_s40),_s40&&(_a66.needsUpdate=!0)),_a66.uuid=_o96.uuid,void 0!==_o96.name&&(_a66.name=_o96.name),void 0!==_o96.mapping&&(_a66.mapping=n(_o96.mapping,Gp)),void 0!==_o96.offset&&_a66.offset.fromArray(_o96.offset),void 0!==_o96.repeat&&_a66.repeat.fromArray(_o96.repeat),void 0!==_o96.center&&_a66.center.fromArray(_o96.center),void 0!==_o96.rotation&&(_a66.rotation=_o96.rotation),void 0!==_o96.wrap&&(_a66.wrapS=n(_o96.wrap[0],Vp),_a66.wrapT=n(_o96.wrap[1],Vp)),void 0!==_o96.format&&(_a66.format=_o96.format),void 0!==_o96.type&&(_a66.type=_o96.type),void 0!==_o96.encoding&&(_a66.encoding=_o96.encoding),void 0!==_o96.minFilter&&(_a66.minFilter=n(_o96.minFilter,Wp)),void 0!==_o96.magFilter&&(_a66.magFilter=n(_o96.magFilter,Wp)),void 0!==_o96.anisotropy&&(_a66.anisotropy=_o96.anisotropy),void 0!==_o96.flipY&&(_a66.flipY=_o96.flipY),void 0!==_o96.premultiplyAlpha&&(_a66.premultiplyAlpha=_o96.premultiplyAlpha),void 0!==_o96.unpackAlignment&&(_a66.unpackAlignment=_o96.unpackAlignment),r[_o96.uuid]=_a66;}return r;}},{key:"parseObject",value:function parseObject(e,t,n,r){var i,o,a;function s(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e];}function u(e){if(void 0!==e){if(Array.isArray(e)){var _t307=[];for(var _r197=0,_i145=e.length;_r197<_i145;_r197++){var _i146=e[_r197];void 0===n[_i146]&&console.warn("THREE.ObjectLoader: Undefined material",_i146),_t307.push(n[_i146]);}return _t307;}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e];}}switch(e.type){case"Scene":i=new Us(),void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new xi(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new ks(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new zs(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new So(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Rp(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Lp(e.color,e.intensity);break;case"DirectionalLight":i=new Op(e.color,e.intensity);break;case"PointLight":i=new Cp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Ip(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Np(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Ep(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=new Fp().fromJSON(e);break;case"SkinnedMesh":o=s(e.geometry),a=u(e.material),i=new fu(o,a),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":o=s(e.geometry),a=u(e.material),i=new ho(o,a);break;case"InstancedMesh":o=s(e.geometry),a=u(e.material);var _t308=e.count,_n279=e.instanceMatrix;i=new Mu(o,a,_t308),i.instanceMatrix=new Ai(new Float32Array(_n279.array),16);break;case"LOD":i=new uu();break;case"Line":i=new Cu(s(e.geometry),u(e.material));break;case"LineLoop":i=new Lu(s(e.geometry),u(e.material));break;case"LineSegments":i=new Ou(s(e.geometry),u(e.material));break;case"PointCloud":case"Points":i=new Uu(s(e.geometry),u(e.material));break;case"Sprite":i=new iu(u(e.material));break;case"Group":i=new Ps();break;case"Bone":i=new mu();break;default:i=new Jr();}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){var _o97=e.children;for(var _e333=0;_e333<_o97.length;_e333++){i.add(this.parseObject(_o97[_e333],t,n,r));}}if(void 0!==e.animations){var _t309=e.animations;for(var _e334=0;_e334<_t309.length;_e334++){var _n280=_t309[_e334];i.animations.push(r[_n280]);}}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);var _t310=e.levels;for(var _e335=0;_e335<_t310.length;_e335++){var _n281=_t310[_e335],_r198=i.getObjectByProperty("uuid",_n281.object);void 0!==_r198&&i.addLevel(_r198,_n281.distance);}}return i;}},{key:"bindSkeletons",value:function bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var _n282=t[e.skeleton];void 0===_n282?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(_n282,e.bindMatrix);}});}},{key:"setTexturePath",value:function setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e);}}]);return qp;}(Wl);var Gp={UVMapping:oe,CubeReflectionMapping:ae,CubeRefractionMapping:se,EquirectangularReflectionMapping:ue,EquirectangularRefractionMapping:ce,CubeUVReflectionMapping:le,CubeUVRefractionMapping:pe},Vp={RepeatWrapping:de,ClampToEdgeWrapping:he,MirroredRepeatWrapping:fe},Wp={NearestFilter:me,NearestMipmapNearestFilter:ye,NearestMipmapLinearFilter:ve,LinearFilter:be,LinearMipmapNearestFilter:we,LinearMipmapLinearFilter:Me};function Xp(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Wl.call(this,e),this.options={premultiplyAlpha:"none"};}function Yp(){this.type="ShapePath",this.color=new xi(),this.subPaths=[],this.currentPath=null;}function Zp(e){this.type="Font",this.data=e;}function $p(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");var a=new Yp();var s,u,c,l,p,d,h,f;if(o.o){var _e336=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(var _i147=0,_o98=_e336.length;_i147<_o98;){switch(_e336[_i147++]){case"m":s=_e336[_i147++]*t+n,u=_e336[_i147++]*t+r,a.moveTo(s,u);break;case"l":s=_e336[_i147++]*t+n,u=_e336[_i147++]*t+r,a.lineTo(s,u);break;case"q":c=_e336[_i147++]*t+n,l=_e336[_i147++]*t+r,p=_e336[_i147++]*t+n,d=_e336[_i147++]*t+r,a.quadraticCurveTo(p,d,c,l);break;case"b":c=_e336[_i147++]*t+n,l=_e336[_i147++]*t+r,p=_e336[_i147++]*t+n,d=_e336[_i147++]*t+r,h=_e336[_i147++]*t+n,f=_e336[_i147++]*t+r,a.bezierCurveTo(p,d,h,f,c,l);}}}return{offsetX:o.ha*t,path:a};}function Jp(e){Wl.call(this,e);}var Qp;Xp.prototype=Object.assign(Object.create(Wl.prototype),{constructor:Xp,isImageBitmapLoader:!0,setOptions:function setOptions(e){return this.options=e,this;},load:function load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ql.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e);},0),o;var a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,a).then(function(e){return e.blob();}).then(function(e){return createImageBitmap(e,i.options);}).then(function(n){ql.add(e,n),t&&t(n),i.manager.itemEnd(e);})["catch"](function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e);}),i.manager.itemStart(e);}}),Object.assign(Yp.prototype,{moveTo:function moveTo(e,t){return this.currentPath=new Sp(),this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this;},lineTo:function lineTo(e,t){return this.currentPath.lineTo(e,t),this;},quadraticCurveTo:function quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this;},bezierCurveTo:function bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this;},splineThru:function splineThru(e){return this.currentPath.splineThru(e),this;},toShapes:function toShapes(e,t){function n(e){var t=[];for(var _n283=0,_r199=e.length;_n283<_r199;_n283++){var _r200=e[_n283],_i148=new Mp();_i148.curves=_r200.curves,t.push(_i148);}return t;}function r(e,t){var n=t.length;var r=!1;for(var _i149=n-1,_o99=0;_o99<n;_i149=_o99++){var _n284=t[_i149],_a67=t[_o99],_s41=_a67.x-_n284.x,_u28=_a67.y-_n284.y;if(Math.abs(_u28)>Number.EPSILON){if(_u28<0&&(_n284=t[_o99],_s41=-_s41,_a67=t[_i149],_u28=-_u28),e.y<_n284.y||e.y>_a67.y)continue;if(e.y===_n284.y){if(e.x===_n284.x)return!0;}else{var _t311=_u28*(e.x-_n284.x)-_s41*(e.y-_n284.y);if(0===_t311)return!0;if(_t311<0)continue;r=!r;}}else{if(e.y!==_n284.y)continue;if(_a67.x<=e.x&&e.x<=_n284.x||_n284.x<=e.x&&e.x<=_a67.x)return!0;}}return r;}var i=Fc.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,u;var c=[];if(1===o.length)return s=o[0],u=new Mp(),u.curves=s.curves,c.push(u),c;var l=!i(o[0].getPoints());l=e?!l:l;var p=[],d=[];var h,f,m=[],y=0;d[y]=void 0,m[y]=[];for(var _t312=0,_n285=o.length;_t312<_n285;_t312++){s=o[_t312],h=s.getPoints(),a=i(h),a=e?!a:a,a?(!l&&d[y]&&y++,d[y]={s:new Mp(),p:h},d[y].s.curves=s.curves,l&&y++,m[y]=[]):m[y].push({h:s,p:h[0]});}if(!d[0])return n(o);if(d.length>1){var _e337=!1;var _t313=[];for(var _e338=0,_t314=d.length;_e338<_t314;_e338++){p[_e338]=[];}for(var _n286=0,_i150=d.length;_n286<_i150;_n286++){var _i151=m[_n286];for(var _o100=0;_o100<_i151.length;_o100++){var _a68=_i151[_o100];var _s42=!0;for(var _i152=0;_i152<d.length;_i152++){r(_a68.p,d[_i152].p)&&(_n286!==_i152&&_t313.push({froms:_n286,tos:_i152,hole:_o100}),_s42?(_s42=!1,p[_i152].push(_a68)):_e337=!0);}_s42&&p[_n286].push(_a68);}}_t313.length>0&&(_e337||(m=p));}for(var _e339=0,_t315=d.length;_e339<_t315;_e339++){u=d[_e339].s,c.push(u),f=m[_e339];for(var _e340=0,_t316=f.length;_e340<_t316;_e340++){u.holes.push(f[_e340].h);}}return c;}}),Object.assign(Zp.prototype,{isFont:!0,generateShapes:function generateShapes(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var n=[],r=function(e,t,n){var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];var s=0,u=0;for(var _e341=0;_e341<r.length;_e341++){var _t317=r[_e341];if("\n"===_t317)s=0,u-=o;else{var _e342=$p(_t317,i,s,u,n);s+=_e342.offsetX,a.push(_e342.path);}}return a;}(e,t,this.data);for(var _e343=0,_t318=r.length;_e343<_t318;_e343++){Array.prototype.push.apply(n,r[_e343].toShapes());}return n;}}),Jp.prototype=Object.assign(Object.create(Wl.prototype),{constructor:Jp,load:function load(e,t,n,r){var i=this,o=new Yl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(e){var n;try{n=JSON.parse(e);}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2));}var r=i.parse(n);t&&t(r);},n,r);},parse:function parse(e){return new Zp(e);}});var Kp={getContext:function getContext(){return void 0===Qp&&(Qp=new(window.AudioContext||window.webkitAudioContext)()),Qp;},setContext:function setContext(e){Qp=e;}};function ed(e){Wl.call(this,e);}function td(e,t,n){Fp.call(this,void 0,n);var r=new xi().set(e),i=new xi().set(t),o=new Qn(r.r,r.g,r.b),a=new Qn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u);}function nd(e,t){Fp.call(this,void 0,t);var n=new xi().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI));}ed.prototype=Object.assign(Object.create(Wl.prototype),{constructor:ed,load:function load(e,t,n,r){var i=this,o=new Yl(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(n){try{var _e344=n.slice(0);Kp.getContext().decodeAudioData(_e344,function(e){t(e);});}catch(t){r?r(t):console.error(t),i.manager.itemError(e);}},n,r);}}),td.prototype=Object.assign(Object.create(Fp.prototype),{constructor:td,isHemisphereLightProbe:!0,copy:function copy(e){return Fp.prototype.copy.call(this,e),this;},toJSON:function toJSON(e){return Fp.prototype.toJSON.call(this,e);}}),nd.prototype=Object.assign(Object.create(Fp.prototype),{constructor:nd,isAmbientLightProbe:!0,copy:function copy(e){return Fp.prototype.copy.call(this,e),this;},toJSON:function toJSON(e){return Fp.prototype.toJSON.call(this,e);}});var rd=new Ar(),id=new Ar();function od(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new So(),this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new So(),this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null};}Object.assign(od.prototype,{update:function update(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var _n287=e.projectionMatrix.clone(),_r201=t.eyeSep/2,_i153=_r201*t.near/t.focus,_o101=t.near*Math.tan(Un.DEG2RAD*t.fov*.5)/t.zoom;var _a69,_s43;id.elements[12]=-_r201,rd.elements[12]=_r201,_a69=-_o101*t.aspect+_i153,_s43=_o101*t.aspect+_i153,_n287.elements[0]=2*t.near/(_s43-_a69),_n287.elements[8]=(_s43+_a69)/(_s43-_a69),this.cameraL.projectionMatrix.copy(_n287),_a69=-_o101*t.aspect-_i153,_s43=_o101*t.aspect-_i153,_n287.elements[0]=2*t.near/(_s43-_a69),_n287.elements[8]=(_s43+_a69)/(_s43-_a69),this.cameraR.projectionMatrix.copy(_n287);}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(id),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(rd);}});var ad=/*#__PURE__*/function(){function ad(e){_classCallCheck(this,ad);this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1;}_createClass(ad,[{key:"start",value:function start(){this.startTime=sd(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0;}},{key:"stop",value:function stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1;}},{key:"getElapsedTime",value:function getElapsedTime(){return this.getDelta(),this.elapsedTime;}},{key:"getDelta",value:function getDelta(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var _t319=sd();e=(_t319-this.oldTime)/1e3,this.oldTime=_t319,this.elapsedTime+=e;}return e;}}]);return ad;}();function sd(){return("undefined"==typeof performance?Date:performance).now();}var ud=new Qn(),cd=new Jn(),ld=new Qn(),pd=new Qn();var dd=/*#__PURE__*/function(_Jr2){_inherits(dd,_Jr2);var _super43=_createSuper(dd);function dd(){var _this42;_classCallCheck(this,dd);_this42=_super43.call(this),_this42.type="AudioListener",_this42.context=Kp.getContext(),_this42.gain=_this42.context.createGain(),_this42.gain.connect(_this42.context.destination),_this42.filter=null,_this42.timeDelta=0,_this42._clock=new ad();return _this42;}_createClass(dd,[{key:"getInput",value:function getInput(){return this.gain;}},{key:"removeFilter",value:function removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this;}},{key:"getFilter",value:function getFilter(){return this.filter;}},{key:"setFilter",value:function setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this;}},{key:"getMasterVolume",value:function getMasterVolume(){return this.gain.gain.value;}},{key:"setMasterVolume",value:function setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this;}},{key:"updateMatrixWorld",value:function updateMatrixWorld(e){_get(_getPrototypeOf(dd.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ud,cd,ld),pd.set(0,0,-1).applyQuaternion(cd),t.positionX){var _e345=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ud.x,_e345),t.positionY.linearRampToValueAtTime(ud.y,_e345),t.positionZ.linearRampToValueAtTime(ud.z,_e345),t.forwardX.linearRampToValueAtTime(pd.x,_e345),t.forwardY.linearRampToValueAtTime(pd.y,_e345),t.forwardZ.linearRampToValueAtTime(pd.z,_e345),t.upX.linearRampToValueAtTime(n.x,_e345),t.upY.linearRampToValueAtTime(n.y,_e345),t.upZ.linearRampToValueAtTime(n.z,_e345);}else t.setPosition(ud.x,ud.y,ud.z),t.setOrientation(pd.x,pd.y,pd.z,n.x,n.y,n.z);}}]);return dd;}(Jr);var hd=/*#__PURE__*/function(_Jr3){_inherits(hd,_Jr3);var _super44=_createSuper(hd);function hd(e){var _this43;_classCallCheck(this,hd);_this43=_super44.call(this),_this43.type="Audio",_this43.listener=e,_this43.context=e.context,_this43.gain=_this43.context.createGain(),_this43.gain.connect(e.getInput()),_this43.autoplay=!1,_this43.buffer=null,_this43.detune=0,_this43.loop=!1,_this43.loopStart=0,_this43.loopEnd=0,_this43.offset=0,_this43.duration=void 0,_this43.playbackRate=1,_this43.isPlaying=!1,_this43.hasPlaybackControl=!0,_this43.source=null,_this43.sourceType="empty",_this43._startedAt=0,_this43._progress=0,_this43._connected=!1,_this43.filters=[];return _this43;}_createClass(hd,[{key:"getOutput",value:function getOutput(){return this.gain;}},{key:"setNodeSource",value:function setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this;}},{key:"setMediaElementSource",value:function setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this;}},{key:"setMediaStreamSource",value:function setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this;}},{key:"setBuffer",value:function setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this;}},{key:"play",value:function play(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect();}},{key:"pause",value:function pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.");}},{key:"stop",value:function stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.");}},{key:"connect",value:function connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var _e346=1,_t320=this.filters.length;_e346<_t320;_e346++){this.filters[_e346-1].connect(this.filters[_e346]);}this.filters[this.filters.length-1].connect(this.getOutput());}else this.source.connect(this.getOutput());return this._connected=!0,this;}},{key:"disconnect",value:function disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var _e347=1,_t321=this.filters.length;_e347<_t321;_e347++){this.filters[_e347-1].disconnect(this.filters[_e347]);}this.filters[this.filters.length-1].disconnect(this.getOutput());}else this.source.disconnect(this.getOutput());return this._connected=!1,this;}},{key:"getFilters",value:function getFilters(){return this.filters;}},{key:"setFilters",value:function setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this;}},{key:"setDetune",value:function setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this;}},{key:"getDetune",value:function getDetune(){return this.detune;}},{key:"getFilter",value:function getFilter(){return this.getFilters()[0];}},{key:"setFilter",value:function setFilter(e){return this.setFilters(e?[e]:[]);}},{key:"setPlaybackRate",value:function setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.");}},{key:"getPlaybackRate",value:function getPlaybackRate(){return this.playbackRate;}},{key:"onEnded",value:function onEnded(){this.isPlaying=!1;}},{key:"getLoop",value:function getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop;}},{key:"setLoop",value:function setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.");}},{key:"setLoopStart",value:function setLoopStart(e){return this.loopStart=e,this;}},{key:"setLoopEnd",value:function setLoopEnd(e){return this.loopEnd=e,this;}},{key:"getVolume",value:function getVolume(){return this.gain.gain.value;}},{key:"setVolume",value:function setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this;}}]);return hd;}(Jr);var fd=new Qn(),md=new Jn(),yd=new Qn(),gd=new Qn();var vd=/*#__PURE__*/function(_hd){_inherits(vd,_hd);var _super45=_createSuper(vd);function vd(e){var _this44;_classCallCheck(this,vd);_this44=_super45.call(this,e),_this44.panner=_this44.context.createPanner(),_this44.panner.panningModel="HRTF",_this44.panner.connect(_this44.gain);return _this44;}_createClass(vd,[{key:"getOutput",value:function getOutput(){return this.panner;}},{key:"getRefDistance",value:function getRefDistance(){return this.panner.refDistance;}},{key:"setRefDistance",value:function setRefDistance(e){return this.panner.refDistance=e,this;}},{key:"getRolloffFactor",value:function getRolloffFactor(){return this.panner.rolloffFactor;}},{key:"setRolloffFactor",value:function setRolloffFactor(e){return this.panner.rolloffFactor=e,this;}},{key:"getDistanceModel",value:function getDistanceModel(){return this.panner.distanceModel;}},{key:"setDistanceModel",value:function setDistanceModel(e){return this.panner.distanceModel=e,this;}},{key:"getMaxDistance",value:function getMaxDistance(){return this.panner.maxDistance;}},{key:"setMaxDistance",value:function setMaxDistance(e){return this.panner.maxDistance=e,this;}},{key:"setDirectionalCone",value:function setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this;}},{key:"updateMatrixWorld",value:function updateMatrixWorld(e){if(_get(_getPrototypeOf(vd.prototype),"updateMatrixWorld",this).call(this,e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(fd,md,yd),gd.set(0,0,1).applyQuaternion(md);var t=this.panner;if(t.positionX){var _e348=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(fd.x,_e348),t.positionY.linearRampToValueAtTime(fd.y,_e348),t.positionZ.linearRampToValueAtTime(fd.z,_e348),t.orientationX.linearRampToValueAtTime(gd.x,_e348),t.orientationY.linearRampToValueAtTime(gd.y,_e348),t.orientationZ.linearRampToValueAtTime(gd.z,_e348);}else t.setPosition(fd.x,fd.y,fd.z),t.setOrientation(gd.x,gd.y,gd.z);}}]);return vd;}(hd);var xd=/*#__PURE__*/function(){function xd(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2048;_classCallCheck(this,xd);this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser);}_createClass(xd,[{key:"getFrequencyData",value:function getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data;}},{key:"getAverageFrequency",value:function getAverageFrequency(){var e=0;var t=this.getFrequencyData();for(var _n288=0;_n288<t.length;_n288++){e+=t[_n288];}return e/t.length;}}]);return xd;}();function bd(e,t,n){var r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n);}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0;}Object.assign(bd.prototype,{accumulate:function accumulate(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r;var o=this.cumulativeWeight;if(0===o){for(var _e349=0;_e349!==r;++_e349){n[i+_e349]=n[_e349];}o=t;}else{o+=t;var _e350=t/o;this._mixBufferRegion(n,i,0,_e350,r);}this.cumulativeWeight=o;},accumulateAdditive:function accumulateAdditive(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e;},apply:function apply(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var _e351=t*this._origIndex;this._mixBufferRegion(n,r,_e351,1-i,t);}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var _e352=t,_i154=t+t;_e352!==_i154;++_e352){if(n[_e352]!==n[_e352+t]){a.setValue(n,r);break;}}},saveOriginalState:function saveOriginalState(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var _e353=n,_i155=r;_e353!==_i155;++_e353){t[_e353]=t[r+_e353%n];}this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0;},restoreOriginalState:function restoreOriginalState(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e);},_setAdditiveIdentityNumeric:function _setAdditiveIdentityNumeric(){var e=this._addIndex*this.valueSize,t=e+this.valueSize;for(var _n289=e;_n289<t;_n289++){this.buffer[_n289]=0;}},_setAdditiveIdentityQuaternion:function _setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1;},_setAdditiveIdentityOther:function _setAdditiveIdentityOther(){var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(var _n290=0;_n290<this.valueSize;_n290++){this.buffer[t+_n290]=this.buffer[e+_n290];}},_select:function _select(e,t,n,r,i){if(r>=.5)for(var _r202=0;_r202!==i;++_r202){e[t+_r202]=e[n+_r202];}},_slerp:function _slerp(e,t,n,r){Jn.slerpFlat(e,t,e,t,e,n,r);},_slerpAdditive:function _slerpAdditive(e,t,n,r,i){var o=this._workIndex*i;Jn.multiplyQuaternionsFlat(e,o,e,t,e,n),Jn.slerpFlat(e,t,e,t,e,o,r);},_lerp:function _lerp(e,t,n,r,i){var o=1-r;for(var _a70=0;_a70!==i;++_a70){var _i156=t+_a70;e[_i156]=e[_i156]*o+e[n+_a70]*r;}},_lerpAdditive:function _lerpAdditive(e,t,n,r,i){for(var _o102=0;_o102!==i;++_o102){var _i157=t+_o102;e[_i157]=e[_i157]+e[n+_o102]*r;}}});var wd=new RegExp("[\\[\\]\\.:\\/]","g"),Sd="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Md=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),_d=/(WCOD+)?/.source.replace("WCOD",Sd),Ed=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Ad=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Td=new RegExp("^"+Md+_d+Ed+Ad+"$"),Nd=["material","materials","bones"];function Dd(e,t,n){var r=n||Cd.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r);}function Cd(e,t,n){this.path=t,this.parsedPath=n||Cd.parseTrackName(t),this.node=Cd.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e;}function Rd(){this.uuid=Un.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var _t322=0,_n291=arguments.length;_t322!==_n291;++_t322){e[arguments[_t322].uuid]=_t322;}this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var t=this;this.stats={objects:{get total(){return t._objects.length;},get inUse(){return this.total-t.nCachedObjects_;}},get bindingsPerObject(){return t._bindings.length;}};}Object.assign(Dd.prototype,{getValue:function getValue(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t);},setValue:function setValue(e,t){var n=this._bindings;for(var _r203=this._targetGroup.nCachedObjects_,_i158=n.length;_r203!==_i158;++_r203){n[_r203].setValue(e,t);}},bind:function bind(){var e=this._bindings;for(var _t323=this._targetGroup.nCachedObjects_,_n292=e.length;_t323!==_n292;++_t323){e[_t323].bind();}},unbind:function unbind(){var e=this._bindings;for(var _t324=this._targetGroup.nCachedObjects_,_n293=e.length;_t324!==_n293;++_t324){e[_t324].unbind();}}}),Object.assign(Cd,{Composite:Dd,create:function create(e,t,n){return e&&e.isAnimationObjectGroup?new Cd.Composite(e,t,n):new Cd(e,t,n);},sanitizeNodeName:function sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(wd,"");},parseTrackName:function parseTrackName(e){var t=Td.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var _e354=n.nodeName.substring(r+1);-1!==Nd.indexOf(_e354)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=_e354);}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n;},findNode:function findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var _n294=e.skeleton.getBoneByName(t);if(void 0!==_n294)return _n294;}if(e.children){var _n295=function _n295(e){for(var _r205=0;_r205<e.length;_r205++){var _i159=e[_r205];if(_i159.name===t||_i159.uuid===t)return _i159;var _o103=_n295(_i159.children);if(_o103)return _o103;}return null;},_r204=_n295(e.children);if(_r204)return _r204;}return null;}}),Object.assign(Cd.prototype,{_getValue_unavailable:function _getValue_unavailable(){},_setValue_unavailable:function _setValue_unavailable(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName];},function(e,t){var n=this.resolvedProperty;for(var _r206=0,_i160=n.length;_r206!==_i160;++_r206){e[t++]=n[_r206];}},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex];},function(e,t){this.resolvedProperty.toArray(e,t);}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t];},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0;},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0;}],[function(e,t){var n=this.resolvedProperty;for(var _r207=0,_i161=n.length;_r207!==_i161;++_r207){n[_r207]=e[t++];}},function(e,t){var n=this.resolvedProperty;for(var _r208=0,_i162=n.length;_r208!==_i162;++_r208){n[_r208]=e[t++];}this.targetObject.needsUpdate=!0;},function(e,t){var n=this.resolvedProperty;for(var _r209=0,_i163=n.length;_r209!==_i163;++_r209){n[_r209]=e[t++];}this.targetObject.matrixWorldNeedsUpdate=!0;}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t];},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0;},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0;}],[function(e,t){this.resolvedProperty.fromArray(e,t);},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0;},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0;}]],getValue:function getValue(e,t){this.bind(),this.getValue(e,t);},setValue:function setValue(e,t){this.bind(),this.setValue(e,t);},bind:function bind(){var e=this.node;var t=this.parsedPath,n=t.objectName,r=t.propertyName;var i=t.propertyIndex;if(e||(e=Cd.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var _r210=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var _t325=0;_t325<e.length;_t325++){if(e[_t325].name===_r210){_r210=_t325;break;}}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n];}if(void 0!==_r210){if(void 0===e[_r210])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[_r210];}}var o=e[r];if(void 0===o){var _n296=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+_n296+"."+r+" but it wasn't found.",e);}var a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);var s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i]);}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i;}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a];},unbind:function unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound;}}),Object.assign(Cd.prototype,{_getValue_unbound:Cd.prototype.getValue,_setValue_unbound:Cd.prototype.setValue}),Object.assign(Rd.prototype,{isAnimationObjectGroup:!0,add:function add(){var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;var a=void 0,s=e.length,u=this.nCachedObjects_;for(var _c22=0,_l15=arguments.length;_c22!==_l15;++_c22){var _l16=arguments[_c22],_p18=_l16.uuid;var _d18=t[_p18];if(void 0===_d18){_d18=s++,t[_p18]=_d18,e.push(_l16);for(var _e355=0,_t326=o;_e355!==_t326;++_e355){i[_e355].push(new Cd(_l16,n[_e355],r[_e355]));}}else if(_d18<u){a=e[_d18];var _s44=--u,_c23=e[_s44];t[_c23.uuid]=_d18,e[_d18]=_c23,t[_p18]=_s44,e[_s44]=_l16;for(var _e356=0,_t327=o;_e356!==_t327;++_e356){var _t328=i[_e356],_o104=_t328[_s44];var _a71=_t328[_d18];_t328[_d18]=_o104,void 0===_a71&&(_a71=new Cd(_l16,n[_e356],r[_e356])),_t328[_s44]=_a71;}}else e[_d18]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.");}this.nCachedObjects_=u;},remove:function remove(){var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;var i=this.nCachedObjects_;for(var _o105=0,_a72=arguments.length;_o105!==_a72;++_o105){var _a73=arguments[_o105],_s45=_a73.uuid,_u29=t[_s45];if(void 0!==_u29&&_u29>=i){var _o106=i++,_c24=e[_o106];t[_c24.uuid]=_u29,e[_u29]=_c24,t[_s45]=_o106,e[_o106]=_a73;for(var _e357=0,_t329=r;_e357!==_t329;++_e357){var _t330=n[_e357],_r211=_t330[_o106],_i164=_t330[_u29];_t330[_u29]=_r211,_t330[_o106]=_i164;}}}this.nCachedObjects_=i;},uncache:function uncache(){var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;var i=this.nCachedObjects_,o=e.length;for(var _a74=0,_s46=arguments.length;_a74!==_s46;++_a74){var _s47=arguments[_a74].uuid,_u30=t[_s47];if(void 0!==_u30)if(delete t[_s47],_u30<i){var _a75=--i,_s48=e[_a75],_c25=--o,_l17=e[_c25];t[_s48.uuid]=_u30,e[_u30]=_s48,t[_l17.uuid]=_a75,e[_a75]=_l17,e.pop();for(var _e358=0,_t331=r;_e358!==_t331;++_e358){var _t332=n[_e358],_r212=_t332[_a75],_i165=_t332[_c25];_t332[_u30]=_r212,_t332[_a75]=_i165,_t332.pop();}}else{var _i166=--o,_a76=e[_i166];_i166>0&&(t[_a76.uuid]=_u30),e[_u30]=_a76,e.pop();for(var _e359=0,_t333=r;_e359!==_t333;++_e359){var _t334=n[_e359];_t334[_u30]=_t334[_i166],_t334.pop();}}}this.nCachedObjects_=i;},subscribe_:function subscribe_(e,t){var n=this._bindingsIndicesByPath;var r=n[e];var i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var _n297=c,_r213=s.length;_n297!==_r213;++_n297){var _r214=s[_n297];l[_n297]=new Cd(_r214,e,t);}return l;},unsubscribe_:function unsubscribe_(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var _r215=this._paths,_i167=this._parsedPaths,_o107=this._bindings,_a77=_o107.length-1,_s49=_o107[_a77];t[e[_a77]]=n,_o107[n]=_s49,_o107.pop(),_i167[n]=_i167[_a77],_i167.pop(),_r215[n]=_r215[_a77],_r215.pop();}}});var Pd=/*#__PURE__*/function(){function Pd(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:t.blendMode;_classCallCheck(this,Pd);this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;var i=t.tracks,o=i.length,a=new Array(o),s={endingStart:qt,endingEnd:qt};for(var _e360=0;_e360!==o;++_e360){var _t335=i[_e360].createInterpolant(null);a[_e360]=_t335,_t335.settings=s;}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0;}_createClass(Pd,[{key:"play",value:function play(){return this._mixer._activateAction(this),this;}},{key:"stop",value:function stop(){return this._mixer._deactivateAction(this),this.reset();}},{key:"reset",value:function reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping();}},{key:"isRunning",value:function isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this);}},{key:"isScheduled",value:function isScheduled(){return this._mixer._isActiveAction(this);}},{key:"startAt",value:function startAt(e){return this._startTime=e,this;}},{key:"setLoop",value:function setLoop(e,t){return this.loop=e,this.repetitions=t,this;}},{key:"setEffectiveWeight",value:function setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading();}},{key:"getEffectiveWeight",value:function getEffectiveWeight(){return this._effectiveWeight;}},{key:"fadeIn",value:function fadeIn(e){return this._scheduleFading(e,0,1);}},{key:"fadeOut",value:function fadeOut(e){return this._scheduleFading(e,1,0);}},{key:"crossFadeFrom",value:function crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var _n298=this._clip.duration,_r216=e._clip.duration,_i168=_r216/_n298,_o108=_n298/_r216;e.warp(1,_i168,t),this.warp(_o108,1,t);}return this;}},{key:"crossFadeTo",value:function crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n);}},{key:"stopFading",value:function stopFading(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this;}},{key:"setEffectiveTimeScale",value:function setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping();}},{key:"getEffectiveTimeScale",value:function getEffectiveTimeScale(){return this._effectiveTimeScale;}},{key:"setDuration",value:function setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping();}},{key:"syncWith",value:function syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping();}},{key:"halt",value:function halt(e){return this.warp(this._effectiveTimeScale,0,e);}},{key:"warp",value:function warp(e,t,n){var r=this._mixer,i=r.time,o=this.timeScale;var a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this;}},{key:"stopWarping",value:function stopWarping(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this;}},{key:"getMixer",value:function getMixer(){return this._mixer;}},{key:"getClip",value:function getClip(){return this._clip;}},{key:"getRoot",value:function getRoot(){return this._localRoot||this._mixer._root;}},{key:"_update",value:function _update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);var i=this._startTime;if(null!==i){var _r217=(e-i)*n;if(_r217<0||0===n)return;this._startTime=null,t=n*_r217;}t*=this._updateTimeScale(e);var o=this._updateTime(t),a=this._updateWeight(e);if(a>0){var _e361=this._interpolants,_t336=this._propertyBindings;switch(this.blendMode){case Xt:for(var _n299=0,_r218=_e361.length;_n299!==_r218;++_n299){_e361[_n299].evaluate(o),_t336[_n299].accumulateAdditive(a);}break;case Wt:default:for(var _n300=0,_i169=_e361.length;_n300!==_i169;++_n300){_e361[_n300].evaluate(o),_t336[_n300].accumulate(r,a);}}}}},{key:"_updateWeight",value:function _updateWeight(e){var t=0;if(this.enabled){t=this.weight;var _n301=this._weightInterpolant;if(null!==_n301){var _r219=_n301.evaluate(e)[0];t*=_r219,e>_n301.parameterPositions[1]&&(this.stopFading(),0===_r219&&(this.enabled=!1));}}return this._effectiveWeight=t,t;}},{key:"_updateTimeScale",value:function _updateTimeScale(e){var t=0;if(!this.paused){t=this.timeScale;var _n302=this._timeScaleInterpolant;if(null!==_n302){t*=_n302.evaluate(e)[0],e>_n302.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t);}}return this._effectiveTimeScale=t,t;}},{key:"_updateTime",value:function _updateTime(e){var t=this._clip.duration,n=this.loop;var r=this.time+e,i=this._loopCount;var o=n===kt;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(n===Ft){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e;}r=0;}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1});}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){var _n303=Math.floor(r/t);r-=t*_n303,i+=Math.abs(_n303);var _a78=this.repetitions-i;if(_a78<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===_a78){var _t337=e<0;this._setEndings(_t337,!_t337,o);}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:_n303});}}else this.time=r;if(o&&1==(1&i))return t-r;}return r;}},{key:"_setEndings",value:function _setEndings(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Gt,r.endingEnd=Gt):(r.endingStart=e?this.zeroSlopeAtStart?Gt:qt:Vt,r.endingEnd=t?this.zeroSlopeAtEnd?Gt:qt:Vt);}},{key:"_scheduleFading",value:function _scheduleFading(e,t,n){var r=this._mixer,i=r.time;var o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this;}}]);return Pd;}();function Od(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1;}Od.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Od,_bindAction:function _bindAction(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName;var c=u[s];void 0===c&&(c={},u[s]=c);for(var _e362=0;_e362!==i;++_e362){var _i170=r[_e362],_u31=_i170.name;var _l18=c[_u31];if(void 0!==_l18)o[_e362]=_l18;else{if(_l18=o[_e362],void 0!==_l18){null===_l18._cacheIndex&&(++_l18.referenceCount,this._addInactiveBinding(_l18,s,_u31));continue;}var _r220=t&&t._propertyBindings[_e362].binding.parsedPath;_l18=new bd(Cd.create(n,_u31,_r220),_i170.ValueTypeName,_i170.getValueSize()),++_l18.referenceCount,this._addInactiveBinding(_l18,s,_u31),o[_e362]=_l18;}a[_e362].resultBuffer=_l18.buffer;}},_activateAction:function _activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var _t339=(e._localRoot||this._root).uuid,_n304=e._clip.uuid,_r221=this._actionsByClip[_n304];this._bindAction(e,_r221&&_r221.knownActions[0]),this._addInactiveAction(e,_n304,_t339);}var _t338=e._propertyBindings;for(var _e363=0,_n305=_t338.length;_e363!==_n305;++_e363){var _n306=_t338[_e363];0==_n306.useCount++&&(this._lendBinding(_n306),_n306.saveOriginalState());}this._lendAction(e);}},_deactivateAction:function _deactivateAction(e){if(this._isActiveAction(e)){var _t340=e._propertyBindings;for(var _e364=0,_n307=_t340.length;_e364!==_n307;++_e364){var _n308=_t340[_e364];0==--_n308.useCount&&(_n308.restoreOriginalState(),this._takeBackBinding(_n308));}this._takeBackAction(e);}},_initMemoryManager:function _initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length;},get inUse(){return e._nActiveActions;}},bindings:{get total(){return e._bindings.length;},get inUse(){return e._nActiveBindings;}},controlInterpolants:{get total(){return e._controlInterpolants.length;},get inUse(){return e._nActiveControlInterpolants;}}};},_isActiveAction:function _isActiveAction(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions;},_addInactiveAction:function _addInactiveAction(e,t,n){var r=this._actions,i=this._actionsByClip;var o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var _t341=o.knownActions;e._byClipCacheIndex=_t341.length,_t341.push(e);}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e;},_removeInactiveAction:function _removeInactiveAction(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e);},_removeInactiveBindingsForAction:function _removeInactiveBindingsForAction(e){var t=e._propertyBindings;for(var _e365=0,_n309=t.length;_e365!==_n309;++_e365){var _n310=t[_e365];0==--_n310.referenceCount&&this._removeInactiveBinding(_n310);}},_lendAction:function _lendAction(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i;},_takeBackAction:function _takeBackAction(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i;},_addInactiveBinding:function _addInactiveBinding(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings;var o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e);},_removeInactiveBinding:function _removeInactiveBinding(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r];},_lendBinding:function _lendBinding(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i;},_takeBackBinding:function _takeBackBinding(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i;},_lendControlInterpolant:function _lendControlInterpolant(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++;var n=e[t];return void 0===n&&(n=new Rl(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n;},_takeBackControlInterpolant:function _takeBackControlInterpolant(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i;},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function clipAction(e,t,n){var r=t||this._root,i=r.uuid;var o="string"==typeof e?jl.findByName(r,e):e;var a=null!==o?o.uuid:e,s=this._actionsByClip[a];var u=null;if(void 0===n&&(n=null!==o?o.blendMode:Wt),void 0!==s){var _e366=s.actionByRoot[i];if(void 0!==_e366&&_e366.blendMode===n)return _e366;u=s.knownActions[0],null===o&&(o=u._clip);}if(null===o)return null;var c=new Pd(this,o,t,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c;},existingAction:function existingAction(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?jl.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null;},stopAllAction:function stopAllAction(){var e=this._actions;for(var _t342=this._nActiveActions-1;_t342>=0;--_t342){e[_t342].stop();}return this;},update:function update(e){e*=this.timeScale;var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(var _a79=0;_a79!==n;++_a79){t[_a79]._update(r,e,i,o);}var a=this._bindings,s=this._nActiveBindings;for(var _e367=0;_e367!==s;++_e367){a[_e367].apply(o);}return this;},setTime:function setTime(e){this.time=0;for(var _e368=0;_e368<this._actions.length;_e368++){this._actions[_e368].time=0;}return this.update(e);},getRoot:function getRoot(){return this._root;},uncacheClip:function uncacheClip(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){var _e369=i.knownActions;for(var _n311=0,_r222=_e369.length;_n311!==_r222;++_n311){var _r223=_e369[_n311];this._deactivateAction(_r223);var _i171=_r223._cacheIndex,_o109=t[t.length-1];_r223._cacheIndex=null,_r223._byClipCacheIndex=null,_o109._cacheIndex=_i171,t[_i171]=_o109,t.pop(),this._removeInactiveBindingsForAction(_r223);}delete r[n];}},uncacheRoot:function uncacheRoot(e){var t=e.uuid,n=this._actionsByClip;for(var _e370 in n){var _r224=n[_e370].actionByRoot[t];void 0!==_r224&&(this._deactivateAction(_r224),this._removeInactiveAction(_r224));}var r=this._bindingsByRootAndName[t];if(void 0!==r)for(var _e371 in r){var _t343=r[_e371];_t343.restoreOriginalState(),this._removeInactiveBinding(_t343);}},uncacheAction:function uncacheAction(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n));}});var Ld=/*#__PURE__*/function(){function Ld(e){_classCallCheck(this,Ld);"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e;}_createClass(Ld,[{key:"clone",value:function clone(){return new Ld(void 0===this.value.clone?this.value:this.value.clone());}}]);return Ld;}();function Id(e,t,n){js.call(this,e,t),this.meshPerAttribute=n||1;}function Bd(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0;}function Fd(e,t,n,r){this.ray=new Er(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Fr(),this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function get(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points;}}});}function zd(e,t){return e.distance-t.distance;}function kd(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){var _r225=e.children;for(var _e372=0,_i172=_r225.length;_e372<_i172;_e372++){kd(_r225[_e372],t,n,!0);}}}Id.prototype=Object.assign(Object.create(js.prototype),{constructor:Id,isInstancedInterleavedBuffer:!0,copy:function copy(e){return js.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this;},clone:function clone(e){var t=js.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t;},toJSON:function toJSON(e){var t=js.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t;}}),Object.defineProperty(Bd.prototype,"needsUpdate",{set:function set(e){!0===e&&this.version++;}}),Object.assign(Bd.prototype,{isGLBufferAttribute:!0,setBuffer:function setBuffer(e){return this.buffer=e,this;},setType:function setType(e,t){return this.type=e,this.elementSize=t,this;},setItemSize:function setItemSize(e){return this.itemSize=e,this;},setCount:function setCount(e){return this.count=e,this;}}),Object.assign(Fd.prototype,{set:function set(e,t){this.ray.set(e,t);},setFromCamera:function setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type);},intersectObject:function intersectObject(e,t,n){var r=n||[];return kd(e,this,r,t),r.sort(zd),r;},intersectObjects:function intersectObjects(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var _n312=0,_i173=e.length;_n312<_i173;_n312++){kd(e[_n312],this,r,t);}return r.sort(zd),r;}});var Ud=/*#__PURE__*/function(){function Ud(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,Ud);return this.radius=e,this.phi=t,this.theta=n,this;}_createClass(Ud,[{key:"set",value:function set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this;}},{key:"makeSafe",value:function makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this;}},{key:"setFromVector3",value:function setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z);}},{key:"setFromCartesianCoords",value:function setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Un.clamp(t/this.radius,-1,1))),this;}}]);return Ud;}();var jd=/*#__PURE__*/function(){function jd(e,t,n){_classCallCheck(this,jd);return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this;}_createClass(jd,[{key:"set",value:function set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this;}},{key:"setFromVector3",value:function setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z);}},{key:"setFromCartesianCoords",value:function setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this;}}]);return jd;}();var Hd=new jn();var qd=/*#__PURE__*/function(){function qd(e,t){_classCallCheck(this,qd);Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==e?e:new jn(1/0,1/0),this.max=void 0!==t?t:new jn(-1/0,-1/0);}_createClass(qd,[{key:"set",value:function set(e,t){return this.min.copy(e),this.max.copy(t),this;}},{key:"setFromPoints",value:function setFromPoints(e){this.makeEmpty();for(var _t344=0,_n313=e.length;_t344<_n313;_t344++){this.expandByPoint(e[_t344]);}return this;}},{key:"setFromCenterAndSize",value:function setFromCenterAndSize(e,t){var n=Hd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.min.copy(e.min),this.max.copy(e.max),this;}},{key:"makeEmpty",value:function makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this;}},{key:"isEmpty",value:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y;}},{key:"getCenter",value:function getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new jn()),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5);}},{key:"getSize",value:function getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new jn()),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min);}},{key:"expandByPoint",value:function expandByPoint(e){return this.min.min(e),this.max.max(e),this;}},{key:"expandByVector",value:function expandByVector(e){return this.min.sub(e),this.max.add(e),this;}},{key:"expandByScalar",value:function expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this;}},{key:"containsPoint",value:function containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y);}},{key:"containsBox",value:function containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y;}},{key:"getParameter",value:function getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new jn()),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y));}},{key:"intersectsBox",value:function intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y);}},{key:"clampPoint",value:function clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new jn()),t.copy(e).clamp(this.min,this.max);}},{key:"distanceToPoint",value:function distanceToPoint(e){return Hd.copy(e).clamp(this.min,this.max).sub(e).length();}},{key:"intersect",value:function intersect(e){return this.min.max(e.min),this.max.min(e.max),this;}},{key:"union",value:function union(e){return this.min.min(e.min),this.max.max(e.max),this;}},{key:"translate",value:function translate(e){return this.min.add(e),this.max.add(e),this;}},{key:"equals",value:function equals(e){return e.min.equals(this.min)&&e.max.equals(this.max);}}]);return qd;}();var Gd=new Qn(),Vd=new Qn();var Wd=/*#__PURE__*/function(){function Wd(e,t){_classCallCheck(this,Wd);this.start=void 0!==e?e:new Qn(),this.end=void 0!==t?t:new Qn();}_createClass(Wd,[{key:"set",value:function set(e,t){return this.start.copy(e),this.end.copy(t),this;}},{key:"clone",value:function clone(){return new this.constructor().copy(this);}},{key:"copy",value:function copy(e){return this.start.copy(e.start),this.end.copy(e.end),this;}},{key:"getCenter",value:function getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Qn()),e.addVectors(this.start,this.end).multiplyScalar(.5);}},{key:"delta",value:function delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Qn()),e.subVectors(this.end,this.start);}},{key:"distanceSq",value:function distanceSq(){return this.start.distanceToSquared(this.end);}},{key:"distance",value:function distance(){return this.start.distanceTo(this.end);}},{key:"at",value:function at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Qn()),this.delta(t).multiplyScalar(e).add(this.start);}},{key:"closestPointToPointParameter",value:function closestPointToPointParameter(e,t){Gd.subVectors(e,this.start),Vd.subVectors(this.end,this.start);var n=Vd.dot(Vd);var r=Vd.dot(Gd)/n;return t&&(r=Un.clamp(r,0,1)),r;}},{key:"closestPointToPoint",value:function closestPointToPoint(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Qn()),this.delta(n).multiplyScalar(r).add(this.start);}},{key:"applyMatrix4",value:function applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this;}},{key:"equals",value:function equals(e){return e.start.equals(this.start)&&e.end.equals(this.end);}}]);return Wd;}();function Xd(e){Jr.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0;}Xd.prototype=Object.create(Jr.prototype),Xd.prototype.constructor=Xd,Xd.prototype.isImmediateRenderObject=!0;var Yd=new Qn();var Zd=/*#__PURE__*/function(_Jr4){_inherits(Zd,_Jr4);var _super46=_createSuper(Zd);function Zd(e,t){var _this45;_classCallCheck(this,Zd);_this45=_super46.call(this),_this45.light=e,_this45.light.updateMatrixWorld(),_this45.matrix=e.matrixWorld,_this45.matrixAutoUpdate=!1,_this45.color=t;var n=new Yi(),r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var _e373=0,_t345=1,_n314=32;_e373<_n314;_e373++,_t345++){var _i174=_e373/_n314*Math.PI*2,_o110=_t345/_n314*Math.PI*2;r.push(Math.cos(_i174),Math.sin(_i174),1,Math.cos(_o110),Math.sin(_o110),1);}n.setAttribute("position",new Ii(r,3));var i=new _u({fog:!1,toneMapped:!1});_this45.cone=new Ou(n,i),_this45.add(_this45.cone),_this45.update();return _this45;}_createClass(Zd,[{key:"dispose",value:function dispose(){this.cone.geometry.dispose(),this.cone.material.dispose();}},{key:"update",value:function update(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Yd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Yd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color);}}]);return Zd;}(Jr);var $d=new Qn(),Jd=new Ar(),Qd=new Ar();var Kd=/*#__PURE__*/function(_Ou){_inherits(Kd,_Ou);var _super47=_createSuper(Kd);function Kd(e){var _this46;_classCallCheck(this,Kd);var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var _r226=0;_r226<t.children.length;_r226++){n.push.apply(n,e(t.children[_r226]));}return n;}(e),n=new Yi(),r=[],i=[],o=new xi(0,0,1),a=new xi(0,1,0);for(var _e374=0;_e374<t.length;_e374++){var _n315=t[_e374];_n315.parent&&_n315.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b));}n.setAttribute("position",new Ii(r,3)),n.setAttribute("color",new Ii(i,3)),_this46=_super47.call(this,n,new _u({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),_this46.type="SkeletonHelper",_this46.isSkeletonHelper=!0,_this46.root=e,_this46.bones=t,_this46.matrix=e.matrixWorld,_this46.matrixAutoUpdate=!1;return _this46;}_createClass(Kd,[{key:"updateMatrixWorld",value:function updateMatrixWorld(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");Qd.copy(this.root.matrixWorld).invert();for(var _e375=0,_n316=0;_e375<t.length;_e375++){var _i175=t[_e375];_i175.parent&&_i175.parent.isBone&&(Jd.multiplyMatrices(Qd,_i175.matrixWorld),$d.setFromMatrixPosition(Jd),r.setXYZ(_n316,$d.x,$d.y,$d.z),Jd.multiplyMatrices(Qd,_i175.parent.matrixWorld),$d.setFromMatrixPosition(Jd),r.setXYZ(_n316+1,$d.x,$d.y,$d.z),_n316+=2);}n.getAttribute("position").needsUpdate=!0,_get(_getPrototypeOf(Kd.prototype),"updateMatrixWorld",this).call(this,e);}}]);return Kd;}(Ou);var eh=/*#__PURE__*/function(_ho){_inherits(eh,_ho);var _super48=_createSuper(eh);function eh(e,t,n){var _this47;_classCallCheck(this,eh);_this47=_super48.call(this,new rl(t,4,2),new Mi({wireframe:!0,fog:!1,toneMapped:!1})),_this47.light=e,_this47.light.updateMatrixWorld(),_this47.color=n,_this47.type="PointLightHelper",_this47.matrix=_this47.light.matrixWorld,_this47.matrixAutoUpdate=!1,_this47.update();return _this47;}_createClass(eh,[{key:"dispose",value:function dispose(){this.geometry.dispose(),this.material.dispose();}},{key:"update",value:function update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color);}}]);return eh;}(ho);var th=new Qn(),nh=new xi(),rh=new xi();var ih=/*#__PURE__*/function(_Jr5){_inherits(ih,_Jr5);var _super49=_createSuper(ih);function ih(e,t,n){var _this48;_classCallCheck(this,ih);_this48=_super49.call(this),_this48.light=e,_this48.light.updateMatrixWorld(),_this48.matrix=e.matrixWorld,_this48.matrixAutoUpdate=!1,_this48.color=n;var r=new Xc(t);r.rotateY(.5*Math.PI),_this48.material=new Mi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===_this48.color&&(_this48.material.vertexColors=!0);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ai(o,3)),_this48.add(new ho(r,_this48.material)),_this48.update();return _this48;}_createClass(ih,[{key:"dispose",value:function dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose();}},{key:"update",value:function update(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var _t346=e.geometry.getAttribute("color");nh.copy(this.light.color),rh.copy(this.light.groundColor);for(var _e376=0,_n317=_t346.count;_e376<_n317;_e376++){var _r227=_e376<_n317/2?nh:rh;_t346.setXYZ(_e376,_r227.r,_r227.g,_r227.b);}_t346.needsUpdate=!0;}e.lookAt(th.setFromMatrixPosition(this.light.matrixWorld).negate());}}]);return ih;}(Jr);var oh=/*#__PURE__*/function(_Ou2){_inherits(oh,_Ou2);var _super50=_createSuper(oh);function oh(){var _this49;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4473924;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:8947848;_classCallCheck(this,oh);n=new xi(n),r=new xi(r);var i=t/2,o=e/t,a=e/2,s=[],u=[];for(var _e377=0,_c26=0,_l19=-a;_e377<=t;_e377++,_l19+=o){s.push(-a,0,_l19,a,0,_l19),s.push(_l19,0,-a,_l19,0,a);var _t347=_e377===i?n:r;_t347.toArray(u,_c26),_c26+=3,_t347.toArray(u,_c26),_c26+=3,_t347.toArray(u,_c26),_c26+=3,_t347.toArray(u,_c26),_c26+=3;}var c=new Yi();c.setAttribute("position",new Ii(s,3)),c.setAttribute("color",new Ii(u,3)),_this49=_super50.call(this,c,new _u({vertexColors:!0,toneMapped:!1})),_this49.type="GridHelper";return _this49;}return oh;}(Ou);var ah=/*#__PURE__*/function(_Ou3){_inherits(ah,_Ou3);var _super51=_createSuper(ah);function ah(){var _this50;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:16;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:8;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:64;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:4473924;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:8947848;_classCallCheck(this,ah);i=new xi(i),o=new xi(o);var a=[],s=[];for(var _n318=0;_n318<=t;_n318++){var _r228=_n318/t*(2*Math.PI),_u32=Math.sin(_r228)*e,_c27=Math.cos(_r228)*e;a.push(0,0,0),a.push(_u32,0,_c27);var _l20=1&_n318?i:o;s.push(_l20.r,_l20.g,_l20.b),s.push(_l20.r,_l20.g,_l20.b);}for(var _t348=0;_t348<=n;_t348++){var _u33=1&_t348?i:o,_c28=e-e/n*_t348;for(var _e378=0;_e378<r;_e378++){var _t349=_e378/r*(2*Math.PI),_n319=Math.sin(_t349)*_c28,_i176=Math.cos(_t349)*_c28;a.push(_n319,0,_i176),s.push(_u33.r,_u33.g,_u33.b),_t349=(_e378+1)/r*(2*Math.PI),_n319=Math.sin(_t349)*_c28,_i176=Math.cos(_t349)*_c28,a.push(_n319,0,_i176),s.push(_u33.r,_u33.g,_u33.b);}}var u=new Yi();u.setAttribute("position",new Ii(a,3)),u.setAttribute("color",new Ii(s,3)),_this50=_super51.call(this,u,new _u({vertexColors:!0,toneMapped:!1})),_this50.type="PolarGridHelper";return _this50;}return ah;}(Ou);var sh=new Qn(),uh=new Qn(),ch=new Qn();var lh=/*#__PURE__*/function(_Jr6){_inherits(lh,_Jr6);var _super52=_createSuper(lh);function lh(e,t,n){var _this51;_classCallCheck(this,lh);_this51=_super52.call(this),_this51.light=e,_this51.light.updateMatrixWorld(),_this51.matrix=e.matrixWorld,_this51.matrixAutoUpdate=!1,_this51.color=n,void 0===t&&(t=1);var r=new Yi();r.setAttribute("position",new Ii([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new _u({fog:!1,toneMapped:!1});_this51.lightPlane=new Cu(r,i),_this51.add(_this51.lightPlane),r=new Yi(),r.setAttribute("position",new Ii([0,0,0,0,0,1],3)),_this51.targetLine=new Cu(r,i),_this51.add(_this51.targetLine),_this51.update();return _this51;}_createClass(lh,[{key:"dispose",value:function dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose();}},{key:"update",value:function update(){sh.setFromMatrixPosition(this.light.matrixWorld),uh.setFromMatrixPosition(this.light.target.matrixWorld),ch.subVectors(uh,sh),this.lightPlane.lookAt(uh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(uh),this.targetLine.scale.z=ch.length();}}]);return lh;}(Jr);var ph=new Qn(),dh=new wo();var hh=/*#__PURE__*/function(_Ou4){_inherits(hh,_Ou4);var _super53=_createSuper(hh);function hh(e){var _this52;_classCallCheck(this,hh);var t=new Yi(),n=new _u({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new xi(16755200),s=new xi(16711680),u=new xi(43775),c=new xi(16777215),l=new xi(3355443);function p(e,t,n){d(e,n),d(t,n);}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1);}p("n1","n2",a),p("n2","n4",a),p("n4","n3",a),p("n3","n1",a),p("f1","f2",a),p("f2","f4",a),p("f4","f3",a),p("f3","f1",a),p("n1","f1",a),p("n2","f2",a),p("n3","f3",a),p("n4","f4",a),p("p","n1",s),p("p","n2",s),p("p","n3",s),p("p","n4",s),p("u1","u2",u),p("u2","u3",u),p("u3","u1",u),p("c","t",c),p("p","c",l),p("cn1","cn2",l),p("cn3","cn4",l),p("cf1","cf2",l),p("cf3","cf4",l),t.setAttribute("position",new Ii(r,3)),t.setAttribute("color",new Ii(i,3)),_this52=_super53.call(this,t,n),_this52.type="CameraHelper",_this52.camera=e,_this52.camera.updateProjectionMatrix&&_this52.camera.updateProjectionMatrix(),_this52.matrix=e.matrixWorld,_this52.matrixAutoUpdate=!1,_this52.pointMap=o,_this52.update();return _this52;}_createClass(hh,[{key:"update",value:function update(){var e=this.geometry,t=this.pointMap;dh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fh("c",t,e,dh,0,0,-1),fh("t",t,e,dh,0,0,1),fh("n1",t,e,dh,-1,-1,-1),fh("n2",t,e,dh,1,-1,-1),fh("n3",t,e,dh,-1,1,-1),fh("n4",t,e,dh,1,1,-1),fh("f1",t,e,dh,-1,-1,1),fh("f2",t,e,dh,1,-1,1),fh("f3",t,e,dh,-1,1,1),fh("f4",t,e,dh,1,1,1),fh("u1",t,e,dh,.7,1.1,-1),fh("u2",t,e,dh,-.7,1.1,-1),fh("u3",t,e,dh,0,2,-1),fh("cf1",t,e,dh,-1,0,1),fh("cf2",t,e,dh,1,0,1),fh("cf3",t,e,dh,0,-1,1),fh("cf4",t,e,dh,0,1,1),fh("cn1",t,e,dh,-1,0,-1),fh("cn2",t,e,dh,1,0,-1),fh("cn3",t,e,dh,0,-1,-1),fh("cn4",t,e,dh,0,1,-1),e.getAttribute("position").needsUpdate=!0;}}]);return hh;}(Ou);function fh(e,t,n,r,i,o,a){ph.set(i,o,a).unproject(r);var s=t[e];if(void 0!==s){var _e379=n.getAttribute("position");for(var _t350=0,_n320=s.length;_t350<_n320;_t350++){_e379.setXYZ(s[_t350],ph.x,ph.y,ph.z);}}}var mh=new tr();var yh=/*#__PURE__*/function(_Ou5){_inherits(yh,_Ou5);var _super54=_createSuper(yh);function yh(e){var _this53;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:16776960;_classCallCheck(this,yh);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Yi();i.setIndex(new Ai(n,1)),i.setAttribute("position",new Ai(r,3)),_this53=_super54.call(this,i,new _u({color:t,toneMapped:!1})),_this53.object=e,_this53.type="BoxHelper",_this53.matrixAutoUpdate=!1,_this53.update();return _this53;}_createClass(yh,[{key:"update",value:function update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&mh.setFromObject(this.object),mh.isEmpty())return;var t=mh.min,n=mh.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere();}},{key:"setFromObject",value:function setFromObject(e){return this.object=e,this.update(),this;}},{key:"copy",value:function copy(e){return Ou.prototype.copy.call(this,e),this.object=e.object,this;}}]);return yh;}(Ou);var gh=/*#__PURE__*/function(_Ou6){_inherits(gh,_Ou6);var _super55=_createSuper(gh);function gh(e){var _this54;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:16776960;_classCallCheck(this,gh);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Yi();r.setIndex(new Ai(n,1)),r.setAttribute("position",new Ii([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),_this54=_super55.call(this,r,new _u({color:t,toneMapped:!1})),_this54.box=e,_this54.type="Box3Helper",_this54.geometry.computeBoundingSphere();return _this54;}_createClass(gh,[{key:"updateMatrixWorld",value:function updateMatrixWorld(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),_get(_getPrototypeOf(gh.prototype),"updateMatrixWorld",this).call(this,e));}}]);return gh;}(Ou);var vh=/*#__PURE__*/function(_Cu){_inherits(vh,_Cu);var _super56=_createSuper(vh);function vh(e){var _this55;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16776960;_classCallCheck(this,vh);var r=n,i=new Yi();i.setAttribute("position",new Ii([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),_this55=_super56.call(this,i,new _u({color:r,toneMapped:!1})),_this55.type="PlaneHelper",_this55.plane=e,_this55.size=t;var o=new Yi();o.setAttribute("position",new Ii([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),_this55.add(new ho(o,new Mi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})));return _this55;}_createClass(vh,[{key:"updateMatrixWorld",value:function updateMatrixWorld(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?y:m,this.lookAt(this.plane.normal),_get(_getPrototypeOf(vh.prototype),"updateMatrixWorld",this).call(this,e);}}]);return vh;}(Cu);var xh=new Qn();var bh,wh;var Sh=/*#__PURE__*/function(_Jr7){_inherits(Sh,_Jr7);var _super57=_createSuper(Sh);function Sh(e,t,n,r,i,o){var _this56;_classCallCheck(this,Sh);_this56=_super57.call(this),_this56.type="ArrowHelper",void 0===e&&(e=new Qn(0,0,1)),void 0===t&&(t=new Qn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===bh&&(bh=new Yi(),bh.setAttribute("position",new Ii([0,0,0,0,1,0],3)),wh=new ec(0,.5,1,5,1),wh.translate(0,-.5,0)),_this56.position.copy(t),_this56.line=new Cu(bh,new _u({color:r,toneMapped:!1})),_this56.line.matrixAutoUpdate=!1,_this56.add(_this56.line),_this56.cone=new ho(wh,new Mi({color:r,toneMapped:!1})),_this56.cone.matrixAutoUpdate=!1,_this56.add(_this56.cone),_this56.setDirection(e),_this56.setLength(n,i,o);return _this56;}_createClass(Sh,[{key:"setDirection",value:function setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{xh.set(e.z,0,-e.x).normalize();var _t351=Math.acos(e.y);this.quaternion.setFromAxisAngle(xh,_t351);}}},{key:"setLength",value:function setLength(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix();}},{key:"setColor",value:function setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e);}},{key:"copy",value:function copy(e){return _get(_getPrototypeOf(Sh.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this;}}]);return Sh;}(Jr);var Mh=/*#__PURE__*/function(_Ou7){_inherits(Mh,_Ou7);var _super58=_createSuper(Mh);function Mh(){var _this57;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;_classCallCheck(this,Mh);var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Yi();n.setAttribute("position",new Ii(t,3)),n.setAttribute("color",new Ii([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),_this57=_super58.call(this,n,new _u({vertexColors:!0,toneMapped:!1})),_this57.type="AxesHelper";return _this57;}return Mh;}(Ou);var _h=new Float32Array(1),Eh=new Int32Array(_h.buffer),Ah={toHalfFloat:function toHalfFloat(e){_h[0]=e;var t=Eh[0];var n=t>>16&32768,r=t>>12&2047;var i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n);}},Th=Math.pow(2,8),Nh=[.125,.215,.35,.446,.526,.582],Dh=5+Nh.length,Ch=(_Ch={},_defineProperty(_Ch,Jt,0),_defineProperty(_Ch,Qt,1),_defineProperty(_Ch,en,2),_defineProperty(_Ch,nn,3),_defineProperty(_Ch,rn,4),_defineProperty(_Ch,on,5),_defineProperty(_Ch,Kt,6),_Ch),Rh=new Rp(),_Hh=Hh(),Ph=_Hh._lodPlanes,Oh=_Hh._sizeLods,Lh=_Hh._sigmas,Ih=new xi();var Bh=null;var Fh=(1+Math.sqrt(5))/2,zh=1/Fh,kh=[new Qn(1,1,1),new Qn(-1,1,1),new Qn(1,1,-1),new Qn(-1,1,-1),new Qn(0,Fh,zh),new Qn(0,Fh,-zh),new Qn(zh,0,Fh),new Qn(-zh,0,Fh),new Qn(Fh,zh,0),new Qn(-Fh,zh,0)];var Uh=/*#__PURE__*/function(){function Uh(e){_classCallCheck(this,Uh);this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(e),n=new Qn(0,1,0);return new vl({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Ch[Jt]},outputEncoding:{value:Ch[Jt]}},vertexShader:Xh(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat(Yh(),"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:b,depthTest:!1,depthWrite:!1});}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial);}_createClass(Uh,[{key:"fromScene",value:function fromScene(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:.1;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:100;Bh=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i;}},{key:"fromEquirectangular",value:function fromEquirectangular(e){return this._fromTexture(e);}},{key:"fromCubemap",value:function fromCubemap(e){return this._fromTexture(e);}},{key:"compileCubemapShader",value:function compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Wh(),this._compileMaterial(this._cubemapShader));}},{key:"compileEquirectangularShader",value:function compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Vh(),this._compileMaterial(this._equirectShader));}},{key:"dispose",value:function dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var _e380=0;_e380<Ph.length;_e380++){Ph[_e380].dispose();}}},{key:"_cleanup",value:function _cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Bh),e.scissorTest=!1,Gh(e,0,0,e.width,e.height);}},{key:"_fromTexture",value:function _fromTexture(e){Bh=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t;}},{key:"_allocateTargets",value:function _allocateTargets(e){var t={magFilter:me,minFilter:me,generateMipmaps:!1,type:Ee,format:He,encoding:jh(e)?e.encoding:en,depthBuffer:!1},n=qh(t);return n.depthBuffer=!e,this._pingPongRenderTarget=qh(t),n;}},{key:"_compileMaterial",value:function _compileMaterial(e){var t=new ho(Ph[0],e);this._renderer.compile(t,Rh);}},{key:"_sceneToCubeUV",value:function _sceneToCubeUV(e,t,n,r){var i=new So(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,u=s.outputEncoding,c=s.toneMapping;s.getClearColor(Ih);var l=s.getClearAlpha();s.toneMapping=K,s.outputEncoding=Jt;var p=e.background;if(p&&p.isColor){p.convertSRGBToLinear();var _t352=Math.max(p.r,p.g,p.b),_n321=Math.min(Math.max(Math.ceil(Math.log2(_t352)),-128),127);p=p.multiplyScalar(Math.pow(2,-_n321));var _r229=(_n321+128)/255;s.setClearColor(p,_r229),e.background=null;}for(var _t353=0;_t353<6;_t353++){var _n322=_t353%3;0==_n322?(i.up.set(0,o[_t353],0),i.lookAt(a[_t353],0,0)):1==_n322?(i.up.set(0,0,o[_t353]),i.lookAt(0,a[_t353],0)):(i.up.set(0,o[_t353],0),i.lookAt(0,0,a[_t353])),Gh(r,_n322*Th,_t353>2?Th:0,Th,Th),s.setRenderTarget(r),s.render(e,i);}s.toneMapping=c,s.outputEncoding=u,s.setClearColor(Ih,l);}},{key:"_textureToCubeUV",value:function _textureToCubeUV(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Wh()):null==this._equirectShader&&(this._equirectShader=Vh());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new ho(Ph[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Ch[e.encoding],o.outputEncoding.value=Ch[t.texture.encoding],Gh(t,0,0,3*Th,2*Th),n.setRenderTarget(t),n.render(i,Rh);}},{key:"_applyPMREM",value:function _applyPMREM(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var _t354=1;_t354<Dh;_t354++){var _n323=Math.sqrt(Lh[_t354]*Lh[_t354]-Lh[_t354-1]*Lh[_t354-1]),_r230=kh[(_t354-1)%kh.length];this._blur(e,_t354-1,_t354,_n323,_r230);}t.autoClear=n;}},{key:"_blur",value:function _blur(e,t,n,r,i){var o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i);}},{key:"_halfBlur",value:function _halfBlur(e,t,n,r,i,o,a){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new ho(Ph[r],u),l=u.uniforms,p=Oh[n]-1,d=isFinite(i)?Math.PI/(2*p):2*Math.PI/39,h=i/d,f=isFinite(i)?1+Math.floor(3*h):20;f>20&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to 20"));var m=[];var y=0;for(var _e381=0;_e381<20;++_e381){var _t355=_e381/h,_n324=Math.exp(-_t355*_t355/2);m.push(_n324),0==_e381?y+=_n324:_e381<f&&(y+=2*_n324);}for(var _e382=0;_e382<m.length;_e382++){m[_e382]=m[_e382]/y;}l.envMap.value=e.texture,l.samples.value=f,l.weights.value=m,l.latitudinal.value="latitudinal"===o,a&&(l.poleAxis.value=a),l.dTheta.value=d,l.mipInt.value=8-n,l.inputEncoding.value=Ch[e.texture.encoding],l.outputEncoding.value=Ch[e.texture.encoding];var g=Oh[r];Gh(t,3*Math.max(0,Th-2*g),(0===r?0:2*Th)+2*g*(r>4?r-8+4:0),3*g,2*g),s.setRenderTarget(t),s.render(c,Rh);}}]);return Uh;}();function jh(e){return void 0!==e&&e.type===Ee&&(e.encoding===Jt||e.encoding===Qt||e.encoding===Kt);}function Hh(){var e=[],t=[],n=[];var r=8;for(var _i177=0;_i177<Dh;_i177++){var _o111=Math.pow(2,r);t.push(_o111);var _a80=1/_o111;_i177>4?_a80=Nh[_i177-8+4-1]:0==_i177&&(_a80=0),n.push(_a80);var _s50=1/(_o111-1),_u34=-_s50/2,_c29=1+_s50/2,_l21=[_u34,_u34,_c29,_u34,_c29,_c29,_u34,_u34,_c29,_c29,_u34,_c29],_p19=6,_d19=6,_h16=3,_f8=2,_m5=1,_y7=new Float32Array(_h16*_d19*_p19),_g6=new Float32Array(_f8*_d19*_p19),_v8=new Float32Array(_m5*_d19*_p19);for(var _e383=0;_e383<_p19;_e383++){var _t356=_e383%3*2/3-1,_n325=_e383>2?0:-1,_r231=[_t356,_n325,0,_t356+2/3,_n325,0,_t356+2/3,_n325+1,0,_t356,_n325,0,_t356+2/3,_n325+1,0,_t356,_n325+1,0];_y7.set(_r231,_h16*_d19*_e383),_g6.set(_l21,_f8*_d19*_e383);var _i178=[_e383,_e383,_e383,_e383,_e383,_e383];_v8.set(_i178,_m5*_d19*_e383);}var _x3=new Yi();_x3.setAttribute("position",new Ai(_y7,_h16)),_x3.setAttribute("uv",new Ai(_g6,_f8)),_x3.setAttribute("faceIndex",new Ai(_v8,_m5)),e.push(_x3),r>4&&r--;}return{_lodPlanes:e,_sizeLods:t,_sigmas:n};}function qh(e){var t=new Zn(3*Th,3*Th,e);return t.texture.mapping=le,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t;}function Gh(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i);}function Vh(){return new vl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new jn(1,1)},inputEncoding:{value:Ch[Jt]},outputEncoding:{value:Ch[Jt]}},vertexShader:Xh(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat(Yh(),"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:b,depthTest:!1,depthWrite:!1});}function Wh(){return new vl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Ch[Jt]},outputEncoding:{value:Ch[Jt]}},vertexShader:Xh(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat(Yh(),"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:b,depthTest:!1,depthWrite:!1});}function Xh(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t";}function Yh(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t";}function Zh(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new bi(e,t,n,i,o,a);}var $h=0,Jh=1,Qh=0,Kh=1,ef=2;function tf(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e;}function nf(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice();},e;}function rf(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Uu(e,t);}function of(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new iu(e);}function af(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Uu(e,t);}function sf(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Iu(e);}function uf(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Iu(e);}function cf(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Iu(e);}function lf(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Qn(e,t,n);}function pf(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ai(e,t).setUsage(Tn);}function df(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ti(e,t);}function hf(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ni(e,t);}function ff(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Di(e,t);}function mf(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ci(e,t);}function yf(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ri(e,t);}function gf(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Pi(e,t);}function vf(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Oi(e,t);}function xf(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ii(e,t);}function bf(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Bi(e,t);}function wf(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),cp.call(this,e),this.type="catmullrom",this.closed=!0;}function Sf(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),cp.call(this,e),this.type="catmullrom";}function Mf(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),cp.call(this,e),this.type="catmullrom";}function _f(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Mh(e);}function Ef(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new yh(e,t);}function Af(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ou(new pc(e.geometry),new _u({color:void 0!==t?t:16777215}));}function Tf(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ou(new ml(e.geometry),new _u({color:void 0!==t?t:16777215}));}function Nf(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Yl(e);}function Df(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Kl(e);}function Cf(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Eo(e,n);}tp.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(tp.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e;},Object.assign(wp.prototype,{createPointsGeometry:function createPointsGeometry(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t);},createSpacedPointsGeometry:function createSpacedPointsGeometry(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t);},createGeometry:function createGeometry(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=new $u();for(var _n326=0,_r232=e.length;_n326<_r232;_n326++){var _r233=e[_n326];t.vertices.push(new Qn(_r233.x,_r233.y,_r233.z||0));}return t;}}),Object.assign(Sp.prototype,{fromPoints:function fromPoints(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e);}}),wf.prototype=Object.create(cp.prototype),Sf.prototype=Object.create(cp.prototype),Mf.prototype=Object.create(cp.prototype),Object.assign(Mf.prototype,{initFromArray:function initFromArray(){console.error("THREE.Spline: .initFromArray() has been removed.");},getControlPointsArray:function getControlPointsArray(){console.error("THREE.Spline: .getControlPointsArray() has been removed.");},reparametrizeByArcLength:function reparametrizeByArcLength(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.");}}),oh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.");},Kd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.");},Object.assign(Wl.prototype,{extractUrlBase:function extractUrlBase(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),kp.extractUrlBase(e);}}),Wl.Handlers={add:function add(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.");},get:function get(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.");}},Object.assign(qd.prototype,{center:function center(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e);},empty:function empty(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty();},isIntersectionBox:function isIntersectionBox(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e);},size:function size(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e);}}),Object.assign(tr.prototype,{center:function center(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e);},empty:function empty(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty();},isIntersectionBox:function isIntersectionBox(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e);},isIntersectionSphere:function isIntersectionSphere(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e);},size:function size(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e);}}),Object.assign(gr.prototype,{empty:function empty(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty();}}),Do.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e);},Wd.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e);},Object.assign(Un,{random16:function random16(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random();},nearestPowerOfTwo:function nearestPowerOfTwo(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Un.floorPowerOfTwo(e);},nextPowerOfTwo:function nextPowerOfTwo(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Un.ceilPowerOfTwo(e);}}),Object.assign(Hn.prototype,{flattenToArrayOffset:function flattenToArrayOffset(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t);},multiplyVector3:function multiplyVector3(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this);},multiplyVector3Array:function multiplyVector3Array(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.");},applyToBufferAttribute:function applyToBufferAttribute(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this);},applyToVector3Array:function applyToVector3Array(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.");},getInverse:function getInverse(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert();}}),Object.assign(Ar.prototype,{extractPosition:function extractPosition(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e);},flattenToArrayOffset:function flattenToArrayOffset(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t);},getPosition:function getPosition(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Qn().setFromMatrixColumn(this,3);},setRotationFromQuaternion:function setRotationFromQuaternion(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e);},multiplyToArray:function multiplyToArray(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.");},multiplyVector3:function multiplyVector3(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this);},multiplyVector4:function multiplyVector4(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this);},multiplyVector3Array:function multiplyVector3Array(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.");},rotateAxis:function rotateAxis(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this);},crossVector:function crossVector(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this);},translate:function translate(){console.error("THREE.Matrix4: .translate() has been removed.");},rotateX:function rotateX(){console.error("THREE.Matrix4: .rotateX() has been removed.");},rotateY:function rotateY(){console.error("THREE.Matrix4: .rotateY() has been removed.");},rotateZ:function rotateZ(){console.error("THREE.Matrix4: .rotateZ() has been removed.");},rotateByAxis:function rotateByAxis(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.");},applyToBufferAttribute:function applyToBufferAttribute(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this);},applyToVector3Array:function applyToVector3Array(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.");},makeFrustum:function makeFrustum(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o);},getInverse:function getInverse(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert();}}),ti.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e);},Object.assign(Jn.prototype,{multiplyVector3:function multiplyVector3(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this);},inverse:function inverse(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert();}}),Object.assign(Er.prototype,{isIntersectionBox:function isIntersectionBox(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e);},isIntersectionPlane:function isIntersectionPlane(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e);},isIntersectionSphere:function isIntersectionSphere(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e);}}),Object.assign(di.prototype,{area:function area(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea();},barycoordFromPoint:function barycoordFromPoint(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t);},midpoint:function midpoint(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e);},normal:function normal(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e);},plane:function plane(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e);}}),Object.assign(di,{barycoordFromPoint:function barycoordFromPoint(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),di.getBarycoord(e,t,n,r,i);},normal:function normal(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),di.getNormal(e,t,n,r);}}),Object.assign(Mp.prototype,{extractAllPoints:function extractAllPoints(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e);},extrude:function extrude(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Hc(this,e);},makeGeometry:function makeGeometry(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new nl(this,e);}}),Object.assign(jn.prototype,{fromAttribute:function fromAttribute(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n);},distanceToManhattan:function distanceToManhattan(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e);},lengthManhattan:function lengthManhattan(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength();}}),Object.assign(Qn.prototype,{setEulerFromRotationMatrix:function setEulerFromRotationMatrix(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.");},setEulerFromQuaternion:function setEulerFromQuaternion(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.");},getPositionFromMatrix:function getPositionFromMatrix(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e);},getScaleFromMatrix:function getScaleFromMatrix(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e);},getColumnFromMatrix:function getColumnFromMatrix(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e);},applyProjection:function applyProjection(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e);},fromAttribute:function fromAttribute(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n);},distanceToManhattan:function distanceToManhattan(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e);},lengthManhattan:function lengthManhattan(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength();}}),Object.assign(Yn.prototype,{fromAttribute:function fromAttribute(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n);},lengthManhattan:function lengthManhattan(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength();}}),Object.assign($u.prototype,{computeTangents:function computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.");},computeLineDistances:function computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.");},applyMatrix:function applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e);}}),Object.assign(Jr.prototype,{getChildByName:function getChildByName(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e);},renderDepth:function renderDepth(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.");},translate:function translate(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e);},getWorldRotation:function getWorldRotation(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.");},applyMatrix:function applyMatrix(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e);}}),Object.defineProperties(Jr.prototype,{eulerOrder:{get:function get(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order;},set:function set(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e;}},useQuaternion:{get:function get(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.");},set:function set(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.");}}}),Object.assign(ho.prototype,{setDrawMode:function setDrawMode(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.");}}),Object.defineProperties(ho.prototype,{drawMode:{get:function get(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Yt;},set:function set(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.");}}}),Object.defineProperties(uu.prototype,{objects:{get:function get(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels;}}}),Object.defineProperty(vu.prototype,"useVertexTexture",{get:function get(){console.warn("THREE.Skeleton: useVertexTexture has been removed.");},set:function set(){console.warn("THREE.Skeleton: useVertexTexture has been removed.");}}),fu.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.");},Object.defineProperty(tp.prototype,"__arcLengthDivisions",{get:function get(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions;},set:function set(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e;}}),So.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e);},Object.defineProperties(_p.prototype,{onlyShadow:{set:function set(){console.warn("THREE.Light: .onlyShadow has been removed.");}},shadowCameraFov:{set:function set(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e;}},shadowCameraLeft:{set:function set(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e;}},shadowCameraRight:{set:function set(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e;}},shadowCameraTop:{set:function set(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e;}},shadowCameraBottom:{set:function set(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e;}},shadowCameraNear:{set:function set(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e;}},shadowCameraFar:{set:function set(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e;}},shadowCameraVisible:{set:function set(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.");}},shadowBias:{set:function set(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e;}},shadowDarkness:{set:function set(){console.warn("THREE.Light: .shadowDarkness has been removed.");}},shadowMapWidth:{set:function set(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e;}},shadowMapHeight:{set:function set(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e;}}}),Object.defineProperties(Ai.prototype,{length:{get:function get(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length;}},dynamic:{get:function get(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Tn;},set:function set(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Tn);}}}),Object.assign(Ai.prototype,{setDynamic:function setDynamic(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Tn:An),this;},copyIndicesArray:function copyIndicesArray(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.");},setArray:function setArray(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers");}}),Object.assign(Yi.prototype,{addIndex:function addIndex(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e);},addAttribute:function addAttribute(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ai(arguments[1],arguments[2])));},addDrawCall:function addDrawCall(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t);},clearDrawCalls:function clearDrawCalls(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups();},computeTangents:function computeTangents(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.");},computeOffsets:function computeOffsets(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.");},removeAttribute:function removeAttribute(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e);},applyMatrix:function applyMatrix(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e);}}),Object.defineProperties(Yi.prototype,{drawcalls:{get:function get(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups;}},offsets:{get:function get(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups;}}}),Object.defineProperties(Up.prototype,{maxInstancedCount:{get:function get(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount;},set:function set(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e;}}}),Object.defineProperties(Fd.prototype,{linePrecision:{get:function get(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold;},set:function set(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e;}}}),Object.defineProperties(js.prototype,{dynamic:{get:function get(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Tn;},set:function set(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e);}}}),Object.assign(js.prototype,{setDynamic:function setDynamic(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Tn:An),this;},setArray:function setArray(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers");}}),Object.assign(Uc.prototype,{getArrays:function getArrays(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.");},addShapeList:function addShapeList(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.");},addShape:function addShape(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.");}}),Object.assign(Us.prototype,{dispose:function dispose(){console.error("THREE.Scene: .dispose() has been removed.");}}),Object.defineProperties(Ld.prototype,{dynamic:{set:function set(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.");}},onUpdate:{value:function value(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this;}}}),Object.defineProperties(Si.prototype,{wrapAround:{get:function get(){console.warn("THREE.Material: .wrapAround has been removed.");},set:function set(){console.warn("THREE.Material: .wrapAround has been removed.");}},overdraw:{get:function get(){console.warn("THREE.Material: .overdraw has been removed.");},set:function set(){console.warn("THREE.Material: .overdraw has been removed.");}},wrapRGB:{get:function get(){return console.warn("THREE.Material: .wrapRGB has been removed."),new xi();}},shading:{get:function get(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");},set:function set(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===v;}},stencilMask:{get:function get(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask;},set:function set(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e;}}}),Object.defineProperties(wl.prototype,{metal:{get:function get(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1;},set:function set(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead");}}}),Object.defineProperties(bl.prototype,{transparency:{get:function get(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission;},set:function set(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e;}}}),Object.defineProperties(bo.prototype,{derivatives:{get:function get(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives;},set:function set(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e;}}}),Object.assign(Bs.prototype,{clearTarget:function clearTarget(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r);},animate:function animate(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e);},getCurrentRenderTarget:function getCurrentRenderTarget(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget();},getMaxAnisotropy:function getMaxAnisotropy(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy();},getPrecision:function getPrecision(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision;},resetGLState:function resetGLState(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset();},supportsFloatTextures:function supportsFloatTextures(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float");},supportsHalfFloatTextures:function supportsHalfFloatTextures(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float");},supportsStandardDerivatives:function supportsStandardDerivatives(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives");},supportsCompressedTextureS3TC:function supportsCompressedTextureS3TC(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc");},supportsCompressedTexturePVRTC:function supportsCompressedTexturePVRTC(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc");},supportsBlendMinMax:function supportsBlendMinMax(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax");},supportsVertexTextures:function supportsVertexTextures(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures;},supportsInstancedArrays:function supportsInstancedArrays(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays");},enableScissorTest:function enableScissorTest(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e);},initMaterial:function initMaterial(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.");},addPrePlugin:function addPrePlugin(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.");},addPostPlugin:function addPostPlugin(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.");},updateShadowMap:function updateShadowMap(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.");},setFaceCulling:function setFaceCulling(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.");},allocTextureUnit:function allocTextureUnit(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.");},setTexture:function setTexture(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.");},setTexture2D:function setTexture2D(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.");},setTextureCube:function setTextureCube(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.");},getActiveMipMapLevel:function getActiveMipMapLevel(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel();}}),Object.defineProperties(Bs.prototype,{shadowMapEnabled:{get:function get(){return this.shadowMap.enabled;},set:function set(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e;}},shadowMapType:{get:function get(){return this.shadowMap.type;},set:function set(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e;}},shadowMapCullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.");},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.");}},context:{get:function get(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext();}},vr:{get:function get(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr;}},gammaInput:{get:function get(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1;},set:function set(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");}},gammaOutput:{get:function get(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1;},set:function set(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Qt:Jt;}},toneMappingWhitePoint:{get:function get(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1;},set:function set(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");}}}),Object.defineProperties(Ts.prototype,{cullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.");},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.");}},renderReverseSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.");},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.");}},renderSingleSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.");},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.");}}}),Object.defineProperties(Zn.prototype,{wrapS:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e;}},wrapT:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e;}},magFilter:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e;}},minFilter:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e;}},anisotropy:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e;}},offset:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e;}},repeat:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e;}},format:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e;}},type:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e;}},generateMipmaps:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps;},set:function set(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e;}}}),Object.defineProperties(hd.prototype,{load:{value:function value(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return new ed().load(e,function(e){t.setBuffer(e);}),this;}},startTime:{set:function set(){console.warn("THREE.Audio: .startTime is now .play( delay ).");}}}),xd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData();},Mo.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t);},Mo.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r);};var Rf={merge:function merge(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n);},center:function center(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center();}};function Pf(){console.error("THREE.CanvasRenderer has been removed");}function Of(){console.error("THREE.JSONLoader has been removed.");}Gn.crossOrigin=void 0,Gn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new ep();i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o;},Gn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ql();i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o;},Gn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.");},Gn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.");};var Lf={createMultiMaterialObject:function createMultiMaterialObject(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js");},detach:function detach(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js");},attach:function attach(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js");}};function If(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js");}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}}));var Bf=n(1),Ff=n.n(Bf);var zf=function(){function e(e){Wl.call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new a(e);}),this.register(function(e){return new u(e);}),this.register(function(e){return new c(e);}),this.register(function(e){return new s(e);}),this.register(function(e){return new i(e);}),this.register(function(e){return new l(e);});}function t(){var e={};return{get:function get(t){return e[t];},add:function add(t,n){e[t]=n;},remove:function remove(t){delete e[t];},removeAll:function removeAll(){e={};}};}e.prototype=Object.assign(Object.create(Wl.prototype),{constructor:e,load:function load(e,t,n,r){var i,o=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:kp.extractUrlBase(e),this.manager.itemStart(e);var a=function a(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e);},s=new Yl(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{o.parse(n,i,function(n){t(n),o.manager.itemEnd(e);},a);}catch(e){a(e);}},n,a);},setDRACOLoader:function setDRACOLoader(e){return this.dracoLoader=e,this;},setDDSLoader:function setDDSLoader(e){return this.ddsLoader=e,this;},setKTX2Loader:function setKTX2Loader(e){return this.ktx2Loader=e,this;},setMeshoptDecoder:function setMeshoptDecoder(e){return this.meshoptDecoder=e,this;},register:function register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this;},unregister:function unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this;},parse:function parse(e,t,i,a){var s,u={},c={};if("string"==typeof e)s=e;else if(kp.decodeText(new Uint8Array(e,0,4))===p){try{u[n.KHR_BINARY_GLTF]=new f(e);}catch(e){return void(a&&a(e));}s=u[n.KHR_BINARY_GLTF].content;}else s=kp.decodeText(new Uint8Array(e));var l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var d=new V(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(var h=0;h<this.pluginCallbacks.length;h++){var m=this.pluginCallbacks[h](d);c[m.name]=m,u[m.name]=!0;}if(l.extensionsUsed)for(h=0;h<l.extensionsUsed.length;++h){var g=l.extensionsUsed[h],x=l.extensionsRequired||[];switch(g){case n.KHR_MATERIALS_UNLIT:u[g]=new o();break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:u[g]=new b();break;case n.KHR_DRACO_MESH_COMPRESSION:u[g]=new y(l,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:u[g]=new r(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:u[g]=new v();break;case n.KHR_MESH_QUANTIZATION:u[g]=new w();break;default:x.indexOf(g)>=0&&void 0===c[g]&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".');}}d.setExtensions(u),d.setPlugins(c),d.parse(i,a);}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e;}function i(e){this.parser=e,this.name=n.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}};}function o(){this.name=n.KHR_MATERIALS_UNLIT;}function a(e){this.parser=e,this.name=n.KHR_MATERIALS_CLEARCOAT;}function s(e){this.parser=e,this.name=n.KHR_MATERIALS_TRANSMISSION;}function u(e){this.parser=e,this.name=n.KHR_TEXTURE_BASISU;}function c(e){this.parser=e,this.name=n.EXT_TEXTURE_WEBP,this.isSupported=null;}function l(e){this.name=n.EXT_MESHOPT_COMPRESSION,this.parser=e;}i.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light);}},i.prototype._loadLight=function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,o=t.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],s=new xi(16777215);void 0!==a.color&&s.fromArray(a.color);var u=void 0!==a.range?a.range:0;switch(a.type){case"directional":(i=new Op(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new Cp(s)).distance=u;break;case"spot":(i=new Np(s)).distance=u,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,i.angle=a.spot.outerConeAngle,i.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type);}return i.position.set(0,0,0),i.decay=2,void 0!==a.intensity&&(i.intensity=a.intensity),i.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r;},i.prototype.createNodeAttachment=function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return n._getNodeRef(t.cache,i,e);});},o.prototype.getMaterialType=function(){return Mi;},o.prototype.extendParams=function(e,t,n){var r=[];e.color=new xi(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var o=i.baseColorFactor;e.color.fromArray(o),e.opacity=o[3];}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture));}return Promise.all(r);},a.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?bl:null;},a.prototype.extendMaterialParams=function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){var a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new jn(a,a);}return Promise.all(i);},s.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?bl:null;},s.prototype.extendMaterialParams=function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i);},u.prototype.loadTexture=function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],o=n.images[i.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null;}return t.loadTextureImage(e,o,a);},c.prototype.loadTexture=function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var o=i.extensions[t],a=r.images[o.source],s=a.uri?n.options.manager.getHandler(a.uri):n.textureLoader;return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e);});},c.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise(function(e){var t=new Image();t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height);};})),this.isSupported;},l.prototype.loadBufferView=function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null;}return Promise.all([i,o.ready]).then(function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,a=r.byteStride,s=new ArrayBuffer(i*a),u=new Uint8Array(e[0],t,n);return o.decodeGltfBuffer(new Uint8Array(s),i,a,u,r.mode,r.filter),s;});}return null;};var p="glTF",d=1313821514,h=5130562;function f(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:kp.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==p)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=new DataView(e,12),i=0;i<r.byteLength;){var o=r.getUint32(i,!0);i+=4;var a=r.getUint32(i,!0);if(i+=4,a===d){var s=new Uint8Array(e,12+i,o);this.content=kp.decodeText(s);}else if(a===h){var u=12+i;this.body=e.slice(u,u+o);}i+=o;}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.");}function y(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload();}function v(){this.name=n.KHR_TEXTURE_TRANSFORM;}function x(e){xl.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:new xi().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(var s in a){e.uniforms[s]=a[s];}e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",o);},Object.defineProperties(this,{specular:{get:function get(){return a.specular.value;},set:function set(e){a.specular.value=e;}},specularMap:{get:function get(){return a.specularMap.value;},set:function set(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP;}},glossiness:{get:function get(){return a.glossiness.value;},set:function set(e){a.glossiness.value=e;}},glossinessMap:{get:function get(){return a.glossinessMap.value;},set:function set(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV);}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e);}function b(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function getMaterialType(){return x;},extendParams:function extendParams(e,t,n){var r=t.extensions[this.name];e.color=new xi(1,1,1),e.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3];}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new xi(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new xi(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var a=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",a)),i.push(n.assignTexture(e,"specularMap",a));}return Promise.all(i);},createMaterial:function createMaterial(e){var t=new x(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=un,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t;}};}function w(){this.name=n.KHR_MESH_QUANTIZATION;}function S(e,t,n,r){Dl.call(this,e,t,n,r);}y.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},u={};for(var c in o){var l=L[c]||c.toLowerCase();a[l]=o[c];}for(c in e.attributes){l=L[c]||c.toLowerCase();if(void 0!==o[c]){var p=n.accessors[e.attributes[c]],d=C[p.componentType];u[l]=d,s[l]=!0===p.normalized;}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){r.decodeDracoFile(e,function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i);}t(e);},a,u);});});},v.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e;},x.prototype=Object.create(xl.prototype),x.prototype.constructor=x,x.prototype.copy=function(e){return xl.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this;},S.prototype=Object.create(Dl.prototype),S.prototype.constructor=S,S.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++){t[o]=n[i+o];}return t;},S.prototype.beforeStart_=S.prototype.copySampleValue_,S.prototype.afterEnd_=S.prototype.copySampleValue_,S.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,c=r-t,l=(n-t)/c,p=l*l,d=p*l,h=e*u,f=h-u,m=-2*d+3*p,y=d-p,g=1-m,v=y-p+l,x=0;x!==a;x++){var b=o[f+x+a],w=o[f+x+s]*c,S=o[h+x+a],M=o[h+x]*c;i[x]=g*b+v*w+m*S+y*M;}return i;};var M=0,_=1,E=2,A=3,T=4,N=5,D=6,C={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},R={9728:me,9729:be,9984:ye,9985:we,9986:ve,9987:Me},P={33071:he,33648:fe,10497:de},O={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},L={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},I={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},B={CUBICSPLINE:void 0,LINEAR:jt,STEP:Ut},F="OPAQUE",z="MASK",k="BLEND";function U(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e);}function j(e,t,n){for(var r in n.extensions){void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r]);}}function H(e,t){void 0!==t.extras&&("object"==_typeof(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras));}function q(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++){e.morphTargetInfluences[n]=t.weights[n];}if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++){e.morphTargetDictionary[i[n]]=n;}}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");}}function G(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++){t+=n[r]+":"+e[n[r]]+";";}return t;}function V(e,n){this.json=e||{},this.extensions={},this.plugins={},this.options=n||{},this.cache=new t(),this.associations=new Map(),this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new Xp(this.options.manager):this.textureLoader=new ep(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Yl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0);}function W(e,t,n){var r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t);});}for(var a in r){var s=L[a]||a.toLowerCase();s in e.attributes||i.push(o(r[a],s));}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t);});i.push(u);}return H(e,t),function(e,t,n){var r=t.attributes,i=new tr();if(void 0!==r.POSITION){var o=(h=n.json.accessors[r.POSITION]).min,a=h.max;if(void 0!==o&&void 0!==a){i.set(new Qn(o[0],o[1],o[2]),new Qn(a[0],a[1],a[2]));var s=t.targets;if(void 0!==s){for(var u=new Qn(),c=new Qn(),l=0,p=s.length;l<p;l++){var d=s[l];if(void 0!==d.POSITION){var h;o=(h=n.json.accessors[d.POSITION]).min,a=h.max;void 0!==o&&void 0!==a?(c.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),c.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),c.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),u.max(c)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");}}i.expandByVector(u);}e.boundingBox=i;var f=new gr();i.getCenter(f.center),f.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=f;}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");}}(e,t,n),Promise.all(i).then(function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a;o++){if(void 0!==(c=t[o]).POSITION&&(r=!0),void 0!==c.NORMAL&&(i=!0),r&&i)break;}if(!r&&!i)return Promise.resolve(e);var s=[],u=[];for(o=0,a=t.length;o<a;o++){var c=t[o];if(r){var l=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;s.push(l);}if(i){l=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;u.push(l);}}return Promise.all([Promise.all(s),Promise.all(u)]).then(function(t){var n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e;});}(e,t.targets,n):e;});}function X(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var o=0;o<i.count;o++){r.push(o);}e.setIndex(r),n=e.getIndex();}var a=n.count-2,s=[];if(t===$t)for(o=1;o<=a;o++){s.push(n.getX(0)),s.push(n.getX(o)),s.push(n.getX(o+1));}else for(o=0;o<a;o++){o%2==0?(s.push(n.getX(o)),s.push(n.getX(o+1)),s.push(n.getX(o+2))):(s.push(n.getX(o+2)),s.push(n.getX(o+1)),s.push(n.getX(o)));}s.length/3!==a&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=e.clone();return u.setIndex(s),u;}return V.prototype.setExtensions=function(e){this.extensions=e;},V.prototype.setPlugins=function(e){this.plugins=e;},V.prototype.parse=function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(e){return e._markDefs&&e._markDefs();}),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};j(i,o,r),H(o,r),e(o);})["catch"](t);},V.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++){for(var o=t[r].joints,a=0,s=o.length;a<s;a++){e[o[a]].isBone=!0;}}for(var u=0,c=e.length;u<c;u++){var l=e[u];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera);}},V.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++);},V.prototype._getNodeRef=function(e,t,n){if(e.refs[t]<=1)return n;var r=n.clone();return r.name+="_instance_"+e.uses[t]++,r;},V.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r;}},V.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i);}return n;},V.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t);});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t);});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t);});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t);});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e);}this.cache.add(n,r);}return r;},V.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r);})),this.cache.add(e,t);}return t;},V.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise(function(e,n){r.load(U(t.uri,i.path),e,void 0,function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'));});});},V.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n);});},V.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(e){var i,o=e[0],a=O[r.type],s=C[r.componentType],u=s.BYTES_PER_ELEMENT,c=u*a,l=r.byteOffset||0,p=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(p&&p!==c){var h=Math.floor(l/p),f="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+h+":"+r.count,m=t.cache.get(f);m||(m=new js(new s(o,h*p,r.count*p/u),p/u),t.cache.add(f,m)),i=new qs(m,a,l%p/u,d);}else i=new Ai(null===o?new s(r.count*a):new s(o,l,r.count*a),a,d);if(void 0!==r.sparse){var y=O.SCALAR,g=C[r.sparse.indices.componentType],v=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,b=new g(e[1],v,r.sparse.count*y),w=new s(e[2],x,r.sparse.count*a);null!==o&&(i=new Ai(i.array.slice(),i.itemSize,i.normalized));for(var S=0,M=b.length;S<M;S++){var _=b[S];if(i.setX(_,w[S*a]),a>=2&&i.setY(_,w[S*a+1]),a>=3&&i.setZ(_,w[S*a+2]),a>=4&&i.setW(_,w[S*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");}}return i;});},V.prototype.loadTexture=function(e){var t,r,i=this.json,o=this.options,a=i.textures[e],s=a.extensions||{};return(t=s[n.MSFT_TEXTURE_DDS]?i.images[s[n.MSFT_TEXTURE_DDS].source]:i.images[a.source]).uri&&(r=o.manager.getHandler(t.uri)),r||(r=s[n.MSFT_TEXTURE_DDS]?this.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,r);},V.prototype.loadTextureImage=function(e,t,n){var r=this,i=this.json,o=this.options,a=i.textures[e],s=self.URL||self.webkitURL,u=t.uri,c=!1,l=!0;return"image/jpeg"===t.mimeType&&(l=!1),void 0!==t.bufferView&&(u=r.getDependency("bufferView",t.bufferView).then(function(e){if("image/png"===t.mimeType){var n=new DataView(e,25,1).getUint8(0,!1);l=6===n||4===n||3===n;}c=!0;var r=new Blob([e],{type:t.mimeType});return u=s.createObjectURL(r);})),Promise.resolve(u).then(function(e){return new Promise(function(t,r){var i=t;!0===n.isImageBitmapLoader&&(i=function i(e){t(new Gu(e));}),n.load(U(e,o.path),i,void 0,r);});}).then(function(t){!0===c&&s.revokeObjectURL(u),t.flipY=!1,a.name&&(t.name=a.name),l||(t.format=ze);var n=(i.samplers||{})[a.sampler]||{};return t.magFilter=R[n.magFilter]||be,t.minFilter=R[n.minFilter]||Me,t.wrapS=P[n.wrapS]||de,t.wrapT=P[n.wrapT]||de,r.associations.set(t,{type:"textures",index:e}),t;});},V.prototype.assignTexture=function(e,t,r){var i=this;return this.getDependency("texture",r.index).then(function(o){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),i.extensions[n.KHR_TEXTURE_TRANSFORM]){var a=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var s=i.associations.get(o);o=i.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),i.associations.set(o,s);}}e[t]=o;});},V.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,r=void 0!==t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal,a=!0===e.isSkinnedMesh,s=Object.keys(t.morphAttributes).length>0,u=s&&void 0!==t.morphAttributes.normal;if(e.isPoints){var c="PointsMaterial:"+n.uuid,l=this.cache.get(c);l||(l=new Iu(),Si.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(c,l)),n=l;}else if(e.isLine){c="LineBasicMaterial:"+n.uuid;var p=this.cache.get(c);p||(p=new _u(),Si.prototype.copy.call(p,n),p.color.copy(n.color),this.cache.add(c,p)),n=p;}if(r||i||o||a||s){c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),a&&(c+="skinning:"),r&&(c+="vertex-tangents:"),i&&(c+="vertex-colors:"),o&&(c+="flat-shading:"),s&&(c+="morph-targets:"),u&&(c+="morph-normals:");var d=this.cache.get(c);d||(d=n.clone(),a&&(d.skinning=!0),r&&(d.vertexTangents=!0),i&&(d.vertexColors=!0),o&&(d.flatShading=!0),s&&(d.morphTargets=!0),u&&(d.morphNormals=!0),this.cache.add(c,d),this.associations.set(d,this.associations.get(n))),n=d;}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!r&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),e.material=n;},V.prototype.getMaterialType=function(){return xl;},V.prototype.loadMaterial=function(e){var t,r=this,i=this.json,o=this.extensions,a=i.materials[e],s={},u=a.extensions||{},c=[];if(u[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(),c.push(l.extendParams(s,a,r));}else if(u[n.KHR_MATERIALS_UNLIT]){var p=o[n.KHR_MATERIALS_UNLIT];t=p.getMaterialType(),c.push(p.extendParams(s,a,r));}else{var d=a.pbrMetallicRoughness||{};if(s.color=new xi(1,1,1),s.opacity=1,Array.isArray(d.baseColorFactor)){var h=d.baseColorFactor;s.color.fromArray(h),s.opacity=h[3];}void 0!==d.baseColorTexture&&c.push(r.assignTexture(s,"map",d.baseColorTexture)),s.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,s.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(r.assignTexture(s,"metalnessMap",d.metallicRoughnessTexture)),c.push(r.assignTexture(s,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e);}),c.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s);})));}!0===a.doubleSided&&(s.side=g);var f=a.alphaMode||F;return f===k?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,f===z&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==Mi&&(c.push(r.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new jn(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&t!==Mi&&(c.push(r.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==Mi&&(s.emissive=new xi().fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==Mi&&c.push(r.assignTexture(s,"emissiveMap",a.emissiveTexture)),Promise.all(c).then(function(){var i;return i=t===x?o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),a.name&&(i.name=a.name),i.map&&(i.map.encoding=Qt),i.emissiveMap&&(i.emissiveMap.encoding=Qt),H(i,a),r.associations.set(i,{type:"materials",index:e}),a.extensions&&j(o,i,a),i;});},V.prototype.createUniqueName=function(e){for(var t=Cd.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r){n=t+"_"+r;}return this.nodeNamesUsed[n]=!0,n;},V.prototype.loadGeometries=function(e){var t=this,r=this.extensions,i=this.primitiveCache;function o(e){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return W(n,e,t);});}for(var a,s,u=[],c=0,l=e.length;c<l;c++){var p,d=e[c],h=(s=void 0,(s=(a=d).extensions&&a.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+s.bufferView+":"+s.indices+":"+G(s.attributes):a.indices+":"+G(a.attributes)+":"+a.mode),f=i[h];if(f)u.push(f.promise);else p=d.extensions&&d.extensions[n.KHR_DRACO_MESH_COMPRESSION]?o(d):W(new Yi(),d,t),i[h]={primitive:d,promise:p},u.push(p);}return Promise.all(u);},V.prototype.loadMesh=function(e){for(var t,n=this,r=this.json,i=this.extensions,o=r.meshes[e],a=o.primitives,s=[],u=0,c=a.length;u<c;u++){var l=void 0===a[u].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new xl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:m})),t.DefaultMaterial):this.getDependency("material",a[u].material);s.push(l);}return s.push(n.loadGeometries(a)),Promise.all(s).then(function(t){for(var r=t.slice(0,t.length-1),s=t[t.length-1],u=[],c=0,l=s.length;c<l;c++){var p,d=s[c],h=a[c],f=r[c];if(h.mode===T||h.mode===N||h.mode===D||void 0===h.mode)!0!==(p=!0===o.isSkinnedMesh?new fu(d,f):new ho(d,f)).isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),h.mode===N?p.geometry=X(p.geometry,Zt):h.mode===D&&(p.geometry=X(p.geometry,$t));else if(h.mode===_)p=new Ou(d,f);else if(h.mode===A)p=new Cu(d,f);else if(h.mode===E)p=new Lu(d,f);else{if(h.mode!==M)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);p=new Uu(d,f);}Object.keys(p.geometry.morphAttributes).length>0&&q(p,o),p.name=n.createUniqueName(o.name||"mesh_"+e),H(p,o),h.extensions&&j(i,p,h),n.assignFinalMaterial(p),u.push(p);}if(1===u.length)return u[0];var m=new Ps();for(c=0,l=u.length;c<l;c++){m.add(u[c]);}return m;});},V.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new So(Un.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Rp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),H(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.");},V.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n;});},V.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],r=[],i=[],o=[],a=[],s=0,u=t.channels.length;s<u;s++){var c=t.channels[s],l=t.samplers[c.sampler],p=c.target,d=void 0!==p.node?p.node:p.id,h=void 0!==t.parameters?t.parameters[l.input]:l.input,f=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",h)),i.push(this.getDependency("accessor",f)),o.push(l),a.push(p);}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a)]).then(function(n){for(var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=[],c=0,l=r.length;c<l;c++){var p=r[c],d=i[c],h=o[c],f=a[c],m=s[c];if(void 0!==p){var y;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,I[m.path]){case I.weights:y=Bl;break;case I.rotation:y=zl;break;case I.position:case I.scale:default:y=Ul;}var g=p.name?p.name:p.uuid,v=void 0!==f.interpolation?B[f.interpolation]:jt,x=[];I[m.path]===I.weights?p.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid);}):x.push(g);var b=h.array;if(h.normalized){var w;if(b.constructor===Int8Array)w=1/127;else if(b.constructor===Uint8Array)w=1/255;else if(b.constructor==Int16Array)w=1/32767;else{if(b.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");w=1/65535;}for(var M=new Float32Array(b.length),_=0,E=b.length;_<E;_++){M[_]=b[_]*w;}b=M;}for(_=0,E=x.length;_<E;_++){var A=new y(x[_]+"."+I[m.path],d.array,b,v);"CUBICSPLINE"===f.interpolation&&(A.createInterpolant=function(e){return new S(this.times,this.values,this.getValueSize()/3,e);},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(A);}}}return new jl(t.name?t.name:"animation_"+e,void 0,u);});},V.prototype.loadNode=function(e){var t,n=this.json,r=this.extensions,i=this,o=n.nodes[e],a=o.name?i.createUniqueName(o.name):"";return(t=[],void 0!==o.mesh&&t.push(i.getDependency("mesh",o.mesh).then(function(e){var t=i._getNodeRef(i.meshCache,o.mesh,e);return void 0!==o.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,n=o.weights.length;t<n;t++){e.morphTargetInfluences[t]=o.weights[t];}}),t;})),void 0!==o.camera&&t.push(i.getDependency("camera",o.camera).then(function(e){return i._getNodeRef(i.cameraCache,o.camera,e);})),i._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e);}).forEach(function(e){t.push(e);}),Promise.all(t)).then(function(t){var n;if((n=!0===o.isBone?new mu():t.length>1?new Ps():1===t.length?t[0]:new Jr())!==t[0])for(var s=0,u=t.length;s<u;s++){n.add(t[s]);}if(o.name&&(n.userData.name=o.name,n.name=a),H(n,o),o.extensions&&j(r,n,o),void 0!==o.matrix){var c=new Ar();c.fromArray(o.matrix),n.applyMatrix4(c);}else void 0!==o.translation&&n.position.fromArray(o.translation),void 0!==o.rotation&&n.quaternion.fromArray(o.rotation),void 0!==o.scale&&n.scale.fromArray(o.scale);return i.associations.set(n,{type:"nodes",index:e}),n;});},V.prototype.loadScene=function(){function e(t,n,r,i){var o=r.nodes[t];return i.getDependency("node",t).then(function(e){return void 0===o.skin?e:i.getDependency("skin",o.skin).then(function(e){for(var n=[],r=0,o=(t=e).joints.length;r<o;r++){n.push(i.getDependency("node",t.joints[r]));}return Promise.all(n);}).then(function(n){return e.traverse(function(e){if(e.isMesh){for(var r=[],i=[],o=0,a=n.length;o<a;o++){var s=n[o];if(s){r.push(s);var u=new Ar();void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*o),i.push(u);}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o]);}e.bind(new vu(r,i),e.matrixWorld);}}),e;});var t;}).then(function(t){n.add(t);var a=[];if(o.children)for(var s=o.children,u=0,c=s.length;u<c;u++){var l=s[u];a.push(e(l,t,r,i));}return Promise.all(a);});}return function(t){var n=this.json,r=this.extensions,i=this.json.scenes[t],o=new Ps();i.name&&(o.name=this.createUniqueName(i.name)),H(o,i),i.extensions&&j(r,o,i);for(var a=i.nodes||[],s=[],u=0,c=a.length;u<c;u++){s.push(e(a[u],o,n,this));}return Promise.all(s).then(function(){return o;});};}(),e;}(),kf=n(4);var Uf=new zf();function jf(e,t){return Bf.debug("Loading ".concat(e,".")),new Promise(function(n,r){Uf.load(e,function(e){n(e);},function(e){t&&t(e.loaded,e.total);},function(e){r(e);});});}new ep();function Hf(e){return new kf.Vec3(e.x,e.y,e.z);}function qf(e){return new Qn(e.x,e.y,e.z);}function Gf(e){return new kf.Quaternion(e.x,e.y,e.z,e.w);}function Vf(e,t){e.position.copy(t.position),e.quaternion.copy(t.quaternion);}function Wf(e){return new Promise(function(t,n){setTimeout(function(){return t();},e);});}function Xf(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1/60;var r=e(t+n),i=e(t-n),o=(r.x-i.x)/(2*n),a=(r.y-i.y)/(2*n),s=(r.z-i.z)/(2*n);return new kf.Vec3(o,a,s);}function Yf(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;e.traverse(function(e){return e.castShadow=t;});}function Zf(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;e.traverse(function(e){return e.receiveShadow=t;});}var $f={logEvent:function logEvent(e,t){}};var Jf=window.navigator.userAgent.toLowerCase();Bf.debug("User Agent: "+Jf);var Qf={mobile:Jf.includes("mobile"),safariBased:Jf.includes("safari")&&!Jf.includes("chrome")||Jf.includes("iphone")||Jf.includes("ipad")||Jf.includes("ipod")};Bf.debug("Browser detections: %o",Qf);var Kf=(Bf.debug("KaiOS graphics options."),{highDPI:!1,antialias:!1,shadows:!1,particles:!1,geometry:"low",physics:"low",ticksPerSecond:30,audioQuality:"low",svgTransitions:!0,videoPreviews:!1,maxUpdateCount:2});function em(){return Kf;}!function(e,t){try{Bf.debug("Analytics event = ".concat(e,", data = ").concat(JSON.stringify(t),".")),$f.logEvent(e,t);}catch(e){Bf.warn("Failed to log event.");}}("detect_platform_options",Kf);var tm=function tm(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e));}catch(e){o(e);}}function s(e){try{u(r["throw"](e));}catch(e){o(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t);})).then(a,s);}u((r=r.apply(e,t||[])).next());});};var nm=document.getElementById("iris-wipe-container"),rm=document.getElementById("iris-mask"),im=n(62),om=em().svgTransitions,am=document.getElementById("fade-black-container");om?(nm.style.visibility="visible",rm.setAttribute("r","0")):am.style.visibility="visible";function sm(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:700;return Promise.any([e,Wf(t)]);}var um=0;function cm(){return tm(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee2(){var _e384;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(om){_context2.next=2;break;}return _context2.abrupt("return",function(){return tm(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e=um++;_context.next=3;return im(am,"stop");case 3:am.style.visibility="visible";am.style.opacity="1";_context.next=7;return sm(im(am,{opacity:"0"},{duration:700}));case 7:e==um&&(am.style.visibility="hidden");case 8:case"end":return _context.stop();}}},_callee);}));}());case 2:_e384=um++;_context2.next=5;return im(rm,"stop");case 5:nm.style.visibility="visible";rm.setAttribute("r","0");_context2.next=9;return sm(im(rm,{r:"100"},{duration:700}));case 9:_e384==um&&(nm.style.visibility="hidden");case 10:case"end":return _context2.stop();}}},_callee2);}));}function lm(){return tm(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(om){_context4.next=2;break;}return _context4.abrupt("return",function(){return tm(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:um++;_context3.next=3;return im(am,"stop");case 3:am.style.visibility="visible";am.style.opacity="0";_context3.next=7;return sm(im(am,{opacity:"1"},{duration:700}));case 7:case"end":return _context3.stop();}}},_callee3);}));}());case 2:um++;_context4.next=5;return im(rm,"stop");case 5:nm.style.visibility="visible";rm.setAttribute("r","100");_context4.next=9;return sm(im(rm,{r:"0"},{duration:700}));case 9:case"end":return _context4.stop();}}},_callee4);}));}var pm=/*#__PURE__*/function(){function pm(e){_classCallCheck(this,pm);this.scene=new Us(),this.camera=new So(75,window.innerWidth/window.innerHeight,.1,1e3),this.directionalLight=new Op(16777215,3.5),this.directionalLightOffset=new Qn(.4,1,.5).multiplyScalar(50),this.ambientLight=new Lp(16777215,1),this.transitionStarted=!1,this.game=e,this.renderer=e.renderer,this.onResize(window.innerWidth,window.innerHeight);}_createClass(pm,[{key:"onResize",value:function onResize(e,t){if(t>e){var _n327=Un.clamp(t/e*45,75,100);Bf.debug("Vertical FOV: ".concat(_n327,"...")),this.camera.fov=_n327;}else{var _n328=Un.clamp(e/t*75,0,130);Bf.debug("Horizontal FOV: ".concat(_n328,"...")),this.camera.fov=t/e*_n328;}this.camera.aspect=e/t,this.camera.updateProjectionMatrix();}},{key:"update",value:function update(e){throw new Error("Scene.update unimplemented.");}},{key:"draw",value:function draw(){throw new Error("Scene.draw unimplemented.");}},{key:"onPause",value:function onPause(){}},{key:"onEnter",value:function onEnter(){}},{key:"onLeave",value:function onLeave(){}},{key:"addLights",value:function addLights(e){var t=this.directionalLight;t.position.copy(this.directionalLightOffset),e.add(t),e.add(t.target),em().shadows&&(t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.camera.top=50,t.shadow.camera.bottom=-50,t.shadow.camera.left=50,t.shadow.camera.right=-50,t.shadow.radius=1,t.shadow.bias=-5e-4,t.shadow.camera.near=.5,t.shadow.camera.far=200),e.add(this.ambientLight);}},{key:"startTransition",value:function startTransition(e){var _this58=this;this.transitionStarted||(this.transitionStarted=!0,lm().then(function(){e instanceof pm?_this58.game.transitionTo(e):e();}));}}]);return pm;}();var dm=n(13);em().audioQuality;var hm={play:function play(){},volume:function volume(e){}},fm=new dm.Howl({src:[n(172)],volume:.4}),mm=new dm.Howl({src:[n(173)],volume:.4}),ym=new dm.Howl({src:[n(174)],volume:1,preload:!0}),gm=new dm.Howl({src:[n(175)],volume:1,preload:!0}),vm=new dm.Howl({src:[n(176)],volume:.3}),xm=hm;new dm.Howl({src:[n(177)],volume:.5,autoplay:!0,loop:!0});function bm(e){return Math.abs(e)<.15?0:e;}var wm=document.getElementById("joystick-area");var Sm=new(/*#__PURE__*/function(){function _class(){var _this59=this;_classCallCheck(this,_class);wm.addEventListener("touchstart",function(e){var t=e.touches[0];_this59.joystickCenter=new jn(t.clientX,t.clientY),_this59.joystickBase.style.visibility="visible",_this59.joystickBase.style.left=_this59.joystickCenter.x+"px",_this59.joystickBase.style.top=_this59.joystickCenter.y+"px",e.preventDefault(),e.stopImmediatePropagation();},{passive:!1}),wm.addEventListener("touchmove",function(e){var t=e.touches[0],n=new jn(t.clientX,t.clientY).clone().sub(_this59.joystickCenter);n.length()>_this59.joystickRadius&&n.normalize().multiplyScalar(_this59.joystickRadius);var r=_this59.joystickCenter.clone().add(n);_this59.joystickNub.style.visibility="visible",_this59.joystickNub.style.left=r.x+"px",_this59.joystickNub.style.top=r.y+"px",_this59.movement=n.clone().multiplyScalar(1/_this59.joystickRadius),_this59.movement.y=-_this59.movement.y,e.preventDefault(),e.stopImmediatePropagation();},{passive:!1}),wm.addEventListener("touchend",function(e){_this59.joystickCenter=void 0,_this59.movement=void 0,_this59.joystickBase.style.visibility="hidden",_this59.joystickNub.style.visibility="hidden",e.preventDefault(),e.stopImmediatePropagation();},{passive:!1}),wm.innerHTML+="<img id='joystick-base' style=\"visibility:hidden; position: absolute; width:2in; transform: translate3d(-50%, -50%, 0); pointer-events: none;\" src=\"".concat(n(178),"\"></img>"),wm.innerHTML+="<img id='joystick-nub' style=\"visibility:hidden; position: absolute; width:0.5in; transform: translate3d(-50%, -50%, 0); pointer-events: none;\" src=\"".concat(n(179),"\"></img>"),this.joystickBase=document.getElementById("joystick-base"),this.joystickNub=document.getElementById("joystick-nub"),this.joystickRadius=this.joystickBase.offsetWidth/2;}_createClass(_class,[{key:"value",value:function value(){return this.movement?this.movement:null;}},{key:"disable",value:function disable(){wm.style.visibility="hidden";}},{key:"enable",value:function enable(){wm.style.visibility="visible";}}]);return _class;}())();var Mm=new(/*#__PURE__*/function(){function _class2(){var _this60=this;_classCallCheck(this,_class2);this.previousPressedKeys=new Map(),this.pressedKeys=new Map(),document.addEventListener("keydown",function(e){_this60.pressedKeys.set(e.key,!0),e.preventDefault();},!1),document.addEventListener("keyup",function(e){_this60.pressedKeys.set(e.key,!1),e.preventDefault();},!1);}_createClass(_class2,[{key:"movement",value:function movement(e){var t=Sm.value();if(t)return t;var n=this.pressedKeys.get("ArrowUp"),r=this.pressedKeys.get("ArrowDown"),i=this.pressedKeys.get("ArrowRight"),o=this.pressedKeys.get("ArrowLeft");if(n||r||o||i){return new jn((o?-1:0)+(i?1:0),(n?1:0)+(r?-1:0)).normalize();}if(navigator.getGamepads){var _iterator=_createForOfIteratorHelper(navigator.getGamepads()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _e385=_step.value;if(_e385){if(_e385.axes.length>=2){var _t357=bm(_e385.axes[0]),_n329=bm(_e385.axes[1]);if(Math.abs(_t357)>0||Math.abs(_n329)>0)return new jn(_t357,-_n329);}if(_e385.buttons.length>=16){var _t358=_e385.buttons[12].pressed,_n330=_e385.buttons[13].pressed,_r234=_e385.buttons[14].pressed,_i179=_e385.buttons[15].pressed;if(_t358||_n330||_r234||_i179){return new jn((_r234?-1:0)+(_i179?1:0),(_t358?1:0)+(_n330?-1:0)).normalize();}}if(_e385.axes.length>=4){var _t359=bm(_e385.axes[2]),_n331=bm(_e385.axes[3]);if(Math.abs(_t359)>0||Math.abs(_n331)>0)return new jn(_t359,-_n331);}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}if(e&&e.inputSources){var _iterator2=_createForOfIteratorHelper(e.inputSources),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _t360=_step2.value;var _e386=_t360.gamepad;if(_e386&&"xr-standard"===_e386.mapping&&_e386.axes.length>=4){var _t361=bm(_e386.axes[2]),_n332=bm(_e386.axes[3]);if(Math.abs(_t361)>0||Math.abs(_n332)>0)return new jn(_t361,-_n332);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return new jn(0,0);}},{key:"select",value:function select(){if(!this.previousPressedKeys.get("Enter")&&this.pressedKeys.get("Enter"))return!0;if(navigator.getGamepads){var _iterator3=_createForOfIteratorHelper(navigator.getGamepads()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _e387=_step3.value;if(_e387&&_e387.buttons.length>=1&&_e387.buttons[0].pressed)return!0;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}return!1;}},{key:"skip",value:function skip(){if(Sm.value())return!0;if(Array.from(this.pressedKeys.values()).some(function(e){return e;}))return!0;if(navigator.getGamepads){var _iterator4=_createForOfIteratorHelper(navigator.getGamepads()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _e388=_step4.value;if(_e388&&_e388.buttons.some(function(e){return e.pressed;}))return!0;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}return!1;}},{key:"vibrate",value:function vibrate(e){if(window.navigator.vibrate){var _t362=Un.mapLinear(e,0,1,5,150);Bf.debug("Vibration time = ".concat(_t362,"...")),window.navigator.vibrate(_t362);}}},{key:"update",value:function update(){this.previousPressedKeys=new Map();var _iterator5=_createForOfIteratorHelper(this.pressedKeys.entries()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=_slicedToArray(_step5.value,2),_e389=_step5$value[0],_t363=_step5$value[1];this.previousPressedKeys.set(_e389,_t363);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}},{key:"pause",value:function pause(){if(!this.previousPressedKeys.get("Escape")&&this.pressedKeys.get("Escape"))return!0;if(!this.previousPressedKeys.get("SoftLeft")&&this.pressedKeys.get("SoftLeft"))return!0;if(navigator.getGamepads){var _iterator6=_createForOfIteratorHelper(navigator.getGamepads()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _e390=_step6.value;if(_e390&&_e390.buttons.length>=10&&_e390.buttons[9].pressed)return!0;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}return!1;}},{key:"back",value:function back(){return!(this.previousPressedKeys.get("Escape")||!this.pressedKeys.get("Escape"))||!(this.previousPressedKeys.get("SoftLeft")||!this.pressedKeys.get("SoftLeft"));}}]);return _class2;}())(),_m=new Qn(),Em=new Qn(),Am=new Qn();function Tm(e,t,n,r){var _ref=function(e,t,n,r){_m.copy(n).sub(t),Em.copy(r).sub(t),Am.copy(e).sub(t);var i=_m.dot(_m),o=Em.dot(Em),a=_m.dot(Em),s=_m.dot(Am),u=Em.dot(Am),c=i*o-a*a;return[(o*s-u*a)/c,(i*u-s*a)/c];}(e,t,n,r),_ref2=_slicedToArray(_ref,2),i=_ref2[0],o=_ref2[1];return i>=0&&o>=0&&i<=1&&o<=1&&i+o<=1;}var Nm=new Qn(),Dm=new Qn();function Cm(e,t,n){Nm.copy(n).sub(t),Dm.copy(e).sub(t);var r=Dm.dot(Nm)/Nm.dot(Nm);if(r<=0)return[t,t.distanceTo(e)];if(r>=1)return[n,n.distanceTo(e)];{var _n333=Nm.clone().multiplyScalar(r).add(t);return[_n333,_n333.distanceTo(e)];}}var Rm=new Qn(),Pm=new Qn(),Om=new Qn(),Lm=new Qn(),Im=new Qn();function Bm(e,t,n,r){Rm.copy(n).sub(t),Pm.copy(r).sub(t),Om.crossVectors(Rm,Pm).normalize(),Lm.copy(e).sub(t);var i=Lm.dot(Om);if(Im.copy(Om).multiplyScalar(-i).add(e),Tm(Im,t,n,r))return[Im.clone(),Im.distanceTo(e)];{var _i180=[Cm(e,t,n),Cm(e,t,r),Cm(e,n,r)];return _i180.sort(function(e,t){return e[1]-t[1];}),_i180[0];}}var Fm=new Qn(),zm=new Qn(),km=new Qn(),Um=(new gr(),new tr());new gr();var jm=new tr();function Hm(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Number.POSITIVE_INFINITY;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:new Fr();var i=null,o=n;return t.traverse(function(t){if("Mesh"===t.type&&t.layers.test(r)){var _n334=t,_r235=_n334.geometry;if(null===_r235.boundingBox&&_r235.computeBoundingBox(),jm.copy(_r235.boundingBox).applyMatrix4(_n334.matrixWorld),jm.distanceToPoint(e)>o)return;var _ref3=function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Number.POSITIVE_INFINITY;var r=null,i=n,o=t.geometry;if("BufferGeometry"!==o.type)throw new Error("Unknown geometry type \"".concat(t.geometry.type,"\"."));if(null===o.index)throw new Error("Non-indexed buffer geometry not implemented.");for(var _n335=0;_n335<o.index.count;_n335+=3){var _a82=o.index.getX(_n335),_s52=o.index.getX(_n335+1),_u35=o.index.getX(_n335+2);if(Fm.fromBufferAttribute(o.attributes.position,_a82),zm.fromBufferAttribute(o.attributes.position,_s52),km.fromBufferAttribute(o.attributes.position,_u35),t.localToWorld(Fm),t.localToWorld(zm),t.localToWorld(km),Um.setFromPoints([Fm,zm,km]),Um.distanceToPoint(e)>i)continue;var _Bm=Bm(e,Fm,zm,km),_Bm2=_slicedToArray(_Bm,2),_c30=_Bm2[0],_l22=_Bm2[1];_l22<i&&(i=_l22,r=_c30);}return[r,i];}(e,t,o),_ref4=_slicedToArray(_ref3,2),_a81=_ref4[0],_s51=_ref4[1];_a81&&_s51<o&&(o=_s51,i=_a81);}}),[i,o];}var qm=/*#__PURE__*/function(){function qm(e,t){_classCallCheck(this,qm);this.deaths=0,this.playTime=0,this.coinsCollected=0,this.totalCoins=0,this.parTime=e,this.parDeaths=t;}_createClass(qm,[{key:"incrementDeaths",value:function incrementDeaths(){this.deaths++,Ff.a.debug("Deaths increased to ".concat(this.deaths,"."));}},{key:"addPlayTime",value:function addPlayTime(e){this.playTime+=e,Ff.a.debug("Play time increased by ".concat(e," to ").concat(this.playTime,"."));}},{key:"reportCoins",value:function reportCoins(e,t){this.coinsCollected+=e,this.totalCoins+=t,Ff.a.debug("".concat(e," / ").concat(t," coins collected."));}},{key:"formatPlayTime",value:function formatPlayTime(){var e=Math.floor(this.playTime/60);return"".concat(e,":").concat(Math.floor(this.playTime-60*e).toString().padStart(2,"0"));}},{key:"calculateTimeBonus",value:function calculateTimeBonus(){return Math.ceil(Math.max(this.parTime-this.playTime,0));}},{key:"calculateDeathsBonus",value:function calculateDeathsBonus(){return 10*Math.max(this.parDeaths-this.deaths,0);}},{key:"calculateCoinBonus",value:function calculateCoinBonus(){return 5*this.coinsCollected;}},{key:"calculateScore",value:function calculateScore(){return this.calculateTimeBonus()+this.calculateDeathsBonus()+this.calculateCoinBonus();}}]);return qm;}();var Gm=document.getElementById("file-input");var Vm;function Wm(){Gm.click();}function Xm(e){return"<img id=\"back-button\" style=\"position: absolute; z-index: 1; margin: 0.2em; width: 1.2em; bottom: 0px; font-size: 2rem;\" src=\"".concat(n(181),"\"/>\n    <div style=\"width: 100%; height: 100%; padding: 1.0em; box-sizing: border-box; display: flex; justify-content: center;\">\n      <div style=\"width: 100%; height: 100%; padding: 10px; box-sizing: border-box; max-width: 600px;\">\n        <div id=\"container-content\" style=\"width: 100%; height: 100%; padding: 10px; box-sizing: border-box; overflow-y: scroll; background-color: rgba(0.0, 0.0, 0.0, 0.5);\">\n        ").concat(e,"\n        </div>\n      </div>\n    </div>");}document.addEventListener("keydown",function(e){"F1"===e.key&&(e.preventDefault(),Wm());},!1);var Ym=/*#__PURE__*/function(){function Ym(e){var _this61=this;_classCallCheck(this,Ym);this.previousMovement=new jn(),this.elements=e;var _iterator7=_createForOfIteratorHelper(this.elements),_step7;try{var _loop2=function _loop2(){var e=_step7.value;e.addEventListener("mouseenter",function(){_this61.elements.forEach(function(e){return e.classList.remove("selected");}),e.classList.add("selected");}),e.addEventListener("mouseleave",function(){e.classList.remove("selected");});};for(_iterator7.s();!(_step7=_iterator7.n()).done;){_loop2();}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}_createClass(Ym,[{key:"scrollTo",value:function scrollTo(e){try{e.scrollIntoView({behavior:"smooth",block:"center"});}catch(t){e.scrollIntoView(!1);}}},{key:"update",value:function update(e){if(e.y>.5&&this.previousMovement.y<.5){var _e391=this.elements.findIndex(function(e){return e.classList.contains("selected");});if(-1===_e391)this.elements[this.elements.length-1].classList.add("selected");else{this.elements[_e391].classList.remove("selected");var _t364=(_e391+this.elements.length-1)%this.elements.length;this.elements[_t364].classList.add("selected"),this.scrollTo(this.elements[_t364]);}}if(e.y<-.5&&this.previousMovement.y>-.5){var _e392=this.elements.findIndex(function(e){return e.classList.contains("selected");});if(-1===_e392)this.elements[0].classList.add("selected");else{this.elements[_e392].classList.remove("selected");var _t365=(_e392+1)%this.elements.length;this.elements[_t365].classList.add("selected"),this.scrollTo(this.elements[_t365]);}}if(this.previousMovement=e,Mm.select()){var _e393=this.elements.find(function(e){return e.classList.contains("selected");});_e393&&_e393.click();}}}]);return Ym;}();var Zm=new(n(182))(),$m=[0,0,0];function Jm(e,t){$m[e]=t;var n=$m.reduce(function(e,t){return e+t;},0)/$m.length;Ff.a.debug("Loading Progress: ".concat(n,".")),Zm.emit("progress",n);}var Qm=jf(n(183),function(e,t){return Jm(0,e/t);}),Km=jf(n(184),function(e,t){return Jm(1,e/t);}),ey=jf(n(185),function(e,t){return Jm(2,e/t);});var ty=document.getElementById("loading-spinner");var ny=function ny(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e));}catch(e){o(e);}}function s(e){try{u(r["throw"](e));}catch(e){o(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t);})).then(a,s);}u((r=r.apply(e,t||[])).next());});};var ry=document.getElementById("ui-container"),iy=document.getElementById("version"),oy=document.getElementById("pause-button");var ay=/*#__PURE__*/function(){function ay(e){_classCallCheck(this,ay);this.transitionStarted=!1,this.mainMenu=e;}_createClass(ay,[{key:"onEnter",value:function onEnter(){}},{key:"onLeave",value:function onLeave(){}},{key:"draw",value:function draw(){}},{key:"update",value:function update(e){}},{key:"startTransition",value:function startTransition(e){var _this62=this;this.transitionStarted||(this.transitionStarted=!0,lm().then(function(){_this62.mainMenu.transitionTo(e),cm();}));}}]);return ay;}();var sy=/*#__PURE__*/function(_ay){_inherits(sy,_ay);var _super59=_createSuper(sy);function sy(){_classCallCheck(this,sy);return _super59.apply(this,arguments);}_createClass(sy,[{key:"onEnter",value:function onEnter(){var _this63=this;ry.innerHTML=Xm(Dy.map(function(e,t){return"<div style=\"color: white; padding: 5px; border: 1px solid white; border-radius: 4px; margin-bottom: 10px;\">\n                <div><span class=\"course-title\">".concat(e.name,"</span></div>\n                <div><button id=\"play-course-").concat(t,"\" class=\"play-course-button\">PLAY</button></div>\n              </div>");}).join("")+'<hr/><div style="color: white; text-align: center;"><span>MORE COURSES COMING SOON</span></div>'),document.getElementById("back-button").onclick=function(){_this63.startTransition(new py(_this63.mainMenu));},this.navigator=new Ym(Dy.map(function(e,t){return document.getElementById("play-course-"+t);})),Dy.forEach(function(e,t){document.getElementById("play-course-"+t).onclick=function(){_this63.mainMenu.startTransition(function(){_this63.mainMenu.game.playCourse(e,function(){_this63.mainMenu.game.transitionTo(new dy(_this63.mainMenu.game,sy));});});};}),iy.style.display="none",oy.style.display="none",Sm.disable();}},{key:"update",value:function update(e){var t;Mm.back()&&document.getElementById("back-button").click();var n=Mm.movement(this.mainMenu.renderer.xr.getSession());null===(t=this.navigator)||void 0===t||t.update(n);}},{key:"onLeave",value:function onLeave(){}}]);return sy;}(ay);var uy=/*#__PURE__*/function(_ay2){_inherits(uy,_ay2);var _super60=_createSuper(uy);function uy(){_classCallCheck(this,uy);return _super60.apply(this,arguments);}_createClass(uy,[{key:"onEnter",value:function onEnter(){var _this64=this;ry.innerHTML="<img style=\"box-sizing: border-box; padding: 10px; width: 100%; height: 100%;\" src='".concat(n(26),"'></img>"),document.addEventListener("touchstart",function(){return _this64.next();},!1),document.addEventListener("click",function(){return _this64.next();},!1),setTimeout(function(){return _this64.next();},5e3);}},{key:"next",value:function next(){this.startTransition(new py(this.mainMenu));}},{key:"update",value:function update(e){Mm.skip()&&this.next();}}]);return uy;}(ay);var cy=/*#__PURE__*/function(_ay3){_inherits(cy,_ay3);var _super61=_createSuper(cy);function cy(){_classCallCheck(this,cy);return _super61.apply(this,arguments);}_createClass(cy,[{key:"onEnter",value:function onEnter(){var _this65=this;ry.innerHTML=Xm("\n    <div style=\"text-align: center; color: white;\">\n          <img style=\"box-sizing: border-box; padding: 10px; width: 50%;\" src='".concat(n(26),"'></img>\n          <div>v0.3.9</div>\n          <div>prod-kaios</div>\n\n          <p style=\"font-size: large;\">Art, Music, and Code by Varun Ramesh (https://varunramesh.net)</p>\n\n          <br/>\n          <p>Textures from textures.com</p>\n          <p>Archivo, Archivo Black from Google Webfonts, under Open Font License</p>\n          <p>\"one-finger\" icon by Jeff Portaro from the Noun Project</p>\n          <p>Icons from Font Awesome</p></div>")),document.getElementById("back-button").onclick=function(){_this65.startTransition(new py(_this65.mainMenu));};}}]);return cy;}(ay);var ly=/*#__PURE__*/function(_ay4){_inherits(ly,_ay4);var _super62=_createSuper(ly);function ly(){_classCallCheck(this,ly);return _super62.apply(this,arguments);}_createClass(ly,[{key:"onEnter",value:function onEnter(){var _this66=this;ry.innerHTML=Xm(""),document.getElementById("back-button").onclick=function(){_this66.startTransition(new py(_this66.mainMenu));};}}]);return ly;}(ay);var py=/*#__PURE__*/function(_ay5){_inherits(py,_ay5);var _super63=_createSuper(py);function py(){var _this67;_classCallCheck(this,py);_this67=_super63.apply(this,arguments),_this67.buttons=[];return _this67;}_createClass(py,[{key:"onEnter",value:function onEnter(){var _this68=this;ry.innerHTML='<div style="width: 100%; height: 100%; color: white; display: flex; flex-direction: column; justify-content: center; align-items: stretch; box-sizing: border-box;">\n    <button id="start-game-button" class="menu-button">START GAME</button>\n    <button style="display: none;" id="marble-mouse-world-button" class="menu-button">MARBLE MOUSE WORLD</button>\n    <div style="display: flex; flex-direction: row;">\n      <button style="flex-grow: 1; display: none;" id="load-custom-level-button" class="menu-button">LOAD CUSTOM LEVEL</button>\n      <button style="display: none;" id="custom-level-more-info-button" class="menu-button">?</button>\n    </div>\n    <button id="options-button" style="display: none;" class="menu-button">OPTIONS</button>\n    <button id="credits-button" style="display: none;" class="menu-button">CREDITS</button>\n    <button id="exit-button" style="display: none;" class="menu-button">EXIT</button>\n    </div>';var e=document.getElementById("start-game-button"),t=document.getElementById("marble-mouse-world-button"),n=document.getElementById("load-custom-level-button"),r=(document.getElementById("custom-level-more-info-button"),document.getElementById("options-button")),i=document.getElementById("credits-button"),o=document.getElementById("exit-button");o.style.display="inline",this.buttons=[e,t,n,r,i,o].filter(function(e){return"none"!==e.style.display;}),this.navigator=new Ym(this.buttons),document.getElementById("start-game-button").onclick=function(){_this68.startTransition(new sy(_this68.mainMenu));},document.getElementById("load-custom-level-button").onclick=function(){Wm();},document.getElementById("custom-level-more-info-button").onclick=function(){window.open("https://github.com/rameshvarun/marble-mouse-custom-mapping");},document.getElementById("marble-mouse-world-button").onclick=function(){},document.getElementById("credits-button").onclick=function(){_this68.startTransition(new cy(_this68.mainMenu));},document.getElementById("options-button").onclick=function(){_this68.startTransition(new ly(_this68.mainMenu));},document.getElementById("exit-button").onclick=function(){window.close();};}},{key:"update",value:function update(){var e;var t=Mm.movement(this.mainMenu.renderer.xr.getSession());null===(e=this.navigator)||void 0===e||e.update(t);}}]);return py;}(ay);var dy=/*#__PURE__*/function(_pm){_inherits(dy,_pm);var _super64=_createSuper(dy);function dy(e,t){var _this69;_classCallCheck(this,dy);_this69=_super64.call(this,e),_this69.background=new Ps(),_this69.dolly=new Ps(),_this69.roomscale=new Ps(),_this69.time=0,_this69.outroStarted=!1,_this69.ready=!1,_this69.coins=[],_this69.phase=t?new t(_assertThisInitialized(_this69)):new uy(_assertThisInitialized(_this69)),_this69.addLights(_this69.scene),_this69.scene.add(_this69.background),_this69.scene.add(_this69.dolly),_this69.dolly.add(_this69.camera),_this69.dolly.scale.set(10,10,10),_this69.scene.add(_this69.roomscale),_this69.roomscale.scale.set(60,60,60),_this69.roomscale.position.set(0,-50,0);return _this69;}_createClass(dy,[{key:"transitionTo",value:function transitionTo(e){this.phase.onLeave(),this.phase=e,this.phase.onEnter();}},{key:"onEnter",value:function onEnter(){var _this70=this;Sm.disable(),iy.style.display="inline",oy.style.display="none",this.loadScene().then(function(){_this70.phase.onEnter(),cm();});}},{key:"onLeave",value:function onLeave(){_get(_getPrototypeOf(dy.prototype),"onLeave",this).call(this),iy.style.display="none",this.phase.onLeave();}},{key:"loadScene",value:function loadScene(){return ny(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee5(){var _this71=this;var e,t,r,i,_e394,_t367,o,a,_r236;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:ty.style.display="inline";_context5.next=3;return ey;case 3:e=_context5.sent;e.scene.scale.set(40,40,40),this.background.add(e.scene.clone());_context5.next=7;return jf(n(63));case 7:t=_context5.sent;Zf(t.scene),Yf(t.scene),this.scene.add(t.scene.clone());_context5.next=11;return Qm;case 11:r=_context5.sent;Yf(r.scene),Zf(r.scene),this.scene.traverse(function(e){if("coin"===e.userData.entity){var _t366=r.scene.clone();e.add(_t366),_this71.coins.push(_t366);}});_context5.next=15;return Km;case 15:i=_context5.sent;Yf(i.scene),Zf(i.scene),this.scene.getObjectByName("Goal").add(i.scene.clone());_e394="high"===em().geometry?12:8,_t367=n(64);o=new il(1,_e394,_e394),a=new xl();a.map=Gn.loadTexture(_t367),a.map.magFilter=me,a.map.minFilter=me;_r236=new ho(o,a);Yf(_r236),Zf(_r236),this.scene.add(_r236),_r236.position.set(0,1,0);ty.style.display="none";case 23:case"end":return _context5.stop();}}},_callee5,this);}));}},{key:"update",value:function update(e){this.time+=e;var _iterator8=_createForOfIteratorHelper(this.coins),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _e397=_step8.value;var _t368=3;_e397.quaternion.setFromAxisAngle(new Qn(0,1,0),_t368*this.time);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}var t=new Qn(11.9,-10.9,-20.6);if(this.game.isXR()){var _e395=new Qn(t.x+30,20,t.z+30),_n336=new Qn(t.x+120,20,t.z+120);this.dolly.position.copy(_e395),this.dolly.lookAt(_n336);}else{var _e396=new Qn(60*Math.cos(.2*this.time),30,60*Math.sin(.2*this.time));this.dolly.position.copy(t.clone().add(_e396)),this.camera.lookAt(t);}this.phase.update(e);}},{key:"draw",value:function draw(){this.game.isAR()?(this.background.visible=!1,this.camera.parent===this.dolly&&(this.dolly.remove(this.camera),this.roomscale.add(this.camera))):(this.background.visible=!0,this.camera.parent===this.roomscale&&(this.roomscale.remove(this.camera),this.dolly.add(this.camera))),this.renderer.render(this.scene,this.camera),this.phase.draw();}}]);return dy;}(pm);var hy=function hy(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e));}catch(e){o(e);}}function s(e){try{u(r["throw"](e));}catch(e){o(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t);})).then(a,s);}u((r=r.apply(e,t||[])).next());});};var fy=n(62),my=n(206),yy=new Qn(0,1,0);window.THREE=r,window.CANNON=kf,n(180);var gy=document.getElementById("ui-container");var vy=/*#__PURE__*/function(){function vy(e){_classCallCheck(this,vy);this.level=e;}_createClass(vy,[{key:"update",value:function update(e){}}]);return vy;}();var xy=new ep().load(n(186));var by=/*#__PURE__*/function(_vy){_inherits(by,_vy);var _super65=_createSuper(by);function by(e,t){var _this72;_classCallCheck(this,by);_this72=_super65.call(this,e),_this72.particles=[],_this72.geometry=new Yi(),_this72.life=0;for(var n=0;n<10;n++){var _e398=new Qn(Un.randFloatSpread(.8),Un.randFloatSpread(.8),Un.randFloatSpread(.8));_this72.particles.push({position:_e398.clone(),velocity:_e398.clone().multiplyScalar(5)});}var r=new Float32Array(3*_this72.particles.length);_this72.geometry.setAttribute("position",new Ii(r,3)),_this72.updateGeometry(),_this72.material=new Iu({map:xy,color:new xi("#fbe84b"),size:.08,blending:S,depthTest:!1,transparent:!0}),_this72.points=new Uu(_this72.geometry,_this72.material),_this72.points.position.copy(t),_this72.level.scene.add(_this72.points);return _this72;}_createClass(by,[{key:"updateGeometry",value:function updateGeometry(){var e=this.geometry.attributes.position.array;for(var _t369=0;_t369<this.particles.length;++_t369){e[3*_t369]=this.particles[_t369].position.x,e[3*_t369+1]=this.particles[_t369].position.y,e[3*_t369+2]=this.particles[_t369].position.z;}this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere();}},{key:"update",value:function update(e){this.life+=e;var _iterator9=_createForOfIteratorHelper(this.particles),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _t370=_step9.value;_t370.velocity.add(new Qn(0,-1,0).multiplyScalar(9.8*e)),_t370.position.add(_t370.velocity.clone().multiplyScalar(e));}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}this.updateGeometry();this.life>.8&&(this.level.scene.remove(this.points),this.level.remove(this)),this.material.opacity=.8-this.life;}}]);return by;}(vy);var wy=/*#__PURE__*/function(_vy2){_inherits(wy,_vy2);var _super66=_createSuper(wy);function wy(e,t,n,r){var _this73;_classCallCheck(this,wy);_this73=_super66.call(this,e),_this73.particles=[],_this73.geometry=new Yi(),_this73.life=0;for(var i=0;i<5;i++){var _e399=new Qn(Un.randFloatSpread(.3),Un.randFloatSpread(.3),Un.randFloatSpread(.3));_this73.particles.push({position:_e399.clone(),velocity:n.clone().add(_e399.clone().normalize().multiplyScalar(5*r))});}var o=new Float32Array(3*_this73.particles.length);_this73.geometry.setAttribute("position",new Ii(o,3)),_this73.updateGeometry(),_this73.material=new Iu({map:xy,color:new xi("#ffffff"),size:.04,blending:S,depthTest:!1,transparent:!0}),_this73.points=new Uu(_this73.geometry,_this73.material),_this73.points.position.copy(t),_this73.level.scene.add(_this73.points);return _this73;}_createClass(wy,[{key:"updateGeometry",value:function updateGeometry(){var e=this.geometry.attributes.position.array;for(var _t371=0;_t371<this.particles.length;++_t371){e[3*_t371]=this.particles[_t371].position.x,e[3*_t371+1]=this.particles[_t371].position.y,e[3*_t371+2]=this.particles[_t371].position.z;}this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere();}},{key:"update",value:function update(e){this.life+=e;var _iterator10=_createForOfIteratorHelper(this.particles),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _t372=_step10.value;_t372.position.add(_t372.velocity.clone().multiplyScalar(e));}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}this.updateGeometry();this.life>.4&&(this.level.scene.remove(this.points),this.level.remove(this)),this.material.opacity=.4-this.life;}}]);return wy;}(vy);var Sy=/*#__PURE__*/function(_vy3){_inherits(Sy,_vy3);var _super67=_createSuper(Sy);function Sy(e){var _this74;_classCallCheck(this,Sy);_this74=_super67.call(this,e),_this74.particles=[],_this74.geometry=new Yi(),_this74.life=0;var t=new Float32Array(300);_this74.geometry.setAttribute("position",new Ii(t,3)),_this74.updateGeometry(),_this74.material=new Iu({map:xy,color:"#ffffff",size:.15,blending:S,depthTest:!1,transparent:!0,opacity:.5}),_this74.points=new Uu(_this74.geometry,_this74.material),_this74.level.scene.add(_this74.points);return _this74;}_createClass(Sy,[{key:"updateGeometry",value:function updateGeometry(){var e=this.geometry.attributes.position.array;for(var _t373=0;_t373<this.particles.length;++_t373){e[3*_t373]=this.particles[_t373].position.x,e[3*_t373+1]=this.particles[_t373].position.y,e[3*_t373+2]=this.particles[_t373].position.z;}this.geometry.setDrawRange(0,this.particles.length),this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere();}},{key:"update",value:function update(e){this.life+=e;var _iterator11=_createForOfIteratorHelper(this.particles),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _t375=_step11.value;_t375.velocity.add(new Qn(0,-1,0).multiplyScalar(9.8*e)),_t375.position.add(_t375.velocity.clone().multiplyScalar(e));}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}if(this.particles.length<100&&10*this.life>this.particles.length){var _e400=.8;var _t374=new Qn(Un.randFloatSpread(_e400),Un.randFloatSpread(_e400),Un.randFloatSpread(_e400));this.particles.push({position:this.level.sphere.position.clone().add(_t374),velocity:_t374.clone().multiplyScalar(2)});}this.updateGeometry();}}]);return Sy;}(vy);var My=document.getElementById("pause-button");var _y=/*#__PURE__*/function(_pm2){_inherits(_y,_pm2);var _super68=_createSuper(_y);function _y(e,t){var _this75$createBall,_this75$createBall2;var _this75;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};_classCallCheck(this,_y);_this75=_super68.call(this,e),_this75.dolly=new Ps(),_this75.roomscale=new Ps(),_this75.background=new Ps(),_this75.world=new kf.World(),_this75.state="loading",_this75.collisionBodies=[],_this75.stageParent=new Jr(),_this75.stageChild=new Jr(),_this75.worldAABB=new kf.AABB(),_this75.goal=new Qn(),_this75.cameraTargetPosition=new Qn(),_this75.time=0,_this75.coinCoint=0,_this75.entities=[],_this75.blinkMaterial=new xl(),_this75.ballMaterial=new xl(),_this75.blinkTime=Un.randFloat(0,4),_this75.paused=!1,_this75.movingPlatformHelper=new Sh(new Qn(0,1,0)),_this75.coins=[],_this75.playTimer=0,_this75.previousBallVelocity=new kf.Vec3(),_this75.recordedChunks=[],_this75.screenshotTaken=!1,_this75.squeakTimer=Un.randFloat(-20,0),_this75.movingPlatforms=[],_this75.onComplete=n,_this75.score=t,"low"===em().physics?_this75.world.solver.iterations=1:_this75.world.solver.iterations=10,(_this75$createBall=_this75.createBall(),_this75$createBall2=_slicedToArray(_this75$createBall,2),_this75.sphere=_this75$createBall2[0],_this75.sphereBody=_this75$createBall2[1],_this75$createBall),_this75.scene.add(_this75.sphere),_this75.world.addBody(_this75.sphereBody),_this75.addLights(_this75.scene),_this75.world.gravity.set(0,0,0),_this75.tilt=new Qn(0,-1,0),_this75.scene.add(_this75.stageParent),_this75.stageParent.add(_this75.stageChild),_this75.scene.add(_this75.dolly),_this75.dolly.add(_this75.camera),_this75.dolly.scale.set(15,15,15),_this75.scene.add(_this75.roomscale),_this75.roomscale.scale.set(60,60,60),_this75.roomscale.position.set(0,-50,0),_this75.scene.add(_this75.background);return _this75;}_createClass(_y,[{key:"add",value:function add(e){this.entities.push(e);}},{key:"remove",value:function remove(e){this.entities=this.entities.filter(function(t){return t!==e;});}},{key:"createBall",value:function createBall(){var e="high"===em().geometry?12:8,t=n(64),r=new il(1,e,e),i=this.ballMaterial=new xl();i.map=Gn.loadTexture(t),i.map.magFilter=me,i.map.minFilter=me,this.blinkMaterial=i;var o=new ho(r,i);Yf(o),Zf(o);var a=new kf.Body({mass:1,position:new kf.Vec3(0,0,0),shape:new kf.Sphere(1),angularDamping:.25,linearDamping:.25,material:new kf.Material("ball-material")});return a.material.restitution=1,[o,a];}},{key:"setPaused",value:function setPaused(e){this.paused=e,this.paused?(document.getElementById("pause-menu").style.display="inline",Sm.disable()):(document.getElementById("pause-menu").style.display="none",Sm.enable());}},{key:"getAdditionalUI",value:function getAdditionalUI(){return"";}},{key:"onLeave",value:function onLeave(){_get(_getPrototypeOf(_y.prototype),"onLeave",this).call(this);}},{key:"onEnter",value:function onEnter(){var _this76=this;Sm.enable(),document.getElementById("version").style.display="none";gy.innerHTML="\n      <div id=\"game-stats\">\n        <div id='coin-container' style=\"position: absolute; top: 0px; color: white; display: flex; flex-direction: row; align-items: center; font-size: 2rem;\">\n          <img style=\"width: 1.2em; padding: 0.2em;\" src=\"".concat(n(187),"\"/><span id=\"coin-count\">0</span>\n        </div>\n\n        <div id='clock-container' style=\"position: absolute; top: 0px; right: 0px; color: white; display: flex; flex-direction: row; align-items: center; font-size: 2rem;\">\n          <span id=\"clock-count\">0</span><img style=\"width: 1.2em; padding: 0.2em;\" src=\"").concat(n(188),"\"/>\n        </div>\n      </div>\n\n      ").concat(this.getAdditionalUI(),"\n\n      <div id=\"pause-menu\" style=\"position: absolute; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: none;\">\n        <div style=\"width: 100%; height: 100%; color: white; display: flex; flex-direction: column; justify-content: center; align-items: stretch;\">\n          <h1 style=\"text-align: center\">PAUSED</h1>\n          <button id=\"exit-button\" class=\"menu-button\">EXIT TO MENU</button>\n          <button id=\"retry-button\" class=\"menu-button\">RESTART LEVEL</button>\n        </div>\n      </div>\n      ");var e=document.getElementById("exit-button");e.onclick=function(){_this76.startTransition(new dy(_this76.game));};var t=document.getElementById("retry-button");t.onclick=function(){_this76.score.addPlayTime(_this76.time),lm().then(function(){_this76.reset(),_this76.setPaused(!1),cm();});},this.navigator=new Ym([e,t]),this.loadScene().then(function(){return hy(_this76,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee6(){var e;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return Km;case 2:e=_context6.sent;Yf(e.scene),Zf(e.scene),this.scene.getObjectByName("Goal").add(e.scene.clone()),this.goal.copy(this.scene.getObjectByName("Goal").position),this.onSceneLoaded(),cm(),this.state="intro",this.reset();case 4:case"end":return _context6.stop();}}},_callee6,this);}));});}},{key:"onPause",value:function onPause(){this.setPaused(!this.paused);}},{key:"onSceneLoaded",value:function onSceneLoaded(){}},{key:"getBackgroundGLTF",value:function getBackgroundGLTF(){throw new Error("getBackgroundGLTF needs to be implemented.");}},{key:"getLevelGLTF",value:function getLevelGLTF(){throw new Error("getLevelGLTF needs to be implemented.");}},{key:"loadScene",value:function loadScene(){var e;return hy(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee7(){var _this77=this;var t,n,r,i,o;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:ty.style.display="inline";n=this.getBackgroundGLTF();if(!("string"==typeof n)){_context7.next=8;break;}_context7.next=5;return jf(n);case 5:_context7.t0=_context7.sent;_context7.next=11;break;case 8:_context7.next=10;return n;case 10:_context7.t0=_context7.sent;case 11:t=_context7.t0;t.scene.scale.set(40,40,40);this.background.add(t.scene.clone());_context7.next=16;return jf(this.getLevelGLTF());case 16:r=_context7.sent;Zf(r.scene),Yf(r.scene),this.stageChild.add(r.scene.clone());_context7.next=20;return Qm;case 20:i=_context7.sent;Yf(i.scene),Zf(i.scene),this.scene.updateWorldMatrix(!0,!0),this.scene.traverse(function(e){if("platform"===e.userData.entity){e.traverse(function(e){"Mesh"===e.type&&e.layers.enable(1);});var _t376=!!e.userData.position||!!e.userData.rotation,_n337=_this77.addStaticMesh(e,_t376),_r237=my.matrix([_n337.position.x,_n337.position.y,_n337.position.z]),_i181=void 0;if(e.userData.position){var _t377=my.compile(e.userData.position);_i181=function _i181(e){var n=_t377.evaluate({t:e,init:_r237});return new kf.Vec3(n.get([0]),n.get([1]),n.get([2]));};}var _o112=new kf.Vec3();_n337.quaternion.toEuler(_o112);var _a83=my.matrix([_o112.x,_o112.y,_o112.z]),_s53=void 0;if(e.userData.rotation){var _t378=my.compile(e.userData.rotation);_s53=function _s53(e){var n=_t378.evaluate({t:e,init:_a83});return new kf.Vec3(n.get([0]),n.get([1]),n.get([2]));};}(_i181||_s53)&&_this77.movingPlatforms.push({object:e,body:_n337,position:_i181,rotation:_s53}),e.userData.restitution&&(_n337.material=new kf.Material(""),_n337.material.restitution=e.userData.restitution),"true"===e.userData.sticky&&(_n337._mm_sticky=!0);}else if("coin"===e.userData.entity){var _t379=i.scene.clone();e.add(_t379),_this77.coins.push(_t379);}"false"===e.userData.shadows&&(Yf(e,!1),Zf(e,!1)),"false"===e.userData.visible&&(e.visible=!1);});o=this.scene.getObjectByName("Background");o&&(null===(e=o.parent)||void 0===e||e.remove(o),this.background.remove(t.scene),this.background.add(o),Yf(o,!1),Zf(o,!1)),ty.style.display="none";case 24:case"end":return _context7.stop();}}},_callee7,this);}));}},{key:"reset",value:function reset(){var e=this.scene.getObjectByName("Start");this.sphereBody.position.copy(Hf(e.position)),this.sphereBody.quaternion.copy(Gf(e.quaternion)),this.sphere.visible=!0,this.sphereBody.velocity.setZero(),this.sphereBody.angularVelocity.setZero(),this.previousBallVelocity.setZero(),this.dolly.position.copy(qf(this.sphereBody.position).add(new Qn(0,5,5))),this.dolly.setRotationFromEuler(new Lr(0,0,0)),this.cameraTargetPosition.copy(qf(this.sphereBody.position)),this.tilt=new Qn(0,-1,0),this.time=0,this.playTimer=0,document.getElementById("clock-count").innerHTML=this.playTimer.toFixed(1);var _iterator12=_createForOfIteratorHelper(this.coins),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _e401=_step12.value;_e401.visible=!0;}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}this.coinCoint=0,document.getElementById("coin-count").innerHTML="0";}},{key:"collectTrimeshes",value:function collectTrimeshes(e,t){if("Mesh"===t.type){var _n338=new Qn();e.getWorldScale(_n338);var _r238=Float32Array.from(t.geometry.attributes.position.array);for(var _i182=0;_i182<_r238.length;_i182+=3){var _o113=new Qn(_r238[_i182],_r238[_i182+1],_r238[_i182+2]);t.localToWorld(_o113),e.worldToLocal(_o113),_r238[_i182]=_o113.x*_n338.x,_r238[_i182+1]=_o113.y*_n338.y,_r238[_i182+2]=_o113.z*_n338.z;}return[new kf.Trimesh(_r238,t.geometry.index.array)];}{var _n339=[];var _iterator13=_createForOfIteratorHelper(t.children),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _r239=_step13.value;_n339=_n339.concat(this.collectTrimeshes(e,_r239));}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}return _n339;}}},{key:"addStaticMesh",value:function addStaticMesh(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var n=this.collectTrimeshes(e,e),r=new Qn(),i=new Jn();e.getWorldPosition(r),e.getWorldQuaternion(i);var o=new kf.Body({type:t?kf.Body.KINEMATIC:kf.Body.STATIC,position:Hf(r),quaternion:Gf(i),mass:0});var _iterator14=_createForOfIteratorHelper(n),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _e402=_step14.value;o.addShape(_e402);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}return this.world.addBody(o),this.collisionBodies.push(o),this.worldAABB.extend(o.aabb),e.userData.body=o,o;}},{key:"collectCoin",value:function collectCoin(){this.coinCoint++,fm.play(),document.getElementById("coin-count").innerHTML=this.coinCoint.toString();var e=document.getElementById("coin-container");fy(e,{scaleX:"1.5",scaleY:"1.5"},{duration:80}),fy(e,{scaleX:"1",scaleY:"1"},{duration:80});}},{key:"pulseClock",value:function pulseClock(){var e=document.getElementById("clock-container");fy(e,{scaleX:"1.5",scaleY:"1.5"},{duration:80}),fy(e,{scaleX:"1",scaleY:"1"},{duration:80});}},{key:"update",value:function update(e){var _this78=this;if(this.paused){var _e403=Mm.movement(this.renderer.xr.getSession());this.navigator.update(_e403);}if("intro"===this.state||"intro-fading"===this.state?(My.style.display="none",document.getElementById("game-stats").style.visibility="hidden"):(My.style.display="inline",document.getElementById("game-stats").style.visibility="visible"),"loading"===this.state)return;if("intro"!==this.state&&"intro-fading"!==this.state&&(Mm.pause()&&this.setPaused(!this.paused),this.paused))return;this.time+=e,"playing"===this.state&&(this.playTimer+=e,document.getElementById("clock-count").innerHTML=this.time.toFixed(1));var _iterator15=_createForOfIteratorHelper(this.coins),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _e414=_step15.value;if(!_e414.visible)continue;var _t391=3;_e414.quaternion.setFromAxisAngle(yy,_t391*this.time);var _n348=new Qn();_e414.getWorldPosition(_n348),this.stageChild.worldToLocal(_n348);var _r246=_n348.distanceTo(qf(this.sphereBody.position));var _i189=1.8;"playing"===this.state&&_r246<_i189&&(_e414.visible=!1,this.collectCoin(),em().particles&&this.add(new by(this,_n348)));}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}var t=this.sphere.position.clone().sub(this.dolly.position).setY(0).normalize(),n=t.clone().cross(new Qn(0,1,0)).normalize(),r=new Qn(0,0,-1),i=new Qn(1,0,0);if(this.game.isXR()){var _e404=this.game.renderer.xr.getCamera(this.camera),_t380=new Qn(),_n340=new Jn(),_o114=new Qn();_e404.matrixWorld.decompose(_t380,_n340,_o114),r=r.applyQuaternion(_n340).setY(0).normalize(),i=i.applyQuaternion(_n340).setY(0).normalize();}var o=new Qn(0,-1,0);if("playing"===this.state){var _a84=this.game.isXR()?r:t,_s54=this.game.isXR()?i:n;{var _e405=Mm.movement(this.renderer.xr.getSession()).clone().multiplyScalar(.8);o.add(_a84.clone().multiplyScalar(_e405.y)),o.add(_s54.clone().multiplyScalar(_e405.x)),o.normalize();}{var _t381=Mm.movement(this.renderer.xr.getSession()),_n341=_a84.clone().multiplyScalar(_t381.y).add(_s54.clone().multiplyScalar(_t381.x));this.sphereBody.applyImpulse(Hf(_n341.multiplyScalar(5*e)),this.sphereBody.position.clone().vsub(new kf.Vec3(0,-.5,0)));}}this.tilt.lerp(o,8*e),this.tilt.normalize(),"goal"!==this.state?this.world.gravity.copy(Hf(this.tilt.clone().multiplyScalar(15))):this.world.gravity.set(0,15,0),this.movePlatforms(e);var _iterator16=_createForOfIteratorHelper(this.entities),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var _t392=_step16.value;_t392.update(e);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}var a=this.sphereBody.velocity.clone();this.world.step(e),Vf(this.sphere,this.sphereBody),this.updatePlatforms();var s=null;var _iterator17=_createForOfIteratorHelper(this.world.bodies),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var _e415=_step17.value;if(_e415!==this.sphereBody&&this.world.collisionMatrix.get(this.sphereBody,_e415)&&!this.world.collisionMatrixPrevious.get(this.sphereBody,_e415)){s=_e415;break;}}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}if("playing"===this.state&&s){var _e406=a.distanceTo(this.sphereBody.velocity);if(_e406>8){var _t382=Un.mapLinear(_e406,8,30,0,1);if(_t382=Un.clamp(_t382,0,1),this.blinkTime=0,Ff.a.debug("Bonk, intensity = ".concat(_t382,"...")),Mm.vibrate(_t382),s.material&&s.material.restitution>.1?(gm.volume(_t382),gm.play()):(ym.volume(_t382),ym.play(),_t382>.4&&(this.squeakTimer=4.6)),_t382>.3&&em().particles){var _iterator18=_createForOfIteratorHelper(this.world.contacts),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _e407=_step18.value;if(_e407.bi===this.sphereBody&&_e407.bj===s){var _n342=this.sphereBody.position.vadd(_e407.ri),_r240=new kf.Vec3();s.getVelocityAtWorldPoint(_n342,_r240),this.add(new wy(this,qf(_n342),qf(_r240),_t382));break;}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}}}var u=15===em().ticksPerSecond?15:40;this.sphereBody.velocity.norm()>u&&(this.sphereBody.velocity.normalize(),this.sphereBody.velocity.copy(this.sphereBody.velocity.mult(u)),Ff.a.debug("Restricting velocity..."));{if(this.game.isAR()){var _e409=qf(this.getWorldCenter());this.stageParent.position.copy(_e409),this.stageChild.position.copy(_e409.clone().multiplyScalar(-1)),this.sphere.parent===this.scene&&(this.scene.remove(this.sphere),this.stageChild.add(this.sphere));}else this.stageParent.position.copy(this.sphere.position),this.stageChild.position.copy(this.sphere.position.clone().multiplyScalar(-1)),this.sphere.parent===this.stageChild&&(this.stageChild.remove(this.sphere),this.scene.add(this.sphere));var _e408=this.tilt.clone();this.game.isXR()&&_e408.multiplyScalar(.5),this.stageParent.quaternion.setFromUnitVectors(new Qn(0,-1,0),_e408).invert();}"playing"===this.state&&this.sphereBody.position.y<this.worldAABB.lowerBound.y-10&&(lm().then(function(){_this78.reset(),_this78.state="playing",cm();}),this.pulseClock(),this.state="falling",setTimeout(function(){vm.play();},500),this.score.incrementDeaths(),this.score.addPlayTime(this.time));{var _t383=this.sphereBody.position,_n343=new jn(_t383.x,_t383.z),_r241=new jn(this.goal.x,this.goal.z),_i183=_n343.distanceTo(_r241);if("playing"===this.state&&_i183<5&&this.sphereBody.position.y>this.goal.y&&this.sphereBody.position.y<this.goal.y+5&&(mm.play(),Mm.vibrate(.2),this.state="goal",this.pulseClock(),this.score.addPlayTime(this.time),this.score.reportCoins(this.coinCoint,this.coins.length),setTimeout(function(){_this78.startTransition(function(){_this78.onComplete();});},2e3),this.add(new Sy(this))),"goal"===this.state){var _t384=_r241.clone().sub(_n343),_i184=10*e;this.sphereBody.applyImpulse(new kf.Vec3(_i184*_t384.x,0,_i184*_t384.y),this.sphereBody.position);}}if("playing"===this.state){if(this.game.isVR()){var _t385={min:8,max:12},_n344={min:10,max:15};var _r242=this.dolly.position.clone().sub(this.sphere.position),_i185=new jn(_r242.x,_r242.z);_i185.length()>_t385.max?_i185.normalize().multiplyScalar(_t385.max):_i185.length()<_t385.min&&_i185.normalize().multiplyScalar(_t385.min);var _o115=Un.clamp(_r242.y,_n344.min,_n344.max),_a85=new Qn(_i185.x,_o115,_i185.y),_s55=this.sphere.position.clone().add(_a85);this.dolly.position.lerp(_s55,5*e);}else{var _n345=5,_r243=4,_i186=this.sphere.position.clone().add(t.clone().multiplyScalar(-_r243)).add(new Qn(0,_n345,0));this.dolly.position.lerp(_i186,5*e);var _o116=this.dolly.position.clone().sub(this.sphere.position);_o116.length()>10&&_o116.normalize().multiplyScalar(10),this.dolly.position.copy(this.sphere.position.clone().add(_o116));}if(!this.game.isXR()){var _e410=2.5;var _t386=new Fr();_t386.set(1);var _Hm=Hm(this.dolly.position,this.scene,_e410,_t386),_Hm2=_slicedToArray(_Hm,2),_n346=_Hm2[0],_r244=_Hm2[1];if(_n346&&_r244<_e410){var _t387=_e410-_r244,_i187=this.dolly.position.clone().sub(_n346).normalize();this.dolly.position.add(_i187.clone().multiplyScalar(_t387));}}}if("intro"!==this.state){var _t388=this.sphere.position.clone().add(new Qn(0,1,0));this.cameraTargetPosition.lerp(_t388,15*e),this.camera.lookAt(this.cameraTargetPosition);}if("intro"===this.state||"intro-fading"===this.state){var _e411=20,_t389=4,_n347=Un.mapLinear(this.time,0,_t389,0,2*Math.PI);0;var _r245=this.getWorldCenter(),_i188=Math.max(Math.abs(_r245.x-this.worldAABB.lowerBound.x),Math.abs(_r245.z-this.worldAABB.lowerBound.z))+_e411;if(this.game.isXR()){var _e412=new Qn(_r245.x+_i188,20,_r245.z+_i188),_t390=new Qn(_r245.x+2*_i188,20,_r245.z+2*_i188);this.dolly.position.copy(_e412),this.dolly.lookAt(_t390);var _o117=qf(_r245);this.stageParent.position.copy(_o117),this.stageChild.position.copy(_o117.clone().multiplyScalar(-1)),this.stageParent.setRotationFromAxisAngle(new Qn(0,1,0),_n347),this.sphere.parent===this.scene&&(this.scene.remove(this.sphere),this.stageChild.add(this.sphere));}else{var _e413=new Qn(_r245.x+_i188*Math.cos(_n347),10,_r245.z+_i188*Math.sin(_n347));this.dolly.position.copy(_e413),this.camera.lookAt(qf(_r245));}"intro"===this.state&&(this.time>_t389-.7||Mm.skip())&&(this.state="intro-fading",lm().then(function(){_this78.state="playing",_this78.reset(),cm();}));}else 0;this.directionalLight.position.copy(this.dolly.position.clone().add(this.directionalLightOffset)),this.directionalLight.target.position.copy(this.dolly.position),this.blinkTime+=e,this.blinkTime%4<.4?this.sphere.material=this.blinkMaterial:this.sphere.material=this.ballMaterial,this.squeakTimer+=e,"playing"===this.state&&this.squeakTimer>5&&(xm.play(),this.squeakTimer=Un.randFloat(-20,0));}},{key:"getWorldCenter",value:function getWorldCenter(){return this.worldAABB.lowerBound.clone().vadd(this.worldAABB.upperBound).mult(.5);}},{key:"draw",value:function draw(){this.game.isAR()?(this.background.visible=!1,this.camera.parent===this.dolly&&(this.dolly.remove(this.camera),this.roomscale.add(this.camera))):(this.background.visible=!0,this.camera.parent===this.roomscale&&(this.roomscale.remove(this.camera),this.dolly.add(this.camera))),this.game.isXR()?this.scene.traverse(function(e){return e.frustumCulled=!1;}):this.scene.traverse(function(e){return e.frustumCulled=!0;}),this.renderer.render(this.scene,this.camera);}},{key:"movePlatforms",value:function movePlatforms(e){var _this79=this;var _iterator19=_createForOfIteratorHelper(this.movingPlatforms),_step19;try{var _loop3=function _loop3(){var e=_step19.value;if(e.position){e.body.position.copy(e.position(_this79.time));var t=function t(_t393){return Xf(e.position,_t393);};e.body.velocity.copy(t(_this79.time));}if(e.rotation){var _t394=e.rotation(_this79.time);e.body.quaternion.setFromEuler(_t394.x,_t394.y,_t394.z);var _n349=function _n349(t){return Xf(e.rotation,t);};e.body.angularVelocity.copy(_n349(_this79.time));}};for(_iterator19.s();!(_step19=_iterator19.n()).done;){_loop3();}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}var _iterator20=_createForOfIteratorHelper(this.world.contacts),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var t=_step20.value;if(t.bi===this.sphereBody&&!0===t.bj._mm_sticky){var _n350=this.sphereBody.position.vadd(t.ri),_r247=new kf.Vec3();t.bj.getVelocityAtWorldPoint(_n350,_r247),this.movingPlatformHelper.position.copy(qf(_n350)),this.movingPlatformHelper.setDirection(qf(_r247)),this.movingPlatformHelper.setLength(_r247.norm()),this.sphereBody.velocity.lerp(_r247,.5*e,this.sphereBody.velocity);}}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}}},{key:"updatePlatforms",value:function updatePlatforms(){var _iterator21=_createForOfIteratorHelper(this.movingPlatforms),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _e416=_step21.value;Vf(_e416.object,_e416.body);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}}}]);return _y;}(pm);document.getElementById("ui-container");var Ey=/*#__PURE__*/function(_y8){_inherits(Ey,_y8);var _super69=_createSuper(Ey);function Ey(e,t){var _this80;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};var r=arguments.length>3?arguments[3]:undefined;_classCallCheck(this,Ey);_this80=_super69.call(this,e,t,n),_this80.levelGLTF=r;return _this80;}_createClass(Ey,[{key:"getBackgroundGLTF",value:function getBackgroundGLTF(){return ey;}},{key:"getLevelGLTF",value:function getLevelGLTF(){return this.levelGLTF;}}]);return Ey;}(_y);function Ay(e,t){return/*#__PURE__*/function(_y9){_inherits(_class3,_y9);var _super70=_createSuper(_class3);function _class3(){_classCallCheck(this,_class3);return _super70.apply(this,arguments);}_createClass(_class3,[{key:"getBackgroundGLTF",value:function getBackgroundGLTF(){return e;}},{key:"getLevelGLTF",value:function getLevelGLTF(){return t;}}]);return _class3;}(_y);}var Ty={name:"COURSE A",levels:[/*#__PURE__*/function(_y10){_inherits(_class4,_y10);var _super71=_createSuper(_class4);function _class4(e,t){var _this81;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};_classCallCheck(this,_class4);_this81=_super71.call(this,e,t,n),_this81.hasMoved=!1;return _this81;}_createClass(_class4,[{key:"getBackgroundGLTF",value:function getBackgroundGLTF(){return ey;}},{key:"getAdditionalUI",value:function getAdditionalUI(){return"\n    <img id=\"game-logo\" style=\"box-sizing: border-box; padding: 10px; width: 100%; height: 100%;\" src='".concat(n(26),"'></img>\n    <div style=\"width: 100%; height: 50%; position: absolute; bottom: 0px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img id=\"input-prompt\" style=\"height: 1in;\" src='").concat(n(189),"'></img></div>\n    ");}},{key:"getLevelGLTF",value:function getLevelGLTF(){return n(190);}},{key:"onEnter",value:function onEnter(){_get(_getPrototypeOf(_class4.prototype),"onEnter",this).call(this),this.inputPrompt=document.getElementById("input-prompt"),this.inputPrompt.src=n(191),this.logo=document.getElementById("game-logo");}},{key:"update",value:function update(e){_get(_getPrototypeOf(_class4.prototype),"update",this).call(this,e),"playing"!==this.state||this.paused||(this.logo.style.display="none",Mm.movement(this.renderer.xr.getSession()).length()>0&&(this.hasMoved=!0)),"playing"!==this.state||this.hasMoved?this.inputPrompt.style.display="none":this.inputPrompt.style.display="inline-block";}}]);return _class4;}(_y),Ay(ey,n(63)),Ay(ey,n(192)),Ay(ey,n(193)),Ay(ey,n(194)),Ay(ey,n(195)),Ay(ey,n(196))],parTime:180,parDeaths:5},Ny={name:"COURSE B",levels:[Ay(ey,n(197)),Ay(ey,n(198)),Ay(ey,n(199)),Ay(ey,n(200)),Ay(ey,n(201)),Ay(ey,n(202)),Ay(ey,n(203))],parTime:180,parDeaths:5};var Dy=[Ty,Ny].concat([]);var Cy={showInterstitial:function showInterstitial(e){e();}};var Ry=Date.now();function Py(){return new Promise(function(e,t){getKaiAd({publisher:"589e389d-f004-4e0e-ba38-8815489a5d80",app:"marble-mouse",slot:"level-interstitial",test:!1,onerror:function onerror(e){return t(e);},onready:function onready(t){Bf.debug("Preloaded ad instance."),e(t);}});});}var Oy=Py();Cy={showInterstitial:function showInterstitial(e){Oy.then(function(e){return function(e){return new Promise(function(t,n){Bf.debug("Showing ad instance."),e.on("close",function(){return t();}),e.call("display");});}(e);}).then(function(){Bf.debug("Successfully showed ad."),Oy=Py(),e();})["catch"](function(t){Bf.error("Error showing ad."),Oy=Py(),e();});}};var Ly=function Ly(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e));}catch(e){o(e);}}function s(e){try{u(r["throw"](e));}catch(e){o(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t);})).then(a,s);}u((r=r.apply(e,t||[])).next());});};var Iy=document.getElementById("enter-vr-button"),By=document.getElementById("enter-ar-button");function Fy(e){e.style.display="inline";}function zy(e){e.style.display="none";}var ky=!!navigator.xr;var Uy=function Uy(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e));}catch(e){o(e);}}function s(e){try{u(r["throw"](e));}catch(e){o(e);}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t);})).then(a,s);}u((r=r.apply(e,t||[])).next());});};var jy=document.getElementById("ui-container"),Hy=document.getElementById("version"),qy=document.getElementById("pause-button"),Gy=n(205);var Vy=/*#__PURE__*/function(_pm3){_inherits(Vy,_pm3);var _super72=_createSuper(Vy);function Vy(e,t,n){var _this82;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};_classCallCheck(this,Vy);_this82=_super72.call(this,t),_this82.background=new Ps(),_this82.dolly=new Ps(),_this82.time=0,jy.innerHTML="\n    <div style=\"height: 100%; align-items: center; color: white; display: flex; flex-direction: column; padding-left: 20px; padding-right: 20px; justify-content: center;\">\n        <div style=\"font-size: 8vmin; padding-bottom: 50px; text-align: center;\">".concat(e," RESULTS</div>\n        <div style=\"display: grid; grid-template-columns: 1fr 1fr 1fr; font-size: 5vmin; width: 100%;\">\n            <div>TIME</div>\n            <div style=\"justify-self: end;\">").concat(n.formatPlayTime(),"</div>\n            <div style=\"justify-self: end;\">+").concat(n.calculateTimeBonus(),"</div>\n\n            <div>DEATHS</div>\n            <div style=\"justify-self: end;\">").concat(n.deaths,"</div>\n            <div style=\"justify-self: end;\">+").concat(n.calculateDeathsBonus(),"</div>\n\n            <div>COINS</div>\n            <div style=\"justify-self: end;\">").concat(n.coinsCollected," / ").concat(n.totalCoins,"</div>\n            <div style=\"justify-self: end;\">+").concat(n.calculateCoinBonus(),"</div>\n\n            <div style=\"grid-column: 1; padding-bottom: 10px;\"></div>\n\n            <div style=\"grid-column: 1; font-size: 6vmin;\">SCORE</div>\n            <div></div>\n            <div style=\"font-size: 6vmin; justify-self: end;\">").concat(n.calculateScore(),"</div>\n        </div>\n\n        <button id=\"continue-button\" class=\"menu-button\">CONTINUE</button>\n    </div>"),document.getElementById("continue-button").onclick=function(){_this82.startTransition(function(){r();});},_this82.navigator=new Ym([document.getElementById("continue-button")]),_this82.addLights(_this82.scene),_this82.scene.add(_this82.background),_this82.scene.add(_this82.dolly),_this82.dolly.add(_this82.camera),_this82.loadScene();return _this82;}_createClass(Vy,[{key:"loadScene",value:function loadScene(){return Uy(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee8(){var e;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return jf(Gy);case 2:e=_context8.sent;e.scene.scale.set(20,20,20),this.background.add(e.scene),Yf(this.background),Zf(this.background),cm();case 4:case"end":return _context8.stop();}}},_callee8,this);}));}},{key:"update",value:function update(e){var t;this.time+=e;var n=Mm.movement(this.game.renderer.xr.getSession());null===(t=this.navigator)||void 0===t||t.update(n);var r=new Qn(0,50,0),i=new Qn(120*Math.cos(.2*this.time),60,120*Math.sin(.2*this.time));this.dolly.position.copy(r.clone().add(i)),this.camera.lookAt(r);}},{key:"onEnter",value:function onEnter(){Hy.style.display="none",qy.style.display="none",Sm.disable();}},{key:"onLeave",value:function onLeave(){_get(_getPrototypeOf(Vy.prototype),"onLeave",this).call(this);}},{key:"draw",value:function draw(){this.renderer.render(this.scene,this.camera);}}]);return Vy;}(pm);var Wy=n(204),Xy=document.getElementById("pause-button");n(68).shim();var Yy=new(/*#__PURE__*/function(){function _class5(){var _this83=this;_classCallCheck(this,_class5);this.stats=new Wy(),this.xrSessionType="none",Ff.a.debug("Creating new Game instance."),this.graphicsOptions=em(),this.canvas=document.getElementById("canvas"),this.renderer=new Bs({canvas:this.canvas,alpha:ky,antialias:this.graphicsOptions.antialias,preserveDrawingBuffer:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.graphicsOptions.highDPI&&this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.physicallyCorrectLights=!0,this.graphicsOptions.shadows&&(this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=f),this.renderer.xr.enabled=ky,setInterval(function(){_this83.renderer.getContext().isContextLost()&&(Ff.a.debug("WebGL context lost... Attempting to recreate..."),_this83.renderer.forceContextRestore());},2e3),ky&&function(e){Ly(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee11(){var _this84=this;var t,_n351,_t395,_n352;return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!navigator.xr){_context11.next=9;break;}_context11.next=3;return navigator.xr.isSessionSupported("immersive-vr");case 3:t=_context11.sent;_context11.next=6;return navigator.xr.isSessionSupported("immersive-ar");case 6:_n351=_context11.sent;if(t){Fy(Iy);_t395=null;Iy.onclick=function(r){return Ly(_this84,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee9(){return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!(null===_t395)){_context9.next=12;break;}console.log("Starting VR session...");_context9.next=4;return navigator.xr.requestSession("immersive-vr",{requiredFeatures:["local"],optionalFeatures:["high-refresh-rate","high-fixed-foveation-level"]});case 4:_t395=_context9.sent;Iy.innerText="EXIT VR";zy(By);_t395.addEventListener("end",function(){_t395=null,e.endXRSession(),Iy.innerText="ENTER VR",_n351&&Fy(By);});e.renderer.xr.setReferenceSpaceType("local");e.setXRSession(_t395,"vr");_context9.next=13;break;case 12:console.log("Ending VR session..."),_t395.end();case 13:case"end":return _context9.stop();}}},_callee9);}));};}if(_n351){Fy(By);_n352=null;By.onclick=function(r){return Ly(_this84,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee10(){return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!(null===_n352)){_context10.next=11;break;}console.log("Starting AR session...");_context10.next=4;return navigator.xr.requestSession("immersive-ar",{requiredFeatures:["local-floor"],optionalFeatures:["dom-overlay"],domOverlay:{root:document.body}});case 4:_n352=_context10.sent;By.innerText="EXIT AR";zy(Iy);_n352.addEventListener("end",function(){_n352=null,e.endXRSession(),By.innerText="ENTER AR",t&&Fy(Iy),setTimeout(function(){e.canvas.style.display="block",e.canvas.parentElement!==document.body&&(e.canvas.parentElement&&e.canvas.parentElement.removeChild(e.canvas),document.body.appendChild(e.canvas));},1e3);});e.setXRSession(_n352,"ar");_context10.next=12;break;case 11:console.log("Ending AR session..."),_n352.end();case 12:case"end":return _context10.stop();}}},_callee10);}));};}case 9:case"end":return _context11.stop();}}},_callee11);}));}(this),Vm=this,Gm.addEventListener("change",function(){var e=Gm.files[0];if(e.name.match(/\.glb$/)){var t=URL.createObjectURL(e),_n353=function _n353(){Vm.transitionTo(new Ey(Vm,new qm(0,0),_n353,t));};_n353();}else alert("File not supported, .glb only.");}),window.addEventListener("resize",function(){_this83.renderer.setSize(window.innerWidth,window.innerHeight),_this83.scene&&_this83.scene.onResize(window.innerWidth,window.innerHeight);},!1),Xy.addEventListener("click",function(){_this83.scene&&_this83.scene.onPause();});}_createClass(_class5,[{key:"start",value:function start(){var _this85=this;Ff.a.debug("Starting game."),this.startMainLoop(),!function(){try{return"TRUE"===window.localStorage.getItem("PREVIOUSLY_OPEN");}catch(e){return!1;}}()?(!function(){try{window.localStorage.setItem("PREVIOUSLY_OPEN","TRUE");}catch(e){}}(),this.playCourse(Ty,function(){_this85.transitionTo(new dy(_this85,sy));})):this.transitionTo(new dy(this));}},{key:"playCourse",value:function playCourse(e,t){var _this86=this;var n=new qm(e.parTime,e.parDeaths),r=0;var i=function i(){var o;r<e.levels.length?(o=function o(){var t=e.levels[r];r++;var o=new t(_this86,n,i);_this86.transitionTo(o);},Date.now()-Ry>9e4?(Ry=Date.now(),Cy.showInterstitial(function(){o();})):o()):_this86.transitionTo(new Vy(e.name,_this86,n,t));};i();}},{key:"playWorldCourse",value:function playWorldCourse(e,t,n,r){var _this87=this;var i=0;var o=function o(){if(i<n.length){var _e417=n[i];i++;var _r248=new Ey(_this87,t,o,_e417);_this87.transitionTo(_r248);}else _this87.transitionTo(new Vy(e.name,_this87,t,r));};o();}},{key:"startMainLoop",value:function startMainLoop(){var _this88=this;var e=1e3/em().ticksPerSecond,t=em().maxUpdateCount;var n=null;this.renderer.setAnimationLoop(function(r){if(_this88.renderer.getContext().isContextLost())return;null===n&&(n=r);var i=0;for(;r>=n+e;){if(_this88.scene&&_this88.scene.update(e/1e3),Mm.update(),n+=e,i++,i>=t){Ff.a.debug("Exceeded max number of updates... Reseting time..."),n=r;break;}}var o=i>0||_this88.isXR();_this88.scene&&o&&_this88.scene.draw();});}},{key:"setXRSession",value:function setXRSession(e,t){this.xrSessionType=t,"ar"===t&&(this.canvas.style.display="none"),this.renderer.xr.setSession(e);}},{key:"endXRSession",value:function endXRSession(){this.xrSessionType="none",this.canvas.style.display="block";}},{key:"isXR",value:function isXR(){return"none"!==this.xrSessionType;}},{key:"isAR",value:function isAR(){return"ar"===this.xrSessionType;}},{key:"isVR",value:function isVR(){return"vr"===this.xrSessionType;}},{key:"transitionTo",value:function transitionTo(e){this.scene&&this.scene.onLeave(),this.scene=e,this.scene.onEnter();}}]);return _class5;}())();Promise.all([Qm,Km,ey]).then(function(){}).then(function(){Yy.start();});}]);

